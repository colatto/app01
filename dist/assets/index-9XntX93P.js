function ly(e,a){for(var r=0;r<a.length;r++){const s=a[r];if(typeof s!="string"&&!Array.isArray(s)){for(const n in s)if(n!=="default"&&!(n in e)){const o=Object.getOwnPropertyDescriptor(s,n);o&&Object.defineProperty(e,n,o.get?o:{enumerable:!0,get:()=>s[n]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&s(i)}).observe(document,{childList:!0,subtree:!0});function r(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerPolicy&&(o.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?o.credentials="include":n.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(n){if(n.ep)return;n.ep=!0;const o=r(n);fetch(n.href,o)}})();var L6=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function cy(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var iv={exports:{}},hm={},lv={exports:{}},Qt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xc=Symbol.for("react.element"),dy=Symbol.for("react.portal"),uy=Symbol.for("react.fragment"),my=Symbol.for("react.strict_mode"),hy=Symbol.for("react.profiler"),py=Symbol.for("react.provider"),fy=Symbol.for("react.context"),xy=Symbol.for("react.forward_ref"),gy=Symbol.for("react.suspense"),vy=Symbol.for("react.memo"),by=Symbol.for("react.lazy"),ax=Symbol.iterator;function yy(e){return e===null||typeof e!="object"?null:(e=ax&&e[ax]||e["@@iterator"],typeof e=="function"?e:null)}var cv={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},dv=Object.assign,uv={};function yl(e,a,r){this.props=e,this.context=a,this.refs=uv,this.updater=r||cv}yl.prototype.isReactComponent={};yl.prototype.setState=function(e,a){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,a,"setState")};yl.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function mv(){}mv.prototype=yl.prototype;function Af(e,a,r){this.props=e,this.context=a,this.refs=uv,this.updater=r||cv}var _f=Af.prototype=new mv;_f.constructor=Af;dv(_f,yl.prototype);_f.isPureReactComponent=!0;var rx=Array.isArray,hv=Object.prototype.hasOwnProperty,Ef={current:null},pv={key:!0,ref:!0,__self:!0,__source:!0};function fv(e,a,r){var s,n={},o=null,i=null;if(a!=null)for(s in a.ref!==void 0&&(i=a.ref),a.key!==void 0&&(o=""+a.key),a)hv.call(a,s)&&!pv.hasOwnProperty(s)&&(n[s]=a[s]);var c=arguments.length-2;if(c===1)n.children=r;else if(1<c){for(var d=Array(c),p=0;p<c;p++)d[p]=arguments[p+2];n.children=d}if(e&&e.defaultProps)for(s in c=e.defaultProps,c)n[s]===void 0&&(n[s]=c[s]);return{$$typeof:Xc,type:e,key:o,ref:i,props:n,_owner:Ef.current}}function jy(e,a){return{$$typeof:Xc,type:e.type,key:a,ref:e.ref,props:e.props,_owner:e._owner}}function Pf(e){return typeof e=="object"&&e!==null&&e.$$typeof===Xc}function Ny(e){var a={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return a[r]})}var sx=/\/+/g;function bh(e,a){return typeof e=="object"&&e!==null&&e.key!=null?Ny(""+e.key):a.toString(36)}function bu(e,a,r,s,n){var o=typeof e;(o==="undefined"||o==="boolean")&&(e=null);var i=!1;if(e===null)i=!0;else switch(o){case"string":case"number":i=!0;break;case"object":switch(e.$$typeof){case Xc:case dy:i=!0}}if(i)return i=e,n=n(i),e=s===""?"."+bh(i,0):s,rx(n)?(r="",e!=null&&(r=e.replace(sx,"$&/")+"/"),bu(n,a,r,"",function(p){return p})):n!=null&&(Pf(n)&&(n=jy(n,r+(!n.key||i&&i.key===n.key?"":(""+n.key).replace(sx,"$&/")+"/")+e)),a.push(n)),1;if(i=0,s=s===""?".":s+":",rx(e))for(var c=0;c<e.length;c++){o=e[c];var d=s+bh(o,c);i+=bu(o,a,r,d,n)}else if(d=yy(e),typeof d=="function")for(e=d.call(e),c=0;!(o=e.next()).done;)o=o.value,d=s+bh(o,c++),i+=bu(o,a,r,d,n);else if(o==="object")throw a=String(e),Error("Objects are not valid as a React child (found: "+(a==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":a)+"). If you meant to render a collection of children, use an array instead.");return i}function Hd(e,a,r){if(e==null)return e;var s=[],n=0;return bu(e,s,"","",function(o){return a.call(r,o,n++)}),s}function wy(e){if(e._status===-1){var a=e._result;a=a(),a.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=a)}if(e._status===1)return e._result.default;throw e._result}var _r={current:null},yu={transition:null},Sy={ReactCurrentDispatcher:_r,ReactCurrentBatchConfig:yu,ReactCurrentOwner:Ef};function xv(){throw Error("act(...) is not supported in production builds of React.")}Qt.Children={map:Hd,forEach:function(e,a,r){Hd(e,function(){a.apply(this,arguments)},r)},count:function(e){var a=0;return Hd(e,function(){a++}),a},toArray:function(e){return Hd(e,function(a){return a})||[]},only:function(e){if(!Pf(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Qt.Component=yl;Qt.Fragment=uy;Qt.Profiler=hy;Qt.PureComponent=Af;Qt.StrictMode=my;Qt.Suspense=gy;Qt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Sy;Qt.act=xv;Qt.cloneElement=function(e,a,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var s=dv({},e.props),n=e.key,o=e.ref,i=e._owner;if(a!=null){if(a.ref!==void 0&&(o=a.ref,i=Ef.current),a.key!==void 0&&(n=""+a.key),e.type&&e.type.defaultProps)var c=e.type.defaultProps;for(d in a)hv.call(a,d)&&!pv.hasOwnProperty(d)&&(s[d]=a[d]===void 0&&c!==void 0?c[d]:a[d])}var d=arguments.length-2;if(d===1)s.children=r;else if(1<d){c=Array(d);for(var p=0;p<d;p++)c[p]=arguments[p+2];s.children=c}return{$$typeof:Xc,type:e.type,key:n,ref:o,props:s,_owner:i}};Qt.createContext=function(e){return e={$$typeof:fy,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:py,_context:e},e.Consumer=e};Qt.createElement=fv;Qt.createFactory=function(e){var a=fv.bind(null,e);return a.type=e,a};Qt.createRef=function(){return{current:null}};Qt.forwardRef=function(e){return{$$typeof:xy,render:e}};Qt.isValidElement=Pf;Qt.lazy=function(e){return{$$typeof:by,_payload:{_status:-1,_result:e},_init:wy}};Qt.memo=function(e,a){return{$$typeof:vy,type:e,compare:a===void 0?null:a}};Qt.startTransition=function(e){var a=yu.transition;yu.transition={};try{e()}finally{yu.transition=a}};Qt.unstable_act=xv;Qt.useCallback=function(e,a){return _r.current.useCallback(e,a)};Qt.useContext=function(e){return _r.current.useContext(e)};Qt.useDebugValue=function(){};Qt.useDeferredValue=function(e){return _r.current.useDeferredValue(e)};Qt.useEffect=function(e,a){return _r.current.useEffect(e,a)};Qt.useId=function(){return _r.current.useId()};Qt.useImperativeHandle=function(e,a,r){return _r.current.useImperativeHandle(e,a,r)};Qt.useInsertionEffect=function(e,a){return _r.current.useInsertionEffect(e,a)};Qt.useLayoutEffect=function(e,a){return _r.current.useLayoutEffect(e,a)};Qt.useMemo=function(e,a){return _r.current.useMemo(e,a)};Qt.useReducer=function(e,a,r){return _r.current.useReducer(e,a,r)};Qt.useRef=function(e){return _r.current.useRef(e)};Qt.useState=function(e){return _r.current.useState(e)};Qt.useSyncExternalStore=function(e,a,r){return _r.current.useSyncExternalStore(e,a,r)};Qt.useTransition=function(){return _r.current.useTransition()};Qt.version="18.3.1";lv.exports=Qt;var I=lv.exports;const ky=cy(I),Cy=ly({__proto__:null,default:ky},[I]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ay=I,_y=Symbol.for("react.element"),Ey=Symbol.for("react.fragment"),Py=Object.prototype.hasOwnProperty,Ly=Ay.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Iy={key:!0,ref:!0,__self:!0,__source:!0};function gv(e,a,r){var s,n={},o=null,i=null;r!==void 0&&(o=""+r),a.key!==void 0&&(o=""+a.key),a.ref!==void 0&&(i=a.ref);for(s in a)Py.call(a,s)&&!Iy.hasOwnProperty(s)&&(n[s]=a[s]);if(e&&e.defaultProps)for(s in a=e.defaultProps,a)n[s]===void 0&&(n[s]=a[s]);return{$$typeof:_y,type:e,key:o,ref:i,props:n,_owner:Ly.current}}hm.Fragment=Ey;hm.jsx=gv;hm.jsxs=gv;iv.exports=hm;var t=iv.exports,vv={exports:{}},es={},bv={exports:{}},yv={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function a(Z,he){var ie=Z.length;Z.push(he);e:for(;0<ie;){var Ue=ie-1>>>1,S=Z[Ue];if(0<n(S,he))Z[Ue]=he,Z[ie]=S,ie=Ue;else break e}}function r(Z){return Z.length===0?null:Z[0]}function s(Z){if(Z.length===0)return null;var he=Z[0],ie=Z.pop();if(ie!==he){Z[0]=ie;e:for(var Ue=0,S=Z.length,G=S>>>1;Ue<G;){var q=2*(Ue+1)-1,N=Z[q],U=q+1,T=Z[U];if(0>n(N,ie))U<S&&0>n(T,N)?(Z[Ue]=T,Z[U]=ie,Ue=U):(Z[Ue]=N,Z[q]=ie,Ue=q);else if(U<S&&0>n(T,ie))Z[Ue]=T,Z[U]=ie,Ue=U;else break e}}return he}function n(Z,he){var ie=Z.sortIndex-he.sortIndex;return ie!==0?ie:Z.id-he.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var i=Date,c=i.now();e.unstable_now=function(){return i.now()-c}}var d=[],p=[],h=1,x=null,b=3,g=!1,w=!1,_=!1,O=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function C(Z){for(var he=r(p);he!==null;){if(he.callback===null)s(p);else if(he.startTime<=Z)s(p),he.sortIndex=he.expirationTime,a(d,he);else break;he=r(p)}}function W(Z){if(_=!1,C(Z),!w)if(r(d)!==null)w=!0,ce(se);else{var he=r(p);he!==null&&Ce(W,he.startTime-Z)}}function se(Z,he){w=!1,_&&(_=!1,y(K),K=-1),g=!0;var ie=b;try{for(C(he),x=r(d);x!==null&&(!(x.expirationTime>he)||Z&&!$());){var Ue=x.callback;if(typeof Ue=="function"){x.callback=null,b=x.priorityLevel;var S=Ue(x.expirationTime<=he);he=e.unstable_now(),typeof S=="function"?x.callback=S:x===r(d)&&s(d),C(he)}else s(d);x=r(d)}if(x!==null)var G=!0;else{var q=r(p);q!==null&&Ce(W,q.startTime-he),G=!1}return G}finally{x=null,b=ie,g=!1}}var J=!1,Y=null,K=-1,fe=5,me=-1;function $(){return!(e.unstable_now()-me<fe)}function L(){if(Y!==null){var Z=e.unstable_now();me=Z;var he=!0;try{he=Y(!0,Z)}finally{he?le():(J=!1,Y=null)}}else J=!1}var le;if(typeof v=="function")le=function(){v(L)};else if(typeof MessageChannel<"u"){var R=new MessageChannel,we=R.port2;R.port1.onmessage=L,le=function(){we.postMessage(null)}}else le=function(){O(L,0)};function ce(Z){Y=Z,J||(J=!0,le())}function Ce(Z,he){K=O(function(){Z(e.unstable_now())},he)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(Z){Z.callback=null},e.unstable_continueExecution=function(){w||g||(w=!0,ce(se))},e.unstable_forceFrameRate=function(Z){0>Z||125<Z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):fe=0<Z?Math.floor(1e3/Z):5},e.unstable_getCurrentPriorityLevel=function(){return b},e.unstable_getFirstCallbackNode=function(){return r(d)},e.unstable_next=function(Z){switch(b){case 1:case 2:case 3:var he=3;break;default:he=b}var ie=b;b=he;try{return Z()}finally{b=ie}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(Z,he){switch(Z){case 1:case 2:case 3:case 4:case 5:break;default:Z=3}var ie=b;b=Z;try{return he()}finally{b=ie}},e.unstable_scheduleCallback=function(Z,he,ie){var Ue=e.unstable_now();switch(typeof ie=="object"&&ie!==null?(ie=ie.delay,ie=typeof ie=="number"&&0<ie?Ue+ie:Ue):ie=Ue,Z){case 1:var S=-1;break;case 2:S=250;break;case 5:S=1073741823;break;case 4:S=1e4;break;default:S=5e3}return S=ie+S,Z={id:h++,callback:he,priorityLevel:Z,startTime:ie,expirationTime:S,sortIndex:-1},ie>Ue?(Z.sortIndex=ie,a(p,Z),r(d)===null&&Z===r(p)&&(_?(y(K),K=-1):_=!0,Ce(W,ie-Ue))):(Z.sortIndex=S,a(d,Z),w||g||(w=!0,ce(se))),Z},e.unstable_shouldYield=$,e.unstable_wrapCallback=function(Z){var he=b;return function(){var ie=b;b=he;try{return Z.apply(this,arguments)}finally{b=ie}}}})(yv);bv.exports=yv;var Dy=bv.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Oy=I,Zr=Dy;function mt(e){for(var a="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)a+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var jv=new Set,Ec={};function ni(e,a){cl(e,a),cl(e+"Capture",a)}function cl(e,a){for(Ec[e]=a,e=0;e<a.length;e++)jv.add(a[e])}var jn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),dp=Object.prototype.hasOwnProperty,Ty=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,nx={},ox={};function My(e){return dp.call(ox,e)?!0:dp.call(nx,e)?!1:Ty.test(e)?ox[e]=!0:(nx[e]=!0,!1)}function Fy(e,a,r,s){if(r!==null&&r.type===0)return!1;switch(typeof a){case"function":case"symbol":return!0;case"boolean":return s?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Ry(e,a,r,s){if(a===null||typeof a>"u"||Fy(e,a,r,s))return!0;if(s)return!1;if(r!==null)switch(r.type){case 3:return!a;case 4:return a===!1;case 5:return isNaN(a);case 6:return isNaN(a)||1>a}return!1}function Er(e,a,r,s,n,o,i){this.acceptsBooleans=a===2||a===3||a===4,this.attributeName=s,this.attributeNamespace=n,this.mustUseProperty=r,this.propertyName=e,this.type=a,this.sanitizeURL=o,this.removeEmptyString=i}var dr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){dr[e]=new Er(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var a=e[0];dr[a]=new Er(a,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){dr[e]=new Er(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){dr[e]=new Er(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){dr[e]=new Er(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){dr[e]=new Er(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){dr[e]=new Er(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){dr[e]=new Er(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){dr[e]=new Er(e,5,!1,e.toLowerCase(),null,!1,!1)});var Lf=/[\-:]([a-z])/g;function If(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var a=e.replace(Lf,If);dr[a]=new Er(a,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var a=e.replace(Lf,If);dr[a]=new Er(a,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var a=e.replace(Lf,If);dr[a]=new Er(a,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){dr[e]=new Er(e,1,!1,e.toLowerCase(),null,!1,!1)});dr.xlinkHref=new Er("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){dr[e]=new Er(e,1,!1,e.toLowerCase(),null,!0,!0)});function Df(e,a,r,s){var n=dr.hasOwnProperty(a)?dr[a]:null;(n!==null?n.type!==0:s||!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(Ry(a,r,n,s)&&(r=null),s||n===null?My(a)&&(r===null?e.removeAttribute(a):e.setAttribute(a,""+r)):n.mustUseProperty?e[n.propertyName]=r===null?n.type===3?!1:"":r:(a=n.attributeName,s=n.attributeNamespace,r===null?e.removeAttribute(a):(n=n.type,r=n===3||n===4&&r===!0?"":""+r,s?e.setAttributeNS(s,a,r):e.setAttribute(a,r))))}var Cn=Oy.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Wd=Symbol.for("react.element"),Fi=Symbol.for("react.portal"),Ri=Symbol.for("react.fragment"),Of=Symbol.for("react.strict_mode"),up=Symbol.for("react.profiler"),Nv=Symbol.for("react.provider"),wv=Symbol.for("react.context"),Tf=Symbol.for("react.forward_ref"),mp=Symbol.for("react.suspense"),hp=Symbol.for("react.suspense_list"),Mf=Symbol.for("react.memo"),Qn=Symbol.for("react.lazy"),Sv=Symbol.for("react.offscreen"),ix=Symbol.iterator;function rc(e){return e===null||typeof e!="object"?null:(e=ix&&e[ix]||e["@@iterator"],typeof e=="function"?e:null)}var _a=Object.assign,yh;function fc(e){if(yh===void 0)try{throw Error()}catch(r){var a=r.stack.trim().match(/\n( *(at )?)/);yh=a&&a[1]||""}return`
`+yh+e}var jh=!1;function Nh(e,a){if(!e||jh)return"";jh=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(a)if(a=function(){throw Error()},Object.defineProperty(a.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(a,[])}catch(p){var s=p}Reflect.construct(e,[],a)}else{try{a.call()}catch(p){s=p}e.call(a.prototype)}else{try{throw Error()}catch(p){s=p}e()}}catch(p){if(p&&s&&typeof p.stack=="string"){for(var n=p.stack.split(`
`),o=s.stack.split(`
`),i=n.length-1,c=o.length-1;1<=i&&0<=c&&n[i]!==o[c];)c--;for(;1<=i&&0<=c;i--,c--)if(n[i]!==o[c]){if(i!==1||c!==1)do if(i--,c--,0>c||n[i]!==o[c]){var d=`
`+n[i].replace(" at new "," at ");return e.displayName&&d.includes("<anonymous>")&&(d=d.replace("<anonymous>",e.displayName)),d}while(1<=i&&0<=c);break}}}finally{jh=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?fc(e):""}function qy(e){switch(e.tag){case 5:return fc(e.type);case 16:return fc("Lazy");case 13:return fc("Suspense");case 19:return fc("SuspenseList");case 0:case 2:case 15:return e=Nh(e.type,!1),e;case 11:return e=Nh(e.type.render,!1),e;case 1:return e=Nh(e.type,!0),e;default:return""}}function pp(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Ri:return"Fragment";case Fi:return"Portal";case up:return"Profiler";case Of:return"StrictMode";case mp:return"Suspense";case hp:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case wv:return(e.displayName||"Context")+".Consumer";case Nv:return(e._context.displayName||"Context")+".Provider";case Tf:var a=e.render;return e=e.displayName,e||(e=a.displayName||a.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Mf:return a=e.displayName||null,a!==null?a:pp(e.type)||"Memo";case Qn:a=e._payload,e=e._init;try{return pp(e(a))}catch{}}return null}function zy(e){var a=e.type;switch(e.tag){case 24:return"Cache";case 9:return(a.displayName||"Context")+".Consumer";case 10:return(a._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=a.render,e=e.displayName||e.name||"",a.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return a;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return pp(a);case 8:return a===Of?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof a=="function")return a.displayName||a.name||null;if(typeof a=="string")return a}return null}function go(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function kv(e){var a=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function $y(e){var a=kv(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,a),s=""+e[a];if(!e.hasOwnProperty(a)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var n=r.get,o=r.set;return Object.defineProperty(e,a,{configurable:!0,get:function(){return n.call(this)},set:function(i){s=""+i,o.call(this,i)}}),Object.defineProperty(e,a,{enumerable:r.enumerable}),{getValue:function(){return s},setValue:function(i){s=""+i},stopTracking:function(){e._valueTracker=null,delete e[a]}}}}function Gd(e){e._valueTracker||(e._valueTracker=$y(e))}function Cv(e){if(!e)return!1;var a=e._valueTracker;if(!a)return!0;var r=a.getValue(),s="";return e&&(s=kv(e)?e.checked?"true":"false":e.value),e=s,e!==r?(a.setValue(e),!0):!1}function Fu(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function fp(e,a){var r=a.checked;return _a({},a,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function lx(e,a){var r=a.defaultValue==null?"":a.defaultValue,s=a.checked!=null?a.checked:a.defaultChecked;r=go(a.value!=null?a.value:r),e._wrapperState={initialChecked:s,initialValue:r,controlled:a.type==="checkbox"||a.type==="radio"?a.checked!=null:a.value!=null}}function Av(e,a){a=a.checked,a!=null&&Df(e,"checked",a,!1)}function xp(e,a){Av(e,a);var r=go(a.value),s=a.type;if(r!=null)s==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(s==="submit"||s==="reset"){e.removeAttribute("value");return}a.hasOwnProperty("value")?gp(e,a.type,r):a.hasOwnProperty("defaultValue")&&gp(e,a.type,go(a.defaultValue)),a.checked==null&&a.defaultChecked!=null&&(e.defaultChecked=!!a.defaultChecked)}function cx(e,a,r){if(a.hasOwnProperty("value")||a.hasOwnProperty("defaultValue")){var s=a.type;if(!(s!=="submit"&&s!=="reset"||a.value!==void 0&&a.value!==null))return;a=""+e._wrapperState.initialValue,r||a===e.value||(e.value=a),e.defaultValue=a}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function gp(e,a,r){(a!=="number"||Fu(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var xc=Array.isArray;function Xi(e,a,r,s){if(e=e.options,a){a={};for(var n=0;n<r.length;n++)a["$"+r[n]]=!0;for(r=0;r<e.length;r++)n=a.hasOwnProperty("$"+e[r].value),e[r].selected!==n&&(e[r].selected=n),n&&s&&(e[r].defaultSelected=!0)}else{for(r=""+go(r),a=null,n=0;n<e.length;n++){if(e[n].value===r){e[n].selected=!0,s&&(e[n].defaultSelected=!0);return}a!==null||e[n].disabled||(a=e[n])}a!==null&&(a.selected=!0)}}function vp(e,a){if(a.dangerouslySetInnerHTML!=null)throw Error(mt(91));return _a({},a,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function dx(e,a){var r=a.value;if(r==null){if(r=a.children,a=a.defaultValue,r!=null){if(a!=null)throw Error(mt(92));if(xc(r)){if(1<r.length)throw Error(mt(93));r=r[0]}a=r}a==null&&(a=""),r=a}e._wrapperState={initialValue:go(r)}}function _v(e,a){var r=go(a.value),s=go(a.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),a.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),s!=null&&(e.defaultValue=""+s)}function ux(e){var a=e.textContent;a===e._wrapperState.initialValue&&a!==""&&a!==null&&(e.value=a)}function Ev(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function bp(e,a){return e==null||e==="http://www.w3.org/1999/xhtml"?Ev(a):e==="http://www.w3.org/2000/svg"&&a==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Jd,Pv=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(a,r,s,n){MSApp.execUnsafeLocalFunction(function(){return e(a,r,s,n)})}:e}(function(e,a){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=a;else{for(Jd=Jd||document.createElement("div"),Jd.innerHTML="<svg>"+a.valueOf().toString()+"</svg>",a=Jd.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;a.firstChild;)e.appendChild(a.firstChild)}});function Pc(e,a){if(a){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=a;return}}e.textContent=a}var bc={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},By=["Webkit","ms","Moz","O"];Object.keys(bc).forEach(function(e){By.forEach(function(a){a=a+e.charAt(0).toUpperCase()+e.substring(1),bc[a]=bc[e]})});function Lv(e,a,r){return a==null||typeof a=="boolean"||a===""?"":r||typeof a!="number"||a===0||bc.hasOwnProperty(e)&&bc[e]?(""+a).trim():a+"px"}function Iv(e,a){e=e.style;for(var r in a)if(a.hasOwnProperty(r)){var s=r.indexOf("--")===0,n=Lv(r,a[r],s);r==="float"&&(r="cssFloat"),s?e.setProperty(r,n):e[r]=n}}var Uy=_a({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function yp(e,a){if(a){if(Uy[e]&&(a.children!=null||a.dangerouslySetInnerHTML!=null))throw Error(mt(137,e));if(a.dangerouslySetInnerHTML!=null){if(a.children!=null)throw Error(mt(60));if(typeof a.dangerouslySetInnerHTML!="object"||!("__html"in a.dangerouslySetInnerHTML))throw Error(mt(61))}if(a.style!=null&&typeof a.style!="object")throw Error(mt(62))}}function jp(e,a){if(e.indexOf("-")===-1)return typeof a.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Np=null;function Ff(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var wp=null,Ki=null,Zi=null;function mx(e){if(e=ed(e)){if(typeof wp!="function")throw Error(mt(280));var a=e.stateNode;a&&(a=vm(a),wp(e.stateNode,e.type,a))}}function Dv(e){Ki?Zi?Zi.push(e):Zi=[e]:Ki=e}function Ov(){if(Ki){var e=Ki,a=Zi;if(Zi=Ki=null,mx(e),a)for(e=0;e<a.length;e++)mx(a[e])}}function Tv(e,a){return e(a)}function Mv(){}var wh=!1;function Fv(e,a,r){if(wh)return e(a,r);wh=!0;try{return Tv(e,a,r)}finally{wh=!1,(Ki!==null||Zi!==null)&&(Mv(),Ov())}}function Lc(e,a){var r=e.stateNode;if(r===null)return null;var s=vm(r);if(s===null)return null;r=s[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(e=e.type,s=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!s;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(mt(231,a,typeof r));return r}var Sp=!1;if(jn)try{var sc={};Object.defineProperty(sc,"passive",{get:function(){Sp=!0}}),window.addEventListener("test",sc,sc),window.removeEventListener("test",sc,sc)}catch{Sp=!1}function Vy(e,a,r,s,n,o,i,c,d){var p=Array.prototype.slice.call(arguments,3);try{a.apply(r,p)}catch(h){this.onError(h)}}var yc=!1,Ru=null,qu=!1,kp=null,Hy={onError:function(e){yc=!0,Ru=e}};function Wy(e,a,r,s,n,o,i,c,d){yc=!1,Ru=null,Vy.apply(Hy,arguments)}function Gy(e,a,r,s,n,o,i,c,d){if(Wy.apply(this,arguments),yc){if(yc){var p=Ru;yc=!1,Ru=null}else throw Error(mt(198));qu||(qu=!0,kp=p)}}function oi(e){var a=e,r=e;if(e.alternate)for(;a.return;)a=a.return;else{e=a;do a=e,a.flags&4098&&(r=a.return),e=a.return;while(e)}return a.tag===3?r:null}function Rv(e){if(e.tag===13){var a=e.memoizedState;if(a===null&&(e=e.alternate,e!==null&&(a=e.memoizedState)),a!==null)return a.dehydrated}return null}function hx(e){if(oi(e)!==e)throw Error(mt(188))}function Jy(e){var a=e.alternate;if(!a){if(a=oi(e),a===null)throw Error(mt(188));return a!==e?null:e}for(var r=e,s=a;;){var n=r.return;if(n===null)break;var o=n.alternate;if(o===null){if(s=n.return,s!==null){r=s;continue}break}if(n.child===o.child){for(o=n.child;o;){if(o===r)return hx(n),e;if(o===s)return hx(n),a;o=o.sibling}throw Error(mt(188))}if(r.return!==s.return)r=n,s=o;else{for(var i=!1,c=n.child;c;){if(c===r){i=!0,r=n,s=o;break}if(c===s){i=!0,s=n,r=o;break}c=c.sibling}if(!i){for(c=o.child;c;){if(c===r){i=!0,r=o,s=n;break}if(c===s){i=!0,s=o,r=n;break}c=c.sibling}if(!i)throw Error(mt(189))}}if(r.alternate!==s)throw Error(mt(190))}if(r.tag!==3)throw Error(mt(188));return r.stateNode.current===r?e:a}function qv(e){return e=Jy(e),e!==null?zv(e):null}function zv(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var a=zv(e);if(a!==null)return a;e=e.sibling}return null}var $v=Zr.unstable_scheduleCallback,px=Zr.unstable_cancelCallback,Qy=Zr.unstable_shouldYield,Yy=Zr.unstable_requestPaint,Ta=Zr.unstable_now,Xy=Zr.unstable_getCurrentPriorityLevel,Rf=Zr.unstable_ImmediatePriority,Bv=Zr.unstable_UserBlockingPriority,zu=Zr.unstable_NormalPriority,Ky=Zr.unstable_LowPriority,Uv=Zr.unstable_IdlePriority,pm=null,Qs=null;function Zy(e){if(Qs&&typeof Qs.onCommitFiberRoot=="function")try{Qs.onCommitFiberRoot(pm,e,void 0,(e.current.flags&128)===128)}catch{}}var Is=Math.clz32?Math.clz32:a5,e5=Math.log,t5=Math.LN2;function a5(e){return e>>>=0,e===0?32:31-(e5(e)/t5|0)|0}var Qd=64,Yd=4194304;function gc(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function $u(e,a){var r=e.pendingLanes;if(r===0)return 0;var s=0,n=e.suspendedLanes,o=e.pingedLanes,i=r&268435455;if(i!==0){var c=i&~n;c!==0?s=gc(c):(o&=i,o!==0&&(s=gc(o)))}else i=r&~n,i!==0?s=gc(i):o!==0&&(s=gc(o));if(s===0)return 0;if(a!==0&&a!==s&&!(a&n)&&(n=s&-s,o=a&-a,n>=o||n===16&&(o&4194240)!==0))return a;if(s&4&&(s|=r&16),a=e.entangledLanes,a!==0)for(e=e.entanglements,a&=s;0<a;)r=31-Is(a),n=1<<r,s|=e[r],a&=~n;return s}function r5(e,a){switch(e){case 1:case 2:case 4:return a+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function s5(e,a){for(var r=e.suspendedLanes,s=e.pingedLanes,n=e.expirationTimes,o=e.pendingLanes;0<o;){var i=31-Is(o),c=1<<i,d=n[i];d===-1?(!(c&r)||c&s)&&(n[i]=r5(c,a)):d<=a&&(e.expiredLanes|=c),o&=~c}}function Cp(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Vv(){var e=Qd;return Qd<<=1,!(Qd&4194240)&&(Qd=64),e}function Sh(e){for(var a=[],r=0;31>r;r++)a.push(e);return a}function Kc(e,a,r){e.pendingLanes|=a,a!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,a=31-Is(a),e[a]=r}function n5(e,a){var r=e.pendingLanes&~a;e.pendingLanes=a,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=a,e.mutableReadLanes&=a,e.entangledLanes&=a,a=e.entanglements;var s=e.eventTimes;for(e=e.expirationTimes;0<r;){var n=31-Is(r),o=1<<n;a[n]=0,s[n]=-1,e[n]=-1,r&=~o}}function qf(e,a){var r=e.entangledLanes|=a;for(e=e.entanglements;r;){var s=31-Is(r),n=1<<s;n&a|e[s]&a&&(e[s]|=a),r&=~n}}var la=0;function Hv(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Wv,zf,Gv,Jv,Qv,Ap=!1,Xd=[],no=null,oo=null,io=null,Ic=new Map,Dc=new Map,Xn=[],o5="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function fx(e,a){switch(e){case"focusin":case"focusout":no=null;break;case"dragenter":case"dragleave":oo=null;break;case"mouseover":case"mouseout":io=null;break;case"pointerover":case"pointerout":Ic.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":Dc.delete(a.pointerId)}}function nc(e,a,r,s,n,o){return e===null||e.nativeEvent!==o?(e={blockedOn:a,domEventName:r,eventSystemFlags:s,nativeEvent:o,targetContainers:[n]},a!==null&&(a=ed(a),a!==null&&zf(a)),e):(e.eventSystemFlags|=s,a=e.targetContainers,n!==null&&a.indexOf(n)===-1&&a.push(n),e)}function i5(e,a,r,s,n){switch(a){case"focusin":return no=nc(no,e,a,r,s,n),!0;case"dragenter":return oo=nc(oo,e,a,r,s,n),!0;case"mouseover":return io=nc(io,e,a,r,s,n),!0;case"pointerover":var o=n.pointerId;return Ic.set(o,nc(Ic.get(o)||null,e,a,r,s,n)),!0;case"gotpointercapture":return o=n.pointerId,Dc.set(o,nc(Dc.get(o)||null,e,a,r,s,n)),!0}return!1}function Yv(e){var a=Wo(e.target);if(a!==null){var r=oi(a);if(r!==null){if(a=r.tag,a===13){if(a=Rv(r),a!==null){e.blockedOn=a,Qv(e.priority,function(){Gv(r)});return}}else if(a===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function ju(e){if(e.blockedOn!==null)return!1;for(var a=e.targetContainers;0<a.length;){var r=_p(e.domEventName,e.eventSystemFlags,a[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var s=new r.constructor(r.type,r);Np=s,r.target.dispatchEvent(s),Np=null}else return a=ed(r),a!==null&&zf(a),e.blockedOn=r,!1;a.shift()}return!0}function xx(e,a,r){ju(e)&&r.delete(a)}function l5(){Ap=!1,no!==null&&ju(no)&&(no=null),oo!==null&&ju(oo)&&(oo=null),io!==null&&ju(io)&&(io=null),Ic.forEach(xx),Dc.forEach(xx)}function oc(e,a){e.blockedOn===a&&(e.blockedOn=null,Ap||(Ap=!0,Zr.unstable_scheduleCallback(Zr.unstable_NormalPriority,l5)))}function Oc(e){function a(n){return oc(n,e)}if(0<Xd.length){oc(Xd[0],e);for(var r=1;r<Xd.length;r++){var s=Xd[r];s.blockedOn===e&&(s.blockedOn=null)}}for(no!==null&&oc(no,e),oo!==null&&oc(oo,e),io!==null&&oc(io,e),Ic.forEach(a),Dc.forEach(a),r=0;r<Xn.length;r++)s=Xn[r],s.blockedOn===e&&(s.blockedOn=null);for(;0<Xn.length&&(r=Xn[0],r.blockedOn===null);)Yv(r),r.blockedOn===null&&Xn.shift()}var el=Cn.ReactCurrentBatchConfig,Bu=!0;function c5(e,a,r,s){var n=la,o=el.transition;el.transition=null;try{la=1,$f(e,a,r,s)}finally{la=n,el.transition=o}}function d5(e,a,r,s){var n=la,o=el.transition;el.transition=null;try{la=4,$f(e,a,r,s)}finally{la=n,el.transition=o}}function $f(e,a,r,s){if(Bu){var n=_p(e,a,r,s);if(n===null)Oh(e,a,s,Uu,r),fx(e,s);else if(i5(n,e,a,r,s))s.stopPropagation();else if(fx(e,s),a&4&&-1<o5.indexOf(e)){for(;n!==null;){var o=ed(n);if(o!==null&&Wv(o),o=_p(e,a,r,s),o===null&&Oh(e,a,s,Uu,r),o===n)break;n=o}n!==null&&s.stopPropagation()}else Oh(e,a,s,null,r)}}var Uu=null;function _p(e,a,r,s){if(Uu=null,e=Ff(s),e=Wo(e),e!==null)if(a=oi(e),a===null)e=null;else if(r=a.tag,r===13){if(e=Rv(a),e!==null)return e;e=null}else if(r===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;e=null}else a!==e&&(e=null);return Uu=e,null}function Xv(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Xy()){case Rf:return 1;case Bv:return 4;case zu:case Ky:return 16;case Uv:return 536870912;default:return 16}default:return 16}}var eo=null,Bf=null,Nu=null;function Kv(){if(Nu)return Nu;var e,a=Bf,r=a.length,s,n="value"in eo?eo.value:eo.textContent,o=n.length;for(e=0;e<r&&a[e]===n[e];e++);var i=r-e;for(s=1;s<=i&&a[r-s]===n[o-s];s++);return Nu=n.slice(e,1<s?1-s:void 0)}function wu(e){var a=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&a===13&&(e=13)):e=a,e===10&&(e=13),32<=e||e===13?e:0}function Kd(){return!0}function gx(){return!1}function ts(e){function a(r,s,n,o,i){this._reactName=r,this._targetInst=n,this.type=s,this.nativeEvent=o,this.target=i,this.currentTarget=null;for(var c in e)e.hasOwnProperty(c)&&(r=e[c],this[c]=r?r(o):o[c]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?Kd:gx,this.isPropagationStopped=gx,this}return _a(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Kd)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Kd)},persist:function(){},isPersistent:Kd}),a}var jl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Uf=ts(jl),Zc=_a({},jl,{view:0,detail:0}),u5=ts(Zc),kh,Ch,ic,fm=_a({},Zc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Vf,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ic&&(ic&&e.type==="mousemove"?(kh=e.screenX-ic.screenX,Ch=e.screenY-ic.screenY):Ch=kh=0,ic=e),kh)},movementY:function(e){return"movementY"in e?e.movementY:Ch}}),vx=ts(fm),m5=_a({},fm,{dataTransfer:0}),h5=ts(m5),p5=_a({},Zc,{relatedTarget:0}),Ah=ts(p5),f5=_a({},jl,{animationName:0,elapsedTime:0,pseudoElement:0}),x5=ts(f5),g5=_a({},jl,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),v5=ts(g5),b5=_a({},jl,{data:0}),bx=ts(b5),y5={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},j5={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},N5={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function w5(e){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(e):(e=N5[e])?!!a[e]:!1}function Vf(){return w5}var S5=_a({},Zc,{key:function(e){if(e.key){var a=y5[e.key]||e.key;if(a!=="Unidentified")return a}return e.type==="keypress"?(e=wu(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?j5[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Vf,charCode:function(e){return e.type==="keypress"?wu(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?wu(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),k5=ts(S5),C5=_a({},fm,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),yx=ts(C5),A5=_a({},Zc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Vf}),_5=ts(A5),E5=_a({},jl,{propertyName:0,elapsedTime:0,pseudoElement:0}),P5=ts(E5),L5=_a({},fm,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),I5=ts(L5),D5=[9,13,27,32],Hf=jn&&"CompositionEvent"in window,jc=null;jn&&"documentMode"in document&&(jc=document.documentMode);var O5=jn&&"TextEvent"in window&&!jc,Zv=jn&&(!Hf||jc&&8<jc&&11>=jc),jx=" ",Nx=!1;function e1(e,a){switch(e){case"keyup":return D5.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function t1(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var qi=!1;function T5(e,a){switch(e){case"compositionend":return t1(a);case"keypress":return a.which!==32?null:(Nx=!0,jx);case"textInput":return e=a.data,e===jx&&Nx?null:e;default:return null}}function M5(e,a){if(qi)return e==="compositionend"||!Hf&&e1(e,a)?(e=Kv(),Nu=Bf=eo=null,qi=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return Zv&&a.locale!=="ko"?null:a.data;default:return null}}var F5={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function wx(e){var a=e&&e.nodeName&&e.nodeName.toLowerCase();return a==="input"?!!F5[e.type]:a==="textarea"}function a1(e,a,r,s){Dv(s),a=Vu(a,"onChange"),0<a.length&&(r=new Uf("onChange","change",null,r,s),e.push({event:r,listeners:a}))}var Nc=null,Tc=null;function R5(e){h1(e,0)}function xm(e){var a=Bi(e);if(Cv(a))return e}function q5(e,a){if(e==="change")return a}var r1=!1;if(jn){var _h;if(jn){var Eh="oninput"in document;if(!Eh){var Sx=document.createElement("div");Sx.setAttribute("oninput","return;"),Eh=typeof Sx.oninput=="function"}_h=Eh}else _h=!1;r1=_h&&(!document.documentMode||9<document.documentMode)}function kx(){Nc&&(Nc.detachEvent("onpropertychange",s1),Tc=Nc=null)}function s1(e){if(e.propertyName==="value"&&xm(Tc)){var a=[];a1(a,Tc,e,Ff(e)),Fv(R5,a)}}function z5(e,a,r){e==="focusin"?(kx(),Nc=a,Tc=r,Nc.attachEvent("onpropertychange",s1)):e==="focusout"&&kx()}function $5(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return xm(Tc)}function B5(e,a){if(e==="click")return xm(a)}function U5(e,a){if(e==="input"||e==="change")return xm(a)}function V5(e,a){return e===a&&(e!==0||1/e===1/a)||e!==e&&a!==a}var Os=typeof Object.is=="function"?Object.is:V5;function Mc(e,a){if(Os(e,a))return!0;if(typeof e!="object"||e===null||typeof a!="object"||a===null)return!1;var r=Object.keys(e),s=Object.keys(a);if(r.length!==s.length)return!1;for(s=0;s<r.length;s++){var n=r[s];if(!dp.call(a,n)||!Os(e[n],a[n]))return!1}return!0}function Cx(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Ax(e,a){var r=Cx(e);e=0;for(var s;r;){if(r.nodeType===3){if(s=e+r.textContent.length,e<=a&&s>=a)return{node:r,offset:a-e};e=s}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Cx(r)}}function n1(e,a){return e&&a?e===a?!0:e&&e.nodeType===3?!1:a&&a.nodeType===3?n1(e,a.parentNode):"contains"in e?e.contains(a):e.compareDocumentPosition?!!(e.compareDocumentPosition(a)&16):!1:!1}function o1(){for(var e=window,a=Fu();a instanceof e.HTMLIFrameElement;){try{var r=typeof a.contentWindow.location.href=="string"}catch{r=!1}if(r)e=a.contentWindow;else break;a=Fu(e.document)}return a}function Wf(e){var a=e&&e.nodeName&&e.nodeName.toLowerCase();return a&&(a==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||a==="textarea"||e.contentEditable==="true")}function H5(e){var a=o1(),r=e.focusedElem,s=e.selectionRange;if(a!==r&&r&&r.ownerDocument&&n1(r.ownerDocument.documentElement,r)){if(s!==null&&Wf(r)){if(a=s.start,e=s.end,e===void 0&&(e=a),"selectionStart"in r)r.selectionStart=a,r.selectionEnd=Math.min(e,r.value.length);else if(e=(a=r.ownerDocument||document)&&a.defaultView||window,e.getSelection){e=e.getSelection();var n=r.textContent.length,o=Math.min(s.start,n);s=s.end===void 0?o:Math.min(s.end,n),!e.extend&&o>s&&(n=s,s=o,o=n),n=Ax(r,o);var i=Ax(r,s);n&&i&&(e.rangeCount!==1||e.anchorNode!==n.node||e.anchorOffset!==n.offset||e.focusNode!==i.node||e.focusOffset!==i.offset)&&(a=a.createRange(),a.setStart(n.node,n.offset),e.removeAllRanges(),o>s?(e.addRange(a),e.extend(i.node,i.offset)):(a.setEnd(i.node,i.offset),e.addRange(a)))}}for(a=[],e=r;e=e.parentNode;)e.nodeType===1&&a.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<a.length;r++)e=a[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var W5=jn&&"documentMode"in document&&11>=document.documentMode,zi=null,Ep=null,wc=null,Pp=!1;function _x(e,a,r){var s=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Pp||zi==null||zi!==Fu(s)||(s=zi,"selectionStart"in s&&Wf(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),wc&&Mc(wc,s)||(wc=s,s=Vu(Ep,"onSelect"),0<s.length&&(a=new Uf("onSelect","select",null,a,r),e.push({event:a,listeners:s}),a.target=zi)))}function Zd(e,a){var r={};return r[e.toLowerCase()]=a.toLowerCase(),r["Webkit"+e]="webkit"+a,r["Moz"+e]="moz"+a,r}var $i={animationend:Zd("Animation","AnimationEnd"),animationiteration:Zd("Animation","AnimationIteration"),animationstart:Zd("Animation","AnimationStart"),transitionend:Zd("Transition","TransitionEnd")},Ph={},i1={};jn&&(i1=document.createElement("div").style,"AnimationEvent"in window||(delete $i.animationend.animation,delete $i.animationiteration.animation,delete $i.animationstart.animation),"TransitionEvent"in window||delete $i.transitionend.transition);function gm(e){if(Ph[e])return Ph[e];if(!$i[e])return e;var a=$i[e],r;for(r in a)if(a.hasOwnProperty(r)&&r in i1)return Ph[e]=a[r];return e}var l1=gm("animationend"),c1=gm("animationiteration"),d1=gm("animationstart"),u1=gm("transitionend"),m1=new Map,Ex="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function wo(e,a){m1.set(e,a),ni(a,[e])}for(var Lh=0;Lh<Ex.length;Lh++){var Ih=Ex[Lh],G5=Ih.toLowerCase(),J5=Ih[0].toUpperCase()+Ih.slice(1);wo(G5,"on"+J5)}wo(l1,"onAnimationEnd");wo(c1,"onAnimationIteration");wo(d1,"onAnimationStart");wo("dblclick","onDoubleClick");wo("focusin","onFocus");wo("focusout","onBlur");wo(u1,"onTransitionEnd");cl("onMouseEnter",["mouseout","mouseover"]);cl("onMouseLeave",["mouseout","mouseover"]);cl("onPointerEnter",["pointerout","pointerover"]);cl("onPointerLeave",["pointerout","pointerover"]);ni("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ni("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ni("onBeforeInput",["compositionend","keypress","textInput","paste"]);ni("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ni("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ni("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var vc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Q5=new Set("cancel close invalid load scroll toggle".split(" ").concat(vc));function Px(e,a,r){var s=e.type||"unknown-event";e.currentTarget=r,Gy(s,a,void 0,e),e.currentTarget=null}function h1(e,a){a=(a&4)!==0;for(var r=0;r<e.length;r++){var s=e[r],n=s.event;s=s.listeners;e:{var o=void 0;if(a)for(var i=s.length-1;0<=i;i--){var c=s[i],d=c.instance,p=c.currentTarget;if(c=c.listener,d!==o&&n.isPropagationStopped())break e;Px(n,c,p),o=d}else for(i=0;i<s.length;i++){if(c=s[i],d=c.instance,p=c.currentTarget,c=c.listener,d!==o&&n.isPropagationStopped())break e;Px(n,c,p),o=d}}}if(qu)throw e=kp,qu=!1,kp=null,e}function ga(e,a){var r=a[Tp];r===void 0&&(r=a[Tp]=new Set);var s=e+"__bubble";r.has(s)||(p1(a,e,2,!1),r.add(s))}function Dh(e,a,r){var s=0;a&&(s|=4),p1(r,e,s,a)}var eu="_reactListening"+Math.random().toString(36).slice(2);function Fc(e){if(!e[eu]){e[eu]=!0,jv.forEach(function(r){r!=="selectionchange"&&(Q5.has(r)||Dh(r,!1,e),Dh(r,!0,e))});var a=e.nodeType===9?e:e.ownerDocument;a===null||a[eu]||(a[eu]=!0,Dh("selectionchange",!1,a))}}function p1(e,a,r,s){switch(Xv(a)){case 1:var n=c5;break;case 4:n=d5;break;default:n=$f}r=n.bind(null,a,r,e),n=void 0,!Sp||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(n=!0),s?n!==void 0?e.addEventListener(a,r,{capture:!0,passive:n}):e.addEventListener(a,r,!0):n!==void 0?e.addEventListener(a,r,{passive:n}):e.addEventListener(a,r,!1)}function Oh(e,a,r,s,n){var o=s;if(!(a&1)&&!(a&2)&&s!==null)e:for(;;){if(s===null)return;var i=s.tag;if(i===3||i===4){var c=s.stateNode.containerInfo;if(c===n||c.nodeType===8&&c.parentNode===n)break;if(i===4)for(i=s.return;i!==null;){var d=i.tag;if((d===3||d===4)&&(d=i.stateNode.containerInfo,d===n||d.nodeType===8&&d.parentNode===n))return;i=i.return}for(;c!==null;){if(i=Wo(c),i===null)return;if(d=i.tag,d===5||d===6){s=o=i;continue e}c=c.parentNode}}s=s.return}Fv(function(){var p=o,h=Ff(r),x=[];e:{var b=m1.get(e);if(b!==void 0){var g=Uf,w=e;switch(e){case"keypress":if(wu(r)===0)break e;case"keydown":case"keyup":g=k5;break;case"focusin":w="focus",g=Ah;break;case"focusout":w="blur",g=Ah;break;case"beforeblur":case"afterblur":g=Ah;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=vx;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=h5;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=_5;break;case l1:case c1:case d1:g=x5;break;case u1:g=P5;break;case"scroll":g=u5;break;case"wheel":g=I5;break;case"copy":case"cut":case"paste":g=v5;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=yx}var _=(a&4)!==0,O=!_&&e==="scroll",y=_?b!==null?b+"Capture":null:b;_=[];for(var v=p,C;v!==null;){C=v;var W=C.stateNode;if(C.tag===5&&W!==null&&(C=W,y!==null&&(W=Lc(v,y),W!=null&&_.push(Rc(v,W,C)))),O)break;v=v.return}0<_.length&&(b=new g(b,w,null,r,h),x.push({event:b,listeners:_}))}}if(!(a&7)){e:{if(b=e==="mouseover"||e==="pointerover",g=e==="mouseout"||e==="pointerout",b&&r!==Np&&(w=r.relatedTarget||r.fromElement)&&(Wo(w)||w[Nn]))break e;if((g||b)&&(b=h.window===h?h:(b=h.ownerDocument)?b.defaultView||b.parentWindow:window,g?(w=r.relatedTarget||r.toElement,g=p,w=w?Wo(w):null,w!==null&&(O=oi(w),w!==O||w.tag!==5&&w.tag!==6)&&(w=null)):(g=null,w=p),g!==w)){if(_=vx,W="onMouseLeave",y="onMouseEnter",v="mouse",(e==="pointerout"||e==="pointerover")&&(_=yx,W="onPointerLeave",y="onPointerEnter",v="pointer"),O=g==null?b:Bi(g),C=w==null?b:Bi(w),b=new _(W,v+"leave",g,r,h),b.target=O,b.relatedTarget=C,W=null,Wo(h)===p&&(_=new _(y,v+"enter",w,r,h),_.target=C,_.relatedTarget=O,W=_),O=W,g&&w)t:{for(_=g,y=w,v=0,C=_;C;C=Li(C))v++;for(C=0,W=y;W;W=Li(W))C++;for(;0<v-C;)_=Li(_),v--;for(;0<C-v;)y=Li(y),C--;for(;v--;){if(_===y||y!==null&&_===y.alternate)break t;_=Li(_),y=Li(y)}_=null}else _=null;g!==null&&Lx(x,b,g,_,!1),w!==null&&O!==null&&Lx(x,O,w,_,!0)}}e:{if(b=p?Bi(p):window,g=b.nodeName&&b.nodeName.toLowerCase(),g==="select"||g==="input"&&b.type==="file")var se=q5;else if(wx(b))if(r1)se=U5;else{se=$5;var J=z5}else(g=b.nodeName)&&g.toLowerCase()==="input"&&(b.type==="checkbox"||b.type==="radio")&&(se=B5);if(se&&(se=se(e,p))){a1(x,se,r,h);break e}J&&J(e,b,p),e==="focusout"&&(J=b._wrapperState)&&J.controlled&&b.type==="number"&&gp(b,"number",b.value)}switch(J=p?Bi(p):window,e){case"focusin":(wx(J)||J.contentEditable==="true")&&(zi=J,Ep=p,wc=null);break;case"focusout":wc=Ep=zi=null;break;case"mousedown":Pp=!0;break;case"contextmenu":case"mouseup":case"dragend":Pp=!1,_x(x,r,h);break;case"selectionchange":if(W5)break;case"keydown":case"keyup":_x(x,r,h)}var Y;if(Hf)e:{switch(e){case"compositionstart":var K="onCompositionStart";break e;case"compositionend":K="onCompositionEnd";break e;case"compositionupdate":K="onCompositionUpdate";break e}K=void 0}else qi?e1(e,r)&&(K="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(K="onCompositionStart");K&&(Zv&&r.locale!=="ko"&&(qi||K!=="onCompositionStart"?K==="onCompositionEnd"&&qi&&(Y=Kv()):(eo=h,Bf="value"in eo?eo.value:eo.textContent,qi=!0)),J=Vu(p,K),0<J.length&&(K=new bx(K,e,null,r,h),x.push({event:K,listeners:J}),Y?K.data=Y:(Y=t1(r),Y!==null&&(K.data=Y)))),(Y=O5?T5(e,r):M5(e,r))&&(p=Vu(p,"onBeforeInput"),0<p.length&&(h=new bx("onBeforeInput","beforeinput",null,r,h),x.push({event:h,listeners:p}),h.data=Y))}h1(x,a)})}function Rc(e,a,r){return{instance:e,listener:a,currentTarget:r}}function Vu(e,a){for(var r=a+"Capture",s=[];e!==null;){var n=e,o=n.stateNode;n.tag===5&&o!==null&&(n=o,o=Lc(e,r),o!=null&&s.unshift(Rc(e,o,n)),o=Lc(e,a),o!=null&&s.push(Rc(e,o,n))),e=e.return}return s}function Li(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Lx(e,a,r,s,n){for(var o=a._reactName,i=[];r!==null&&r!==s;){var c=r,d=c.alternate,p=c.stateNode;if(d!==null&&d===s)break;c.tag===5&&p!==null&&(c=p,n?(d=Lc(r,o),d!=null&&i.unshift(Rc(r,d,c))):n||(d=Lc(r,o),d!=null&&i.push(Rc(r,d,c)))),r=r.return}i.length!==0&&e.push({event:a,listeners:i})}var Y5=/\r\n?/g,X5=/\u0000|\uFFFD/g;function Ix(e){return(typeof e=="string"?e:""+e).replace(Y5,`
`).replace(X5,"")}function tu(e,a,r){if(a=Ix(a),Ix(e)!==a&&r)throw Error(mt(425))}function Hu(){}var Lp=null,Ip=null;function Dp(e,a){return e==="textarea"||e==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var Op=typeof setTimeout=="function"?setTimeout:void 0,K5=typeof clearTimeout=="function"?clearTimeout:void 0,Dx=typeof Promise=="function"?Promise:void 0,Z5=typeof queueMicrotask=="function"?queueMicrotask:typeof Dx<"u"?function(e){return Dx.resolve(null).then(e).catch(ej)}:Op;function ej(e){setTimeout(function(){throw e})}function Th(e,a){var r=a,s=0;do{var n=r.nextSibling;if(e.removeChild(r),n&&n.nodeType===8)if(r=n.data,r==="/$"){if(s===0){e.removeChild(n),Oc(a);return}s--}else r!=="$"&&r!=="$?"&&r!=="$!"||s++;r=n}while(r);Oc(a)}function lo(e){for(;e!=null;e=e.nextSibling){var a=e.nodeType;if(a===1||a===3)break;if(a===8){if(a=e.data,a==="$"||a==="$!"||a==="$?")break;if(a==="/$")return null}}return e}function Ox(e){e=e.previousSibling;for(var a=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(a===0)return e;a--}else r==="/$"&&a++}e=e.previousSibling}return null}var Nl=Math.random().toString(36).slice(2),Ws="__reactFiber$"+Nl,qc="__reactProps$"+Nl,Nn="__reactContainer$"+Nl,Tp="__reactEvents$"+Nl,tj="__reactListeners$"+Nl,aj="__reactHandles$"+Nl;function Wo(e){var a=e[Ws];if(a)return a;for(var r=e.parentNode;r;){if(a=r[Nn]||r[Ws]){if(r=a.alternate,a.child!==null||r!==null&&r.child!==null)for(e=Ox(e);e!==null;){if(r=e[Ws])return r;e=Ox(e)}return a}e=r,r=e.parentNode}return null}function ed(e){return e=e[Ws]||e[Nn],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Bi(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(mt(33))}function vm(e){return e[qc]||null}var Mp=[],Ui=-1;function So(e){return{current:e}}function ba(e){0>Ui||(e.current=Mp[Ui],Mp[Ui]=null,Ui--)}function fa(e,a){Ui++,Mp[Ui]=e.current,e.current=a}var vo={},jr=So(vo),zr=So(!1),Zo=vo;function dl(e,a){var r=e.type.contextTypes;if(!r)return vo;var s=e.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===a)return s.__reactInternalMemoizedMaskedChildContext;var n={},o;for(o in r)n[o]=a[o];return s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=n),n}function $r(e){return e=e.childContextTypes,e!=null}function Wu(){ba(zr),ba(jr)}function Tx(e,a,r){if(jr.current!==vo)throw Error(mt(168));fa(jr,a),fa(zr,r)}function f1(e,a,r){var s=e.stateNode;if(a=a.childContextTypes,typeof s.getChildContext!="function")return r;s=s.getChildContext();for(var n in s)if(!(n in a))throw Error(mt(108,zy(e)||"Unknown",n));return _a({},r,s)}function Gu(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||vo,Zo=jr.current,fa(jr,e),fa(zr,zr.current),!0}function Mx(e,a,r){var s=e.stateNode;if(!s)throw Error(mt(169));r?(e=f1(e,a,Zo),s.__reactInternalMemoizedMergedChildContext=e,ba(zr),ba(jr),fa(jr,e)):ba(zr),fa(zr,r)}var gn=null,bm=!1,Mh=!1;function x1(e){gn===null?gn=[e]:gn.push(e)}function rj(e){bm=!0,x1(e)}function ko(){if(!Mh&&gn!==null){Mh=!0;var e=0,a=la;try{var r=gn;for(la=1;e<r.length;e++){var s=r[e];do s=s(!0);while(s!==null)}gn=null,bm=!1}catch(n){throw gn!==null&&(gn=gn.slice(e+1)),$v(Rf,ko),n}finally{la=a,Mh=!1}}return null}var Vi=[],Hi=0,Ju=null,Qu=0,ds=[],us=0,ei=null,vn=1,bn="";function Bo(e,a){Vi[Hi++]=Qu,Vi[Hi++]=Ju,Ju=e,Qu=a}function g1(e,a,r){ds[us++]=vn,ds[us++]=bn,ds[us++]=ei,ei=e;var s=vn;e=bn;var n=32-Is(s)-1;s&=~(1<<n),r+=1;var o=32-Is(a)+n;if(30<o){var i=n-n%5;o=(s&(1<<i)-1).toString(32),s>>=i,n-=i,vn=1<<32-Is(a)+n|r<<n|s,bn=o+e}else vn=1<<o|r<<n|s,bn=e}function Gf(e){e.return!==null&&(Bo(e,1),g1(e,1,0))}function Jf(e){for(;e===Ju;)Ju=Vi[--Hi],Vi[Hi]=null,Qu=Vi[--Hi],Vi[Hi]=null;for(;e===ei;)ei=ds[--us],ds[us]=null,bn=ds[--us],ds[us]=null,vn=ds[--us],ds[us]=null}var Kr=null,Yr=null,Sa=!1,Ls=null;function v1(e,a){var r=ms(5,null,null,0);r.elementType="DELETED",r.stateNode=a,r.return=e,a=e.deletions,a===null?(e.deletions=[r],e.flags|=16):a.push(r)}function Fx(e,a){switch(e.tag){case 5:var r=e.type;return a=a.nodeType!==1||r.toLowerCase()!==a.nodeName.toLowerCase()?null:a,a!==null?(e.stateNode=a,Kr=e,Yr=lo(a.firstChild),!0):!1;case 6:return a=e.pendingProps===""||a.nodeType!==3?null:a,a!==null?(e.stateNode=a,Kr=e,Yr=null,!0):!1;case 13:return a=a.nodeType!==8?null:a,a!==null?(r=ei!==null?{id:vn,overflow:bn}:null,e.memoizedState={dehydrated:a,treeContext:r,retryLane:1073741824},r=ms(18,null,null,0),r.stateNode=a,r.return=e,e.child=r,Kr=e,Yr=null,!0):!1;default:return!1}}function Fp(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Rp(e){if(Sa){var a=Yr;if(a){var r=a;if(!Fx(e,a)){if(Fp(e))throw Error(mt(418));a=lo(r.nextSibling);var s=Kr;a&&Fx(e,a)?v1(s,r):(e.flags=e.flags&-4097|2,Sa=!1,Kr=e)}}else{if(Fp(e))throw Error(mt(418));e.flags=e.flags&-4097|2,Sa=!1,Kr=e}}}function Rx(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Kr=e}function au(e){if(e!==Kr)return!1;if(!Sa)return Rx(e),Sa=!0,!1;var a;if((a=e.tag!==3)&&!(a=e.tag!==5)&&(a=e.type,a=a!=="head"&&a!=="body"&&!Dp(e.type,e.memoizedProps)),a&&(a=Yr)){if(Fp(e))throw b1(),Error(mt(418));for(;a;)v1(e,a),a=lo(a.nextSibling)}if(Rx(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(mt(317));e:{for(e=e.nextSibling,a=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(a===0){Yr=lo(e.nextSibling);break e}a--}else r!=="$"&&r!=="$!"&&r!=="$?"||a++}e=e.nextSibling}Yr=null}}else Yr=Kr?lo(e.stateNode.nextSibling):null;return!0}function b1(){for(var e=Yr;e;)e=lo(e.nextSibling)}function ul(){Yr=Kr=null,Sa=!1}function Qf(e){Ls===null?Ls=[e]:Ls.push(e)}var sj=Cn.ReactCurrentBatchConfig;function lc(e,a,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(mt(309));var s=r.stateNode}if(!s)throw Error(mt(147,e));var n=s,o=""+e;return a!==null&&a.ref!==null&&typeof a.ref=="function"&&a.ref._stringRef===o?a.ref:(a=function(i){var c=n.refs;i===null?delete c[o]:c[o]=i},a._stringRef=o,a)}if(typeof e!="string")throw Error(mt(284));if(!r._owner)throw Error(mt(290,e))}return e}function ru(e,a){throw e=Object.prototype.toString.call(a),Error(mt(31,e==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":e))}function qx(e){var a=e._init;return a(e._payload)}function y1(e){function a(y,v){if(e){var C=y.deletions;C===null?(y.deletions=[v],y.flags|=16):C.push(v)}}function r(y,v){if(!e)return null;for(;v!==null;)a(y,v),v=v.sibling;return null}function s(y,v){for(y=new Map;v!==null;)v.key!==null?y.set(v.key,v):y.set(v.index,v),v=v.sibling;return y}function n(y,v){return y=ho(y,v),y.index=0,y.sibling=null,y}function o(y,v,C){return y.index=C,e?(C=y.alternate,C!==null?(C=C.index,C<v?(y.flags|=2,v):C):(y.flags|=2,v)):(y.flags|=1048576,v)}function i(y){return e&&y.alternate===null&&(y.flags|=2),y}function c(y,v,C,W){return v===null||v.tag!==6?(v=Uh(C,y.mode,W),v.return=y,v):(v=n(v,C),v.return=y,v)}function d(y,v,C,W){var se=C.type;return se===Ri?h(y,v,C.props.children,W,C.key):v!==null&&(v.elementType===se||typeof se=="object"&&se!==null&&se.$$typeof===Qn&&qx(se)===v.type)?(W=n(v,C.props),W.ref=lc(y,v,C),W.return=y,W):(W=Pu(C.type,C.key,C.props,null,y.mode,W),W.ref=lc(y,v,C),W.return=y,W)}function p(y,v,C,W){return v===null||v.tag!==4||v.stateNode.containerInfo!==C.containerInfo||v.stateNode.implementation!==C.implementation?(v=Vh(C,y.mode,W),v.return=y,v):(v=n(v,C.children||[]),v.return=y,v)}function h(y,v,C,W,se){return v===null||v.tag!==7?(v=Yo(C,y.mode,W,se),v.return=y,v):(v=n(v,C),v.return=y,v)}function x(y,v,C){if(typeof v=="string"&&v!==""||typeof v=="number")return v=Uh(""+v,y.mode,C),v.return=y,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Wd:return C=Pu(v.type,v.key,v.props,null,y.mode,C),C.ref=lc(y,null,v),C.return=y,C;case Fi:return v=Vh(v,y.mode,C),v.return=y,v;case Qn:var W=v._init;return x(y,W(v._payload),C)}if(xc(v)||rc(v))return v=Yo(v,y.mode,C,null),v.return=y,v;ru(y,v)}return null}function b(y,v,C,W){var se=v!==null?v.key:null;if(typeof C=="string"&&C!==""||typeof C=="number")return se!==null?null:c(y,v,""+C,W);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case Wd:return C.key===se?d(y,v,C,W):null;case Fi:return C.key===se?p(y,v,C,W):null;case Qn:return se=C._init,b(y,v,se(C._payload),W)}if(xc(C)||rc(C))return se!==null?null:h(y,v,C,W,null);ru(y,C)}return null}function g(y,v,C,W,se){if(typeof W=="string"&&W!==""||typeof W=="number")return y=y.get(C)||null,c(v,y,""+W,se);if(typeof W=="object"&&W!==null){switch(W.$$typeof){case Wd:return y=y.get(W.key===null?C:W.key)||null,d(v,y,W,se);case Fi:return y=y.get(W.key===null?C:W.key)||null,p(v,y,W,se);case Qn:var J=W._init;return g(y,v,C,J(W._payload),se)}if(xc(W)||rc(W))return y=y.get(C)||null,h(v,y,W,se,null);ru(v,W)}return null}function w(y,v,C,W){for(var se=null,J=null,Y=v,K=v=0,fe=null;Y!==null&&K<C.length;K++){Y.index>K?(fe=Y,Y=null):fe=Y.sibling;var me=b(y,Y,C[K],W);if(me===null){Y===null&&(Y=fe);break}e&&Y&&me.alternate===null&&a(y,Y),v=o(me,v,K),J===null?se=me:J.sibling=me,J=me,Y=fe}if(K===C.length)return r(y,Y),Sa&&Bo(y,K),se;if(Y===null){for(;K<C.length;K++)Y=x(y,C[K],W),Y!==null&&(v=o(Y,v,K),J===null?se=Y:J.sibling=Y,J=Y);return Sa&&Bo(y,K),se}for(Y=s(y,Y);K<C.length;K++)fe=g(Y,y,K,C[K],W),fe!==null&&(e&&fe.alternate!==null&&Y.delete(fe.key===null?K:fe.key),v=o(fe,v,K),J===null?se=fe:J.sibling=fe,J=fe);return e&&Y.forEach(function($){return a(y,$)}),Sa&&Bo(y,K),se}function _(y,v,C,W){var se=rc(C);if(typeof se!="function")throw Error(mt(150));if(C=se.call(C),C==null)throw Error(mt(151));for(var J=se=null,Y=v,K=v=0,fe=null,me=C.next();Y!==null&&!me.done;K++,me=C.next()){Y.index>K?(fe=Y,Y=null):fe=Y.sibling;var $=b(y,Y,me.value,W);if($===null){Y===null&&(Y=fe);break}e&&Y&&$.alternate===null&&a(y,Y),v=o($,v,K),J===null?se=$:J.sibling=$,J=$,Y=fe}if(me.done)return r(y,Y),Sa&&Bo(y,K),se;if(Y===null){for(;!me.done;K++,me=C.next())me=x(y,me.value,W),me!==null&&(v=o(me,v,K),J===null?se=me:J.sibling=me,J=me);return Sa&&Bo(y,K),se}for(Y=s(y,Y);!me.done;K++,me=C.next())me=g(Y,y,K,me.value,W),me!==null&&(e&&me.alternate!==null&&Y.delete(me.key===null?K:me.key),v=o(me,v,K),J===null?se=me:J.sibling=me,J=me);return e&&Y.forEach(function(L){return a(y,L)}),Sa&&Bo(y,K),se}function O(y,v,C,W){if(typeof C=="object"&&C!==null&&C.type===Ri&&C.key===null&&(C=C.props.children),typeof C=="object"&&C!==null){switch(C.$$typeof){case Wd:e:{for(var se=C.key,J=v;J!==null;){if(J.key===se){if(se=C.type,se===Ri){if(J.tag===7){r(y,J.sibling),v=n(J,C.props.children),v.return=y,y=v;break e}}else if(J.elementType===se||typeof se=="object"&&se!==null&&se.$$typeof===Qn&&qx(se)===J.type){r(y,J.sibling),v=n(J,C.props),v.ref=lc(y,J,C),v.return=y,y=v;break e}r(y,J);break}else a(y,J);J=J.sibling}C.type===Ri?(v=Yo(C.props.children,y.mode,W,C.key),v.return=y,y=v):(W=Pu(C.type,C.key,C.props,null,y.mode,W),W.ref=lc(y,v,C),W.return=y,y=W)}return i(y);case Fi:e:{for(J=C.key;v!==null;){if(v.key===J)if(v.tag===4&&v.stateNode.containerInfo===C.containerInfo&&v.stateNode.implementation===C.implementation){r(y,v.sibling),v=n(v,C.children||[]),v.return=y,y=v;break e}else{r(y,v);break}else a(y,v);v=v.sibling}v=Vh(C,y.mode,W),v.return=y,y=v}return i(y);case Qn:return J=C._init,O(y,v,J(C._payload),W)}if(xc(C))return w(y,v,C,W);if(rc(C))return _(y,v,C,W);ru(y,C)}return typeof C=="string"&&C!==""||typeof C=="number"?(C=""+C,v!==null&&v.tag===6?(r(y,v.sibling),v=n(v,C),v.return=y,y=v):(r(y,v),v=Uh(C,y.mode,W),v.return=y,y=v),i(y)):r(y,v)}return O}var ml=y1(!0),j1=y1(!1),Yu=So(null),Xu=null,Wi=null,Yf=null;function Xf(){Yf=Wi=Xu=null}function Kf(e){var a=Yu.current;ba(Yu),e._currentValue=a}function qp(e,a,r){for(;e!==null;){var s=e.alternate;if((e.childLanes&a)!==a?(e.childLanes|=a,s!==null&&(s.childLanes|=a)):s!==null&&(s.childLanes&a)!==a&&(s.childLanes|=a),e===r)break;e=e.return}}function tl(e,a){Xu=e,Yf=Wi=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&a&&(Rr=!0),e.firstContext=null)}function fs(e){var a=e._currentValue;if(Yf!==e)if(e={context:e,memoizedValue:a,next:null},Wi===null){if(Xu===null)throw Error(mt(308));Wi=e,Xu.dependencies={lanes:0,firstContext:e}}else Wi=Wi.next=e;return a}var Go=null;function Zf(e){Go===null?Go=[e]:Go.push(e)}function N1(e,a,r,s){var n=a.interleaved;return n===null?(r.next=r,Zf(a)):(r.next=n.next,n.next=r),a.interleaved=r,wn(e,s)}function wn(e,a){e.lanes|=a;var r=e.alternate;for(r!==null&&(r.lanes|=a),r=e,e=e.return;e!==null;)e.childLanes|=a,r=e.alternate,r!==null&&(r.childLanes|=a),r=e,e=e.return;return r.tag===3?r.stateNode:null}var Yn=!1;function e0(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function w1(e,a){e=e.updateQueue,a.updateQueue===e&&(a.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function yn(e,a){return{eventTime:e,lane:a,tag:0,payload:null,callback:null,next:null}}function co(e,a,r){var s=e.updateQueue;if(s===null)return null;if(s=s.shared,ta&2){var n=s.pending;return n===null?a.next=a:(a.next=n.next,n.next=a),s.pending=a,wn(e,r)}return n=s.interleaved,n===null?(a.next=a,Zf(s)):(a.next=n.next,n.next=a),s.interleaved=a,wn(e,r)}function Su(e,a,r){if(a=a.updateQueue,a!==null&&(a=a.shared,(r&4194240)!==0)){var s=a.lanes;s&=e.pendingLanes,r|=s,a.lanes=r,qf(e,r)}}function zx(e,a){var r=e.updateQueue,s=e.alternate;if(s!==null&&(s=s.updateQueue,r===s)){var n=null,o=null;if(r=r.firstBaseUpdate,r!==null){do{var i={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};o===null?n=o=i:o=o.next=i,r=r.next}while(r!==null);o===null?n=o=a:o=o.next=a}else n=o=a;r={baseState:s.baseState,firstBaseUpdate:n,lastBaseUpdate:o,shared:s.shared,effects:s.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=a:e.next=a,r.lastBaseUpdate=a}function Ku(e,a,r,s){var n=e.updateQueue;Yn=!1;var o=n.firstBaseUpdate,i=n.lastBaseUpdate,c=n.shared.pending;if(c!==null){n.shared.pending=null;var d=c,p=d.next;d.next=null,i===null?o=p:i.next=p,i=d;var h=e.alternate;h!==null&&(h=h.updateQueue,c=h.lastBaseUpdate,c!==i&&(c===null?h.firstBaseUpdate=p:c.next=p,h.lastBaseUpdate=d))}if(o!==null){var x=n.baseState;i=0,h=p=d=null,c=o;do{var b=c.lane,g=c.eventTime;if((s&b)===b){h!==null&&(h=h.next={eventTime:g,lane:0,tag:c.tag,payload:c.payload,callback:c.callback,next:null});e:{var w=e,_=c;switch(b=a,g=r,_.tag){case 1:if(w=_.payload,typeof w=="function"){x=w.call(g,x,b);break e}x=w;break e;case 3:w.flags=w.flags&-65537|128;case 0:if(w=_.payload,b=typeof w=="function"?w.call(g,x,b):w,b==null)break e;x=_a({},x,b);break e;case 2:Yn=!0}}c.callback!==null&&c.lane!==0&&(e.flags|=64,b=n.effects,b===null?n.effects=[c]:b.push(c))}else g={eventTime:g,lane:b,tag:c.tag,payload:c.payload,callback:c.callback,next:null},h===null?(p=h=g,d=x):h=h.next=g,i|=b;if(c=c.next,c===null){if(c=n.shared.pending,c===null)break;b=c,c=b.next,b.next=null,n.lastBaseUpdate=b,n.shared.pending=null}}while(!0);if(h===null&&(d=x),n.baseState=d,n.firstBaseUpdate=p,n.lastBaseUpdate=h,a=n.shared.interleaved,a!==null){n=a;do i|=n.lane,n=n.next;while(n!==a)}else o===null&&(n.shared.lanes=0);ai|=i,e.lanes=i,e.memoizedState=x}}function $x(e,a,r){if(e=a.effects,a.effects=null,e!==null)for(a=0;a<e.length;a++){var s=e[a],n=s.callback;if(n!==null){if(s.callback=null,s=r,typeof n!="function")throw Error(mt(191,n));n.call(s)}}}var td={},Ys=So(td),zc=So(td),$c=So(td);function Jo(e){if(e===td)throw Error(mt(174));return e}function t0(e,a){switch(fa($c,a),fa(zc,e),fa(Ys,td),e=a.nodeType,e){case 9:case 11:a=(a=a.documentElement)?a.namespaceURI:bp(null,"");break;default:e=e===8?a.parentNode:a,a=e.namespaceURI||null,e=e.tagName,a=bp(a,e)}ba(Ys),fa(Ys,a)}function hl(){ba(Ys),ba(zc),ba($c)}function S1(e){Jo($c.current);var a=Jo(Ys.current),r=bp(a,e.type);a!==r&&(fa(zc,e),fa(Ys,r))}function a0(e){zc.current===e&&(ba(Ys),ba(zc))}var Ca=So(0);function Zu(e){for(var a=e;a!==null;){if(a.tag===13){var r=a.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return a}else if(a.tag===19&&a.memoizedProps.revealOrder!==void 0){if(a.flags&128)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===e)break;for(;a.sibling===null;){if(a.return===null||a.return===e)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var Fh=[];function r0(){for(var e=0;e<Fh.length;e++)Fh[e]._workInProgressVersionPrimary=null;Fh.length=0}var ku=Cn.ReactCurrentDispatcher,Rh=Cn.ReactCurrentBatchConfig,ti=0,Aa=null,Ja=null,tr=null,em=!1,Sc=!1,Bc=0,nj=0;function hr(){throw Error(mt(321))}function s0(e,a){if(a===null)return!1;for(var r=0;r<a.length&&r<e.length;r++)if(!Os(e[r],a[r]))return!1;return!0}function n0(e,a,r,s,n,o){if(ti=o,Aa=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,ku.current=e===null||e.memoizedState===null?cj:dj,e=r(s,n),Sc){o=0;do{if(Sc=!1,Bc=0,25<=o)throw Error(mt(301));o+=1,tr=Ja=null,a.updateQueue=null,ku.current=uj,e=r(s,n)}while(Sc)}if(ku.current=tm,a=Ja!==null&&Ja.next!==null,ti=0,tr=Ja=Aa=null,em=!1,a)throw Error(mt(300));return e}function o0(){var e=Bc!==0;return Bc=0,e}function Hs(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return tr===null?Aa.memoizedState=tr=e:tr=tr.next=e,tr}function xs(){if(Ja===null){var e=Aa.alternate;e=e!==null?e.memoizedState:null}else e=Ja.next;var a=tr===null?Aa.memoizedState:tr.next;if(a!==null)tr=a,Ja=e;else{if(e===null)throw Error(mt(310));Ja=e,e={memoizedState:Ja.memoizedState,baseState:Ja.baseState,baseQueue:Ja.baseQueue,queue:Ja.queue,next:null},tr===null?Aa.memoizedState=tr=e:tr=tr.next=e}return tr}function Uc(e,a){return typeof a=="function"?a(e):a}function qh(e){var a=xs(),r=a.queue;if(r===null)throw Error(mt(311));r.lastRenderedReducer=e;var s=Ja,n=s.baseQueue,o=r.pending;if(o!==null){if(n!==null){var i=n.next;n.next=o.next,o.next=i}s.baseQueue=n=o,r.pending=null}if(n!==null){o=n.next,s=s.baseState;var c=i=null,d=null,p=o;do{var h=p.lane;if((ti&h)===h)d!==null&&(d=d.next={lane:0,action:p.action,hasEagerState:p.hasEagerState,eagerState:p.eagerState,next:null}),s=p.hasEagerState?p.eagerState:e(s,p.action);else{var x={lane:h,action:p.action,hasEagerState:p.hasEagerState,eagerState:p.eagerState,next:null};d===null?(c=d=x,i=s):d=d.next=x,Aa.lanes|=h,ai|=h}p=p.next}while(p!==null&&p!==o);d===null?i=s:d.next=c,Os(s,a.memoizedState)||(Rr=!0),a.memoizedState=s,a.baseState=i,a.baseQueue=d,r.lastRenderedState=s}if(e=r.interleaved,e!==null){n=e;do o=n.lane,Aa.lanes|=o,ai|=o,n=n.next;while(n!==e)}else n===null&&(r.lanes=0);return[a.memoizedState,r.dispatch]}function zh(e){var a=xs(),r=a.queue;if(r===null)throw Error(mt(311));r.lastRenderedReducer=e;var s=r.dispatch,n=r.pending,o=a.memoizedState;if(n!==null){r.pending=null;var i=n=n.next;do o=e(o,i.action),i=i.next;while(i!==n);Os(o,a.memoizedState)||(Rr=!0),a.memoizedState=o,a.baseQueue===null&&(a.baseState=o),r.lastRenderedState=o}return[o,s]}function k1(){}function C1(e,a){var r=Aa,s=xs(),n=a(),o=!Os(s.memoizedState,n);if(o&&(s.memoizedState=n,Rr=!0),s=s.queue,i0(E1.bind(null,r,s,e),[e]),s.getSnapshot!==a||o||tr!==null&&tr.memoizedState.tag&1){if(r.flags|=2048,Vc(9,_1.bind(null,r,s,n,a),void 0,null),rr===null)throw Error(mt(349));ti&30||A1(r,a,n)}return n}function A1(e,a,r){e.flags|=16384,e={getSnapshot:a,value:r},a=Aa.updateQueue,a===null?(a={lastEffect:null,stores:null},Aa.updateQueue=a,a.stores=[e]):(r=a.stores,r===null?a.stores=[e]:r.push(e))}function _1(e,a,r,s){a.value=r,a.getSnapshot=s,P1(a)&&L1(e)}function E1(e,a,r){return r(function(){P1(a)&&L1(e)})}function P1(e){var a=e.getSnapshot;e=e.value;try{var r=a();return!Os(e,r)}catch{return!0}}function L1(e){var a=wn(e,1);a!==null&&Ds(a,e,1,-1)}function Bx(e){var a=Hs();return typeof e=="function"&&(e=e()),a.memoizedState=a.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Uc,lastRenderedState:e},a.queue=e,e=e.dispatch=lj.bind(null,Aa,e),[a.memoizedState,e]}function Vc(e,a,r,s){return e={tag:e,create:a,destroy:r,deps:s,next:null},a=Aa.updateQueue,a===null?(a={lastEffect:null,stores:null},Aa.updateQueue=a,a.lastEffect=e.next=e):(r=a.lastEffect,r===null?a.lastEffect=e.next=e:(s=r.next,r.next=e,e.next=s,a.lastEffect=e)),e}function I1(){return xs().memoizedState}function Cu(e,a,r,s){var n=Hs();Aa.flags|=e,n.memoizedState=Vc(1|a,r,void 0,s===void 0?null:s)}function ym(e,a,r,s){var n=xs();s=s===void 0?null:s;var o=void 0;if(Ja!==null){var i=Ja.memoizedState;if(o=i.destroy,s!==null&&s0(s,i.deps)){n.memoizedState=Vc(a,r,o,s);return}}Aa.flags|=e,n.memoizedState=Vc(1|a,r,o,s)}function Ux(e,a){return Cu(8390656,8,e,a)}function i0(e,a){return ym(2048,8,e,a)}function D1(e,a){return ym(4,2,e,a)}function O1(e,a){return ym(4,4,e,a)}function T1(e,a){if(typeof a=="function")return e=e(),a(e),function(){a(null)};if(a!=null)return e=e(),a.current=e,function(){a.current=null}}function M1(e,a,r){return r=r!=null?r.concat([e]):null,ym(4,4,T1.bind(null,a,e),r)}function l0(){}function F1(e,a){var r=xs();a=a===void 0?null:a;var s=r.memoizedState;return s!==null&&a!==null&&s0(a,s[1])?s[0]:(r.memoizedState=[e,a],e)}function R1(e,a){var r=xs();a=a===void 0?null:a;var s=r.memoizedState;return s!==null&&a!==null&&s0(a,s[1])?s[0]:(e=e(),r.memoizedState=[e,a],e)}function q1(e,a,r){return ti&21?(Os(r,a)||(r=Vv(),Aa.lanes|=r,ai|=r,e.baseState=!0),a):(e.baseState&&(e.baseState=!1,Rr=!0),e.memoizedState=r)}function oj(e,a){var r=la;la=r!==0&&4>r?r:4,e(!0);var s=Rh.transition;Rh.transition={};try{e(!1),a()}finally{la=r,Rh.transition=s}}function z1(){return xs().memoizedState}function ij(e,a,r){var s=mo(e);if(r={lane:s,action:r,hasEagerState:!1,eagerState:null,next:null},$1(e))B1(a,r);else if(r=N1(e,a,r,s),r!==null){var n=Ar();Ds(r,e,s,n),U1(r,a,s)}}function lj(e,a,r){var s=mo(e),n={lane:s,action:r,hasEagerState:!1,eagerState:null,next:null};if($1(e))B1(a,n);else{var o=e.alternate;if(e.lanes===0&&(o===null||o.lanes===0)&&(o=a.lastRenderedReducer,o!==null))try{var i=a.lastRenderedState,c=o(i,r);if(n.hasEagerState=!0,n.eagerState=c,Os(c,i)){var d=a.interleaved;d===null?(n.next=n,Zf(a)):(n.next=d.next,d.next=n),a.interleaved=n;return}}catch{}finally{}r=N1(e,a,n,s),r!==null&&(n=Ar(),Ds(r,e,s,n),U1(r,a,s))}}function $1(e){var a=e.alternate;return e===Aa||a!==null&&a===Aa}function B1(e,a){Sc=em=!0;var r=e.pending;r===null?a.next=a:(a.next=r.next,r.next=a),e.pending=a}function U1(e,a,r){if(r&4194240){var s=a.lanes;s&=e.pendingLanes,r|=s,a.lanes=r,qf(e,r)}}var tm={readContext:fs,useCallback:hr,useContext:hr,useEffect:hr,useImperativeHandle:hr,useInsertionEffect:hr,useLayoutEffect:hr,useMemo:hr,useReducer:hr,useRef:hr,useState:hr,useDebugValue:hr,useDeferredValue:hr,useTransition:hr,useMutableSource:hr,useSyncExternalStore:hr,useId:hr,unstable_isNewReconciler:!1},cj={readContext:fs,useCallback:function(e,a){return Hs().memoizedState=[e,a===void 0?null:a],e},useContext:fs,useEffect:Ux,useImperativeHandle:function(e,a,r){return r=r!=null?r.concat([e]):null,Cu(4194308,4,T1.bind(null,a,e),r)},useLayoutEffect:function(e,a){return Cu(4194308,4,e,a)},useInsertionEffect:function(e,a){return Cu(4,2,e,a)},useMemo:function(e,a){var r=Hs();return a=a===void 0?null:a,e=e(),r.memoizedState=[e,a],e},useReducer:function(e,a,r){var s=Hs();return a=r!==void 0?r(a):a,s.memoizedState=s.baseState=a,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:a},s.queue=e,e=e.dispatch=ij.bind(null,Aa,e),[s.memoizedState,e]},useRef:function(e){var a=Hs();return e={current:e},a.memoizedState=e},useState:Bx,useDebugValue:l0,useDeferredValue:function(e){return Hs().memoizedState=e},useTransition:function(){var e=Bx(!1),a=e[0];return e=oj.bind(null,e[1]),Hs().memoizedState=e,[a,e]},useMutableSource:function(){},useSyncExternalStore:function(e,a,r){var s=Aa,n=Hs();if(Sa){if(r===void 0)throw Error(mt(407));r=r()}else{if(r=a(),rr===null)throw Error(mt(349));ti&30||A1(s,a,r)}n.memoizedState=r;var o={value:r,getSnapshot:a};return n.queue=o,Ux(E1.bind(null,s,o,e),[e]),s.flags|=2048,Vc(9,_1.bind(null,s,o,r,a),void 0,null),r},useId:function(){var e=Hs(),a=rr.identifierPrefix;if(Sa){var r=bn,s=vn;r=(s&~(1<<32-Is(s)-1)).toString(32)+r,a=":"+a+"R"+r,r=Bc++,0<r&&(a+="H"+r.toString(32)),a+=":"}else r=nj++,a=":"+a+"r"+r.toString(32)+":";return e.memoizedState=a},unstable_isNewReconciler:!1},dj={readContext:fs,useCallback:F1,useContext:fs,useEffect:i0,useImperativeHandle:M1,useInsertionEffect:D1,useLayoutEffect:O1,useMemo:R1,useReducer:qh,useRef:I1,useState:function(){return qh(Uc)},useDebugValue:l0,useDeferredValue:function(e){var a=xs();return q1(a,Ja.memoizedState,e)},useTransition:function(){var e=qh(Uc)[0],a=xs().memoizedState;return[e,a]},useMutableSource:k1,useSyncExternalStore:C1,useId:z1,unstable_isNewReconciler:!1},uj={readContext:fs,useCallback:F1,useContext:fs,useEffect:i0,useImperativeHandle:M1,useInsertionEffect:D1,useLayoutEffect:O1,useMemo:R1,useReducer:zh,useRef:I1,useState:function(){return zh(Uc)},useDebugValue:l0,useDeferredValue:function(e){var a=xs();return Ja===null?a.memoizedState=e:q1(a,Ja.memoizedState,e)},useTransition:function(){var e=zh(Uc)[0],a=xs().memoizedState;return[e,a]},useMutableSource:k1,useSyncExternalStore:C1,useId:z1,unstable_isNewReconciler:!1};function _s(e,a){if(e&&e.defaultProps){a=_a({},a),e=e.defaultProps;for(var r in e)a[r]===void 0&&(a[r]=e[r]);return a}return a}function zp(e,a,r,s){a=e.memoizedState,r=r(s,a),r=r==null?a:_a({},a,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var jm={isMounted:function(e){return(e=e._reactInternals)?oi(e)===e:!1},enqueueSetState:function(e,a,r){e=e._reactInternals;var s=Ar(),n=mo(e),o=yn(s,n);o.payload=a,r!=null&&(o.callback=r),a=co(e,o,n),a!==null&&(Ds(a,e,n,s),Su(a,e,n))},enqueueReplaceState:function(e,a,r){e=e._reactInternals;var s=Ar(),n=mo(e),o=yn(s,n);o.tag=1,o.payload=a,r!=null&&(o.callback=r),a=co(e,o,n),a!==null&&(Ds(a,e,n,s),Su(a,e,n))},enqueueForceUpdate:function(e,a){e=e._reactInternals;var r=Ar(),s=mo(e),n=yn(r,s);n.tag=2,a!=null&&(n.callback=a),a=co(e,n,s),a!==null&&(Ds(a,e,s,r),Su(a,e,s))}};function Vx(e,a,r,s,n,o,i){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(s,o,i):a.prototype&&a.prototype.isPureReactComponent?!Mc(r,s)||!Mc(n,o):!0}function V1(e,a,r){var s=!1,n=vo,o=a.contextType;return typeof o=="object"&&o!==null?o=fs(o):(n=$r(a)?Zo:jr.current,s=a.contextTypes,o=(s=s!=null)?dl(e,n):vo),a=new a(r,o),e.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,a.updater=jm,e.stateNode=a,a._reactInternals=e,s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=n,e.__reactInternalMemoizedMaskedChildContext=o),a}function Hx(e,a,r,s){e=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(r,s),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(r,s),a.state!==e&&jm.enqueueReplaceState(a,a.state,null)}function $p(e,a,r,s){var n=e.stateNode;n.props=r,n.state=e.memoizedState,n.refs={},e0(e);var o=a.contextType;typeof o=="object"&&o!==null?n.context=fs(o):(o=$r(a)?Zo:jr.current,n.context=dl(e,o)),n.state=e.memoizedState,o=a.getDerivedStateFromProps,typeof o=="function"&&(zp(e,a,o,r),n.state=e.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof n.getSnapshotBeforeUpdate=="function"||typeof n.UNSAFE_componentWillMount!="function"&&typeof n.componentWillMount!="function"||(a=n.state,typeof n.componentWillMount=="function"&&n.componentWillMount(),typeof n.UNSAFE_componentWillMount=="function"&&n.UNSAFE_componentWillMount(),a!==n.state&&jm.enqueueReplaceState(n,n.state,null),Ku(e,r,n,s),n.state=e.memoizedState),typeof n.componentDidMount=="function"&&(e.flags|=4194308)}function pl(e,a){try{var r="",s=a;do r+=qy(s),s=s.return;while(s);var n=r}catch(o){n=`
Error generating stack: `+o.message+`
`+o.stack}return{value:e,source:a,stack:n,digest:null}}function $h(e,a,r){return{value:e,source:null,stack:r??null,digest:a??null}}function Bp(e,a){try{console.error(a.value)}catch(r){setTimeout(function(){throw r})}}var mj=typeof WeakMap=="function"?WeakMap:Map;function H1(e,a,r){r=yn(-1,r),r.tag=3,r.payload={element:null};var s=a.value;return r.callback=function(){rm||(rm=!0,Kp=s),Bp(e,a)},r}function W1(e,a,r){r=yn(-1,r),r.tag=3;var s=e.type.getDerivedStateFromError;if(typeof s=="function"){var n=a.value;r.payload=function(){return s(n)},r.callback=function(){Bp(e,a)}}var o=e.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(r.callback=function(){Bp(e,a),typeof s!="function"&&(uo===null?uo=new Set([this]):uo.add(this));var i=a.stack;this.componentDidCatch(a.value,{componentStack:i!==null?i:""})}),r}function Wx(e,a,r){var s=e.pingCache;if(s===null){s=e.pingCache=new mj;var n=new Set;s.set(a,n)}else n=s.get(a),n===void 0&&(n=new Set,s.set(a,n));n.has(r)||(n.add(r),e=Cj.bind(null,e,a,r),a.then(e,e))}function Gx(e){do{var a;if((a=e.tag===13)&&(a=e.memoizedState,a=a!==null?a.dehydrated!==null:!0),a)return e;e=e.return}while(e!==null);return null}function Jx(e,a,r,s,n){return e.mode&1?(e.flags|=65536,e.lanes=n,e):(e===a?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(a=yn(-1,1),a.tag=2,co(r,a,1))),r.lanes|=1),e)}var hj=Cn.ReactCurrentOwner,Rr=!1;function Cr(e,a,r,s){a.child=e===null?j1(a,null,r,s):ml(a,e.child,r,s)}function Qx(e,a,r,s,n){r=r.render;var o=a.ref;return tl(a,n),s=n0(e,a,r,s,o,n),r=o0(),e!==null&&!Rr?(a.updateQueue=e.updateQueue,a.flags&=-2053,e.lanes&=~n,Sn(e,a,n)):(Sa&&r&&Gf(a),a.flags|=1,Cr(e,a,s,n),a.child)}function Yx(e,a,r,s,n){if(e===null){var o=r.type;return typeof o=="function"&&!x0(o)&&o.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(a.tag=15,a.type=o,G1(e,a,o,s,n)):(e=Pu(r.type,null,s,a,a.mode,n),e.ref=a.ref,e.return=a,a.child=e)}if(o=e.child,!(e.lanes&n)){var i=o.memoizedProps;if(r=r.compare,r=r!==null?r:Mc,r(i,s)&&e.ref===a.ref)return Sn(e,a,n)}return a.flags|=1,e=ho(o,s),e.ref=a.ref,e.return=a,a.child=e}function G1(e,a,r,s,n){if(e!==null){var o=e.memoizedProps;if(Mc(o,s)&&e.ref===a.ref)if(Rr=!1,a.pendingProps=s=o,(e.lanes&n)!==0)e.flags&131072&&(Rr=!0);else return a.lanes=e.lanes,Sn(e,a,n)}return Up(e,a,r,s,n)}function J1(e,a,r){var s=a.pendingProps,n=s.children,o=e!==null?e.memoizedState:null;if(s.mode==="hidden")if(!(a.mode&1))a.memoizedState={baseLanes:0,cachePool:null,transitions:null},fa(Ji,Jr),Jr|=r;else{if(!(r&1073741824))return e=o!==null?o.baseLanes|r:r,a.lanes=a.childLanes=1073741824,a.memoizedState={baseLanes:e,cachePool:null,transitions:null},a.updateQueue=null,fa(Ji,Jr),Jr|=e,null;a.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=o!==null?o.baseLanes:r,fa(Ji,Jr),Jr|=s}else o!==null?(s=o.baseLanes|r,a.memoizedState=null):s=r,fa(Ji,Jr),Jr|=s;return Cr(e,a,n,r),a.child}function Q1(e,a){var r=a.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(a.flags|=512,a.flags|=2097152)}function Up(e,a,r,s,n){var o=$r(r)?Zo:jr.current;return o=dl(a,o),tl(a,n),r=n0(e,a,r,s,o,n),s=o0(),e!==null&&!Rr?(a.updateQueue=e.updateQueue,a.flags&=-2053,e.lanes&=~n,Sn(e,a,n)):(Sa&&s&&Gf(a),a.flags|=1,Cr(e,a,r,n),a.child)}function Xx(e,a,r,s,n){if($r(r)){var o=!0;Gu(a)}else o=!1;if(tl(a,n),a.stateNode===null)Au(e,a),V1(a,r,s),$p(a,r,s,n),s=!0;else if(e===null){var i=a.stateNode,c=a.memoizedProps;i.props=c;var d=i.context,p=r.contextType;typeof p=="object"&&p!==null?p=fs(p):(p=$r(r)?Zo:jr.current,p=dl(a,p));var h=r.getDerivedStateFromProps,x=typeof h=="function"||typeof i.getSnapshotBeforeUpdate=="function";x||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(c!==s||d!==p)&&Hx(a,i,s,p),Yn=!1;var b=a.memoizedState;i.state=b,Ku(a,s,i,n),d=a.memoizedState,c!==s||b!==d||zr.current||Yn?(typeof h=="function"&&(zp(a,r,h,s),d=a.memoizedState),(c=Yn||Vx(a,r,c,s,b,d,p))?(x||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount()),typeof i.componentDidMount=="function"&&(a.flags|=4194308)):(typeof i.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=s,a.memoizedState=d),i.props=s,i.state=d,i.context=p,s=c):(typeof i.componentDidMount=="function"&&(a.flags|=4194308),s=!1)}else{i=a.stateNode,w1(e,a),c=a.memoizedProps,p=a.type===a.elementType?c:_s(a.type,c),i.props=p,x=a.pendingProps,b=i.context,d=r.contextType,typeof d=="object"&&d!==null?d=fs(d):(d=$r(r)?Zo:jr.current,d=dl(a,d));var g=r.getDerivedStateFromProps;(h=typeof g=="function"||typeof i.getSnapshotBeforeUpdate=="function")||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(c!==x||b!==d)&&Hx(a,i,s,d),Yn=!1,b=a.memoizedState,i.state=b,Ku(a,s,i,n);var w=a.memoizedState;c!==x||b!==w||zr.current||Yn?(typeof g=="function"&&(zp(a,r,g,s),w=a.memoizedState),(p=Yn||Vx(a,r,p,s,b,w,d)||!1)?(h||typeof i.UNSAFE_componentWillUpdate!="function"&&typeof i.componentWillUpdate!="function"||(typeof i.componentWillUpdate=="function"&&i.componentWillUpdate(s,w,d),typeof i.UNSAFE_componentWillUpdate=="function"&&i.UNSAFE_componentWillUpdate(s,w,d)),typeof i.componentDidUpdate=="function"&&(a.flags|=4),typeof i.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof i.componentDidUpdate!="function"||c===e.memoizedProps&&b===e.memoizedState||(a.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||c===e.memoizedProps&&b===e.memoizedState||(a.flags|=1024),a.memoizedProps=s,a.memoizedState=w),i.props=s,i.state=w,i.context=d,s=p):(typeof i.componentDidUpdate!="function"||c===e.memoizedProps&&b===e.memoizedState||(a.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||c===e.memoizedProps&&b===e.memoizedState||(a.flags|=1024),s=!1)}return Vp(e,a,r,s,o,n)}function Vp(e,a,r,s,n,o){Q1(e,a);var i=(a.flags&128)!==0;if(!s&&!i)return n&&Mx(a,r,!1),Sn(e,a,o);s=a.stateNode,hj.current=a;var c=i&&typeof r.getDerivedStateFromError!="function"?null:s.render();return a.flags|=1,e!==null&&i?(a.child=ml(a,e.child,null,o),a.child=ml(a,null,c,o)):Cr(e,a,c,o),a.memoizedState=s.state,n&&Mx(a,r,!0),a.child}function Y1(e){var a=e.stateNode;a.pendingContext?Tx(e,a.pendingContext,a.pendingContext!==a.context):a.context&&Tx(e,a.context,!1),t0(e,a.containerInfo)}function Kx(e,a,r,s,n){return ul(),Qf(n),a.flags|=256,Cr(e,a,r,s),a.child}var Hp={dehydrated:null,treeContext:null,retryLane:0};function Wp(e){return{baseLanes:e,cachePool:null,transitions:null}}function X1(e,a,r){var s=a.pendingProps,n=Ca.current,o=!1,i=(a.flags&128)!==0,c;if((c=i)||(c=e!==null&&e.memoizedState===null?!1:(n&2)!==0),c?(o=!0,a.flags&=-129):(e===null||e.memoizedState!==null)&&(n|=1),fa(Ca,n&1),e===null)return Rp(a),e=a.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(a.mode&1?e.data==="$!"?a.lanes=8:a.lanes=1073741824:a.lanes=1,null):(i=s.children,e=s.fallback,o?(s=a.mode,o=a.child,i={mode:"hidden",children:i},!(s&1)&&o!==null?(o.childLanes=0,o.pendingProps=i):o=Sm(i,s,0,null),e=Yo(e,s,r,null),o.return=a,e.return=a,o.sibling=e,a.child=o,a.child.memoizedState=Wp(r),a.memoizedState=Hp,e):c0(a,i));if(n=e.memoizedState,n!==null&&(c=n.dehydrated,c!==null))return pj(e,a,i,s,c,n,r);if(o){o=s.fallback,i=a.mode,n=e.child,c=n.sibling;var d={mode:"hidden",children:s.children};return!(i&1)&&a.child!==n?(s=a.child,s.childLanes=0,s.pendingProps=d,a.deletions=null):(s=ho(n,d),s.subtreeFlags=n.subtreeFlags&14680064),c!==null?o=ho(c,o):(o=Yo(o,i,r,null),o.flags|=2),o.return=a,s.return=a,s.sibling=o,a.child=s,s=o,o=a.child,i=e.child.memoizedState,i=i===null?Wp(r):{baseLanes:i.baseLanes|r,cachePool:null,transitions:i.transitions},o.memoizedState=i,o.childLanes=e.childLanes&~r,a.memoizedState=Hp,s}return o=e.child,e=o.sibling,s=ho(o,{mode:"visible",children:s.children}),!(a.mode&1)&&(s.lanes=r),s.return=a,s.sibling=null,e!==null&&(r=a.deletions,r===null?(a.deletions=[e],a.flags|=16):r.push(e)),a.child=s,a.memoizedState=null,s}function c0(e,a){return a=Sm({mode:"visible",children:a},e.mode,0,null),a.return=e,e.child=a}function su(e,a,r,s){return s!==null&&Qf(s),ml(a,e.child,null,r),e=c0(a,a.pendingProps.children),e.flags|=2,a.memoizedState=null,e}function pj(e,a,r,s,n,o,i){if(r)return a.flags&256?(a.flags&=-257,s=$h(Error(mt(422))),su(e,a,i,s)):a.memoizedState!==null?(a.child=e.child,a.flags|=128,null):(o=s.fallback,n=a.mode,s=Sm({mode:"visible",children:s.children},n,0,null),o=Yo(o,n,i,null),o.flags|=2,s.return=a,o.return=a,s.sibling=o,a.child=s,a.mode&1&&ml(a,e.child,null,i),a.child.memoizedState=Wp(i),a.memoizedState=Hp,o);if(!(a.mode&1))return su(e,a,i,null);if(n.data==="$!"){if(s=n.nextSibling&&n.nextSibling.dataset,s)var c=s.dgst;return s=c,o=Error(mt(419)),s=$h(o,s,void 0),su(e,a,i,s)}if(c=(i&e.childLanes)!==0,Rr||c){if(s=rr,s!==null){switch(i&-i){case 4:n=2;break;case 16:n=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:n=32;break;case 536870912:n=268435456;break;default:n=0}n=n&(s.suspendedLanes|i)?0:n,n!==0&&n!==o.retryLane&&(o.retryLane=n,wn(e,n),Ds(s,e,n,-1))}return f0(),s=$h(Error(mt(421))),su(e,a,i,s)}return n.data==="$?"?(a.flags|=128,a.child=e.child,a=Aj.bind(null,e),n._reactRetry=a,null):(e=o.treeContext,Yr=lo(n.nextSibling),Kr=a,Sa=!0,Ls=null,e!==null&&(ds[us++]=vn,ds[us++]=bn,ds[us++]=ei,vn=e.id,bn=e.overflow,ei=a),a=c0(a,s.children),a.flags|=4096,a)}function Zx(e,a,r){e.lanes|=a;var s=e.alternate;s!==null&&(s.lanes|=a),qp(e.return,a,r)}function Bh(e,a,r,s,n){var o=e.memoizedState;o===null?e.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:s,tail:r,tailMode:n}:(o.isBackwards=a,o.rendering=null,o.renderingStartTime=0,o.last=s,o.tail=r,o.tailMode=n)}function K1(e,a,r){var s=a.pendingProps,n=s.revealOrder,o=s.tail;if(Cr(e,a,s.children,r),s=Ca.current,s&2)s=s&1|2,a.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=a.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Zx(e,r,a);else if(e.tag===19)Zx(e,r,a);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===a)break e;for(;e.sibling===null;){if(e.return===null||e.return===a)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}s&=1}if(fa(Ca,s),!(a.mode&1))a.memoizedState=null;else switch(n){case"forwards":for(r=a.child,n=null;r!==null;)e=r.alternate,e!==null&&Zu(e)===null&&(n=r),r=r.sibling;r=n,r===null?(n=a.child,a.child=null):(n=r.sibling,r.sibling=null),Bh(a,!1,n,r,o);break;case"backwards":for(r=null,n=a.child,a.child=null;n!==null;){if(e=n.alternate,e!==null&&Zu(e)===null){a.child=n;break}e=n.sibling,n.sibling=r,r=n,n=e}Bh(a,!0,r,null,o);break;case"together":Bh(a,!1,null,null,void 0);break;default:a.memoizedState=null}return a.child}function Au(e,a){!(a.mode&1)&&e!==null&&(e.alternate=null,a.alternate=null,a.flags|=2)}function Sn(e,a,r){if(e!==null&&(a.dependencies=e.dependencies),ai|=a.lanes,!(r&a.childLanes))return null;if(e!==null&&a.child!==e.child)throw Error(mt(153));if(a.child!==null){for(e=a.child,r=ho(e,e.pendingProps),a.child=r,r.return=a;e.sibling!==null;)e=e.sibling,r=r.sibling=ho(e,e.pendingProps),r.return=a;r.sibling=null}return a.child}function fj(e,a,r){switch(a.tag){case 3:Y1(a),ul();break;case 5:S1(a);break;case 1:$r(a.type)&&Gu(a);break;case 4:t0(a,a.stateNode.containerInfo);break;case 10:var s=a.type._context,n=a.memoizedProps.value;fa(Yu,s._currentValue),s._currentValue=n;break;case 13:if(s=a.memoizedState,s!==null)return s.dehydrated!==null?(fa(Ca,Ca.current&1),a.flags|=128,null):r&a.child.childLanes?X1(e,a,r):(fa(Ca,Ca.current&1),e=Sn(e,a,r),e!==null?e.sibling:null);fa(Ca,Ca.current&1);break;case 19:if(s=(r&a.childLanes)!==0,e.flags&128){if(s)return K1(e,a,r);a.flags|=128}if(n=a.memoizedState,n!==null&&(n.rendering=null,n.tail=null,n.lastEffect=null),fa(Ca,Ca.current),s)break;return null;case 22:case 23:return a.lanes=0,J1(e,a,r)}return Sn(e,a,r)}var Z1,Gp,e2,t2;Z1=function(e,a){for(var r=a.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===a)break;for(;r.sibling===null;){if(r.return===null||r.return===a)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Gp=function(){};e2=function(e,a,r,s){var n=e.memoizedProps;if(n!==s){e=a.stateNode,Jo(Ys.current);var o=null;switch(r){case"input":n=fp(e,n),s=fp(e,s),o=[];break;case"select":n=_a({},n,{value:void 0}),s=_a({},s,{value:void 0}),o=[];break;case"textarea":n=vp(e,n),s=vp(e,s),o=[];break;default:typeof n.onClick!="function"&&typeof s.onClick=="function"&&(e.onclick=Hu)}yp(r,s);var i;r=null;for(p in n)if(!s.hasOwnProperty(p)&&n.hasOwnProperty(p)&&n[p]!=null)if(p==="style"){var c=n[p];for(i in c)c.hasOwnProperty(i)&&(r||(r={}),r[i]="")}else p!=="dangerouslySetInnerHTML"&&p!=="children"&&p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&p!=="autoFocus"&&(Ec.hasOwnProperty(p)?o||(o=[]):(o=o||[]).push(p,null));for(p in s){var d=s[p];if(c=n!=null?n[p]:void 0,s.hasOwnProperty(p)&&d!==c&&(d!=null||c!=null))if(p==="style")if(c){for(i in c)!c.hasOwnProperty(i)||d&&d.hasOwnProperty(i)||(r||(r={}),r[i]="");for(i in d)d.hasOwnProperty(i)&&c[i]!==d[i]&&(r||(r={}),r[i]=d[i])}else r||(o||(o=[]),o.push(p,r)),r=d;else p==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,c=c?c.__html:void 0,d!=null&&c!==d&&(o=o||[]).push(p,d)):p==="children"?typeof d!="string"&&typeof d!="number"||(o=o||[]).push(p,""+d):p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&(Ec.hasOwnProperty(p)?(d!=null&&p==="onScroll"&&ga("scroll",e),o||c===d||(o=[])):(o=o||[]).push(p,d))}r&&(o=o||[]).push("style",r);var p=o;(a.updateQueue=p)&&(a.flags|=4)}};t2=function(e,a,r,s){r!==s&&(a.flags|=4)};function cc(e,a){if(!Sa)switch(e.tailMode){case"hidden":a=e.tail;for(var r=null;a!==null;)a.alternate!==null&&(r=a),a=a.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var s=null;r!==null;)r.alternate!==null&&(s=r),r=r.sibling;s===null?a||e.tail===null?e.tail=null:e.tail.sibling=null:s.sibling=null}}function pr(e){var a=e.alternate!==null&&e.alternate.child===e.child,r=0,s=0;if(a)for(var n=e.child;n!==null;)r|=n.lanes|n.childLanes,s|=n.subtreeFlags&14680064,s|=n.flags&14680064,n.return=e,n=n.sibling;else for(n=e.child;n!==null;)r|=n.lanes|n.childLanes,s|=n.subtreeFlags,s|=n.flags,n.return=e,n=n.sibling;return e.subtreeFlags|=s,e.childLanes=r,a}function xj(e,a,r){var s=a.pendingProps;switch(Jf(a),a.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return pr(a),null;case 1:return $r(a.type)&&Wu(),pr(a),null;case 3:return s=a.stateNode,hl(),ba(zr),ba(jr),r0(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(e===null||e.child===null)&&(au(a)?a.flags|=4:e===null||e.memoizedState.isDehydrated&&!(a.flags&256)||(a.flags|=1024,Ls!==null&&(tf(Ls),Ls=null))),Gp(e,a),pr(a),null;case 5:a0(a);var n=Jo($c.current);if(r=a.type,e!==null&&a.stateNode!=null)e2(e,a,r,s,n),e.ref!==a.ref&&(a.flags|=512,a.flags|=2097152);else{if(!s){if(a.stateNode===null)throw Error(mt(166));return pr(a),null}if(e=Jo(Ys.current),au(a)){s=a.stateNode,r=a.type;var o=a.memoizedProps;switch(s[Ws]=a,s[qc]=o,e=(a.mode&1)!==0,r){case"dialog":ga("cancel",s),ga("close",s);break;case"iframe":case"object":case"embed":ga("load",s);break;case"video":case"audio":for(n=0;n<vc.length;n++)ga(vc[n],s);break;case"source":ga("error",s);break;case"img":case"image":case"link":ga("error",s),ga("load",s);break;case"details":ga("toggle",s);break;case"input":lx(s,o),ga("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!o.multiple},ga("invalid",s);break;case"textarea":dx(s,o),ga("invalid",s)}yp(r,o),n=null;for(var i in o)if(o.hasOwnProperty(i)){var c=o[i];i==="children"?typeof c=="string"?s.textContent!==c&&(o.suppressHydrationWarning!==!0&&tu(s.textContent,c,e),n=["children",c]):typeof c=="number"&&s.textContent!==""+c&&(o.suppressHydrationWarning!==!0&&tu(s.textContent,c,e),n=["children",""+c]):Ec.hasOwnProperty(i)&&c!=null&&i==="onScroll"&&ga("scroll",s)}switch(r){case"input":Gd(s),cx(s,o,!0);break;case"textarea":Gd(s),ux(s);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(s.onclick=Hu)}s=n,a.updateQueue=s,s!==null&&(a.flags|=4)}else{i=n.nodeType===9?n:n.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Ev(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=i.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof s.is=="string"?e=i.createElement(r,{is:s.is}):(e=i.createElement(r),r==="select"&&(i=e,s.multiple?i.multiple=!0:s.size&&(i.size=s.size))):e=i.createElementNS(e,r),e[Ws]=a,e[qc]=s,Z1(e,a,!1,!1),a.stateNode=e;e:{switch(i=jp(r,s),r){case"dialog":ga("cancel",e),ga("close",e),n=s;break;case"iframe":case"object":case"embed":ga("load",e),n=s;break;case"video":case"audio":for(n=0;n<vc.length;n++)ga(vc[n],e);n=s;break;case"source":ga("error",e),n=s;break;case"img":case"image":case"link":ga("error",e),ga("load",e),n=s;break;case"details":ga("toggle",e),n=s;break;case"input":lx(e,s),n=fp(e,s),ga("invalid",e);break;case"option":n=s;break;case"select":e._wrapperState={wasMultiple:!!s.multiple},n=_a({},s,{value:void 0}),ga("invalid",e);break;case"textarea":dx(e,s),n=vp(e,s),ga("invalid",e);break;default:n=s}yp(r,n),c=n;for(o in c)if(c.hasOwnProperty(o)){var d=c[o];o==="style"?Iv(e,d):o==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,d!=null&&Pv(e,d)):o==="children"?typeof d=="string"?(r!=="textarea"||d!=="")&&Pc(e,d):typeof d=="number"&&Pc(e,""+d):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(Ec.hasOwnProperty(o)?d!=null&&o==="onScroll"&&ga("scroll",e):d!=null&&Df(e,o,d,i))}switch(r){case"input":Gd(e),cx(e,s,!1);break;case"textarea":Gd(e),ux(e);break;case"option":s.value!=null&&e.setAttribute("value",""+go(s.value));break;case"select":e.multiple=!!s.multiple,o=s.value,o!=null?Xi(e,!!s.multiple,o,!1):s.defaultValue!=null&&Xi(e,!!s.multiple,s.defaultValue,!0);break;default:typeof n.onClick=="function"&&(e.onclick=Hu)}switch(r){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(a.flags|=4)}a.ref!==null&&(a.flags|=512,a.flags|=2097152)}return pr(a),null;case 6:if(e&&a.stateNode!=null)t2(e,a,e.memoizedProps,s);else{if(typeof s!="string"&&a.stateNode===null)throw Error(mt(166));if(r=Jo($c.current),Jo(Ys.current),au(a)){if(s=a.stateNode,r=a.memoizedProps,s[Ws]=a,(o=s.nodeValue!==r)&&(e=Kr,e!==null))switch(e.tag){case 3:tu(s.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&tu(s.nodeValue,r,(e.mode&1)!==0)}o&&(a.flags|=4)}else s=(r.nodeType===9?r:r.ownerDocument).createTextNode(s),s[Ws]=a,a.stateNode=s}return pr(a),null;case 13:if(ba(Ca),s=a.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Sa&&Yr!==null&&a.mode&1&&!(a.flags&128))b1(),ul(),a.flags|=98560,o=!1;else if(o=au(a),s!==null&&s.dehydrated!==null){if(e===null){if(!o)throw Error(mt(318));if(o=a.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(mt(317));o[Ws]=a}else ul(),!(a.flags&128)&&(a.memoizedState=null),a.flags|=4;pr(a),o=!1}else Ls!==null&&(tf(Ls),Ls=null),o=!0;if(!o)return a.flags&65536?a:null}return a.flags&128?(a.lanes=r,a):(s=s!==null,s!==(e!==null&&e.memoizedState!==null)&&s&&(a.child.flags|=8192,a.mode&1&&(e===null||Ca.current&1?Ya===0&&(Ya=3):f0())),a.updateQueue!==null&&(a.flags|=4),pr(a),null);case 4:return hl(),Gp(e,a),e===null&&Fc(a.stateNode.containerInfo),pr(a),null;case 10:return Kf(a.type._context),pr(a),null;case 17:return $r(a.type)&&Wu(),pr(a),null;case 19:if(ba(Ca),o=a.memoizedState,o===null)return pr(a),null;if(s=(a.flags&128)!==0,i=o.rendering,i===null)if(s)cc(o,!1);else{if(Ya!==0||e!==null&&e.flags&128)for(e=a.child;e!==null;){if(i=Zu(e),i!==null){for(a.flags|=128,cc(o,!1),s=i.updateQueue,s!==null&&(a.updateQueue=s,a.flags|=4),a.subtreeFlags=0,s=r,r=a.child;r!==null;)o=r,e=s,o.flags&=14680066,i=o.alternate,i===null?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=i.childLanes,o.lanes=i.lanes,o.child=i.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=i.memoizedProps,o.memoizedState=i.memoizedState,o.updateQueue=i.updateQueue,o.type=i.type,e=i.dependencies,o.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return fa(Ca,Ca.current&1|2),a.child}e=e.sibling}o.tail!==null&&Ta()>fl&&(a.flags|=128,s=!0,cc(o,!1),a.lanes=4194304)}else{if(!s)if(e=Zu(i),e!==null){if(a.flags|=128,s=!0,r=e.updateQueue,r!==null&&(a.updateQueue=r,a.flags|=4),cc(o,!0),o.tail===null&&o.tailMode==="hidden"&&!i.alternate&&!Sa)return pr(a),null}else 2*Ta()-o.renderingStartTime>fl&&r!==1073741824&&(a.flags|=128,s=!0,cc(o,!1),a.lanes=4194304);o.isBackwards?(i.sibling=a.child,a.child=i):(r=o.last,r!==null?r.sibling=i:a.child=i,o.last=i)}return o.tail!==null?(a=o.tail,o.rendering=a,o.tail=a.sibling,o.renderingStartTime=Ta(),a.sibling=null,r=Ca.current,fa(Ca,s?r&1|2:r&1),a):(pr(a),null);case 22:case 23:return p0(),s=a.memoizedState!==null,e!==null&&e.memoizedState!==null!==s&&(a.flags|=8192),s&&a.mode&1?Jr&1073741824&&(pr(a),a.subtreeFlags&6&&(a.flags|=8192)):pr(a),null;case 24:return null;case 25:return null}throw Error(mt(156,a.tag))}function gj(e,a){switch(Jf(a),a.tag){case 1:return $r(a.type)&&Wu(),e=a.flags,e&65536?(a.flags=e&-65537|128,a):null;case 3:return hl(),ba(zr),ba(jr),r0(),e=a.flags,e&65536&&!(e&128)?(a.flags=e&-65537|128,a):null;case 5:return a0(a),null;case 13:if(ba(Ca),e=a.memoizedState,e!==null&&e.dehydrated!==null){if(a.alternate===null)throw Error(mt(340));ul()}return e=a.flags,e&65536?(a.flags=e&-65537|128,a):null;case 19:return ba(Ca),null;case 4:return hl(),null;case 10:return Kf(a.type._context),null;case 22:case 23:return p0(),null;case 24:return null;default:return null}}var nu=!1,br=!1,vj=typeof WeakSet=="function"?WeakSet:Set,Et=null;function Gi(e,a){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(s){Ia(e,a,s)}else r.current=null}function Jp(e,a,r){try{r()}catch(s){Ia(e,a,s)}}var eg=!1;function bj(e,a){if(Lp=Bu,e=o1(),Wf(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var s=r.getSelection&&r.getSelection();if(s&&s.rangeCount!==0){r=s.anchorNode;var n=s.anchorOffset,o=s.focusNode;s=s.focusOffset;try{r.nodeType,o.nodeType}catch{r=null;break e}var i=0,c=-1,d=-1,p=0,h=0,x=e,b=null;t:for(;;){for(var g;x!==r||n!==0&&x.nodeType!==3||(c=i+n),x!==o||s!==0&&x.nodeType!==3||(d=i+s),x.nodeType===3&&(i+=x.nodeValue.length),(g=x.firstChild)!==null;)b=x,x=g;for(;;){if(x===e)break t;if(b===r&&++p===n&&(c=i),b===o&&++h===s&&(d=i),(g=x.nextSibling)!==null)break;x=b,b=x.parentNode}x=g}r=c===-1||d===-1?null:{start:c,end:d}}else r=null}r=r||{start:0,end:0}}else r=null;for(Ip={focusedElem:e,selectionRange:r},Bu=!1,Et=a;Et!==null;)if(a=Et,e=a.child,(a.subtreeFlags&1028)!==0&&e!==null)e.return=a,Et=e;else for(;Et!==null;){a=Et;try{var w=a.alternate;if(a.flags&1024)switch(a.tag){case 0:case 11:case 15:break;case 1:if(w!==null){var _=w.memoizedProps,O=w.memoizedState,y=a.stateNode,v=y.getSnapshotBeforeUpdate(a.elementType===a.type?_:_s(a.type,_),O);y.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var C=a.stateNode.containerInfo;C.nodeType===1?C.textContent="":C.nodeType===9&&C.documentElement&&C.removeChild(C.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(mt(163))}}catch(W){Ia(a,a.return,W)}if(e=a.sibling,e!==null){e.return=a.return,Et=e;break}Et=a.return}return w=eg,eg=!1,w}function kc(e,a,r){var s=a.updateQueue;if(s=s!==null?s.lastEffect:null,s!==null){var n=s=s.next;do{if((n.tag&e)===e){var o=n.destroy;n.destroy=void 0,o!==void 0&&Jp(a,r,o)}n=n.next}while(n!==s)}}function Nm(e,a){if(a=a.updateQueue,a=a!==null?a.lastEffect:null,a!==null){var r=a=a.next;do{if((r.tag&e)===e){var s=r.create;r.destroy=s()}r=r.next}while(r!==a)}}function Qp(e){var a=e.ref;if(a!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof a=="function"?a(e):a.current=e}}function a2(e){var a=e.alternate;a!==null&&(e.alternate=null,a2(a)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(a=e.stateNode,a!==null&&(delete a[Ws],delete a[qc],delete a[Tp],delete a[tj],delete a[aj])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function r2(e){return e.tag===5||e.tag===3||e.tag===4}function tg(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||r2(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Yp(e,a,r){var s=e.tag;if(s===5||s===6)e=e.stateNode,a?r.nodeType===8?r.parentNode.insertBefore(e,a):r.insertBefore(e,a):(r.nodeType===8?(a=r.parentNode,a.insertBefore(e,r)):(a=r,a.appendChild(e)),r=r._reactRootContainer,r!=null||a.onclick!==null||(a.onclick=Hu));else if(s!==4&&(e=e.child,e!==null))for(Yp(e,a,r),e=e.sibling;e!==null;)Yp(e,a,r),e=e.sibling}function Xp(e,a,r){var s=e.tag;if(s===5||s===6)e=e.stateNode,a?r.insertBefore(e,a):r.appendChild(e);else if(s!==4&&(e=e.child,e!==null))for(Xp(e,a,r),e=e.sibling;e!==null;)Xp(e,a,r),e=e.sibling}var ir=null,Ps=!1;function Bn(e,a,r){for(r=r.child;r!==null;)s2(e,a,r),r=r.sibling}function s2(e,a,r){if(Qs&&typeof Qs.onCommitFiberUnmount=="function")try{Qs.onCommitFiberUnmount(pm,r)}catch{}switch(r.tag){case 5:br||Gi(r,a);case 6:var s=ir,n=Ps;ir=null,Bn(e,a,r),ir=s,Ps=n,ir!==null&&(Ps?(e=ir,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):ir.removeChild(r.stateNode));break;case 18:ir!==null&&(Ps?(e=ir,r=r.stateNode,e.nodeType===8?Th(e.parentNode,r):e.nodeType===1&&Th(e,r),Oc(e)):Th(ir,r.stateNode));break;case 4:s=ir,n=Ps,ir=r.stateNode.containerInfo,Ps=!0,Bn(e,a,r),ir=s,Ps=n;break;case 0:case 11:case 14:case 15:if(!br&&(s=r.updateQueue,s!==null&&(s=s.lastEffect,s!==null))){n=s=s.next;do{var o=n,i=o.destroy;o=o.tag,i!==void 0&&(o&2||o&4)&&Jp(r,a,i),n=n.next}while(n!==s)}Bn(e,a,r);break;case 1:if(!br&&(Gi(r,a),s=r.stateNode,typeof s.componentWillUnmount=="function"))try{s.props=r.memoizedProps,s.state=r.memoizedState,s.componentWillUnmount()}catch(c){Ia(r,a,c)}Bn(e,a,r);break;case 21:Bn(e,a,r);break;case 22:r.mode&1?(br=(s=br)||r.memoizedState!==null,Bn(e,a,r),br=s):Bn(e,a,r);break;default:Bn(e,a,r)}}function ag(e){var a=e.updateQueue;if(a!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new vj),a.forEach(function(s){var n=_j.bind(null,e,s);r.has(s)||(r.add(s),s.then(n,n))})}}function Ss(e,a){var r=a.deletions;if(r!==null)for(var s=0;s<r.length;s++){var n=r[s];try{var o=e,i=a,c=i;e:for(;c!==null;){switch(c.tag){case 5:ir=c.stateNode,Ps=!1;break e;case 3:ir=c.stateNode.containerInfo,Ps=!0;break e;case 4:ir=c.stateNode.containerInfo,Ps=!0;break e}c=c.return}if(ir===null)throw Error(mt(160));s2(o,i,n),ir=null,Ps=!1;var d=n.alternate;d!==null&&(d.return=null),n.return=null}catch(p){Ia(n,a,p)}}if(a.subtreeFlags&12854)for(a=a.child;a!==null;)n2(a,e),a=a.sibling}function n2(e,a){var r=e.alternate,s=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Ss(a,e),Us(e),s&4){try{kc(3,e,e.return),Nm(3,e)}catch(_){Ia(e,e.return,_)}try{kc(5,e,e.return)}catch(_){Ia(e,e.return,_)}}break;case 1:Ss(a,e),Us(e),s&512&&r!==null&&Gi(r,r.return);break;case 5:if(Ss(a,e),Us(e),s&512&&r!==null&&Gi(r,r.return),e.flags&32){var n=e.stateNode;try{Pc(n,"")}catch(_){Ia(e,e.return,_)}}if(s&4&&(n=e.stateNode,n!=null)){var o=e.memoizedProps,i=r!==null?r.memoizedProps:o,c=e.type,d=e.updateQueue;if(e.updateQueue=null,d!==null)try{c==="input"&&o.type==="radio"&&o.name!=null&&Av(n,o),jp(c,i);var p=jp(c,o);for(i=0;i<d.length;i+=2){var h=d[i],x=d[i+1];h==="style"?Iv(n,x):h==="dangerouslySetInnerHTML"?Pv(n,x):h==="children"?Pc(n,x):Df(n,h,x,p)}switch(c){case"input":xp(n,o);break;case"textarea":_v(n,o);break;case"select":var b=n._wrapperState.wasMultiple;n._wrapperState.wasMultiple=!!o.multiple;var g=o.value;g!=null?Xi(n,!!o.multiple,g,!1):b!==!!o.multiple&&(o.defaultValue!=null?Xi(n,!!o.multiple,o.defaultValue,!0):Xi(n,!!o.multiple,o.multiple?[]:"",!1))}n[qc]=o}catch(_){Ia(e,e.return,_)}}break;case 6:if(Ss(a,e),Us(e),s&4){if(e.stateNode===null)throw Error(mt(162));n=e.stateNode,o=e.memoizedProps;try{n.nodeValue=o}catch(_){Ia(e,e.return,_)}}break;case 3:if(Ss(a,e),Us(e),s&4&&r!==null&&r.memoizedState.isDehydrated)try{Oc(a.containerInfo)}catch(_){Ia(e,e.return,_)}break;case 4:Ss(a,e),Us(e);break;case 13:Ss(a,e),Us(e),n=e.child,n.flags&8192&&(o=n.memoizedState!==null,n.stateNode.isHidden=o,!o||n.alternate!==null&&n.alternate.memoizedState!==null||(m0=Ta())),s&4&&ag(e);break;case 22:if(h=r!==null&&r.memoizedState!==null,e.mode&1?(br=(p=br)||h,Ss(a,e),br=p):Ss(a,e),Us(e),s&8192){if(p=e.memoizedState!==null,(e.stateNode.isHidden=p)&&!h&&e.mode&1)for(Et=e,h=e.child;h!==null;){for(x=Et=h;Et!==null;){switch(b=Et,g=b.child,b.tag){case 0:case 11:case 14:case 15:kc(4,b,b.return);break;case 1:Gi(b,b.return);var w=b.stateNode;if(typeof w.componentWillUnmount=="function"){s=b,r=b.return;try{a=s,w.props=a.memoizedProps,w.state=a.memoizedState,w.componentWillUnmount()}catch(_){Ia(s,r,_)}}break;case 5:Gi(b,b.return);break;case 22:if(b.memoizedState!==null){sg(x);continue}}g!==null?(g.return=b,Et=g):sg(x)}h=h.sibling}e:for(h=null,x=e;;){if(x.tag===5){if(h===null){h=x;try{n=x.stateNode,p?(o=n.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(c=x.stateNode,d=x.memoizedProps.style,i=d!=null&&d.hasOwnProperty("display")?d.display:null,c.style.display=Lv("display",i))}catch(_){Ia(e,e.return,_)}}}else if(x.tag===6){if(h===null)try{x.stateNode.nodeValue=p?"":x.memoizedProps}catch(_){Ia(e,e.return,_)}}else if((x.tag!==22&&x.tag!==23||x.memoizedState===null||x===e)&&x.child!==null){x.child.return=x,x=x.child;continue}if(x===e)break e;for(;x.sibling===null;){if(x.return===null||x.return===e)break e;h===x&&(h=null),x=x.return}h===x&&(h=null),x.sibling.return=x.return,x=x.sibling}}break;case 19:Ss(a,e),Us(e),s&4&&ag(e);break;case 21:break;default:Ss(a,e),Us(e)}}function Us(e){var a=e.flags;if(a&2){try{e:{for(var r=e.return;r!==null;){if(r2(r)){var s=r;break e}r=r.return}throw Error(mt(160))}switch(s.tag){case 5:var n=s.stateNode;s.flags&32&&(Pc(n,""),s.flags&=-33);var o=tg(e);Xp(e,o,n);break;case 3:case 4:var i=s.stateNode.containerInfo,c=tg(e);Yp(e,c,i);break;default:throw Error(mt(161))}}catch(d){Ia(e,e.return,d)}e.flags&=-3}a&4096&&(e.flags&=-4097)}function yj(e,a,r){Et=e,o2(e)}function o2(e,a,r){for(var s=(e.mode&1)!==0;Et!==null;){var n=Et,o=n.child;if(n.tag===22&&s){var i=n.memoizedState!==null||nu;if(!i){var c=n.alternate,d=c!==null&&c.memoizedState!==null||br;c=nu;var p=br;if(nu=i,(br=d)&&!p)for(Et=n;Et!==null;)i=Et,d=i.child,i.tag===22&&i.memoizedState!==null?ng(n):d!==null?(d.return=i,Et=d):ng(n);for(;o!==null;)Et=o,o2(o),o=o.sibling;Et=n,nu=c,br=p}rg(e)}else n.subtreeFlags&8772&&o!==null?(o.return=n,Et=o):rg(e)}}function rg(e){for(;Et!==null;){var a=Et;if(a.flags&8772){var r=a.alternate;try{if(a.flags&8772)switch(a.tag){case 0:case 11:case 15:br||Nm(5,a);break;case 1:var s=a.stateNode;if(a.flags&4&&!br)if(r===null)s.componentDidMount();else{var n=a.elementType===a.type?r.memoizedProps:_s(a.type,r.memoizedProps);s.componentDidUpdate(n,r.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var o=a.updateQueue;o!==null&&$x(a,o,s);break;case 3:var i=a.updateQueue;if(i!==null){if(r=null,a.child!==null)switch(a.child.tag){case 5:r=a.child.stateNode;break;case 1:r=a.child.stateNode}$x(a,i,r)}break;case 5:var c=a.stateNode;if(r===null&&a.flags&4){r=c;var d=a.memoizedProps;switch(a.type){case"button":case"input":case"select":case"textarea":d.autoFocus&&r.focus();break;case"img":d.src&&(r.src=d.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(a.memoizedState===null){var p=a.alternate;if(p!==null){var h=p.memoizedState;if(h!==null){var x=h.dehydrated;x!==null&&Oc(x)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(mt(163))}br||a.flags&512&&Qp(a)}catch(b){Ia(a,a.return,b)}}if(a===e){Et=null;break}if(r=a.sibling,r!==null){r.return=a.return,Et=r;break}Et=a.return}}function sg(e){for(;Et!==null;){var a=Et;if(a===e){Et=null;break}var r=a.sibling;if(r!==null){r.return=a.return,Et=r;break}Et=a.return}}function ng(e){for(;Et!==null;){var a=Et;try{switch(a.tag){case 0:case 11:case 15:var r=a.return;try{Nm(4,a)}catch(d){Ia(a,r,d)}break;case 1:var s=a.stateNode;if(typeof s.componentDidMount=="function"){var n=a.return;try{s.componentDidMount()}catch(d){Ia(a,n,d)}}var o=a.return;try{Qp(a)}catch(d){Ia(a,o,d)}break;case 5:var i=a.return;try{Qp(a)}catch(d){Ia(a,i,d)}}}catch(d){Ia(a,a.return,d)}if(a===e){Et=null;break}var c=a.sibling;if(c!==null){c.return=a.return,Et=c;break}Et=a.return}}var jj=Math.ceil,am=Cn.ReactCurrentDispatcher,d0=Cn.ReactCurrentOwner,hs=Cn.ReactCurrentBatchConfig,ta=0,rr=null,Ua=null,cr=0,Jr=0,Ji=So(0),Ya=0,Hc=null,ai=0,wm=0,u0=0,Cc=null,Fr=null,m0=0,fl=1/0,xn=null,rm=!1,Kp=null,uo=null,ou=!1,to=null,sm=0,Ac=0,Zp=null,_u=-1,Eu=0;function Ar(){return ta&6?Ta():_u!==-1?_u:_u=Ta()}function mo(e){return e.mode&1?ta&2&&cr!==0?cr&-cr:sj.transition!==null?(Eu===0&&(Eu=Vv()),Eu):(e=la,e!==0||(e=window.event,e=e===void 0?16:Xv(e.type)),e):1}function Ds(e,a,r,s){if(50<Ac)throw Ac=0,Zp=null,Error(mt(185));Kc(e,r,s),(!(ta&2)||e!==rr)&&(e===rr&&(!(ta&2)&&(wm|=r),Ya===4&&Kn(e,cr)),Br(e,s),r===1&&ta===0&&!(a.mode&1)&&(fl=Ta()+500,bm&&ko()))}function Br(e,a){var r=e.callbackNode;s5(e,a);var s=$u(e,e===rr?cr:0);if(s===0)r!==null&&px(r),e.callbackNode=null,e.callbackPriority=0;else if(a=s&-s,e.callbackPriority!==a){if(r!=null&&px(r),a===1)e.tag===0?rj(og.bind(null,e)):x1(og.bind(null,e)),Z5(function(){!(ta&6)&&ko()}),r=null;else{switch(Hv(s)){case 1:r=Rf;break;case 4:r=Bv;break;case 16:r=zu;break;case 536870912:r=Uv;break;default:r=zu}r=p2(r,i2.bind(null,e))}e.callbackPriority=a,e.callbackNode=r}}function i2(e,a){if(_u=-1,Eu=0,ta&6)throw Error(mt(327));var r=e.callbackNode;if(al()&&e.callbackNode!==r)return null;var s=$u(e,e===rr?cr:0);if(s===0)return null;if(s&30||s&e.expiredLanes||a)a=nm(e,s);else{a=s;var n=ta;ta|=2;var o=c2();(rr!==e||cr!==a)&&(xn=null,fl=Ta()+500,Qo(e,a));do try{Sj();break}catch(c){l2(e,c)}while(!0);Xf(),am.current=o,ta=n,Ua!==null?a=0:(rr=null,cr=0,a=Ya)}if(a!==0){if(a===2&&(n=Cp(e),n!==0&&(s=n,a=ef(e,n))),a===1)throw r=Hc,Qo(e,0),Kn(e,s),Br(e,Ta()),r;if(a===6)Kn(e,s);else{if(n=e.current.alternate,!(s&30)&&!Nj(n)&&(a=nm(e,s),a===2&&(o=Cp(e),o!==0&&(s=o,a=ef(e,o))),a===1))throw r=Hc,Qo(e,0),Kn(e,s),Br(e,Ta()),r;switch(e.finishedWork=n,e.finishedLanes=s,a){case 0:case 1:throw Error(mt(345));case 2:Uo(e,Fr,xn);break;case 3:if(Kn(e,s),(s&130023424)===s&&(a=m0+500-Ta(),10<a)){if($u(e,0)!==0)break;if(n=e.suspendedLanes,(n&s)!==s){Ar(),e.pingedLanes|=e.suspendedLanes&n;break}e.timeoutHandle=Op(Uo.bind(null,e,Fr,xn),a);break}Uo(e,Fr,xn);break;case 4:if(Kn(e,s),(s&4194240)===s)break;for(a=e.eventTimes,n=-1;0<s;){var i=31-Is(s);o=1<<i,i=a[i],i>n&&(n=i),s&=~o}if(s=n,s=Ta()-s,s=(120>s?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*jj(s/1960))-s,10<s){e.timeoutHandle=Op(Uo.bind(null,e,Fr,xn),s);break}Uo(e,Fr,xn);break;case 5:Uo(e,Fr,xn);break;default:throw Error(mt(329))}}}return Br(e,Ta()),e.callbackNode===r?i2.bind(null,e):null}function ef(e,a){var r=Cc;return e.current.memoizedState.isDehydrated&&(Qo(e,a).flags|=256),e=nm(e,a),e!==2&&(a=Fr,Fr=r,a!==null&&tf(a)),e}function tf(e){Fr===null?Fr=e:Fr.push.apply(Fr,e)}function Nj(e){for(var a=e;;){if(a.flags&16384){var r=a.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var s=0;s<r.length;s++){var n=r[s],o=n.getSnapshot;n=n.value;try{if(!Os(o(),n))return!1}catch{return!1}}}if(r=a.child,a.subtreeFlags&16384&&r!==null)r.return=a,a=r;else{if(a===e)break;for(;a.sibling===null;){if(a.return===null||a.return===e)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function Kn(e,a){for(a&=~u0,a&=~wm,e.suspendedLanes|=a,e.pingedLanes&=~a,e=e.expirationTimes;0<a;){var r=31-Is(a),s=1<<r;e[r]=-1,a&=~s}}function og(e){if(ta&6)throw Error(mt(327));al();var a=$u(e,0);if(!(a&1))return Br(e,Ta()),null;var r=nm(e,a);if(e.tag!==0&&r===2){var s=Cp(e);s!==0&&(a=s,r=ef(e,s))}if(r===1)throw r=Hc,Qo(e,0),Kn(e,a),Br(e,Ta()),r;if(r===6)throw Error(mt(345));return e.finishedWork=e.current.alternate,e.finishedLanes=a,Uo(e,Fr,xn),Br(e,Ta()),null}function h0(e,a){var r=ta;ta|=1;try{return e(a)}finally{ta=r,ta===0&&(fl=Ta()+500,bm&&ko())}}function ri(e){to!==null&&to.tag===0&&!(ta&6)&&al();var a=ta;ta|=1;var r=hs.transition,s=la;try{if(hs.transition=null,la=1,e)return e()}finally{la=s,hs.transition=r,ta=a,!(ta&6)&&ko()}}function p0(){Jr=Ji.current,ba(Ji)}function Qo(e,a){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,K5(r)),Ua!==null)for(r=Ua.return;r!==null;){var s=r;switch(Jf(s),s.tag){case 1:s=s.type.childContextTypes,s!=null&&Wu();break;case 3:hl(),ba(zr),ba(jr),r0();break;case 5:a0(s);break;case 4:hl();break;case 13:ba(Ca);break;case 19:ba(Ca);break;case 10:Kf(s.type._context);break;case 22:case 23:p0()}r=r.return}if(rr=e,Ua=e=ho(e.current,null),cr=Jr=a,Ya=0,Hc=null,u0=wm=ai=0,Fr=Cc=null,Go!==null){for(a=0;a<Go.length;a++)if(r=Go[a],s=r.interleaved,s!==null){r.interleaved=null;var n=s.next,o=r.pending;if(o!==null){var i=o.next;o.next=n,s.next=i}r.pending=s}Go=null}return e}function l2(e,a){do{var r=Ua;try{if(Xf(),ku.current=tm,em){for(var s=Aa.memoizedState;s!==null;){var n=s.queue;n!==null&&(n.pending=null),s=s.next}em=!1}if(ti=0,tr=Ja=Aa=null,Sc=!1,Bc=0,d0.current=null,r===null||r.return===null){Ya=1,Hc=a,Ua=null;break}e:{var o=e,i=r.return,c=r,d=a;if(a=cr,c.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){var p=d,h=c,x=h.tag;if(!(h.mode&1)&&(x===0||x===11||x===15)){var b=h.alternate;b?(h.updateQueue=b.updateQueue,h.memoizedState=b.memoizedState,h.lanes=b.lanes):(h.updateQueue=null,h.memoizedState=null)}var g=Gx(i);if(g!==null){g.flags&=-257,Jx(g,i,c,o,a),g.mode&1&&Wx(o,p,a),a=g,d=p;var w=a.updateQueue;if(w===null){var _=new Set;_.add(d),a.updateQueue=_}else w.add(d);break e}else{if(!(a&1)){Wx(o,p,a),f0();break e}d=Error(mt(426))}}else if(Sa&&c.mode&1){var O=Gx(i);if(O!==null){!(O.flags&65536)&&(O.flags|=256),Jx(O,i,c,o,a),Qf(pl(d,c));break e}}o=d=pl(d,c),Ya!==4&&(Ya=2),Cc===null?Cc=[o]:Cc.push(o),o=i;do{switch(o.tag){case 3:o.flags|=65536,a&=-a,o.lanes|=a;var y=H1(o,d,a);zx(o,y);break e;case 1:c=d;var v=o.type,C=o.stateNode;if(!(o.flags&128)&&(typeof v.getDerivedStateFromError=="function"||C!==null&&typeof C.componentDidCatch=="function"&&(uo===null||!uo.has(C)))){o.flags|=65536,a&=-a,o.lanes|=a;var W=W1(o,c,a);zx(o,W);break e}}o=o.return}while(o!==null)}u2(r)}catch(se){a=se,Ua===r&&r!==null&&(Ua=r=r.return);continue}break}while(!0)}function c2(){var e=am.current;return am.current=tm,e===null?tm:e}function f0(){(Ya===0||Ya===3||Ya===2)&&(Ya=4),rr===null||!(ai&268435455)&&!(wm&268435455)||Kn(rr,cr)}function nm(e,a){var r=ta;ta|=2;var s=c2();(rr!==e||cr!==a)&&(xn=null,Qo(e,a));do try{wj();break}catch(n){l2(e,n)}while(!0);if(Xf(),ta=r,am.current=s,Ua!==null)throw Error(mt(261));return rr=null,cr=0,Ya}function wj(){for(;Ua!==null;)d2(Ua)}function Sj(){for(;Ua!==null&&!Qy();)d2(Ua)}function d2(e){var a=h2(e.alternate,e,Jr);e.memoizedProps=e.pendingProps,a===null?u2(e):Ua=a,d0.current=null}function u2(e){var a=e;do{var r=a.alternate;if(e=a.return,a.flags&32768){if(r=gj(r,a),r!==null){r.flags&=32767,Ua=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Ya=6,Ua=null;return}}else if(r=xj(r,a,Jr),r!==null){Ua=r;return}if(a=a.sibling,a!==null){Ua=a;return}Ua=a=e}while(a!==null);Ya===0&&(Ya=5)}function Uo(e,a,r){var s=la,n=hs.transition;try{hs.transition=null,la=1,kj(e,a,r,s)}finally{hs.transition=n,la=s}return null}function kj(e,a,r,s){do al();while(to!==null);if(ta&6)throw Error(mt(327));r=e.finishedWork;var n=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(mt(177));e.callbackNode=null,e.callbackPriority=0;var o=r.lanes|r.childLanes;if(n5(e,o),e===rr&&(Ua=rr=null,cr=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||ou||(ou=!0,p2(zu,function(){return al(),null})),o=(r.flags&15990)!==0,r.subtreeFlags&15990||o){o=hs.transition,hs.transition=null;var i=la;la=1;var c=ta;ta|=4,d0.current=null,bj(e,r),n2(r,e),H5(Ip),Bu=!!Lp,Ip=Lp=null,e.current=r,yj(r),Yy(),ta=c,la=i,hs.transition=o}else e.current=r;if(ou&&(ou=!1,to=e,sm=n),o=e.pendingLanes,o===0&&(uo=null),Zy(r.stateNode),Br(e,Ta()),a!==null)for(s=e.onRecoverableError,r=0;r<a.length;r++)n=a[r],s(n.value,{componentStack:n.stack,digest:n.digest});if(rm)throw rm=!1,e=Kp,Kp=null,e;return sm&1&&e.tag!==0&&al(),o=e.pendingLanes,o&1?e===Zp?Ac++:(Ac=0,Zp=e):Ac=0,ko(),null}function al(){if(to!==null){var e=Hv(sm),a=hs.transition,r=la;try{if(hs.transition=null,la=16>e?16:e,to===null)var s=!1;else{if(e=to,to=null,sm=0,ta&6)throw Error(mt(331));var n=ta;for(ta|=4,Et=e.current;Et!==null;){var o=Et,i=o.child;if(Et.flags&16){var c=o.deletions;if(c!==null){for(var d=0;d<c.length;d++){var p=c[d];for(Et=p;Et!==null;){var h=Et;switch(h.tag){case 0:case 11:case 15:kc(8,h,o)}var x=h.child;if(x!==null)x.return=h,Et=x;else for(;Et!==null;){h=Et;var b=h.sibling,g=h.return;if(a2(h),h===p){Et=null;break}if(b!==null){b.return=g,Et=b;break}Et=g}}}var w=o.alternate;if(w!==null){var _=w.child;if(_!==null){w.child=null;do{var O=_.sibling;_.sibling=null,_=O}while(_!==null)}}Et=o}}if(o.subtreeFlags&2064&&i!==null)i.return=o,Et=i;else e:for(;Et!==null;){if(o=Et,o.flags&2048)switch(o.tag){case 0:case 11:case 15:kc(9,o,o.return)}var y=o.sibling;if(y!==null){y.return=o.return,Et=y;break e}Et=o.return}}var v=e.current;for(Et=v;Et!==null;){i=Et;var C=i.child;if(i.subtreeFlags&2064&&C!==null)C.return=i,Et=C;else e:for(i=v;Et!==null;){if(c=Et,c.flags&2048)try{switch(c.tag){case 0:case 11:case 15:Nm(9,c)}}catch(se){Ia(c,c.return,se)}if(c===i){Et=null;break e}var W=c.sibling;if(W!==null){W.return=c.return,Et=W;break e}Et=c.return}}if(ta=n,ko(),Qs&&typeof Qs.onPostCommitFiberRoot=="function")try{Qs.onPostCommitFiberRoot(pm,e)}catch{}s=!0}return s}finally{la=r,hs.transition=a}}return!1}function ig(e,a,r){a=pl(r,a),a=H1(e,a,1),e=co(e,a,1),a=Ar(),e!==null&&(Kc(e,1,a),Br(e,a))}function Ia(e,a,r){if(e.tag===3)ig(e,e,r);else for(;a!==null;){if(a.tag===3){ig(a,e,r);break}else if(a.tag===1){var s=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(uo===null||!uo.has(s))){e=pl(r,e),e=W1(a,e,1),a=co(a,e,1),e=Ar(),a!==null&&(Kc(a,1,e),Br(a,e));break}}a=a.return}}function Cj(e,a,r){var s=e.pingCache;s!==null&&s.delete(a),a=Ar(),e.pingedLanes|=e.suspendedLanes&r,rr===e&&(cr&r)===r&&(Ya===4||Ya===3&&(cr&130023424)===cr&&500>Ta()-m0?Qo(e,0):u0|=r),Br(e,a)}function m2(e,a){a===0&&(e.mode&1?(a=Yd,Yd<<=1,!(Yd&130023424)&&(Yd=4194304)):a=1);var r=Ar();e=wn(e,a),e!==null&&(Kc(e,a,r),Br(e,r))}function Aj(e){var a=e.memoizedState,r=0;a!==null&&(r=a.retryLane),m2(e,r)}function _j(e,a){var r=0;switch(e.tag){case 13:var s=e.stateNode,n=e.memoizedState;n!==null&&(r=n.retryLane);break;case 19:s=e.stateNode;break;default:throw Error(mt(314))}s!==null&&s.delete(a),m2(e,r)}var h2;h2=function(e,a,r){if(e!==null)if(e.memoizedProps!==a.pendingProps||zr.current)Rr=!0;else{if(!(e.lanes&r)&&!(a.flags&128))return Rr=!1,fj(e,a,r);Rr=!!(e.flags&131072)}else Rr=!1,Sa&&a.flags&1048576&&g1(a,Qu,a.index);switch(a.lanes=0,a.tag){case 2:var s=a.type;Au(e,a),e=a.pendingProps;var n=dl(a,jr.current);tl(a,r),n=n0(null,a,s,e,n,r);var o=o0();return a.flags|=1,typeof n=="object"&&n!==null&&typeof n.render=="function"&&n.$$typeof===void 0?(a.tag=1,a.memoizedState=null,a.updateQueue=null,$r(s)?(o=!0,Gu(a)):o=!1,a.memoizedState=n.state!==null&&n.state!==void 0?n.state:null,e0(a),n.updater=jm,a.stateNode=n,n._reactInternals=a,$p(a,s,e,r),a=Vp(null,a,s,!0,o,r)):(a.tag=0,Sa&&o&&Gf(a),Cr(null,a,n,r),a=a.child),a;case 16:s=a.elementType;e:{switch(Au(e,a),e=a.pendingProps,n=s._init,s=n(s._payload),a.type=s,n=a.tag=Pj(s),e=_s(s,e),n){case 0:a=Up(null,a,s,e,r);break e;case 1:a=Xx(null,a,s,e,r);break e;case 11:a=Qx(null,a,s,e,r);break e;case 14:a=Yx(null,a,s,_s(s.type,e),r);break e}throw Error(mt(306,s,""))}return a;case 0:return s=a.type,n=a.pendingProps,n=a.elementType===s?n:_s(s,n),Up(e,a,s,n,r);case 1:return s=a.type,n=a.pendingProps,n=a.elementType===s?n:_s(s,n),Xx(e,a,s,n,r);case 3:e:{if(Y1(a),e===null)throw Error(mt(387));s=a.pendingProps,o=a.memoizedState,n=o.element,w1(e,a),Ku(a,s,null,r);var i=a.memoizedState;if(s=i.element,o.isDehydrated)if(o={element:s,isDehydrated:!1,cache:i.cache,pendingSuspenseBoundaries:i.pendingSuspenseBoundaries,transitions:i.transitions},a.updateQueue.baseState=o,a.memoizedState=o,a.flags&256){n=pl(Error(mt(423)),a),a=Kx(e,a,s,r,n);break e}else if(s!==n){n=pl(Error(mt(424)),a),a=Kx(e,a,s,r,n);break e}else for(Yr=lo(a.stateNode.containerInfo.firstChild),Kr=a,Sa=!0,Ls=null,r=j1(a,null,s,r),a.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(ul(),s===n){a=Sn(e,a,r);break e}Cr(e,a,s,r)}a=a.child}return a;case 5:return S1(a),e===null&&Rp(a),s=a.type,n=a.pendingProps,o=e!==null?e.memoizedProps:null,i=n.children,Dp(s,n)?i=null:o!==null&&Dp(s,o)&&(a.flags|=32),Q1(e,a),Cr(e,a,i,r),a.child;case 6:return e===null&&Rp(a),null;case 13:return X1(e,a,r);case 4:return t0(a,a.stateNode.containerInfo),s=a.pendingProps,e===null?a.child=ml(a,null,s,r):Cr(e,a,s,r),a.child;case 11:return s=a.type,n=a.pendingProps,n=a.elementType===s?n:_s(s,n),Qx(e,a,s,n,r);case 7:return Cr(e,a,a.pendingProps,r),a.child;case 8:return Cr(e,a,a.pendingProps.children,r),a.child;case 12:return Cr(e,a,a.pendingProps.children,r),a.child;case 10:e:{if(s=a.type._context,n=a.pendingProps,o=a.memoizedProps,i=n.value,fa(Yu,s._currentValue),s._currentValue=i,o!==null)if(Os(o.value,i)){if(o.children===n.children&&!zr.current){a=Sn(e,a,r);break e}}else for(o=a.child,o!==null&&(o.return=a);o!==null;){var c=o.dependencies;if(c!==null){i=o.child;for(var d=c.firstContext;d!==null;){if(d.context===s){if(o.tag===1){d=yn(-1,r&-r),d.tag=2;var p=o.updateQueue;if(p!==null){p=p.shared;var h=p.pending;h===null?d.next=d:(d.next=h.next,h.next=d),p.pending=d}}o.lanes|=r,d=o.alternate,d!==null&&(d.lanes|=r),qp(o.return,r,a),c.lanes|=r;break}d=d.next}}else if(o.tag===10)i=o.type===a.type?null:o.child;else if(o.tag===18){if(i=o.return,i===null)throw Error(mt(341));i.lanes|=r,c=i.alternate,c!==null&&(c.lanes|=r),qp(i,r,a),i=o.sibling}else i=o.child;if(i!==null)i.return=o;else for(i=o;i!==null;){if(i===a){i=null;break}if(o=i.sibling,o!==null){o.return=i.return,i=o;break}i=i.return}o=i}Cr(e,a,n.children,r),a=a.child}return a;case 9:return n=a.type,s=a.pendingProps.children,tl(a,r),n=fs(n),s=s(n),a.flags|=1,Cr(e,a,s,r),a.child;case 14:return s=a.type,n=_s(s,a.pendingProps),n=_s(s.type,n),Yx(e,a,s,n,r);case 15:return G1(e,a,a.type,a.pendingProps,r);case 17:return s=a.type,n=a.pendingProps,n=a.elementType===s?n:_s(s,n),Au(e,a),a.tag=1,$r(s)?(e=!0,Gu(a)):e=!1,tl(a,r),V1(a,s,n),$p(a,s,n,r),Vp(null,a,s,!0,e,r);case 19:return K1(e,a,r);case 22:return J1(e,a,r)}throw Error(mt(156,a.tag))};function p2(e,a){return $v(e,a)}function Ej(e,a,r,s){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ms(e,a,r,s){return new Ej(e,a,r,s)}function x0(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Pj(e){if(typeof e=="function")return x0(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Tf)return 11;if(e===Mf)return 14}return 2}function ho(e,a){var r=e.alternate;return r===null?(r=ms(e.tag,a,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=a,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,a=e.dependencies,r.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function Pu(e,a,r,s,n,o){var i=2;if(s=e,typeof e=="function")x0(e)&&(i=1);else if(typeof e=="string")i=5;else e:switch(e){case Ri:return Yo(r.children,n,o,a);case Of:i=8,n|=8;break;case up:return e=ms(12,r,a,n|2),e.elementType=up,e.lanes=o,e;case mp:return e=ms(13,r,a,n),e.elementType=mp,e.lanes=o,e;case hp:return e=ms(19,r,a,n),e.elementType=hp,e.lanes=o,e;case Sv:return Sm(r,n,o,a);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Nv:i=10;break e;case wv:i=9;break e;case Tf:i=11;break e;case Mf:i=14;break e;case Qn:i=16,s=null;break e}throw Error(mt(130,e==null?e:typeof e,""))}return a=ms(i,r,a,n),a.elementType=e,a.type=s,a.lanes=o,a}function Yo(e,a,r,s){return e=ms(7,e,s,a),e.lanes=r,e}function Sm(e,a,r,s){return e=ms(22,e,s,a),e.elementType=Sv,e.lanes=r,e.stateNode={isHidden:!1},e}function Uh(e,a,r){return e=ms(6,e,null,a),e.lanes=r,e}function Vh(e,a,r){return a=ms(4,e.children!==null?e.children:[],e.key,a),a.lanes=r,a.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},a}function Lj(e,a,r,s,n){this.tag=a,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Sh(0),this.expirationTimes=Sh(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Sh(0),this.identifierPrefix=s,this.onRecoverableError=n,this.mutableSourceEagerHydrationData=null}function g0(e,a,r,s,n,o,i,c,d){return e=new Lj(e,a,r,c,d),a===1?(a=1,o===!0&&(a|=8)):a=0,o=ms(3,null,null,a),e.current=o,o.stateNode=e,o.memoizedState={element:s,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},e0(o),e}function Ij(e,a,r){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Fi,key:s==null?null:""+s,children:e,containerInfo:a,implementation:r}}function f2(e){if(!e)return vo;e=e._reactInternals;e:{if(oi(e)!==e||e.tag!==1)throw Error(mt(170));var a=e;do{switch(a.tag){case 3:a=a.stateNode.context;break e;case 1:if($r(a.type)){a=a.stateNode.__reactInternalMemoizedMergedChildContext;break e}}a=a.return}while(a!==null);throw Error(mt(171))}if(e.tag===1){var r=e.type;if($r(r))return f1(e,r,a)}return a}function x2(e,a,r,s,n,o,i,c,d){return e=g0(r,s,!0,e,n,o,i,c,d),e.context=f2(null),r=e.current,s=Ar(),n=mo(r),o=yn(s,n),o.callback=a??null,co(r,o,n),e.current.lanes=n,Kc(e,n,s),Br(e,s),e}function km(e,a,r,s){var n=a.current,o=Ar(),i=mo(n);return r=f2(r),a.context===null?a.context=r:a.pendingContext=r,a=yn(o,i),a.payload={element:e},s=s===void 0?null:s,s!==null&&(a.callback=s),e=co(n,a,i),e!==null&&(Ds(e,n,i,o),Su(e,n,i)),i}function om(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function lg(e,a){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<a?r:a}}function v0(e,a){lg(e,a),(e=e.alternate)&&lg(e,a)}function Dj(){return null}var g2=typeof reportError=="function"?reportError:function(e){console.error(e)};function b0(e){this._internalRoot=e}Cm.prototype.render=b0.prototype.render=function(e){var a=this._internalRoot;if(a===null)throw Error(mt(409));km(e,a,null,null)};Cm.prototype.unmount=b0.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var a=e.containerInfo;ri(function(){km(null,e,null,null)}),a[Nn]=null}};function Cm(e){this._internalRoot=e}Cm.prototype.unstable_scheduleHydration=function(e){if(e){var a=Jv();e={blockedOn:null,target:e,priority:a};for(var r=0;r<Xn.length&&a!==0&&a<Xn[r].priority;r++);Xn.splice(r,0,e),r===0&&Yv(e)}};function y0(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Am(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function cg(){}function Oj(e,a,r,s,n){if(n){if(typeof s=="function"){var o=s;s=function(){var p=om(i);o.call(p)}}var i=x2(a,s,e,0,null,!1,!1,"",cg);return e._reactRootContainer=i,e[Nn]=i.current,Fc(e.nodeType===8?e.parentNode:e),ri(),i}for(;n=e.lastChild;)e.removeChild(n);if(typeof s=="function"){var c=s;s=function(){var p=om(d);c.call(p)}}var d=g0(e,0,!1,null,null,!1,!1,"",cg);return e._reactRootContainer=d,e[Nn]=d.current,Fc(e.nodeType===8?e.parentNode:e),ri(function(){km(a,d,r,s)}),d}function _m(e,a,r,s,n){var o=r._reactRootContainer;if(o){var i=o;if(typeof n=="function"){var c=n;n=function(){var d=om(i);c.call(d)}}km(a,i,e,n)}else i=Oj(r,a,e,n,s);return om(i)}Wv=function(e){switch(e.tag){case 3:var a=e.stateNode;if(a.current.memoizedState.isDehydrated){var r=gc(a.pendingLanes);r!==0&&(qf(a,r|1),Br(a,Ta()),!(ta&6)&&(fl=Ta()+500,ko()))}break;case 13:ri(function(){var s=wn(e,1);if(s!==null){var n=Ar();Ds(s,e,1,n)}}),v0(e,1)}};zf=function(e){if(e.tag===13){var a=wn(e,134217728);if(a!==null){var r=Ar();Ds(a,e,134217728,r)}v0(e,134217728)}};Gv=function(e){if(e.tag===13){var a=mo(e),r=wn(e,a);if(r!==null){var s=Ar();Ds(r,e,a,s)}v0(e,a)}};Jv=function(){return la};Qv=function(e,a){var r=la;try{return la=e,a()}finally{la=r}};wp=function(e,a,r){switch(a){case"input":if(xp(e,r),a=r.name,r.type==="radio"&&a!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+a)+'][type="radio"]'),a=0;a<r.length;a++){var s=r[a];if(s!==e&&s.form===e.form){var n=vm(s);if(!n)throw Error(mt(90));Cv(s),xp(s,n)}}}break;case"textarea":_v(e,r);break;case"select":a=r.value,a!=null&&Xi(e,!!r.multiple,a,!1)}};Tv=h0;Mv=ri;var Tj={usingClientEntryPoint:!1,Events:[ed,Bi,vm,Dv,Ov,h0]},dc={findFiberByHostInstance:Wo,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Mj={bundleType:dc.bundleType,version:dc.version,rendererPackageName:dc.rendererPackageName,rendererConfig:dc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Cn.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=qv(e),e===null?null:e.stateNode},findFiberByHostInstance:dc.findFiberByHostInstance||Dj,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var iu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!iu.isDisabled&&iu.supportsFiber)try{pm=iu.inject(Mj),Qs=iu}catch{}}es.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Tj;es.createPortal=function(e,a){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!y0(a))throw Error(mt(200));return Ij(e,a,null,r)};es.createRoot=function(e,a){if(!y0(e))throw Error(mt(299));var r=!1,s="",n=g2;return a!=null&&(a.unstable_strictMode===!0&&(r=!0),a.identifierPrefix!==void 0&&(s=a.identifierPrefix),a.onRecoverableError!==void 0&&(n=a.onRecoverableError)),a=g0(e,1,!1,null,null,r,!1,s,n),e[Nn]=a.current,Fc(e.nodeType===8?e.parentNode:e),new b0(a)};es.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var a=e._reactInternals;if(a===void 0)throw typeof e.render=="function"?Error(mt(188)):(e=Object.keys(e).join(","),Error(mt(268,e)));return e=qv(a),e=e===null?null:e.stateNode,e};es.flushSync=function(e){return ri(e)};es.hydrate=function(e,a,r){if(!Am(a))throw Error(mt(200));return _m(null,e,a,!0,r)};es.hydrateRoot=function(e,a,r){if(!y0(e))throw Error(mt(405));var s=r!=null&&r.hydratedSources||null,n=!1,o="",i=g2;if(r!=null&&(r.unstable_strictMode===!0&&(n=!0),r.identifierPrefix!==void 0&&(o=r.identifierPrefix),r.onRecoverableError!==void 0&&(i=r.onRecoverableError)),a=x2(a,null,e,1,r??null,n,!1,o,i),e[Nn]=a.current,Fc(e),s)for(e=0;e<s.length;e++)r=s[e],n=r._getVersion,n=n(r._source),a.mutableSourceEagerHydrationData==null?a.mutableSourceEagerHydrationData=[r,n]:a.mutableSourceEagerHydrationData.push(r,n);return new Cm(a)};es.render=function(e,a,r){if(!Am(a))throw Error(mt(200));return _m(null,e,a,!1,r)};es.unmountComponentAtNode=function(e){if(!Am(e))throw Error(mt(40));return e._reactRootContainer?(ri(function(){_m(null,null,e,!1,function(){e._reactRootContainer=null,e[Nn]=null})}),!0):!1};es.unstable_batchedUpdates=h0;es.unstable_renderSubtreeIntoContainer=function(e,a,r,s){if(!Am(r))throw Error(mt(200));if(e==null||e._reactInternals===void 0)throw Error(mt(38));return _m(e,a,r,!1,s)};es.version="18.3.1-next-f1338f8080-20240426";function v2(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(v2)}catch(e){console.error(e)}}v2(),vv.exports=es;var Fj=vv.exports,b2,dg=Fj;b2=dg.createRoot,dg.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Wc(){return Wc=Object.assign?Object.assign.bind():function(e){for(var a=1;a<arguments.length;a++){var r=arguments[a];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},Wc.apply(this,arguments)}var ao;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(ao||(ao={}));const ug="popstate";function Rj(e){e===void 0&&(e={});function a(s,n){let{pathname:o,search:i,hash:c}=s.location;return af("",{pathname:o,search:i,hash:c},n.state&&n.state.usr||null,n.state&&n.state.key||"default")}function r(s,n){return typeof n=="string"?n:j2(n)}return zj(a,r,null,e)}function Va(e,a){if(e===!1||e===null||typeof e>"u")throw new Error(a)}function y2(e,a){if(!e){typeof console<"u"&&console.warn(a);try{throw new Error(a)}catch{}}}function qj(){return Math.random().toString(36).substr(2,8)}function mg(e,a){return{usr:e.state,key:e.key,idx:a}}function af(e,a,r,s){return r===void 0&&(r=null),Wc({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof a=="string"?wl(a):a,{state:r,key:a&&a.key||s||qj()})}function j2(e){let{pathname:a="/",search:r="",hash:s=""}=e;return r&&r!=="?"&&(a+=r.charAt(0)==="?"?r:"?"+r),s&&s!=="#"&&(a+=s.charAt(0)==="#"?s:"#"+s),a}function wl(e){let a={};if(e){let r=e.indexOf("#");r>=0&&(a.hash=e.substr(r),e=e.substr(0,r));let s=e.indexOf("?");s>=0&&(a.search=e.substr(s),e=e.substr(0,s)),e&&(a.pathname=e)}return a}function zj(e,a,r,s){s===void 0&&(s={});let{window:n=document.defaultView,v5Compat:o=!1}=s,i=n.history,c=ao.Pop,d=null,p=h();p==null&&(p=0,i.replaceState(Wc({},i.state,{idx:p}),""));function h(){return(i.state||{idx:null}).idx}function x(){c=ao.Pop;let O=h(),y=O==null?null:O-p;p=O,d&&d({action:c,location:_.location,delta:y})}function b(O,y){c=ao.Push;let v=af(_.location,O,y);p=h()+1;let C=mg(v,p),W=_.createHref(v);try{i.pushState(C,"",W)}catch(se){if(se instanceof DOMException&&se.name==="DataCloneError")throw se;n.location.assign(W)}o&&d&&d({action:c,location:_.location,delta:1})}function g(O,y){c=ao.Replace;let v=af(_.location,O,y);p=h();let C=mg(v,p),W=_.createHref(v);i.replaceState(C,"",W),o&&d&&d({action:c,location:_.location,delta:0})}function w(O){let y=n.location.origin!=="null"?n.location.origin:n.location.href,v=typeof O=="string"?O:j2(O);return v=v.replace(/ $/,"%20"),Va(y,"No window.location.(origin|href) available to create URL for href: "+v),new URL(v,y)}let _={get action(){return c},get location(){return e(n,i)},listen(O){if(d)throw new Error("A history only accepts one active listener");return n.addEventListener(ug,x),d=O,()=>{n.removeEventListener(ug,x),d=null}},createHref(O){return a(n,O)},createURL:w,encodeLocation(O){let y=w(O);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:b,replace:g,go(O){return i.go(O)}};return _}var hg;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(hg||(hg={}));function $j(e,a,r){return r===void 0&&(r="/"),Bj(e,a,r)}function Bj(e,a,r,s){let n=typeof a=="string"?wl(a):a,o=S2(n.pathname||"/",r);if(o==null)return null;let i=N2(e);Uj(i);let c=null;for(let d=0;c==null&&d<i.length;++d){let p=tN(o);c=Kj(i[d],p)}return c}function N2(e,a,r,s){a===void 0&&(a=[]),r===void 0&&(r=[]),s===void 0&&(s="");let n=(o,i,c)=>{let d={relativePath:c===void 0?o.path||"":c,caseSensitive:o.caseSensitive===!0,childrenIndex:i,route:o};d.relativePath.startsWith("/")&&(Va(d.relativePath.startsWith(s),'Absolute route path "'+d.relativePath+'" nested under path '+('"'+s+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),d.relativePath=d.relativePath.slice(s.length));let p=Xo([s,d.relativePath]),h=r.concat(d);o.children&&o.children.length>0&&(Va(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+p+'".')),N2(o.children,a,h,p)),!(o.path==null&&!o.index)&&a.push({path:p,score:Yj(p,o.index),routesMeta:h})};return e.forEach((o,i)=>{var c;if(o.path===""||!((c=o.path)!=null&&c.includes("?")))n(o,i);else for(let d of w2(o.path))n(o,i,d)}),a}function w2(e){let a=e.split("/");if(a.length===0)return[];let[r,...s]=a,n=r.endsWith("?"),o=r.replace(/\?$/,"");if(s.length===0)return n?[o,""]:[o];let i=w2(s.join("/")),c=[];return c.push(...i.map(d=>d===""?o:[o,d].join("/"))),n&&c.push(...i),c.map(d=>e.startsWith("/")&&d===""?"/":d)}function Uj(e){e.sort((a,r)=>a.score!==r.score?r.score-a.score:Xj(a.routesMeta.map(s=>s.childrenIndex),r.routesMeta.map(s=>s.childrenIndex)))}const Vj=/^:[\w-]+$/,Hj=3,Wj=2,Gj=1,Jj=10,Qj=-2,pg=e=>e==="*";function Yj(e,a){let r=e.split("/"),s=r.length;return r.some(pg)&&(s+=Qj),a&&(s+=Wj),r.filter(n=>!pg(n)).reduce((n,o)=>n+(Vj.test(o)?Hj:o===""?Gj:Jj),s)}function Xj(e,a){return e.length===a.length&&e.slice(0,-1).every((s,n)=>s===a[n])?e[e.length-1]-a[a.length-1]:0}function Kj(e,a,r){let{routesMeta:s}=e,n={},o="/",i=[];for(let c=0;c<s.length;++c){let d=s[c],p=c===s.length-1,h=o==="/"?a:a.slice(o.length)||"/",x=Zj({path:d.relativePath,caseSensitive:d.caseSensitive,end:p},h),b=d.route;if(!x)return null;Object.assign(n,x.params),i.push({params:n,pathname:Xo([o,x.pathname]),pathnameBase:nN(Xo([o,x.pathnameBase])),route:b}),x.pathnameBase!=="/"&&(o=Xo([o,x.pathnameBase]))}return i}function Zj(e,a){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,s]=eN(e.path,e.caseSensitive,e.end),n=a.match(r);if(!n)return null;let o=n[0],i=o.replace(/(.)\/+$/,"$1"),c=n.slice(1);return{params:s.reduce((p,h,x)=>{let{paramName:b,isOptional:g}=h;if(b==="*"){let _=c[x]||"";i=o.slice(0,o.length-_.length).replace(/(.)\/+$/,"$1")}const w=c[x];return g&&!w?p[b]=void 0:p[b]=(w||"").replace(/%2F/g,"/"),p},{}),pathname:o,pathnameBase:i,pattern:e}}function eN(e,a,r){a===void 0&&(a=!1),r===void 0&&(r=!0),y2(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let s=[],n="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(i,c,d)=>(s.push({paramName:c,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(s.push({paramName:"*"}),n+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?n+="\\/*$":e!==""&&e!=="/"&&(n+="(?:(?=\\/|$))"),[new RegExp(n,a?void 0:"i"),s]}function tN(e){try{return e.split("/").map(a=>decodeURIComponent(a).replace(/\//g,"%2F")).join("/")}catch(a){return y2(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+a+").")),e}}function S2(e,a){if(a==="/")return e;if(!e.toLowerCase().startsWith(a.toLowerCase()))return null;let r=a.endsWith("/")?a.length-1:a.length,s=e.charAt(r);return s&&s!=="/"?null:e.slice(r)||"/"}function aN(e,a){a===void 0&&(a="/");let{pathname:r,search:s="",hash:n=""}=typeof e=="string"?wl(e):e;return{pathname:r?r.startsWith("/")?r:rN(r,a):a,search:oN(s),hash:iN(n)}}function rN(e,a){let r=a.replace(/\/+$/,"").split("/");return e.split("/").forEach(n=>{n===".."?r.length>1&&r.pop():n!=="."&&r.push(n)}),r.length>1?r.join("/"):"/"}function Hh(e,a,r,s){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+a+"` field ["+JSON.stringify(s)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function sN(e){return e.filter((a,r)=>r===0||a.route.path&&a.route.path.length>0)}function k2(e,a){let r=sN(e);return a?r.map((s,n)=>n===r.length-1?s.pathname:s.pathnameBase):r.map(s=>s.pathnameBase)}function C2(e,a,r,s){s===void 0&&(s=!1);let n;typeof e=="string"?n=wl(e):(n=Wc({},e),Va(!n.pathname||!n.pathname.includes("?"),Hh("?","pathname","search",n)),Va(!n.pathname||!n.pathname.includes("#"),Hh("#","pathname","hash",n)),Va(!n.search||!n.search.includes("#"),Hh("#","search","hash",n)));let o=e===""||n.pathname==="",i=o?"/":n.pathname,c;if(i==null)c=r;else{let x=a.length-1;if(!s&&i.startsWith("..")){let b=i.split("/");for(;b[0]==="..";)b.shift(),x-=1;n.pathname=b.join("/")}c=x>=0?a[x]:"/"}let d=aN(n,c),p=i&&i!=="/"&&i.endsWith("/"),h=(o||i===".")&&r.endsWith("/");return!d.pathname.endsWith("/")&&(p||h)&&(d.pathname+="/"),d}const Xo=e=>e.join("/").replace(/\/\/+/g,"/"),nN=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),oN=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,iN=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function lN(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const A2=["post","put","patch","delete"];new Set(A2);const cN=["get",...A2];new Set(cN);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Gc(){return Gc=Object.assign?Object.assign.bind():function(e){for(var a=1;a<arguments.length;a++){var r=arguments[a];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},Gc.apply(this,arguments)}const j0=I.createContext(null),dN=I.createContext(null),ad=I.createContext(null),Em=I.createContext(null),Co=I.createContext({outlet:null,matches:[],isDataRoute:!1}),_2=I.createContext(null);function rd(){return I.useContext(Em)!=null}function Pm(){return rd()||Va(!1),I.useContext(Em).location}function E2(e){I.useContext(ad).static||I.useLayoutEffect(e)}function sd(){let{isDataRoute:e}=I.useContext(Co);return e?kN():uN()}function uN(){rd()||Va(!1);let e=I.useContext(j0),{basename:a,future:r,navigator:s}=I.useContext(ad),{matches:n}=I.useContext(Co),{pathname:o}=Pm(),i=JSON.stringify(k2(n,r.v7_relativeSplatPath)),c=I.useRef(!1);return E2(()=>{c.current=!0}),I.useCallback(function(p,h){if(h===void 0&&(h={}),!c.current)return;if(typeof p=="number"){s.go(p);return}let x=C2(p,JSON.parse(i),o,h.relative==="path");e==null&&a!=="/"&&(x.pathname=x.pathname==="/"?a:Xo([a,x.pathname])),(h.replace?s.replace:s.push)(x,h.state,h)},[a,s,i,o,e])}const mN=I.createContext(null);function hN(e){let a=I.useContext(Co).outlet;return a&&I.createElement(mN.Provider,{value:e},a)}function pN(e,a){return fN(e,a)}function fN(e,a,r,s){rd()||Va(!1);let{navigator:n}=I.useContext(ad),{matches:o}=I.useContext(Co),i=o[o.length-1],c=i?i.params:{};i&&i.pathname;let d=i?i.pathnameBase:"/";i&&i.route;let p=Pm(),h;if(a){var x;let O=typeof a=="string"?wl(a):a;d==="/"||(x=O.pathname)!=null&&x.startsWith(d)||Va(!1),h=O}else h=p;let b=h.pathname||"/",g=b;if(d!=="/"){let O=d.replace(/^\//,"").split("/");g="/"+b.replace(/^\//,"").split("/").slice(O.length).join("/")}let w=$j(e,{pathname:g}),_=yN(w&&w.map(O=>Object.assign({},O,{params:Object.assign({},c,O.params),pathname:Xo([d,n.encodeLocation?n.encodeLocation(O.pathname).pathname:O.pathname]),pathnameBase:O.pathnameBase==="/"?d:Xo([d,n.encodeLocation?n.encodeLocation(O.pathnameBase).pathname:O.pathnameBase])})),o,r,s);return a&&_?I.createElement(Em.Provider,{value:{location:Gc({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:ao.Pop}},_):_}function xN(){let e=SN(),a=lN(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,n={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return I.createElement(I.Fragment,null,I.createElement("h2",null,"Unexpected Application Error!"),I.createElement("h3",{style:{fontStyle:"italic"}},a),r?I.createElement("pre",{style:n},r):null,null)}const gN=I.createElement(xN,null);class vN extends I.Component{constructor(a){super(a),this.state={location:a.location,revalidation:a.revalidation,error:a.error}}static getDerivedStateFromError(a){return{error:a}}static getDerivedStateFromProps(a,r){return r.location!==a.location||r.revalidation!=="idle"&&a.revalidation==="idle"?{error:a.error,location:a.location,revalidation:a.revalidation}:{error:a.error!==void 0?a.error:r.error,location:r.location,revalidation:a.revalidation||r.revalidation}}componentDidCatch(a,r){console.error("React Router caught the following error during render",a,r)}render(){return this.state.error!==void 0?I.createElement(Co.Provider,{value:this.props.routeContext},I.createElement(_2.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function bN(e){let{routeContext:a,match:r,children:s}=e,n=I.useContext(j0);return n&&n.static&&n.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=r.route.id),I.createElement(Co.Provider,{value:a},s)}function yN(e,a,r,s){var n;if(a===void 0&&(a=[]),r===void 0&&(r=null),s===void 0&&(s=null),e==null){var o;if(!r)return null;if(r.errors)e=r.matches;else if((o=s)!=null&&o.v7_partialHydration&&a.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let i=e,c=(n=r)==null?void 0:n.errors;if(c!=null){let h=i.findIndex(x=>x.route.id&&(c==null?void 0:c[x.route.id])!==void 0);h>=0||Va(!1),i=i.slice(0,Math.min(i.length,h+1))}let d=!1,p=-1;if(r&&s&&s.v7_partialHydration)for(let h=0;h<i.length;h++){let x=i[h];if((x.route.HydrateFallback||x.route.hydrateFallbackElement)&&(p=h),x.route.id){let{loaderData:b,errors:g}=r,w=x.route.loader&&b[x.route.id]===void 0&&(!g||g[x.route.id]===void 0);if(x.route.lazy||w){d=!0,p>=0?i=i.slice(0,p+1):i=[i[0]];break}}}return i.reduceRight((h,x,b)=>{let g,w=!1,_=null,O=null;r&&(g=c&&x.route.id?c[x.route.id]:void 0,_=x.route.errorElement||gN,d&&(p<0&&b===0?(CN("route-fallback"),w=!0,O=null):p===b&&(w=!0,O=x.route.hydrateFallbackElement||null)));let y=a.concat(i.slice(0,b+1)),v=()=>{let C;return g?C=_:w?C=O:x.route.Component?C=I.createElement(x.route.Component,null):x.route.element?C=x.route.element:C=h,I.createElement(bN,{match:x,routeContext:{outlet:h,matches:y,isDataRoute:r!=null},children:C})};return r&&(x.route.ErrorBoundary||x.route.errorElement||b===0)?I.createElement(vN,{location:r.location,revalidation:r.revalidation,component:_,error:g,children:v(),routeContext:{outlet:null,matches:y,isDataRoute:!0}}):v()},null)}var P2=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(P2||{}),L2=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(L2||{});function jN(e){let a=I.useContext(j0);return a||Va(!1),a}function NN(e){let a=I.useContext(dN);return a||Va(!1),a}function wN(e){let a=I.useContext(Co);return a||Va(!1),a}function I2(e){let a=wN(),r=a.matches[a.matches.length-1];return r.route.id||Va(!1),r.route.id}function SN(){var e;let a=I.useContext(_2),r=NN(),s=I2();return a!==void 0?a:(e=r.errors)==null?void 0:e[s]}function kN(){let{router:e}=jN(P2.UseNavigateStable),a=I2(L2.UseNavigateStable),r=I.useRef(!1);return E2(()=>{r.current=!0}),I.useCallback(function(n,o){o===void 0&&(o={}),r.current&&(typeof n=="number"?e.navigate(n):e.navigate(n,Gc({fromRouteId:a},o)))},[e,a])}const fg={};function CN(e,a,r){fg[e]||(fg[e]=!0)}function AN(e,a){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function xg(e){let{to:a,replace:r,state:s,relative:n}=e;rd()||Va(!1);let{future:o,static:i}=I.useContext(ad),{matches:c}=I.useContext(Co),{pathname:d}=Pm(),p=sd(),h=C2(a,k2(c,o.v7_relativeSplatPath),d,n==="path"),x=JSON.stringify(h);return I.useEffect(()=>p(JSON.parse(x),{replace:r,state:s,relative:n}),[p,x,n,r,s]),null}function _N(e){return hN(e.context)}function er(e){Va(!1)}function EN(e){let{basename:a="/",children:r=null,location:s,navigationType:n=ao.Pop,navigator:o,static:i=!1,future:c}=e;rd()&&Va(!1);let d=a.replace(/^\/*/,"/"),p=I.useMemo(()=>({basename:d,navigator:o,static:i,future:Gc({v7_relativeSplatPath:!1},c)}),[d,c,o,i]);typeof s=="string"&&(s=wl(s));let{pathname:h="/",search:x="",hash:b="",state:g=null,key:w="default"}=s,_=I.useMemo(()=>{let O=S2(h,d);return O==null?null:{location:{pathname:O,search:x,hash:b,state:g,key:w},navigationType:n}},[d,h,x,b,g,w,n]);return _==null?null:I.createElement(ad.Provider,{value:p},I.createElement(Em.Provider,{children:r,value:_}))}function PN(e){let{children:a,location:r}=e;return pN(rf(a),r)}new Promise(()=>{});function rf(e,a){a===void 0&&(a=[]);let r=[];return I.Children.forEach(e,(s,n)=>{if(!I.isValidElement(s))return;let o=[...a,n];if(s.type===I.Fragment){r.push.apply(r,rf(s.props.children,o));return}s.type!==er&&Va(!1),!s.props.index||!s.props.children||Va(!1);let i={id:s.props.id||o.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(i.children=rf(s.props.children,o)),r.push(i)}),r}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const LN="6";try{window.__reactRouterVersion=LN}catch{}const IN="startTransition",gg=Cy[IN];function DN(e){let{basename:a,children:r,future:s,window:n}=e,o=I.useRef();o.current==null&&(o.current=Rj({window:n,v5Compat:!0}));let i=o.current,[c,d]=I.useState({action:i.action,location:i.location}),{v7_startTransition:p}=s||{},h=I.useCallback(x=>{p&&gg?gg(()=>d(x)):d(x)},[d,p]);return I.useLayoutEffect(()=>i.listen(h),[i,h]),I.useEffect(()=>AN(s),[s]),I.createElement(EN,{basename:a,children:r,location:c.location,navigationType:c.action,navigator:i,future:s})}var vg;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(vg||(vg={}));var bg;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(bg||(bg={}));let ON={data:""},TN=e=>typeof window=="object"?((e?e.querySelector("#_goober"):window._goober)||Object.assign((e||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:e||ON,MN=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,FN=/\/\*[^]*?\*\/|  +/g,yg=/\n+/g,Zn=(e,a)=>{let r="",s="",n="";for(let o in e){let i=e[o];o[0]=="@"?o[1]=="i"?r=o+" "+i+";":s+=o[1]=="f"?Zn(i,o):o+"{"+Zn(i,o[1]=="k"?"":a)+"}":typeof i=="object"?s+=Zn(i,a?a.replace(/([^,])+/g,c=>o.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,d=>/&/.test(d)?d.replace(/&/g,c):c?c+" "+d:d)):o):i!=null&&(o=/^--/.test(o)?o:o.replace(/[A-Z]/g,"-$&").toLowerCase(),n+=Zn.p?Zn.p(o,i):o+":"+i+";")}return r+(a&&n?a+"{"+n+"}":n)+s},dn={},D2=e=>{if(typeof e=="object"){let a="";for(let r in e)a+=r+D2(e[r]);return a}return e},RN=(e,a,r,s,n)=>{let o=D2(e),i=dn[o]||(dn[o]=(d=>{let p=0,h=11;for(;p<d.length;)h=101*h+d.charCodeAt(p++)>>>0;return"go"+h})(o));if(!dn[i]){let d=o!==e?e:(p=>{let h,x,b=[{}];for(;h=MN.exec(p.replace(FN,""));)h[4]?b.shift():h[3]?(x=h[3].replace(yg," ").trim(),b.unshift(b[0][x]=b[0][x]||{})):b[0][h[1]]=h[2].replace(yg," ").trim();return b[0]})(e);dn[i]=Zn(n?{["@keyframes "+i]:d}:d,r?"":"."+i)}let c=r&&dn.g?dn.g:null;return r&&(dn.g=dn[i]),((d,p,h,x)=>{x?p.data=p.data.replace(x,d):p.data.indexOf(d)===-1&&(p.data=h?d+p.data:p.data+d)})(dn[i],a,s,c),i},qN=(e,a,r)=>e.reduce((s,n,o)=>{let i=a[o];if(i&&i.call){let c=i(r),d=c&&c.props&&c.props.className||/^go/.test(c)&&c;i=d?"."+d:c&&typeof c=="object"?c.props?"":Zn(c,""):c===!1?"":c}return s+n+(i??"")},"");function Lm(e){let a=this||{},r=e.call?e(a.p):e;return RN(r.unshift?r.raw?qN(r,[].slice.call(arguments,1),a.p):r.reduce((s,n)=>Object.assign(s,n&&n.call?n(a.p):n),{}):r,TN(a.target),a.g,a.o,a.k)}let O2,sf,nf;Lm.bind({g:1});let kn=Lm.bind({k:1});function zN(e,a,r,s){Zn.p=a,O2=e,sf=r,nf=s}function Ao(e,a){let r=this||{};return function(){let s=arguments;function n(o,i){let c=Object.assign({},o),d=c.className||n.className;r.p=Object.assign({theme:sf&&sf()},c),r.o=/ *go\d+/.test(d),c.className=Lm.apply(r,s)+(d?" "+d:"");let p=e;return e[0]&&(p=c.as||e,delete c.as),nf&&p[0]&&nf(c),O2(p,c)}return n}}var $N=e=>typeof e=="function",im=(e,a)=>$N(e)?e(a):e,BN=(()=>{let e=0;return()=>(++e).toString()})(),T2=(()=>{let e;return()=>{if(e===void 0&&typeof window<"u"){let a=matchMedia("(prefers-reduced-motion: reduce)");e=!a||a.matches}return e}})(),UN=20,N0="default",M2=(e,a)=>{let{toastLimit:r}=e.settings;switch(a.type){case 0:return{...e,toasts:[a.toast,...e.toasts].slice(0,r)};case 1:return{...e,toasts:e.toasts.map(i=>i.id===a.toast.id?{...i,...a.toast}:i)};case 2:let{toast:s}=a;return M2(e,{type:e.toasts.find(i=>i.id===s.id)?1:0,toast:s});case 3:let{toastId:n}=a;return{...e,toasts:e.toasts.map(i=>i.id===n||n===void 0?{...i,dismissed:!0,visible:!1}:i)};case 4:return a.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(i=>i.id!==a.toastId)};case 5:return{...e,pausedAt:a.time};case 6:let o=a.time-(e.pausedAt||0);return{...e,pausedAt:void 0,toasts:e.toasts.map(i=>({...i,pauseDuration:i.pauseDuration+o}))}}},Lu=[],F2={toasts:[],pausedAt:void 0,settings:{toastLimit:UN}},Gs={},R2=(e,a=N0)=>{Gs[a]=M2(Gs[a]||F2,e),Lu.forEach(([r,s])=>{r===a&&s(Gs[a])})},q2=e=>Object.keys(Gs).forEach(a=>R2(e,a)),VN=e=>Object.keys(Gs).find(a=>Gs[a].toasts.some(r=>r.id===e)),Im=(e=N0)=>a=>{R2(a,e)},HN={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},WN=(e={},a=N0)=>{let[r,s]=I.useState(Gs[a]||F2),n=I.useRef(Gs[a]);I.useEffect(()=>(n.current!==Gs[a]&&s(Gs[a]),Lu.push([a,s]),()=>{let i=Lu.findIndex(([c])=>c===a);i>-1&&Lu.splice(i,1)}),[a]);let o=r.toasts.map(i=>{var c,d,p;return{...e,...e[i.type],...i,removeDelay:i.removeDelay||((c=e[i.type])==null?void 0:c.removeDelay)||(e==null?void 0:e.removeDelay),duration:i.duration||((d=e[i.type])==null?void 0:d.duration)||(e==null?void 0:e.duration)||HN[i.type],style:{...e.style,...(p=e[i.type])==null?void 0:p.style,...i.style}}});return{...r,toasts:o}},GN=(e,a="blank",r)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:a,ariaProps:{role:"status","aria-live":"polite"},message:e,pauseDuration:0,...r,id:(r==null?void 0:r.id)||BN()}),nd=e=>(a,r)=>{let s=GN(a,e,r);return Im(s.toasterId||VN(s.id))({type:2,toast:s}),s.id},Qa=(e,a)=>nd("blank")(e,a);Qa.error=nd("error");Qa.success=nd("success");Qa.loading=nd("loading");Qa.custom=nd("custom");Qa.dismiss=(e,a)=>{let r={type:3,toastId:e};a?Im(a)(r):q2(r)};Qa.dismissAll=e=>Qa.dismiss(void 0,e);Qa.remove=(e,a)=>{let r={type:4,toastId:e};a?Im(a)(r):q2(r)};Qa.removeAll=e=>Qa.remove(void 0,e);Qa.promise=(e,a,r)=>{let s=Qa.loading(a.loading,{...r,...r==null?void 0:r.loading});return typeof e=="function"&&(e=e()),e.then(n=>{let o=a.success?im(a.success,n):void 0;return o?Qa.success(o,{id:s,...r,...r==null?void 0:r.success}):Qa.dismiss(s),n}).catch(n=>{let o=a.error?im(a.error,n):void 0;o?Qa.error(o,{id:s,...r,...r==null?void 0:r.error}):Qa.dismiss(s)}),e};var JN=1e3,QN=(e,a="default")=>{let{toasts:r,pausedAt:s}=WN(e,a),n=I.useRef(new Map).current,o=I.useCallback((x,b=JN)=>{if(n.has(x))return;let g=setTimeout(()=>{n.delete(x),i({type:4,toastId:x})},b);n.set(x,g)},[]);I.useEffect(()=>{if(s)return;let x=Date.now(),b=r.map(g=>{if(g.duration===1/0)return;let w=(g.duration||0)+g.pauseDuration-(x-g.createdAt);if(w<0){g.visible&&Qa.dismiss(g.id);return}return setTimeout(()=>Qa.dismiss(g.id,a),w)});return()=>{b.forEach(g=>g&&clearTimeout(g))}},[r,s,a]);let i=I.useCallback(Im(a),[a]),c=I.useCallback(()=>{i({type:5,time:Date.now()})},[i]),d=I.useCallback((x,b)=>{i({type:1,toast:{id:x,height:b}})},[i]),p=I.useCallback(()=>{s&&i({type:6,time:Date.now()})},[s,i]),h=I.useCallback((x,b)=>{let{reverseOrder:g=!1,gutter:w=8,defaultPosition:_}=b||{},O=r.filter(C=>(C.position||_)===(x.position||_)&&C.height),y=O.findIndex(C=>C.id===x.id),v=O.filter((C,W)=>W<y&&C.visible).length;return O.filter(C=>C.visible).slice(...g?[v+1]:[0,v]).reduce((C,W)=>C+(W.height||0)+w,0)},[r]);return I.useEffect(()=>{r.forEach(x=>{if(x.dismissed)o(x.id,x.removeDelay);else{let b=n.get(x.id);b&&(clearTimeout(b),n.delete(x.id))}})},[r,o]),{toasts:r,handlers:{updateHeight:d,startPause:c,endPause:p,calculateOffset:h}}},YN=kn`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,XN=kn`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,KN=kn`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,ZN=Ao("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${YN} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${XN} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${e=>e.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${KN} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,ew=kn`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,tw=Ao("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${e=>e.secondary||"#e0e0e0"};
  border-right-color: ${e=>e.primary||"#616161"};
  animation: ${ew} 1s linear infinite;
`,aw=kn`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,rw=kn`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,sw=Ao("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${aw} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${rw} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${e=>e.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,nw=Ao("div")`
  position: absolute;
`,ow=Ao("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,iw=kn`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,lw=Ao("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${iw} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,cw=({toast:e})=>{let{icon:a,type:r,iconTheme:s}=e;return a!==void 0?typeof a=="string"?I.createElement(lw,null,a):a:r==="blank"?null:I.createElement(ow,null,I.createElement(tw,{...s}),r!=="loading"&&I.createElement(nw,null,r==="error"?I.createElement(ZN,{...s}):I.createElement(sw,{...s})))},dw=e=>`
0% {transform: translate3d(0,${e*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,uw=e=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${e*-150}%,-1px) scale(.6); opacity:0;}
`,mw="0%{opacity:0;} 100%{opacity:1;}",hw="0%{opacity:1;} 100%{opacity:0;}",pw=Ao("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,fw=Ao("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,xw=(e,a)=>{let r=e.includes("top")?1:-1,[s,n]=T2()?[mw,hw]:[dw(r),uw(r)];return{animation:a?`${kn(s)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${kn(n)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},gw=I.memo(({toast:e,position:a,style:r,children:s})=>{let n=e.height?xw(e.position||a||"top-center",e.visible):{opacity:0},o=I.createElement(cw,{toast:e}),i=I.createElement(fw,{...e.ariaProps},im(e.message,e));return I.createElement(pw,{className:e.className,style:{...n,...r,...e.style}},typeof s=="function"?s({icon:o,message:i}):I.createElement(I.Fragment,null,o,i))});zN(I.createElement);var vw=({id:e,className:a,style:r,onHeightUpdate:s,children:n})=>{let o=I.useCallback(i=>{if(i){let c=()=>{let d=i.getBoundingClientRect().height;s(e,d)};c(),new MutationObserver(c).observe(i,{subtree:!0,childList:!0,characterData:!0})}},[e,s]);return I.createElement("div",{ref:o,className:a,style:r},n)},bw=(e,a)=>{let r=e.includes("top"),s=r?{top:0}:{bottom:0},n=e.includes("center")?{justifyContent:"center"}:e.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:T2()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${a*(r?1:-1)}px)`,...s,...n}},yw=Lm`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,lu=16,jw=({reverseOrder:e,position:a="top-center",toastOptions:r,gutter:s,children:n,toasterId:o,containerStyle:i,containerClassName:c})=>{let{toasts:d,handlers:p}=QN(r,o);return I.createElement("div",{"data-rht-toaster":o||"",style:{position:"fixed",zIndex:9999,top:lu,left:lu,right:lu,bottom:lu,pointerEvents:"none",...i},className:c,onMouseEnter:p.startPause,onMouseLeave:p.endPause},d.map(h=>{let x=h.position||a,b=p.calculateOffset(h,{reverseOrder:e,gutter:s,defaultPosition:a}),g=bw(x,b);return I.createElement(vw,{id:h.id,key:h.id,onHeightUpdate:p.updateHeight,className:h.visible?yw:"",style:g},h.type==="custom"?im(h.message,h):n?n(h):I.createElement(gw,{toast:h,position:x}))}))},X=Qa;const or=[];for(let e=0;e<256;++e)or.push((e+256).toString(16).slice(1));function Nw(e,a=0){return(or[e[a+0]]+or[e[a+1]]+or[e[a+2]]+or[e[a+3]]+"-"+or[e[a+4]]+or[e[a+5]]+"-"+or[e[a+6]]+or[e[a+7]]+"-"+or[e[a+8]]+or[e[a+9]]+"-"+or[e[a+10]]+or[e[a+11]]+or[e[a+12]]+or[e[a+13]]+or[e[a+14]]+or[e[a+15]]).toLowerCase()}let Wh;const ww=new Uint8Array(16);function Sw(){if(!Wh){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");Wh=crypto.getRandomValues.bind(crypto)}return Wh(ww)}const kw=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),jg={randomUUID:kw};function Cw(e,a,r){var n;if(jg.randomUUID&&!e)return jg.randomUUID();e=e||{};const s=e.random??((n=e.rng)==null?void 0:n.call(e))??Sw();if(s.length<16)throw new Error("Random bytes length must be >= 16");return s[6]=s[6]&15|64,s[8]=s[8]&63|128,Nw(s)}const Aw=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,_w=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,Ew=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function Pw(e,a){if(e==="__proto__"||e==="constructor"&&a&&typeof a=="object"&&"prototype"in a){Lw(e);return}return a}function Lw(e){console.warn(`[destr] Dropping "${e}" key to prevent prototype pollution.`)}function Iw(e,a={}){if(typeof e!="string")return e;if(e[0]==='"'&&e[e.length-1]==='"'&&e.indexOf("\\")===-1)return e.slice(1,-1);const r=e.trim();if(r.length<=9)switch(r.toLowerCase()){case"true":return!0;case"false":return!1;case"undefined":return;case"null":return null;case"nan":return Number.NaN;case"infinity":return Number.POSITIVE_INFINITY;case"-infinity":return Number.NEGATIVE_INFINITY}if(!Ew.test(e)){if(a.strict)throw new SyntaxError("[destr] Invalid JSON");return e}try{if(Aw.test(e)||_w.test(e)){if(a.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(e,Pw)}return JSON.parse(e)}catch(s){if(a.strict)throw s;return e}}const Dw=/#/g,Ow=/&/g,Tw=/\//g,Mw=/=/g,w0=/\+/g,Fw=/%5e/gi,Rw=/%60/gi,qw=/%7c/gi,zw=/%20/gi;function $w(e){return encodeURI(""+e).replace(qw,"|")}function of(e){return $w(typeof e=="string"?e:JSON.stringify(e)).replace(w0,"%2B").replace(zw,"+").replace(Dw,"%23").replace(Ow,"%26").replace(Rw,"`").replace(Fw,"^").replace(Tw,"%2F")}function Gh(e){return of(e).replace(Mw,"%3D")}function z2(e=""){try{return decodeURIComponent(""+e)}catch{return""+e}}function Bw(e){return z2(e.replace(w0," "))}function Uw(e){return z2(e.replace(w0," "))}function Vw(e=""){const a=Object.create(null);e[0]==="?"&&(e=e.slice(1));for(const r of e.split("&")){const s=r.match(/([^=]+)=?(.*)/)||[];if(s.length<2)continue;const n=Bw(s[1]);if(n==="__proto__"||n==="constructor")continue;const o=Uw(s[2]||"");a[n]===void 0?a[n]=o:Array.isArray(a[n])?a[n].push(o):a[n]=[a[n],o]}return a}function Hw(e,a){return(typeof a=="number"||typeof a=="boolean")&&(a=String(a)),a?Array.isArray(a)?a.map(r=>`${Gh(e)}=${of(r)}`).join("&"):`${Gh(e)}=${of(a)}`:Gh(e)}function Ww(e){return Object.keys(e).filter(a=>e[a]!==void 0).map(a=>Hw(a,e[a])).filter(Boolean).join("&")}const Gw=/^[\s\w\0+.-]{2,}:([/\\]{1,2})/,Jw=/^[\s\w\0+.-]{2,}:([/\\]{2})?/,Qw=/^([/\\]\s*){2,}[^/\\]/,Yw=/^\.?\//;function $2(e,a={}){return typeof a=="boolean"&&(a={acceptRelative:a}),a.strict?Gw.test(e):Jw.test(e)||(a.acceptRelative?Qw.test(e):!1)}function Xw(e="",a){return e.endsWith("/")}function Kw(e="",a){return(Xw(e)?e.slice(0,-1):e)||"/"}function Zw(e="",a){return e.endsWith("/")?e:e+"/"}function e4(e,a){if(a4(a)||$2(e))return e;const r=Kw(a);return e.startsWith(r)?e:s4(r,e)}function t4(e,a){const r=n4(e),s={...Vw(r.search),...a};return r.search=Ww(s),o4(r)}function a4(e){return!e||e==="/"}function r4(e){return e&&e!=="/"}function s4(e,...a){let r=e||"";for(const s of a.filter(n=>r4(n)))if(r){const n=s.replace(Yw,"");r=Zw(r)+n}else r=s;return r}const B2=Symbol.for("ufo:protocolRelative");function n4(e="",a){const r=e.match(/^[\s\0]*(blob:|data:|javascript:|vbscript:)(.*)/i);if(r){const[,x,b=""]=r;return{protocol:x.toLowerCase(),pathname:b,href:x+b,auth:"",host:"",search:"",hash:""}}if(!$2(e,{acceptRelative:!0}))return Ng(e);const[,s="",n,o=""]=e.replace(/\\/g,"/").match(/^[\s\0]*([\w+.-]{2,}:)?\/\/([^/@]+@)?(.*)/)||[];let[,i="",c=""]=o.match(/([^#/?]*)(.*)?/)||[];s==="file:"&&(c=c.replace(/\/(?=[A-Za-z]:)/,""));const{pathname:d,search:p,hash:h}=Ng(c);return{protocol:s.toLowerCase(),auth:n?n.slice(0,Math.max(0,n.length-1)):"",host:i,pathname:d,search:p,hash:h,[B2]:!s}}function Ng(e=""){const[a="",r="",s=""]=(e.match(/([^#?]*)(\?[^#]*)?(#.*)?/)||[]).splice(1);return{pathname:a,search:r,hash:s}}function o4(e){const a=e.pathname||"",r=e.search?(e.search.startsWith("?")?"":"?")+e.search:"",s=e.hash||"",n=e.auth?e.auth+"@":"",o=e.host||"";return(e.protocol||e[B2]?(e.protocol||"")+"//":"")+n+o+a+r+s}class i4 extends Error{constructor(a,r){super(a,r),this.name="FetchError",r!=null&&r.cause&&!this.cause&&(this.cause=r.cause)}}function l4(e){var d,p,h,x,b;const a=((d=e.error)==null?void 0:d.message)||((p=e.error)==null?void 0:p.toString())||"",r=((h=e.request)==null?void 0:h.method)||((x=e.options)==null?void 0:x.method)||"GET",s=((b=e.request)==null?void 0:b.url)||String(e.request)||"/",n=`[${r}] ${JSON.stringify(s)}`,o=e.response?`${e.response.status} ${e.response.statusText}`:"<no response>",i=`${n}: ${o}${a?` ${a}`:""}`,c=new i4(i,e.error?{cause:e.error}:void 0);for(const g of["request","options","response"])Object.defineProperty(c,g,{get(){return e[g]}});for(const[g,w]of[["data","_data"],["status","status"],["statusCode","status"],["statusText","statusText"],["statusMessage","statusText"]])Object.defineProperty(c,g,{get(){return e.response&&e.response[w]}});return c}const c4=new Set(Object.freeze(["PATCH","POST","PUT","DELETE"]));function wg(e="GET"){return c4.has(e.toUpperCase())}function d4(e){if(e===void 0)return!1;const a=typeof e;return a==="string"||a==="number"||a==="boolean"||a===null?!0:a!=="object"?!1:Array.isArray(e)?!0:e.buffer?!1:e.constructor&&e.constructor.name==="Object"||typeof e.toJSON=="function"}const u4=new Set(["image/svg","application/xml","application/xhtml","application/html"]),m4=/^application\/(?:[\w!#$%&*.^`~-]*\+)?json(;.+)?$/i;function h4(e=""){if(!e)return"json";const a=e.split(";").shift()||"";return m4.test(a)?"json":u4.has(a)||a.startsWith("text/")?"text":"blob"}function p4(e,a,r,s){const n=f4((a==null?void 0:a.headers)??(e==null?void 0:e.headers),r==null?void 0:r.headers,s);let o;return(r!=null&&r.query||r!=null&&r.params||a!=null&&a.params||a!=null&&a.query)&&(o={...r==null?void 0:r.params,...r==null?void 0:r.query,...a==null?void 0:a.params,...a==null?void 0:a.query}),{...r,...a,query:o,params:o,headers:n}}function f4(e,a,r){if(!a)return new r(e);const s=new r(a);if(e)for(const[n,o]of Symbol.iterator in e||Array.isArray(e)?e:new r(e))s.set(n,o);return s}async function cu(e,a){if(a)if(Array.isArray(a))for(const r of a)await r(e);else await a(e)}const x4=new Set([408,409,425,429,500,502,503,504]),g4=new Set([101,204,205,304]);function U2(e={}){const{fetch:a=globalThis.fetch,Headers:r=globalThis.Headers,AbortController:s=globalThis.AbortController}=e;async function n(c){const d=c.error&&c.error.name==="AbortError"&&!c.options.timeout||!1;if(c.options.retry!==!1&&!d){let h;typeof c.options.retry=="number"?h=c.options.retry:h=wg(c.options.method)?0:1;const x=c.response&&c.response.status||500;if(h>0&&(Array.isArray(c.options.retryStatusCodes)?c.options.retryStatusCodes.includes(x):x4.has(x))){const b=typeof c.options.retryDelay=="function"?c.options.retryDelay(c):c.options.retryDelay||0;return b>0&&await new Promise(g=>setTimeout(g,b)),o(c.request,{...c.options,retry:h-1})}}const p=l4(c);throw Error.captureStackTrace&&Error.captureStackTrace(p,o),p}const o=async function(d,p={}){const h={request:d,options:p4(d,p,e.defaults,r),response:void 0,error:void 0};h.options.method&&(h.options.method=h.options.method.toUpperCase()),h.options.onRequest&&await cu(h,h.options.onRequest),typeof h.request=="string"&&(h.options.baseURL&&(h.request=e4(h.request,h.options.baseURL)),h.options.query&&(h.request=t4(h.request,h.options.query),delete h.options.query),"query"in h.options&&delete h.options.query,"params"in h.options&&delete h.options.params),h.options.body&&wg(h.options.method)&&(d4(h.options.body)?(h.options.body=typeof h.options.body=="string"?h.options.body:JSON.stringify(h.options.body),h.options.headers=new r(h.options.headers||{}),h.options.headers.has("content-type")||h.options.headers.set("content-type","application/json"),h.options.headers.has("accept")||h.options.headers.set("accept","application/json")):("pipeTo"in h.options.body&&typeof h.options.body.pipeTo=="function"||typeof h.options.body.pipe=="function")&&("duplex"in h.options||(h.options.duplex="half")));let x;if(!h.options.signal&&h.options.timeout){const g=new s;x=setTimeout(()=>{const w=new Error("[TimeoutError]: The operation was aborted due to timeout");w.name="TimeoutError",w.code=23,g.abort(w)},h.options.timeout),h.options.signal=g.signal}try{h.response=await a(h.request,h.options)}catch(g){return h.error=g,h.options.onRequestError&&await cu(h,h.options.onRequestError),await n(h)}finally{x&&clearTimeout(x)}if((h.response.body||h.response._bodyInit)&&!g4.has(h.response.status)&&h.options.method!=="HEAD"){const g=(h.options.parseResponse?"json":h.options.responseType)||h4(h.response.headers.get("content-type")||"");switch(g){case"json":{const w=await h.response.text(),_=h.options.parseResponse||Iw;h.response._data=_(w);break}case"stream":{h.response._data=h.response.body||h.response._bodyInit;break}default:h.response._data=await h.response[g]()}}return h.options.onResponse&&await cu(h,h.options.onResponse),!h.options.ignoreResponseError&&h.response.status>=400&&h.response.status<600?(h.options.onResponseError&&await cu(h,h.options.onResponseError),await n(h)):h.response},i=async function(d,p){return(await o(d,p))._data};return i.raw=o,i.native=(...c)=>a(...c),i.create=(c={},d={})=>U2({...e,...d,defaults:{...e.defaults,...d.defaults,...c}}),i}const lm=function(){if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")}(),v4=lm.fetch?(...e)=>lm.fetch(...e):()=>Promise.reject(new Error("[ofetch] global.fetch is not supported!")),b4=lm.Headers,y4=lm.AbortController,j4=U2({fetch:v4,Headers:b4,AbortController:y4});var N4=Object.defineProperty,Sg=Object.getOwnPropertySymbols,w4=Object.prototype.hasOwnProperty,S4=Object.prototype.propertyIsEnumerable,V2=e=>{throw TypeError(e)},kg=(e,a,r)=>a in e?N4(e,a,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[a]=r,Cg=(e,a)=>{for(var r in a||(a={}))w4.call(a,r)&&kg(e,r,a[r]);if(Sg)for(var r of Sg(a))S4.call(a,r)&&kg(e,r,a[r]);return e},H2=(e,a,r)=>a.has(e)||V2("Cannot "+r),lr=(e,a,r)=>(H2(e,a,"read from private field"),r?r.call(e):a.get(e)),cm=(e,a,r)=>a.has(e)?V2("Cannot add the same private member more than once"):a instanceof WeakSet?a.add(e):a.set(e,r),S0=(e,a,r,s)=>(H2(e,a,"write to private field"),a.set(e,r),r),Jn=(e,a,r)=>new Promise((s,n)=>{var o=d=>{try{c(r.next(d))}catch(p){n(p)}},i=d=>{try{c(r.throw(d))}catch(p){n(p)}},c=d=>d.done?s(d.value):Promise.resolve(d.value).then(o,i);c((r=r.apply(e,a)).next())});function hn(e,a,r={}){return e.auth.accessToken&&(r.headers=Cg({Authorization:`Bearer ${e.auth.accessToken}`},r.headers)),j4(a,Cg({baseURL:e.config.apiBaseUrl},r))}function k4(){var e,a;return(a=(e=document.querySelector('link[rel="icon"]'))==null?void 0:e.href)!=null?a:null}function C4(){var e;return(e=document.title)!=null?e:null}function Ag(e,a,r=localStorage){let s=r.getItem(e),n=a?JSON.stringify(a):null;n?r.setItem(e,n):r.removeItem(e),window.dispatchEvent(new StorageEvent("storage",{key:e,oldValue:s,newValue:n,storageArea:r}))}function _g(e,a=localStorage){let r=a.getItem(e);try{return r?JSON.parse(r):null}catch{return null}}var pn,lf,A4=class{constructor(a){cm(this,pn),cm(this,lf,`lumi-auth-${Cw()}`),S0(this,pn,a)}get accessToken(){return _g("lumi-access-token")}set accessToken(a){Ag("lumi-access-token",a)}get user(){return _g("lumi-user")}set user(a){Ag("lumi-user",a)}get isAuthenticated(){return!!this.accessToken}signIn(){let a=(window.screen.width-800)/2,r=(window.screen.height-600)/2,s=window.open(lr(this,pn).config.authOrigin,lr(this,lf),`width=800,height=600,left=${a},top=${r}`),n;return new Promise((o,i)=>{if(!s)return i(new Error("Open auth window failed"));let c=setInterval(()=>{s.closed&&i(new Error("Auth window closed"))},1e3),d=({data:p,origin:h,source:x})=>{if(!(h!==lr(this,pn).config.authOrigin||x!==s))switch(p==null?void 0:p.type){case"lumi-ready":{s.postMessage({type:"lumi-init",data:{projectId:lr(this,pn).config.projectId,icon:k4(),title:C4()}},lr(this,pn).config.authOrigin);break}case"lumi-sign-in":{if(p.data.projectId!==lr(this,pn).config.projectId)break;s.close(),window.focus(),this.accessToken=p.data.accessToken,this.user=p.data.user,o(p.data);break}}};window.addEventListener("message",d),n=()=>{clearInterval(c),window.removeEventListener("message",d)}}).finally(()=>n==null?void 0:n())}signOut(){this.accessToken=null,this.user=null}refreshUser(){return Jn(this,null,function*(){let a=yield hn(lr(this,pn),"/lm/user/info",{method:"POST"});if(a.code!==200)throw new Error(a.message);return this.user=a.data,a.data})}onAuthChange(a){let r=s=>{(s.key==="lumi-access-token"||s.key==="lumi-user"||s.key===null)&&a({isAuthenticated:this.isAuthenticated,user:this.user})};return window.addEventListener("storage",r),()=>{window.removeEventListener("storage",r)}}};pn=new WeakMap,lf=new WeakMap;var cs,_4=class{constructor(a,r){cm(this,cs),S0(this,cs,a),this.entityName=r}list(){return Jn(this,arguments,function*({filter:a,sort:r,limit:s,skip:n}={}){if(s){let o=yield hn(lr(this,cs),this.uri("/find"),{method:"POST",body:{filter:a,sort:r,limit:s,skip:n}});if(o.code!==200)throw new Error(o.message);return o.data}else{let o=yield hn(lr(this,cs),this.uri("/list"),{method:"POST",body:{filter:a,sort:r}});if(o.code!==200)throw new Error(o.message);return{total:o.data.length,list:o.data}}})}get(a){return Jn(this,null,function*(){let r=yield hn(lr(this,cs),this.uri(`/${a}`),{method:"GET"});if(r.code!==200)throw new Error(r.message);return r.data})}create(a){return Jn(this,null,function*(){let r=yield hn(lr(this,cs),this.uri(),{method:"POST",body:a});if(r.code!==200)throw new Error(r.message);return r.data})}createMany(a){return Jn(this,null,function*(){let r=yield hn(lr(this,cs),this.uri("/batch"),{method:"POST",body:a});if(r.code!==200)throw new Error(r.message);return r.data})}update(a,r){return Jn(this,null,function*(){let s=yield hn(lr(this,cs),this.uri(),{method:"PUT",body:{filter:{_id:a},update:r}});if(s.code!==200)throw new Error(s.message);return s.data})}delete(a){return Jn(this,null,function*(){let r=yield hn(lr(this,cs),this.uri(`/${a}`),{method:"DELETE"});if(r.code!==200)throw new Error(r.message)})}deleteMany(a){return Jn(this,null,function*(){let r=yield hn(lr(this,cs),this.uri("/batch-by-ids"),{method:"DELETE",params:{ids:a}});if(r.code!==200)throw new Error(r.message)})}uri(a=""){return`/lm/${lr(this,cs).config.projectId}/${this.entityName}/documents${a}`}};cs=new WeakMap;var Iu,E4=class{constructor(a){return cm(this,Iu),S0(this,Iu,a),new Proxy(this,{get(r,s){return s in r||(r[s]=new _4(lr(r,Iu),s)),r[s]}})}};Iu=new WeakMap;var P4=class{constructor(a){this.config=a,this.auth=new A4(this),this.entities=new E4(this)}};function L4(e){return new P4(e)}const Ie=L4({projectId:"p347464080741539840",apiBaseUrl:"https://api.lumi.new",authOrigin:"https://auth.lumi.new"}),W2=I.createContext(void 0),I4={administrador:["dashboard","crm","insumos","orcamento","contrato","funcionarios","planejamento","compras","diario","financeiro","usuarios"],juridico:["contrato"],financeiro:["financeiro","dashboard"],compras:["compras","insumos"],engenheiro:["planejamento","diario"],gestor:["orcamento","planejamento","diario","dashboard","financeiro"]};function D4({children:e}){const[a,r]=I.useState(null),[s,n]=I.useState(!0);I.useEffect(()=>{const d=localStorage.getItem("usuario");if(d)try{const p=JSON.parse(d);r(p)}catch(p){console.error("Erro ao recuperar usuário do localStorage:",p),localStorage.removeItem("usuario")}n(!1)},[]);const o=async(d,p)=>{try{n(!0);const{list:h}=await Ie.entities.usuarios.list().catch(()=>({list:[]})),x=h.find(b=>b.email===d&&b.senha===p&&b.ativo);if(x){if(x.bloqueado)return X.error("Usuário bloqueado. Entre em contato com o administrador."),!1;const b={_id:x._id,email:x.email,nome:x.nome,nivelAcesso:x.nivelAcesso,ativo:x.ativo};try{await Ie.entities.usuarios.update(x._id,{...x,ultimoLogin:new Date().toISOString(),tentativasLogin:0,atualizadoEm:new Date().toISOString()})}catch(g){console.error("Erro ao atualizar último login:",g)}return r(b),localStorage.setItem("usuario",JSON.stringify(b)),X.success(`Bem-vindo, ${b.nome}!`),!0}else{const b=h.find(g=>g.email===d);if(b){const g=(b.tentativasLogin||0)+1,w=g>=5;try{await Ie.entities.usuarios.update(b._id,{...b,tentativasLogin:g,bloqueado:w,atualizadoEm:new Date().toISOString()}),w?X.error("Usuário bloqueado após 5 tentativas. Entre em contato com o administrador."):X.error(`Email ou senha inválidos. Tentativa ${g}/5`)}catch(_){console.error("Erro ao atualizar tentativas de login:",_)}}else X.error("Email ou senha inválidos");return!1}}catch(h){return console.error("Erro no login:",h),X.error("Erro ao fazer login"),!1}finally{n(!1)}},i=()=>{r(null),localStorage.removeItem("usuario"),X.success("Logout realizado com sucesso")},c=d=>{var p;return a&&((p=I4[a.nivelAcesso])==null?void 0:p.includes(d))||!1};return t.jsx(W2.Provider,{value:{usuario:a,login:o,logout:i,isLoading:s,hasAccess:c},children:e})}function G2(){const e=I.useContext(W2);if(e===void 0)throw new Error("useAuth deve ser usado dentro de um AuthProvider");return e}/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var O4={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T4=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),wt=(e,a)=>{const r=I.forwardRef(({color:s="currentColor",size:n=24,strokeWidth:o=2,absoluteStrokeWidth:i,className:c="",children:d,...p},h)=>I.createElement("svg",{ref:h,...O4,width:n,height:n,stroke:s,strokeWidth:i?Number(o)*24/Number(n):o,className:["lucide",`lucide-${T4(e)}`,c].join(" "),...p},[...a.map(([x,b])=>I.createElement(x,b)),...Array.isArray(d)?d:[d]]));return r.displayName=`${e}`,r};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cf=wt("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const df=wt("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const po=wt("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M4=wt("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F4=wt("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R4=wt("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xl=wt("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fo=wt("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q4=wt("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uf=wt("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xo=wt("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ro=wt("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ga=wt("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z4=wt("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ps=wt("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J2=wt("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q2=wt("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $4=wt("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gl=wt("Clipboard",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const si=wt("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y2=wt("CloudRain",[["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"M16 14v6",key:"1j4efv"}],["path",{d:"M8 14v6",key:"17c4r9"}],["path",{d:"M12 16v6",key:"c8a4gj"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X2=wt("Cloud",[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B4=wt("Code",[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fn=wt("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ts=wt("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bo=wt("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eg=wt("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yo=wt("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U4=wt("FileDown",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M12 18v-6",key:"17g6i2"}],["path",{d:"m9 15 3 3 3-3",key:"1npd3o"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pg=wt("FilePlus",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M9 15h6",key:"cctwl0"}],["path",{d:"M12 18v-6",key:"17g6i2"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mf=wt("FileSpreadsheet",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qa=wt("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const du=wt("FileX",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m14.5 12.5-5 5",key:"b62r18"}],["path",{d:"m9.5 12.5 5 5",key:"1rk7el"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lg=wt("File",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K2=wt("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V4=wt("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H4=wt("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ig=wt("Key",[["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["path",{d:"m15.5 7.5 3 3L22 7l-3-3",key:"1rn1fs"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W4=wt("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G4=wt("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z2=wt("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J4=wt("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eb=wt("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q4=wt("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dg=wt("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qr=wt("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hf=wt("Paperclip",[["path",{d:"m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l8.57-8.57A4 4 0 1 1 18 8.84l-8.59 8.57a2 2 0 0 1-2.83-2.83l8.49-8.48",key:"1u3ebp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tb=wt("PenTool",[["path",{d:"m12 19 7-7 3 3-7 7-3-3z",key:"rklqx2"}],["path",{d:"m18 13-1.5-7.5L2 2l3.5 14.5L13 18l5-5z",key:"1et58u"}],["path",{d:"m2 2 7.586 7.586",key:"etlp93"}],["circle",{cx:"11",cy:"11",r:"2",key:"xmgehs"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y4=wt("Percent",[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ab=wt("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X4=wt("PieChart",[["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}],["path",{d:"M22 12A10 10 0 0 0 12 2v10z",key:"1rfc4y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wa=wt("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K4=wt("Receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vl=wt("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bl=wt("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sl=wt("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dm=wt("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dm=wt("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jh=wt("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rl=wt("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z4=wt("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gs=wt("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Og=wt("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rb=wt("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qi=wt("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ms=wt("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e3=wt("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jc=wt("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t3=wt("Unlock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qc=wt("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pf=wt("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tg=wt("UserX",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kl=wt("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qr=wt("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k0=wt("Wallet",[["path",{d:"M21 12V7H5a2 2 0 0 1 0-4h14v4",key:"195gfw"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h16v-5",key:"195n9w"}],["path",{d:"M18 12a2 2 0 0 0 0 4h4v-4Z",key:"vllfpd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a3=wt("Wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sl=wt("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $t=wt("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);function r3(){const{usuario:e,logout:a,hasAccess:r}=G2(),s=sd(),n=Pm();if(I.useEffect(()=>{e||s("/login")},[e,s]),!e)return null;const i=[{path:"/dashboard",label:"Dashboard",icon:uf,module:"dashboard"},{path:"/crm",label:"CRM",icon:qr,module:"crm"},{path:"/insumos",label:"Base de Insumos",icon:Qr,module:"insumos"},{path:"/proposta",label:"Proposta",icon:qa,module:"orcamento"},{path:"/contratos-v2",label:"Contratos",icon:qa,module:"contrato"},{path:"/funcionarios",label:"Funcionários",icon:qr,module:"funcionarios"},{path:"/planejamento",label:"Planejamento de Obra",icon:Ga,module:"planejamento"},{path:"/planejamento-semanal",label:"Planejamento Semanal",icon:Ga,module:"planejamento"},{path:"/compras",label:"Compras/Estoque",icon:rl,module:"compras"},{path:"/diario",label:"Diário de Obra",icon:gl,module:"planejamento"},{path:"/financeiro",label:"Financeiro",icon:Ts,module:"financeiro"},{path:"/usuarios",label:"Usuários",icon:Dm,module:"usuarios"}].filter(c=>r(c.module));return t.jsxs("div",{className:"min-h-screen bg-gray-100 flex",children:[t.jsxs("div",{className:"w-64 bg-white shadow-md",children:[t.jsx("div",{className:"p-4",children:t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(uf,{className:"h-8 w-8 text-blue-600"}),t.jsx("span",{className:"text-xl font-bold text-gray-900",children:"Gestão /R3"})]})}),t.jsx("nav",{className:"mt-4",children:i.map(c=>{const d=c.icon,p=n.pathname===c.path;return t.jsxs("button",{onClick:()=>s(c.path),className:`w-full flex items-center px-4 py-3 text-left hover:bg-gray-50 ${p?"bg-blue-50 border-r-2 border-blue-500 text-blue-700":"text-gray-700"}`,children:[t.jsx(d,{className:"h-5 w-5 mr-3"}),c.label]},c.path)})}),t.jsx("div",{className:"absolute bottom-0 w-64 p-4 border-t bg-white",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(kl,{className:"h-5 w-5 text-gray-500"}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-gray-700",children:e.nome}),t.jsx("p",{className:"text-xs text-gray-500",children:e.nivelAcesso})]})]}),t.jsx("button",{onClick:a,className:"text-gray-500 hover:text-red-600",title:"Sair",children:t.jsx(J4,{className:"h-5 w-5"})})]})})]}),t.jsx("div",{className:"flex-1 flex flex-col",children:t.jsx("main",{className:"flex-1 p-6",children:t.jsx(_N,{})})})]})}function s3(){const[e,a]=I.useState(""),[r,s]=I.useState(""),{login:n,isLoading:o,usuario:i}=G2(),c=sd();I.useEffect(()=>{i&&c("/dashboard")},[i,c]);const d=async p=>{if(p.preventDefault(),!e||!r)return;await n(e,r)&&c("/dashboard")};return t.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-900 via-blue-800 to-indigo-900 flex items-center justify-center px-4",children:t.jsxs("div",{className:"max-w-md w-full",children:[t.jsxs("div",{className:"text-center mb-8",children:[t.jsx("div",{className:"flex justify-center mb-4",children:t.jsx("div",{className:"bg-white p-3 rounded-full shadow-lg",children:t.jsx(uf,{className:"h-8 w-8 text-blue-600"})})}),t.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"Gestão de Obras"}),t.jsx("p",{className:"text-blue-200",children:"Sistema completo para construção civil"})]}),t.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl p-8",children:[t.jsxs("form",{onSubmit:d,className:"space-y-6",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),t.jsxs("div",{className:"relative",children:[t.jsx(eb,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),t.jsx("input",{type:"email",value:e,onChange:p=>a(p.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"seu@email.com",required:!0})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Senha"}),t.jsxs("div",{className:"relative",children:[t.jsx(Z2,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),t.jsx("input",{type:"password",value:r,onChange:p=>s(p.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"••••••••",required:!0})]})]}),t.jsx("button",{type:"submit",disabled:o,className:"w-full bg-blue-600 text-white py-3 rounded-lg font-medium hover:bg-blue-700 focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:o?"Entrando...":"Entrar"})]}),t.jsx("div",{className:"mt-6 p-4 bg-gray-50 rounded-lg text-center",children:t.jsx("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"versão 2.0"})})]})]})})}function n3(){const e=sd(),[a,r]=I.useState({totalLeads:0,totalContratos:0,totalFuncionarios:0,totalPlanejamentos:0,valorTotalContratos:0,leadsAtivos:0,contratosAtivos:0,funcionariosAtivos:0,planejamentosAndamento:0}),[s,n]=I.useState([]),[o,i]=I.useState(!0);I.useEffect(()=>{c()},[]);const c=async()=>{try{i(!0);const[b,g,w,_]=await Promise.all([Ie.entities.leads.list().catch(()=>({list:[]})),Ie.entities.contratos.list().catch(()=>({list:[]})),Ie.entities.funcionarios.list().catch(()=>({list:[]})),Ie.entities.planejamentos.list().catch(()=>({list:[]}))]),O=b.list||[],y=g.list||[],v=w.list||[],C=_.list||[],W={totalLeads:O.length,totalContratos:y.length,totalFuncionarios:v.length,totalPlanejamentos:C.length,valorTotalContratos:y.reduce((J,Y)=>J+(Y.valor||0),0),leadsAtivos:O.filter(J=>J.status==="novo"||J.status==="qualificado").length,contratosAtivos:y.filter(J=>J.status==="ativo").length,funcionariosAtivos:v.filter(J=>J.ativo).length,planejamentosAndamento:C.filter(J=>J.status==="em_andamento").length};r(W);const se=[];O.slice(0,3).forEach(J=>{se.push({id:`lead_${J._id}`,type:"lead",title:`Novo lead: ${J.nome}`,description:`Lead de ${J.origem} - ${J.empresa||"Pessoa física"}`,timestamp:J.criadoEm||new Date().toISOString(),status:J.status})}),y.slice(0,2).forEach(J=>{se.push({id:`contrato_${J._id}`,type:"contrato",title:`Contrato ${J.numero}`,description:`${J.cliente} - ${J.obra}`,timestamp:J.createdAt||new Date().toISOString(),status:J.status})}),se.sort((J,Y)=>new Date(Y.timestamp).getTime()-new Date(J.timestamp).getTime()),n(se.slice(0,5))}catch(b){console.error("Erro ao buscar dados do dashboard:",b)}finally{i(!1)}},d=b=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(b),p=b=>{try{return new Date(b).toLocaleDateString("pt-BR")}catch{return"Data inválida"}},h=b=>{switch(b){case"lead":return t.jsx(qr,{className:"h-4 w-4"});case"contrato":return t.jsx(qa,{className:"h-4 w-4"});case"funcionario":return t.jsx(Qc,{className:"h-4 w-4"});case"planejamento":return t.jsx(xo,{className:"h-4 w-4"});default:return t.jsx(si,{className:"h-4 w-4"})}},x=b=>{switch(b){case"novo":case"ativo":case"em_andamento":return"bg-green-100 text-green-800";case"qualificado":case"proposta":return"bg-blue-100 text-blue-800";case"negociacao":return"bg-yellow-100 text-yellow-800";case"fechado":case"concluido":return"bg-purple-100 text-purple-800";case"perdido":case"cancelado":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}};return o?t.jsx("div",{className:"flex items-center justify-center h-64",children:t.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Dashboard"}),t.jsx("p",{className:"text-gray-600",children:"Visão geral do sistema de gestão de obras"})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[t.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx(qr,{className:"h-8 w-8 text-blue-600"}),t.jsxs("div",{className:"ml-4",children:[t.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total de Leads"}),t.jsx("p",{className:"text-2xl font-bold text-gray-900",children:a.totalLeads}),t.jsxs("p",{className:"text-xs text-green-600",children:[a.leadsAtivos," ativos"]})]})]})}),t.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx(qa,{className:"h-8 w-8 text-green-600"}),t.jsxs("div",{className:"ml-4",children:[t.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Contratos"}),t.jsx("p",{className:"text-2xl font-bold text-gray-900",children:a.totalContratos}),t.jsxs("p",{className:"text-xs text-green-600",children:[a.contratosAtivos," ativos"]})]})]})}),t.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx(xo,{className:"h-8 w-8 text-purple-600"}),t.jsxs("div",{className:"ml-4",children:[t.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Obras"}),t.jsx("p",{className:"text-2xl font-bold text-gray-900",children:a.totalPlanejamentos}),t.jsxs("p",{className:"text-xs text-green-600",children:[a.planejamentosAndamento," em andamento"]})]})]})}),t.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx(Ts,{className:"h-8 w-8 text-yellow-600"}),t.jsxs("div",{className:"ml-4",children:[t.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Valor Total"}),t.jsx("p",{className:"text-2xl font-bold text-gray-900",children:d(a.valorTotalContratos)}),t.jsx("p",{className:"text-xs text-gray-500",children:"Contratos ativos"})]})]})})]}),t.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[t.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Ações Rápidas"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[t.jsx("button",{onClick:()=>e("/crm"),className:"bg-blue-50 hover:bg-blue-100 p-4 rounded-lg text-left transition-colors",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx(qr,{className:"h-6 w-6 text-blue-600"}),t.jsxs("div",{className:"ml-3",children:[t.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Novo Lead"}),t.jsx("p",{className:"text-xs text-gray-500",children:"Cadastrar lead"})]})]})}),t.jsx("button",{onClick:()=>e("/proposta"),className:"bg-green-50 hover:bg-green-100 p-4 rounded-lg text-left transition-colors",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx(qa,{className:"h-6 w-6 text-green-600"}),t.jsxs("div",{className:"ml-3",children:[t.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Nova Proposta"}),t.jsx("p",{className:"text-xs text-gray-500",children:"Criar proposta"})]})]})}),t.jsx("button",{onClick:()=>e("/contratos"),className:"bg-purple-50 hover:bg-purple-100 p-4 rounded-lg text-left transition-colors",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx(xo,{className:"h-6 w-6 text-purple-600"}),t.jsxs("div",{className:"ml-3",children:[t.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Novo Contrato"}),t.jsx("p",{className:"text-xs text-gray-500",children:"Cadastrar contrato"})]})]})}),t.jsx("button",{onClick:()=>e("/funcionarios"),className:"bg-yellow-50 hover:bg-yellow-100 p-4 rounded-lg text-left transition-colors",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx(Qc,{className:"h-6 w-6 text-yellow-600"}),t.jsxs("div",{className:"ml-3",children:[t.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Funcionário"}),t.jsx("p",{className:"text-xs text-gray-500",children:"Cadastrar funcionário"})]})]})})]})]}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[t.jsxs("div",{className:"bg-white rounded-lg shadow",children:[t.jsx("div",{className:"p-6 border-b border-gray-200",children:t.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Atividades Recentes"})}),t.jsx("div",{className:"p-6",children:s.length>0?t.jsx("div",{className:"space-y-4",children:s.map(b=>t.jsxs("div",{className:"flex items-start space-x-3",children:[t.jsx("div",{className:"flex-shrink-0",children:h(b.type)}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("p",{className:"text-sm font-medium text-gray-900",children:b.title}),t.jsx("p",{className:"text-sm text-gray-500",children:b.description}),t.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[t.jsx("p",{className:"text-xs text-gray-400",children:p(b.timestamp)}),b.status&&t.jsx("span",{className:`inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium ${x(b.status)}`,children:b.status})]})]})]},b.id))}):t.jsxs("div",{className:"text-center py-4",children:[t.jsx(si,{className:"h-8 w-8 text-gray-400 mx-auto mb-2"}),t.jsx("p",{className:"text-sm text-gray-500",children:"Nenhuma atividade recente"})]})})]}),t.jsxs("div",{className:"bg-white rounded-lg shadow",children:[t.jsx("div",{className:"p-6 border-b border-gray-200",children:t.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Alertas"})}),t.jsx("div",{className:"p-6",children:t.jsxs("div",{className:"space-y-4",children:[a.planejamentosAndamento>0&&t.jsxs("div",{className:"flex items-start space-x-3",children:[t.jsx(po,{className:"h-5 w-5 text-yellow-500 flex-shrink-0 mt-0.5"}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Obras em Andamento"}),t.jsxs("p",{className:"text-sm text-gray-500",children:[a.planejamentosAndamento," obra",a.planejamentosAndamento>1?"s":""," em andamento"]})]})]}),a.leadsAtivos>0&&t.jsxs("div",{className:"flex items-start space-x-3",children:[t.jsx(Jc,{className:"h-5 w-5 text-blue-500 flex-shrink-0 mt-0.5"}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Leads Ativos"}),t.jsxs("p",{className:"text-sm text-gray-500",children:[a.leadsAtivos," lead",a.leadsAtivos>1?"s":""," aguardando contato"]})]})]}),a.contratosAtivos>0&&t.jsxs("div",{className:"flex items-start space-x-3",children:[t.jsx(ps,{className:"h-5 w-5 text-green-500 flex-shrink-0 mt-0.5"}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Contratos Ativos"}),t.jsxs("p",{className:"text-sm text-gray-500",children:[a.contratosAtivos," contrato",a.contratosAtivos>1?"s":""," em execução"]})]})]}),a.totalLeads===0&&a.totalContratos===0&&a.totalPlanejamentos===0&&t.jsxs("div",{className:"text-center py-4",children:[t.jsx(Qr,{className:"h-8 w-8 text-gray-400 mx-auto mb-2"}),t.jsx("p",{className:"text-sm text-gray-500",children:"Nenhum alerta no momento"})]})]})})]})]}),t.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[t.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Resumo Financeiro"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[t.jsxs("div",{className:"text-center",children:[t.jsx("p",{className:"text-2xl font-bold text-green-600",children:d(a.valorTotalContratos)}),t.jsx("p",{className:"text-sm text-gray-500",children:"Valor Total de Contratos"})]}),t.jsxs("div",{className:"text-center",children:[t.jsx("p",{className:"text-2xl font-bold text-blue-600",children:a.contratosAtivos}),t.jsx("p",{className:"text-sm text-gray-500",children:"Contratos Ativos"})]}),t.jsxs("div",{className:"text-center",children:[t.jsx("p",{className:"text-2xl font-bold text-purple-600",children:a.valorTotalContratos>0?d(a.valorTotalContratos/(a.totalContratos||1)):d(0)}),t.jsx("p",{className:"text-sm text-gray-500",children:"Valor Médio por Contrato"})]})]})]})]})}const uu=[{id:"prospect",label:"Prospect",color:"gray"},{id:"negociacao",label:"Negociação",color:"yellow"},{id:"fechado",label:"Fechado",color:"green"},{id:"perdido",label:"Perdido",color:"red"}],Qh=e=>e==null||isNaN(Number(e))?"R$ 0":`R$ ${Number(e).toLocaleString()}`,Yh=e=>e==null||isNaN(Number(e))?0:Number(e);function o3(){var se;const[e,a]=I.useState([]),[r,s]=I.useState(!0),[n,o]=I.useState(!1),[i,c]=I.useState(null),[d,p]=I.useState(null),[h,x]=I.useState({nome:"",contato:"",estagio:"prospect",origem:"",valor:0,responsavel:""});I.useEffect(()=>{b()},[]);const b=async()=>{try{s(!0);const{list:J}=await Ie.entities.leads.list();a(J||[])}catch(J){console.error("Erro ao buscar leads:",J),X.error("Erro ao carregar leads")}finally{s(!1)}},g=async J=>{J.preventDefault();try{const Y={...h,historico:(i==null?void 0:i.historico)||[],criadoEm:(i==null?void 0:i.criadoEm)||new Date().toISOString(),atualizadoEm:new Date().toISOString()};i?(await Ie.entities.leads.update(i._id,Y),X.success("Lead atualizado com sucesso")):(await Ie.entities.leads.create(Y),X.success("Lead criado com sucesso")),await b(),v()}catch(Y){console.error("Erro ao salvar lead:",Y),X.error("Erro ao salvar lead")}},w=async J=>{if(confirm("Tem certeza que deseja excluir este lead?"))try{await Ie.entities.leads.delete(J),X.success("Lead excluído com sucesso"),await b()}catch(Y){console.error("Erro ao excluir lead:",Y),X.error("Erro ao excluir lead")}},_=async(J,Y)=>{try{const K=e.find(fe=>fe._id===J);if(!K)return;await Ie.entities.leads.update(J,{...K,estagio:Y,atualizadoEm:new Date().toISOString()}),Y==="fechado"&&await O(K),await b(),X.success("Estágio atualizado com sucesso")}catch(K){console.error("Erro ao atualizar estágio:",K),X.error("Erro ao atualizar estágio")}},O=async J=>{try{const Y={cliente:J.nome,status:"rascunho",nomeProjeto:`Projeto ${J.nome}`,bdi:0,margem:0,desconto:0,valorTotal:Yh(J.valor),prazoValidade:new Date(Date.now()+2592e6).toISOString(),etapas:[],versoes:[{versao:1,data:new Date().toISOString(),alteracoes:"Criado automaticamente a partir do lead fechado"}],leadOrigemId:J._id,criadoEm:new Date().toISOString(),atualizadoEm:new Date().toISOString()};await Ie.entities.orcamentos.create(Y),X.success("Orçamento criado automaticamente para o lead fechado!")}catch(Y){console.error("Erro ao criar orçamento:",Y),X.error("Erro ao criar orçamento automático")}},y=J=>{J?(c(J),x({nome:J.nome,contato:J.contato,estagio:J.estagio,origem:J.origem,valor:Yh(J.valor),responsavel:J.responsavel})):(c(null),x({nome:"",contato:"",estagio:"prospect",origem:"",valor:0,responsavel:""})),o(!0)},v=()=>{o(!1),c(null),p(null)},C=J=>{const Y=uu.find(K=>K.id===J);return(Y==null?void 0:Y.color)||"gray"},W={total:e.length,fechados:e.filter(J=>(J==null?void 0:J.estagio)==="fechado").length,valorTotal:e.filter(J=>(J==null?void 0:J.estagio)==="fechado").reduce((J,Y)=>J+Yh(Y==null?void 0:Y.valor),0),emNegociacao:e.filter(J=>(J==null?void 0:J.estagio)==="negociacao").length};return r?t.jsx("div",{className:"flex items-center justify-center h-64",children:t.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"CRM - Gestão de Leads"}),t.jsx("p",{className:"text-gray-600",children:"Gerencie seus leads e oportunidades"})]}),t.jsxs("button",{onClick:()=>y(),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 flex items-center space-x-2",children:[t.jsx(wa,{className:"h-4 w-4"}),t.jsx("span",{children:"Novo Lead"})]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[t.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx(kl,{className:"h-8 w-8 text-blue-600"}),t.jsxs("div",{className:"ml-4",children:[t.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total de Leads"}),t.jsx("p",{className:"text-2xl font-bold text-gray-900",children:W.total})]})]})}),t.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx(Ts,{className:"h-8 w-8 text-green-600"}),t.jsxs("div",{className:"ml-4",children:[t.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Leads Fechados"}),t.jsx("p",{className:"text-2xl font-bold text-gray-900",children:W.fechados})]})]})}),t.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx(Ts,{className:"h-8 w-8 text-purple-600"}),t.jsxs("div",{className:"ml-4",children:[t.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Valor Total Fechado"}),t.jsx("p",{className:"text-2xl font-bold text-gray-900",children:Qh(W.valorTotal)})]})]})}),t.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx(ab,{className:"h-8 w-8 text-yellow-600"}),t.jsxs("div",{className:"ml-4",children:[t.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Em Negociação"}),t.jsx("p",{className:"text-2xl font-bold text-gray-900",children:W.emNegociacao})]})]})})]}),t.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[t.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:t.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Lista de Leads"})}),t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[t.jsx("thead",{className:"bg-gray-50",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Nome"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Contato"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Estágio"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Origem"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Valor"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Responsável"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Ações"})]})}),t.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:e.map(J=>t.jsxs("tr",{className:"hover:bg-gray-50",children:[t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.jsx("div",{className:"text-sm font-medium text-gray-900",children:J.nome})}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.jsx("div",{className:"text-sm text-gray-900",children:J.contato})}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.jsx("select",{value:J.estagio,onChange:Y=>_(J._id,Y.target.value),className:`text-sm rounded-full px-3 py-1 font-medium border-0 focus:ring-2 focus:ring-offset-2 ${C(J.estagio)==="green"?"bg-green-100 text-green-800 focus:ring-green-500":C(J.estagio)==="yellow"?"bg-yellow-100 text-yellow-800 focus:ring-yellow-500":C(J.estagio)==="red"?"bg-red-100 text-red-800 focus:ring-red-500":"bg-gray-100 text-gray-800 focus:ring-gray-500"}`,children:uu.map(Y=>t.jsx("option",{value:Y.id,children:Y.label},Y.id))})}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:J.origem}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:Qh(J.valor)}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:J.responsavel}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:t.jsxs("div",{className:"flex space-x-2",children:[t.jsx("button",{onClick:()=>p(J),className:"text-blue-600 hover:text-blue-900",title:"Visualizar",children:t.jsx(yo,{className:"h-4 w-4"})}),t.jsx("button",{onClick:()=>y(J),className:"text-green-600 hover:text-green-900",title:"Editar",children:t.jsx(gs,{className:"h-4 w-4"})}),t.jsx("button",{onClick:()=>w(J._id),className:"text-red-600 hover:text-red-900",title:"Excluir",children:t.jsx(Ms,{className:"h-4 w-4"})})]})})]},J._id))})]})})]}),n&&t.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:t.jsx("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:t.jsxs("div",{className:"mt-3",children:[t.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:i?"Editar Lead":"Novo Lead"}),t.jsxs("form",{onSubmit:g,className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Nome"}),t.jsx("input",{type:"text",value:h.nome,onChange:J=>x({...h,nome:J.target.value}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500",required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Contato"}),t.jsx("input",{type:"text",value:h.contato,onChange:J=>x({...h,contato:J.target.value}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500",required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Estágio"}),t.jsx("select",{value:h.estagio,onChange:J=>x({...h,estagio:J.target.value}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500",children:uu.map(J=>t.jsx("option",{value:J.id,children:J.label},J.id))})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Origem"}),t.jsx("input",{type:"text",value:h.origem,onChange:J=>x({...h,origem:J.target.value}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500",required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Valor"}),t.jsx("input",{type:"number",value:h.valor,onChange:J=>x({...h,valor:Number(J.target.value)}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500",required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Responsável"}),t.jsx("input",{type:"text",value:h.responsavel,onChange:J=>x({...h,responsavel:J.target.value}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500",required:!0})]}),t.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[t.jsx("button",{type:"button",onClick:v,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 border border-gray-300 rounded-md hover:bg-gray-200",children:"Cancelar"}),t.jsx("button",{type:"submit",className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-md hover:bg-blue-700",children:i?"Atualizar":"Criar"})]})]})]})})}),d&&t.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:t.jsx("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:t.jsxs("div",{className:"mt-3",children:[t.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Detalhes do Lead"}),t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{children:[t.jsx("span",{className:"font-medium",children:"Nome:"})," ",d.nome]}),t.jsxs("div",{children:[t.jsx("span",{className:"font-medium",children:"Contato:"})," ",d.contato]}),t.jsxs("div",{children:[t.jsx("span",{className:"font-medium",children:"Estágio:"}),t.jsx("span",{className:`ml-2 px-2 py-1 rounded-full text-xs ${C(d.estagio)==="green"?"bg-green-100 text-green-800":C(d.estagio)==="yellow"?"bg-yellow-100 text-yellow-800":C(d.estagio)==="red"?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"}`,children:(se=uu.find(J=>J.id===d.estagio))==null?void 0:se.label})]}),t.jsxs("div",{children:[t.jsx("span",{className:"font-medium",children:"Origem:"})," ",d.origem]}),t.jsxs("div",{children:[t.jsx("span",{className:"font-medium",children:"Valor:"})," ",Qh(d.valor)]}),t.jsxs("div",{children:[t.jsx("span",{className:"font-medium",children:"Responsável:"})," ",d.responsavel]}),d.historico&&d.historico.length>0&&t.jsxs("div",{children:[t.jsx("span",{className:"font-medium",children:"Histórico:"}),t.jsx("div",{className:"mt-2 space-y-2 max-h-40 overflow-y-auto",children:d.historico.map((J,Y)=>t.jsxs("div",{className:"text-sm bg-gray-50 p-2 rounded",children:[t.jsx("div",{className:"font-medium",children:J.acao}),t.jsx("div",{className:"text-gray-600",children:J.descricao}),t.jsx("div",{className:"text-xs text-gray-500",children:new Date(J.data).toLocaleString()})]},Y))})]})]}),t.jsx("div",{className:"flex justify-end pt-4",children:t.jsx("button",{onClick:v,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 border border-gray-300 rounded-md hover:bg-gray-200",children:"Fechar"})})]})})})]})}function i3(){const[e,a]=I.useState([]),[r,s]=I.useState([]),[n,o]=I.useState(!0),[i,c]=I.useState(!1),[d,p]=I.useState(!1),[h,x]=I.useState(null),[b,g]=I.useState("todos"),[w,_]=I.useState(""),[O,y]=I.useState({nome:"",tipo:"material",unidadeMedida:"",precoUnitario:0,temEstoque:!1,quantidade:0}),[v,C]=I.useState({nome:"",unidadeMedida:"",itens:[]});I.useEffect(()=>{W()},[]);const W=async()=>{try{o(!0);const[N,U]=await Promise.all([Ie.entities.insumos.list(),Ie.entities.estoque.list()]);a(N.list||[]),s(U.list||[]),await se(N.list||[],U.list||[])}catch(N){console.error("Erro ao buscar dados:",N),X.error("Erro ao carregar dados")}finally{o(!1)}},se=async(N,U)=>{try{const T=[];for(const B of U){const oe=N.find(Ne=>{var Be,Xe,dt;return Ne.estoqueId===B._id||((Be=Ne.nome)==null?void 0:Be.toLowerCase())===((Xe=B.nomeInsumo)==null?void 0:Xe.toLowerCase())&&((dt=Ne.estoque)==null?void 0:dt.temEstoque)});if(oe){if(oe&&!oe.estoqueId){const Ne={...oe,estoqueId:B._id,origemEstoque:!0,estoque:{temEstoque:!0,quantidade:B.quantidade||0},precoUnitario:B.valorUnitario||oe.precoUnitario,atualizadoEm:new Date().toISOString()};await Ie.entities.insumos.update(oe._id,Ne)}}else{const Ne={nome:B.nomeInsumo||"Material do Estoque",tipo:"material",unidadeMedida:"un",precoUnitario:B.valorUnitario||0,estoque:{temEstoque:!0,quantidade:B.quantidade||0},origemEstoque:!0,estoqueId:B._id,criadoEm:new Date().toISOString(),atualizadoEm:new Date().toISOString()};T.push(Ne)}}for(const B of T)await Ie.entities.insumos.create(B);if(T.length>0){X.success(`${T.length} produtos do estoque importados para Base de Insumos`);const{list:B}=await Ie.entities.insumos.list();a(B||[])}}catch(T){console.error("Erro ao sincronizar estoque para insumos:",T),X.error("Erro ao sincronizar produtos do estoque")}},J=async()=>{try{o(!0),X.loading("Sincronizando produtos do estoque...",{id:"sync"});const[N,U]=await Promise.all([Ie.entities.insumos.list(),Ie.entities.estoque.list()]);await se(N.list||[],U.list||[]),X.success("Sincronização concluída!",{id:"sync"})}catch(N){console.error("Erro na sincronização forçada:",N),X.error("Erro na sincronização",{id:"sync"})}finally{o(!1)}},Y=async N=>{var U;if(!(!((U=N.estoque)!=null&&U.temEstoque)||N.tipo==="maoDeObra"))try{const T=r.find(B=>B.insumoId===N._id||B._id===N.estoqueId);if(T){const B={...T,insumoId:N._id,nomeInsumo:N.nome,quantidade:N.estoque.quantidade,valorUnitario:N.precoUnitario,valorTotal:N.estoque.quantidade*N.precoUnitario,dataUltimaEntrada:new Date().toISOString(),atualizadoEm:new Date().toISOString()};await Ie.entities.estoque.update(T._id,B),N.estoqueId||await Ie.entities.insumos.update(N._id,{...N,estoqueId:T._id,atualizadoEm:new Date().toISOString()})}else{const B={insumoId:N._id,nomeInsumo:N.nome,quantidade:N.estoque.quantidade,quantidadeMinima:10,valorUnitario:N.precoUnitario,valorTotal:N.estoque.quantidade*N.precoUnitario,localizacao:"Estoque Principal",dataUltimaEntrada:new Date().toISOString(),movimentacoes:[{id:`mov_${Date.now()}`,tipo:"entrada",quantidade:N.estoque.quantidade,motivo:"Inclusão automática da Base de Insumos",data:new Date().toISOString(),responsavel:"Sistema"}],criadoEm:new Date().toISOString(),atualizadoEm:new Date().toISOString()},oe=await Ie.entities.estoque.create(B);await Ie.entities.insumos.update(N._id,{...N,estoqueId:oe._id,atualizadoEm:new Date().toISOString()})}N.estoque.quantidade<=10&&await K(N),X.success("Insumo sincronizado com estoque")}catch(T){console.error("Erro ao sincronizar com estoque:",T),X.error("Erro ao sincronizar com estoque")}},K=async N=>{try{const U={planejamentoId:"",materialId:N._id,nomeMaterial:N.nome,quantidade:Math.max(50,N.estoque.quantidade*2),status:"enviado",cotacoes:[],valorEstimado:N.precoUnitario*Math.max(50,N.estoque.quantidade*2),observacoes:`Solicitação automática - Estoque baixo (${N.estoque.quantidade} ${N.unidadeMedida})`,criadoEm:new Date().toISOString(),atualizadoEm:new Date().toISOString()};await Ie.entities.compras.create(U)}catch(U){console.error("Erro ao criar solicitação de compra:",U)}},fe=async(N,U)=>{var T;try{const B=e.find(oe=>oe._id===N);if(!B)return;if(B.estoqueId){const oe=r.find(Ne=>Ne._id===B.estoqueId);if(oe){const Ne=Math.max(0,oe.quantidade-U),Be={...oe,quantidade:Ne,valorTotal:Ne*oe.valorUnitario,dataUltimaSaida:new Date().toISOString(),movimentacoes:[...oe.movimentacoes||[],{id:`mov_${Date.now()}`,tipo:"saida",quantidade:U,motivo:"Baixa automática da Base de Insumos",data:new Date().toISOString(),responsavel:"Sistema"}],atualizadoEm:new Date().toISOString()};await Ie.entities.estoque.update(oe._id,Be)}}if((T=B.estoque)!=null&&T.temEstoque){const oe=Math.max(0,B.estoque.quantidade-U),Ne={...B,estoque:{...B.estoque,quantidade:oe},atualizadoEm:new Date().toISOString()};await Ie.entities.insumos.update(B._id,Ne)}await W(),X.success("Baixa sincronizada entre insumo e estoque")}catch(B){console.error("Erro ao sincronizar baixa:",B),X.error("Erro ao sincronizar baixa")}},me=async N=>{N.preventDefault();try{const U={nome:O.nome,tipo:O.tipo,unidadeMedida:O.unidadeMedida,precoUnitario:O.precoUnitario,estoque:{temEstoque:O.temEstoque,quantidade:O.quantidade},criadoEm:(h==null?void 0:h.criadoEm)||new Date().toISOString(),atualizadoEm:new Date().toISOString()};let T;h?(await Ie.entities.insumos.update(h._id,U),T={...h,...U},X.success("Insumo atualizado com sucesso")):(T=await Ie.entities.insumos.create(U),X.success("Insumo criado com sucesso")),O.temEstoque&&O.tipo!=="maoDeObra"&&await Y(T),await W(),he()}catch(U){console.error("Erro ao salvar insumo:",U),X.error("Erro ao salvar insumo")}},$=async N=>{if(N.preventDefault(),v.itens.length===0){X.error("Adicione pelo menos um item à composição");return}try{const U=v.itens.reduce((B,oe)=>B+oe.valorTotal,0),T={nome:v.nome,tipo:"composicao",unidadeMedida:v.unidadeMedida,precoUnitario:U,estoque:{temEstoque:!1,quantidade:0},composicao:v.itens,criadoEm:new Date().toISOString(),atualizadoEm:new Date().toISOString()};await Ie.entities.insumos.create(T),X.success("Composição criada com sucesso"),await W(),ie()}catch(U){console.error("Erro ao criar composição:",U),X.error("Erro ao criar composição")}},L=N=>{if(N.tipo==="composicao"){X.error("Não é possível adicionar uma composição dentro de outra composição");return}const U={insumoId:N._id,nome:N.nome,tipo:N.tipo,quantidade:1,valorUnitario:N.precoUnitario,valorTotal:N.precoUnitario};C(T=>({...T,itens:[...T.itens,U]}))},le=(N,U,T)=>{C(B=>({...B,itens:B.itens.map((oe,Ne)=>{if(Ne===N){const Be={...oe,[U]:T};return Be.valorTotal=Be.quantidade*Be.valorUnitario,Be}return oe})}))},R=N=>{C(U=>({...U,itens:U.itens.filter((T,B)=>B!==N)}))},we=async N=>{if(confirm("Tem certeza que deseja excluir este insumo?"))try{const U=e.find(T=>T._id===N);U!=null&&U.estoqueId&&await Ie.entities.estoque.delete(U.estoqueId),await Ie.entities.insumos.delete(N),X.success("Insumo excluído com sucesso"),await W()}catch(U){console.error("Erro ao excluir insumo:",U),X.error("Erro ao excluir insumo")}},ce=async N=>{var oe;const U=prompt("Digite a quantidade para baixa:");if(!U||isNaN(Number(U)))return;const T=Number(U);if(T<=0){X.error("Quantidade deve ser maior que zero");return}const B=e.find(Ne=>Ne._id===N);if(!B||!((oe=B.estoque)!=null&&oe.temEstoque)){X.error("Insumo não possui controle de estoque");return}if(T>B.estoque.quantidade){X.error("Quantidade insuficiente em estoque");return}await fe(N,T)},Ce=N=>{var U,T;N?(x(N),y({nome:N.nome,tipo:N.tipo,unidadeMedida:N.unidadeMedida,precoUnitario:N.precoUnitario,temEstoque:((U=N.estoque)==null?void 0:U.temEstoque)||!1,quantidade:((T=N.estoque)==null?void 0:T.quantidade)||0})):(x(null),y({nome:"",tipo:"material",unidadeMedida:"",precoUnitario:0,temEstoque:!1,quantidade:0})),c(!0)},Z=()=>{C({nome:"",unidadeMedida:"",itens:[]}),p(!0)},he=()=>{c(!1),x(null)},ie=()=>{p(!1),C({nome:"",unidadeMedida:"",itens:[]})},Ue=e.filter(N=>{var B;const U=b==="todos"||b==="materiais"&&N.tipo==="material"||b==="maoObra"&&N.tipo==="maoDeObra"||b==="composicoes"&&N.tipo==="composicao",T=w===""||((B=N.nome)==null?void 0:B.toLowerCase().includes(w.toLowerCase()));return U&&T}),S=e.filter(N=>N.tipo!=="composicao"),G={totalItens:e.filter(N=>{var U;return((U=N.estoque)==null?void 0:U.temEstoque)||!1}).length,valorTotal:e.filter(N=>{var U;return((U=N.estoque)==null?void 0:U.temEstoque)||!1}).reduce((N,U)=>{var T;return N+(U.precoUnitario||0)*(((T=U.estoque)==null?void 0:T.quantidade)||0)},0),itensBaixoEstoque:e.filter(N=>{var U,T;return(((U=N.estoque)==null?void 0:U.temEstoque)||!1)&&(((T=N.estoque)==null?void 0:T.quantidade)||0)<=10}).length,itensDoEstoque:e.filter(N=>N.origemEstoque).length},q=v.itens.reduce((N,U)=>N+U.valorTotal,0);return n?t.jsx("div",{className:"flex items-center justify-center h-64",children:t.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Base de Insumos"}),t.jsx("p",{className:"text-gray-600",children:"Gerencie materiais, mão de obra e composições - Integrado com Compras/Estoque"})]}),t.jsxs("div",{className:"flex space-x-3",children:[t.jsxs("button",{onClick:J,className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 flex items-center space-x-2",children:[t.jsx(vl,{className:"h-4 w-4"}),t.jsx("span",{children:"Sincronizar Estoque"})]}),t.jsxs("button",{onClick:Z,className:"bg-purple-600 text-white px-4 py-2 rounded-lg hover:bg-purple-700 flex items-center space-x-2",children:[t.jsx(ro,{className:"h-4 w-4"}),t.jsx("span",{children:"Nova Composição"})]}),t.jsxs("button",{onClick:()=>Ce(),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 flex items-center space-x-2",children:[t.jsx(wa,{className:"h-4 w-4"}),t.jsx("span",{children:"Novo Insumo"})]})]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[t.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx(Qr,{className:"h-8 w-8 text-blue-600"}),t.jsxs("div",{className:"ml-4",children:[t.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Itens em Estoque"}),t.jsx("p",{className:"text-2xl font-bold text-gray-900",children:G.totalItens})]})]})}),t.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx(Qr,{className:"h-8 w-8 text-green-600"}),t.jsxs("div",{className:"ml-4",children:[t.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Valor Total Estoque"}),t.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:["R$ ",G.valorTotal.toLocaleString()]})]})]})}),t.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx(Qr,{className:"h-8 w-8 text-red-600"}),t.jsxs("div",{className:"ml-4",children:[t.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Estoque Baixo"}),t.jsx("p",{className:"text-2xl font-bold text-gray-900",children:G.itensBaixoEstoque})]})]})}),t.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx(bo,{className:"h-8 w-8 text-purple-600"}),t.jsxs("div",{className:"ml-4",children:[t.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Importados do Estoque"}),t.jsx("p",{className:"text-2xl font-bold text-gray-900",children:G.itensDoEstoque})]})]})})]}),t.jsx("div",{className:"bg-white rounded-lg shadow p-4",children:t.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[t.jsx("div",{className:"flex-1",children:t.jsxs("div",{className:"relative",children:[t.jsx(Sl,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),t.jsx("input",{type:"text",placeholder:"Buscar insumos...",value:w,onChange:N=>_(N.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})}),t.jsx("div",{className:"flex space-x-2",children:[{id:"todos",label:"Todos",icon:W4},{id:"materiais",label:"Materiais",icon:Qr},{id:"maoObra",label:"Mão de Obra",icon:a3},{id:"composicoes",label:"Composições",icon:ro}].map(N=>{const U=N.icon;return t.jsxs("button",{onClick:()=>g(N.id),className:`${b===N.id?"bg-blue-500 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"} px-3 py-2 rounded-lg font-medium text-sm flex items-center space-x-2`,children:[t.jsx(U,{className:"h-4 w-4"}),t.jsx("span",{children:N.label})]},N.id)})})]})}),t.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[t.jsx("thead",{className:"bg-gray-50",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Nome"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tipo"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Unidade"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Preço Unitário"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Estoque"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Origem"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Integração"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Ações"})]})}),t.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:Ue.map(N=>{var U,T,B,oe,Ne;return t.jsxs("tr",{className:"hover:bg-gray-50",children:[t.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[t.jsx("div",{className:"text-sm font-medium text-gray-900",children:N.nome||"N/A"}),N.tipo==="composicao"&&N.composicao&&t.jsxs("div",{className:"text-xs text-gray-500",children:[N.composicao.length," itens na composição"]})]}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${N.tipo==="material"?"bg-blue-100 text-blue-800":N.tipo==="maoDeObra"?"bg-green-100 text-green-800":"bg-purple-100 text-purple-800"}`,children:N.tipo==="material"?"Material":N.tipo==="maoDeObra"?"Mão de Obra":"Composição"})}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:N.unidadeMedida||"N/A"}),t.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:["R$ ",(N.precoUnitario||0).toFixed(2)]}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:N.tipo==="composicao"?t.jsx("span",{className:"text-gray-400",children:"N/A"}):(U=N.estoque)!=null&&U.temEstoque?t.jsx("span",{className:`font-medium ${(((T=N.estoque)==null?void 0:T.quantidade)||0)<=10?"text-red-600":"text-green-600"}`,children:((B=N.estoque)==null?void 0:B.quantidade)||0}):t.jsx("span",{className:"text-gray-400",children:"N/A"})}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:N.origemEstoque?t.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs bg-purple-100 text-purple-800",children:"📦 Estoque Compras"}):t.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs bg-blue-100 text-blue-800",children:"✏️ Manual"})}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:(oe=N.estoque)!=null&&oe.temEstoque&&N.tipo!=="maoDeObra"?t.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs bg-green-100 text-green-800",children:"✓ Sincronizado"}):t.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs bg-gray-100 text-gray-800",children:"- Não aplicável"})}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:t.jsxs("div",{className:"flex space-x-2",children:[t.jsx("button",{onClick:()=>Ce(N),className:"text-blue-600 hover:text-blue-900",title:"Editar",children:t.jsx(gs,{className:"h-4 w-4"})}),((Ne=N.estoque)==null?void 0:Ne.temEstoque)&&N.tipo!=="maoDeObra"&&t.jsx("button",{onClick:()=>ce(N._id),className:"text-orange-600 hover:text-orange-900",title:"Dar Baixa (sincroniza com Estoque)",children:t.jsx(Qr,{className:"h-4 w-4"})}),t.jsx("button",{onClick:()=>we(N._id),className:"text-red-600 hover:text-red-900",title:"Excluir",children:t.jsx(Ms,{className:"h-4 w-4"})})]})})]},N._id)})})]})})}),i&&t.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:t.jsx("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:t.jsxs("div",{className:"mt-3",children:[t.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:h?"Editar Insumo":"Novo Insumo"}),t.jsxs("form",{onSubmit:me,className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Nome"}),t.jsx("input",{type:"text",value:O.nome,onChange:N=>y({...O,nome:N.target.value}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500",required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Tipo"}),t.jsxs("select",{value:O.tipo,onChange:N=>y({...O,tipo:N.target.value}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500",children:[t.jsx("option",{value:"material",children:"Material"}),t.jsx("option",{value:"maoDeObra",children:"Mão de Obra"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Unidade de Medida"}),t.jsx("input",{type:"text",value:O.unidadeMedida,onChange:N=>y({...O,unidadeMedida:N.target.value}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"ex: kg, m², h, sc",required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Preço Unitário"}),t.jsx("input",{type:"number",step:"0.01",value:O.precoUnitario,onChange:N=>y({...O,precoUnitario:Number(N.target.value)}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500",required:!0})]}),t.jsxs("div",{className:"flex items-center",children:[t.jsx("input",{type:"checkbox",checked:O.temEstoque,onChange:N=>y({...O,temEstoque:N.target.checked}),className:"mr-2"}),t.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Controlar estoque (sincroniza com Compras/Estoque)"})]}),O.temEstoque&&t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Quantidade em Estoque"}),t.jsx("input",{type:"number",value:O.quantidade,onChange:N=>y({...O,quantidade:Number(N.target.value)}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500"}),t.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Será automaticamente sincronizado com o módulo Compras/Estoque"})]}),t.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[t.jsx("button",{type:"button",onClick:he,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 border border-gray-300 rounded-md hover:bg-gray-200",children:"Cancelar"}),t.jsx("button",{type:"submit",className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-md hover:bg-blue-700",children:h?"Atualizar":"Criar"})]})]})]})})}),d&&t.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:t.jsx("div",{className:"relative top-10 mx-auto p-5 border w-full max-w-4xl shadow-lg rounded-md bg-white",children:t.jsxs("div",{className:"mt-3",children:[t.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Nova Composição de Insumos"}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[t.jsx("div",{children:t.jsxs("form",{onSubmit:$,className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Nome da Composição"}),t.jsx("input",{type:"text",value:v.nome,onChange:N=>C({...v,nome:N.target.value}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500",required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Unidade de Medida"}),t.jsx("input",{type:"text",value:v.unidadeMedida,onChange:N=>C({...v,unidadeMedida:N.target.value}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"ex: m², m³, un",required:!0})]}),t.jsx("div",{className:"bg-purple-50 p-4 rounded-lg",children:t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Valor Total da Composição:"}),t.jsxs("span",{className:"text-lg font-bold text-purple-600",children:["R$ ",q.toFixed(2)]})]})}),t.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[t.jsx("button",{type:"button",onClick:ie,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 border border-gray-300 rounded-md hover:bg-gray-200",children:"Cancelar"}),t.jsx("button",{type:"submit",className:"px-4 py-2 text-sm font-medium text-white bg-purple-600 border border-transparent rounded-md hover:bg-purple-700",children:"Criar Composição"})]})]})}),t.jsxs("div",{children:[t.jsx("h4",{className:"text-md font-medium text-gray-900 mb-3",children:"Insumos Disponíveis"}),t.jsx("div",{className:"max-h-96 overflow-y-auto border border-gray-200 rounded-lg",children:S.map(N=>t.jsx("div",{className:"p-3 border-b border-gray-100 hover:bg-gray-50",children:t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-gray-900",children:N.nome}),t.jsxs("p",{className:"text-xs text-gray-500",children:[N.tipo==="material"?"Material":"Mão de Obra"," - R$ ",N.precoUnitario.toFixed(2),"/",N.unidadeMedida,N.origemEstoque&&t.jsx("span",{className:"ml-1 text-purple-600",children:"📦"})]})]}),t.jsx("button",{type:"button",onClick:()=>L(N),className:"text-purple-600 hover:text-purple-800",children:t.jsx(wa,{className:"h-4 w-4"})})]})},N._id))})]})]}),v.itens.length>0&&t.jsxs("div",{className:"mt-6",children:[t.jsx("h4",{className:"text-md font-medium text-gray-900 mb-3",children:"Itens da Composição"}),t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[t.jsx("thead",{className:"bg-gray-50",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Item"}),t.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Tipo"}),t.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Qtd"}),t.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Valor Unit."}),t.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Total"}),t.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Ações"})]})}),t.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:v.itens.map((N,U)=>t.jsxs("tr",{children:[t.jsx("td",{className:"px-4 py-2 text-sm text-gray-900",children:N.nome}),t.jsx("td",{className:"px-4 py-2 text-sm text-gray-500",children:N.tipo==="material"?"Material":"Mão de Obra"}),t.jsx("td",{className:"px-4 py-2",children:t.jsx("input",{type:"number",step:"0.01",value:N.quantidade,onChange:T=>le(U,"quantidade",Number(T.target.value)),className:"w-20 border border-gray-300 rounded px-2 py-1 text-sm"})}),t.jsxs("td",{className:"px-4 py-2 text-sm text-gray-900",children:["R$ ",N.valorUnitario.toFixed(2)]}),t.jsxs("td",{className:"px-4 py-2 text-sm font-medium text-gray-900",children:["R$ ",N.valorTotal.toFixed(2)]}),t.jsx("td",{className:"px-4 py-2",children:t.jsx("button",{type:"button",onClick:()=>R(U),className:"text-red-600 hover:text-red-800",children:t.jsx(Ms,{className:"h-4 w-4"})})})]},U))})]})})]})]})})})]})}const ya=e=>{try{return e==null||isNaN(e)?"R$ 0,00":`R$ ${e.toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2})}`}catch(a){return console.error("Erro ao formatar moeda:",a),"R$ 0,00"}},mu=e=>{try{return e==null||isNaN(e)?"0":e.toLocaleString("pt-BR")}catch(a){return console.error("Erro ao formatar número:",a),"0"}};function l3(){var Dt;const[e,a]=I.useState(!0),[r,s]=I.useState(null),[n,o]=I.useState([]),[i,c]=I.useState([]),[d,p]=I.useState([]),[h,x]=I.useState([]),[b,g]=I.useState(""),[w,_]=I.useState(null),[O,y]=I.useState(""),[v,C]=I.useState(!1),[W,se]=I.useState(!1),[J,Y]=I.useState(!1),[K,fe]=I.useState(!1),[me,$]=I.useState(!1),[L,le]=I.useState(!1),[R,we]=I.useState(!1),[ce,Ce]=I.useState(!1),[Z,he]=I.useState(null),[ie,Ue]=I.useState(null),[S,G]=I.useState(null),[q,N]=I.useState(null),[U,T]=I.useState({status:"",cliente:"",dataInicio:"",dataFim:""}),[B,oe]=I.useState({cliente:"",nomeProjeto:"",descricao:"",validadeProposta:"",observacoes:"",bdi:0,desconto:0}),[Ne,Be]=I.useState({nome:"",ordem:1}),[Xe,dt]=I.useState({etapaId:"",nome:""}),[ft,Me]=I.useState({insumoId:"",quantidade:1}),[te,Ct]=I.useState({nome:"",email:"",telefone:"",empresa:""}),[ae,xe]=I.useState({nome:"",descricao:"",logo:"",cabecalho:{empresa:"",endereco:"",telefone:"",email:"",cnpj:""},rodape:{condicoesPagamento:"",validadeProposta:"",observacoes:""},configuracoes:{mostrarDetalhamento:!0,mostrarComposicao:!0,mostrarBDI:!0,mostrarDesconto:!0,corPrimaria:"#3B82F6",corSecundaria:"#1F2937"}}),[be,Te]=I.useState(null);I.useEffect(()=>{Ae()},[]),I.useEffect(()=>{if(b){const V=n.find(He=>He._id===b);_(V||null)}},[b,n]);const Ae=async()=>{try{a(!0),s(null);const[V,He,ze,vt]=await Promise.all([Ie.entities.propostas.list().catch(xt=>(console.error("Erro ao carregar propostas:",xt),{list:[]})),Ie.entities.leads.list().catch(xt=>(console.error("Erro ao carregar leads:",xt),{list:[]})),Ie.entities.insumos.list().catch(xt=>(console.error("Erro ao carregar insumos:",xt),{list:[]})),Ie.entities.templates_proposta.list().catch(xt=>(console.error("Erro ao carregar templates:",xt),{list:[]}))]);o(V.list||[]),c((He.list||[]).filter(xt=>xt.status==="fechado")),p(ze.list||[]),x(vt.list||[]),(V.list||[]).length>0&&!b&&g(V.list[0]._id)}catch(V){console.error("Erro crítico ao buscar dados:",V),s("Erro ao carregar dados da proposta"),X.error("Erro ao carregar dados")}finally{a(!1)}},tt=async()=>{if(!B.cliente||!B.nomeProjeto){X.error("Preencha os campos obrigatórios");return}try{const He={numero:`PROP-${new Date().getFullYear()}-${String(n.length+1).padStart(3,"0")}`,cliente:B.cliente,nomeProjeto:B.nomeProjeto,descricao:B.descricao,status:"rascunho",valorMaterial:0,valorMaoObra:0,valorTotal:0,bdi:B.bdi,desconto:B.desconto,etapas:[],observacoes:B.observacoes,validadeProposta:B.validadeProposta,criadoEm:new Date().toISOString(),atualizadoEm:new Date().toISOString()},ze=await Ie.entities.propostas.create(He);X.success("Proposta criada com sucesso"),await Ae(),g(ze._id),je()}catch(V){console.error("Erro ao criar proposta:",V),X.error("Erro ao criar proposta")}},rt=async()=>{if(Z)try{const V={...Z,cliente:B.cliente,nomeProjeto:B.nomeProjeto,descricao:B.descricao,bdi:B.bdi,desconto:B.desconto,observacoes:B.observacoes,validadeProposta:B.validadeProposta,atualizadoEm:new Date().toISOString()};await Ie.entities.propostas.update(Z._id,V),X.success("Proposta atualizada com sucesso"),await Ae(),je()}catch(V){console.error("Erro ao atualizar proposta:",V),X.error("Erro ao atualizar proposta")}},gt=async()=>{if(!w||!Ne.nome){X.error("Preencha o nome da etapa");return}try{const V={id:`etapa_${Date.now()}`,numero:String(w.etapas.length+1),nome:Ne.nome,ordem:Ne.ordem,insumos:[],subetapas:[]},He={...w,etapas:[...w.etapas,V],atualizadoEm:new Date().toISOString()};await Ie.entities.propostas.update(w._id,He),X.success("Etapa criada com sucesso"),await Ae(),qe()}catch(V){console.error("Erro ao criar etapa:",V),X.error("Erro ao criar etapa")}},st=async()=>{if(!w||!Xe.etapaId||!Xe.nome){X.error("Preencha todos os campos");return}try{const V=w.etapas.findIndex(xt=>xt.id===Xe.etapaId);if(V===-1){X.error("Etapa não encontrada");return}const He=w.etapas[V],ze={id:`subetapa_${Date.now()}`,numero:`${He.numero}.${He.subetapas.length+1}`,nome:Xe.nome,insumos:[]},vt={...w,etapas:w.etapas.map(xt=>xt.id===Xe.etapaId?{...xt,subetapas:[...xt.subetapas,ze]}:xt),atualizadoEm:new Date().toISOString()};await Ie.entities.propostas.update(w._id,vt),X.success("Subetapa criada com sucesso"),await Ae(),de()}catch(V){console.error("Erro ao criar subetapa:",V),X.error("Erro ao criar subetapa")}},Tt=async()=>{if(!w||!be||!ft.insumoId){X.error("Dados incompletos para adicionar insumo");return}try{const V=d.find(xt=>xt._id===ft.insumoId);if(!V){X.error("Insumo não encontrado");return}const He={id:`insumo_${Date.now()}`,insumoId:V._id,nome:V.nome,tipo:V.tipo==="maoDeObra"?"maoDeObra":"material",unidadeMedida:V.unidadeMedida,quantidade:ft.quantidade,valorUnitario:V.precoUnitario,valorTotal:ft.quantidade*V.precoUnitario},ze={...w},vt=ze.etapas.findIndex(xt=>xt.id===be.etapaId);if(vt===-1){X.error("Etapa não encontrada");return}if(be.type==="etapa")ze.etapas[vt].insumos||(ze.etapas[vt].insumos=[]),ze.etapas[vt].insumos.push(He);else{const xt=ze.etapas[vt].subetapas.findIndex(qt=>qt.id===be.subetapaId);if(xt===-1){X.error("Subetapa não encontrada");return}ze.etapas[vt].subetapas[xt].insumos||(ze.etapas[vt].subetapas[xt].insumos=[]),ze.etapas[vt].subetapas[xt].insumos.push(He)}ne(ze),await Ie.entities.propostas.update(w._id,{...ze,atualizadoEm:new Date().toISOString()}),await Ae(),Me({insumoId:"",quantidade:1}),Te(null),fe(!1),X.success(`Insumo "${V.nome}" adicionado com sucesso!`)}catch(V){console.error("Erro ao adicionar insumo:",V),X.error("Erro ao adicionar insumo")}},ne=V=>{let He=0,ze=0;V.etapas.forEach(Jt=>{Jt.insumos&&Jt.insumos.forEach(ma=>{ma.tipo==="material"?He+=ma.valorTotal||0:ze+=ma.valorTotal||0}),Jt.subetapas&&Jt.subetapas.forEach(ma=>{ma.insumos&&ma.insumos.forEach(F=>{F.tipo==="material"?He+=F.valorTotal||0:ze+=F.valorTotal||0})})});const qt=(He+ze)*(1+(V.bdi||0)/100)*(1-(V.desconto||0)/100);V.valorMaterial=He,V.valorMaoObra=ze,V.valorTotal=qt},Pe=async()=>{if(!ae.nome){X.error("Preencha o nome do template");return}try{const V={...ae,criadoEm:new Date().toISOString(),atualizadoEm:new Date().toISOString()};await Ie.entities.templates_proposta.create(V),X.success("Template criado com sucesso"),await Ae(),St()}catch(V){console.error("Erro ao criar template:",V),X.error("Erro ao criar template")}},at=async()=>{if(q)try{const V={...ae,atualizadoEm:new Date().toISOString()};await Ie.entities.templates_proposta.update(q._id,V),X.success("Template atualizado com sucesso"),await Ae(),St()}catch(V){console.error("Erro ao atualizar template:",V),X.error("Erro ao atualizar template")}},k=async()=>{if(!te.nome){X.error("Preencha o nome do cliente");return}try{const V={nome:te.nome,email:te.email,telefone:te.telefone,empresa:te.empresa,origem:"proposta",status:"fechado",observacoes:"Cliente criado a partir da proposta",criadoEm:new Date().toISOString(),atualizadoEm:new Date().toISOString()};await Ie.entities.leads.create(V),X.success("Cliente criado com sucesso"),await Ae(),oe({...B,cliente:te.nome}),ke()}catch(V){console.error("Erro ao criar cliente:",V),X.error("Erro ao criar cliente")}},Qe=async()=>{if(!w){X.error("Selecione uma proposta para exportar");return}try{const V=h.find(qt=>qt._id===O)||h[0],He=`
        <!DOCTYPE html>
        <html>
        <head>
          <meta charset="UTF-8">
          <title>Proposta ${w.numero}</title>
          <style>
            body { font-family: Arial, sans-serif; margin: 20px; }
            .header { text-align: center; border-bottom: 2px solid ${(V==null?void 0:V.configuracoes.corPrimaria)||"#3B82F6"}; padding-bottom: 20px; margin-bottom: 30px; }
            .company-info { margin-bottom: 20px; }
            .project-info { background-color: #f8f9fa; padding: 15px; border-radius: 5px; margin-bottom: 20px; }
            .etapa { margin-bottom: 25px; border-left: 4px solid ${(V==null?void 0:V.configuracoes.corPrimaria)||"#3B82F6"}; padding-left: 15px; }
            .insumo { background-color: #f1f3f4; padding: 10px; margin: 5px 0; border-radius: 3px; }
            .totals { background-color: ${(V==null?void 0:V.configuracoes.corPrimaria)||"#3B82F6"}; color: white; padding: 15px; border-radius: 5px; }
            .footer { margin-top: 30px; border-top: 1px solid #ddd; padding-top: 20px; font-size: 12px; }
            table { width: 100%; border-collapse: collapse; margin: 10px 0; }
            th, td { border: 1px solid #ddd; padding: 8px; text-align: left; }
            th { background-color: #f2f2f2; }
          </style>
        </head>
        <body>
          <div class="header">
            <h1>PROPOSTA COMERCIAL</h1>
            <h2>${w.numero}</h2>
            ${V!=null&&V.cabecalho.empresa?`<h3>${V.cabecalho.empresa}</h3>`:""}
          </div>

          <div class="company-info">
            ${V!=null&&V.cabecalho.endereco?`<p><strong>Endereço:</strong> ${V.cabecalho.endereco}</p>`:""}
            ${V!=null&&V.cabecalho.telefone?`<p><strong>Telefone:</strong> ${V.cabecalho.telefone}</p>`:""}
            ${V!=null&&V.cabecalho.email?`<p><strong>Email:</strong> ${V.cabecalho.email}</p>`:""}
            ${V!=null&&V.cabecalho.cnpj?`<p><strong>CNPJ:</strong> ${V.cabecalho.cnpj}</p>`:""}
          </div>

          <div class="project-info">
            <h3>Informações do Projeto</h3>
            <p><strong>Cliente:</strong> ${w.cliente}</p>
            <p><strong>Projeto:</strong> ${w.nomeProjeto}</p>
            <p><strong>Descrição:</strong> ${w.descricao}</p>
            <p><strong>Status:</strong> ${w.status}</p>
            <p><strong>Validade:</strong> ${new Date(w.validadeProposta).toLocaleDateString("pt-BR")}</p>
          </div>

          <h3>Detalhamento dos Serviços</h3>
          ${w.etapas.map(qt=>`
            <div class="etapa">
              <h4>${qt.numero}. ${qt.nome}</h4>
              
              ${qt.insumos&&qt.insumos.length>0?`
                <table>
                  <thead>
                    <tr>
                      <th>Item</th>
                      <th>Tipo</th>
                      <th>Unidade</th>
                      <th>Quantidade</th>
                      <th>Valor Unitário</th>
                      <th>Valor Total</th>
                    </tr>
                  </thead>
                  <tbody>
                    ${qt.insumos.map(Jt=>`
                      <tr>
                        <td>${Jt.nome}</td>
                        <td>${Jt.tipo==="material"?"Material":"Mão de Obra"}</td>
                        <td>${Jt.unidadeMedida}</td>
                        <td>${mu(Jt.quantidade)}</td>
                        <td>${ya(Jt.valorUnitario)}</td>
                        <td>${ya(Jt.valorTotal)}</td>
                      </tr>
                    `).join("")}
                  </tbody>
                </table>
              `:""}

              ${qt.subetapas&&qt.subetapas.length>0?qt.subetapas.map(Jt=>`
                <div style="margin-left: 20px; margin-top: 15px;">
                  <h5>${Jt.numero}. ${Jt.nome}</h5>
                  ${Jt.insumos&&Jt.insumos.length>0?`
                    <table>
                      <thead>
                        <tr>
                          <th>Item</th>
                          <th>Tipo</th>
                          <th>Unidade</th>
                          <th>Quantidade</th>
                          <th>Valor Unitário</th>
                          <th>Valor Total</th>
                        </tr>
                      </thead>
                      <tbody>
                        ${Jt.insumos.map(ma=>`
                          <tr>
                            <td>${ma.nome}</td>
                            <td>${ma.tipo==="material"?"Material":"Mão de Obra"}</td>
                            <td>${ma.unidadeMedida}</td>
                            <td>${mu(ma.quantidade)}</td>
                            <td>${ya(ma.valorUnitario)}</td>
                            <td>${ya(ma.valorTotal)}</td>
                          </tr>
                        `).join("")}
                      </tbody>
                    </table>
                  `:""}
                </div>
              `).join(""):""}
            </div>
          `).join("")}

          <div class="totals">
            <h3>Resumo Financeiro</h3>
            <p><strong>Valor Material:</strong> ${ya(w.valorMaterial)}</p>
            <p><strong>Valor Mão de Obra:</strong> ${ya(w.valorMaoObra)}</p>
            ${w.bdi>0?`<p><strong>BDI (${w.bdi}%):</strong> ${ya((w.valorMaterial+w.valorMaoObra)*(w.bdi/100))}</p>`:""}
            ${w.desconto>0?`<p><strong>Desconto (${w.desconto}%):</strong> -${ya((w.valorMaterial+w.valorMaoObra)*(1+w.bdi/100)*(w.desconto/100))}</p>`:""}
            <h3><strong>VALOR TOTAL: ${ya(w.valorTotal)}</strong></h3>
          </div>

          ${w.observacoes?`
            <div style="margin-top: 20px;">
              <h4>Observações</h4>
              <p>${w.observacoes}</p>
            </div>
          `:""}

          <div class="footer">
            ${V!=null&&V.rodape.condicoesPagamento?`<p><strong>Condições de Pagamento:</strong> ${V.rodape.condicoesPagamento}</p>`:""}
            ${V!=null&&V.rodape.validadeProposta?`<p><strong>Validade:</strong> ${V.rodape.validadeProposta}</p>`:""}
            ${V!=null&&V.rodape.observacoes?`<p><strong>Observações:</strong> ${V.rodape.observacoes}</p>`:""}
            <p><strong>Data de Geração:</strong> ${new Date().toLocaleDateString("pt-BR")}</p>
          </div>
        </body>
        </html>
      `,ze=new Blob([He],{type:"text/html"}),vt=URL.createObjectURL(ze),xt=document.createElement("a");xt.href=vt,xt.download=`Proposta_${w.numero}_${w.cliente.replace(/\s+/g,"_")}.html`,document.body.appendChild(xt),xt.click(),document.body.removeChild(xt),URL.revokeObjectURL(vt),X.success("PDF gerado com sucesso! (arquivo HTML para conversão)")}catch(V){console.error("Erro ao gerar PDF:",V),X.error("Erro ao gerar PDF")}},Fe=async()=>{if(!w){X.error("Selecione uma proposta para exportar");return}try{let V="data:text/csv;charset=utf-8,";V+=`Proposta Comercial - ${w.numero}
`,V+=`Cliente,${w.cliente}
`,V+=`Projeto,${w.nomeProjeto}
`,V+=`Descrição,${w.descricao}
`,V+=`Status,${w.status}
`,V+=`Validade,${new Date(w.validadeProposta).toLocaleDateString("pt-BR")}

`,V+=`Etapa,Subetapa,Item,Tipo,Unidade,Quantidade,Valor Unitário,Valor Total
`,w.etapas.forEach(vt=>{vt.insumos&&vt.insumos.length>0&&vt.insumos.forEach(xt=>{V+=`"${vt.numero}. ${vt.nome}","","${xt.nome}","${xt.tipo==="material"?"Material":"Mão de Obra"}","${xt.unidadeMedida}","${xt.quantidade}","${xt.valorUnitario}","${xt.valorTotal}"
`}),vt.subetapas&&vt.subetapas.length>0&&vt.subetapas.forEach(xt=>{xt.insumos&&xt.insumos.length>0&&xt.insumos.forEach(qt=>{V+=`"${vt.numero}. ${vt.nome}","${xt.numero}. ${xt.nome}","${qt.nome}","${qt.tipo==="material"?"Material":"Mão de Obra"}","${qt.unidadeMedida}","${qt.quantidade}","${qt.valorUnitario}","${qt.valorTotal}"
`})})}),V+=`
`,V+=`Valor Material,${w.valorMaterial}
`,V+=`Valor Mão de Obra,${w.valorMaoObra}
`,w.bdi>0&&(V+=`BDI (${w.bdi}%),${(w.valorMaterial+w.valorMaoObra)*(w.bdi/100)}
`),w.desconto>0&&(V+=`Desconto (${w.desconto}%),-${(w.valorMaterial+w.valorMaoObra)*(1+w.bdi/100)*(w.desconto/100)}
`),V+=`VALOR TOTAL,${w.valorTotal}
`;const He=encodeURI(V),ze=document.createElement("a");ze.setAttribute("href",He),ze.setAttribute("download",`Proposta_${w.numero}_${w.cliente.replace(/\s+/g,"_")}.csv`),document.body.appendChild(ze),ze.click(),document.body.removeChild(ze),X.success("Excel gerado com sucesso!")}catch(V){console.error("Erro ao gerar Excel:",V),X.error("Erro ao gerar Excel")}},ut=V=>{he(null),oe({cliente:"",nomeProjeto:"",descricao:"",validadeProposta:"",observacoes:"",bdi:0,desconto:0}),C(!0)},je=()=>{C(!1),he(null)},ht=()=>{Be({nome:"",ordem:w?w.etapas.length+1:1}),se(!0)},qe=()=>{se(!1),Ue(null)},lt=()=>{dt({etapaId:"",nome:""}),Y(!0)},de=()=>{Y(!1),G(null)},nt=V=>{Te({type:"etapa",etapaId:V}),Me({insumoId:"",quantidade:1}),fe(!0)},Nt=(V,He)=>{Te({type:"subetapa",etapaId:V,subetapaId:He}),Me({insumoId:"",quantidade:1}),fe(!0)},A=()=>{fe(!1),Te(null)},ue=()=>{Ct({nome:"",email:"",telefone:"",empresa:""}),$(!0)},ke=()=>{$(!1)},Ve=V=>{V?(N(V),xe(V)):(N(null),xe({nome:"",descricao:"",logo:"",cabecalho:{empresa:"",endereco:"",telefone:"",email:"",cnpj:""},rodape:{condicoesPagamento:"",validadeProposta:"",observacoes:""},configuracoes:{mostrarDetalhamento:!0,mostrarComposicao:!0,mostrarBDI:!0,mostrarDesconto:!0,corPrimaria:"#3B82F6",corSecundaria:"#1F2937"}})),we(!0)},St=()=>{we(!1),N(null)},ot=V=>{let He=0,ze=0;return V.insumos&&V.insumos.forEach(vt=>{vt.tipo==="material"?He+=vt.valorTotal||0:ze+=vt.valorTotal||0}),V.subetapas&&V.subetapas.forEach(vt=>{vt.insumos&&vt.insumos.forEach(xt=>{xt.tipo==="material"?He+=xt.valorTotal||0:ze+=xt.valorTotal||0})}),{totalMaterial:He,totalMaoObra:ze}},yt={totalPropostas:n.length,valorTotalPropostas:n.reduce((V,He)=>V+(He.valorTotal||0),0),propostasAprovadas:n.filter(V=>V.status==="aprovado").length,propostasEnviadas:n.filter(V=>V.status==="enviado").length};return e?t.jsx("div",{className:"flex items-center justify-center h-64",children:t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),t.jsx("p",{className:"text-gray-600",children:"Carregando módulo de propostas..."})]})}):r?t.jsx("div",{className:"flex items-center justify-center h-64",children:t.jsxs("div",{className:"text-center",children:[t.jsx(df,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),t.jsx("p",{className:"text-red-600 mb-4",children:r}),t.jsx("button",{onClick:()=>{s(null),Ae()},className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700",children:"Tentar Novamente"})]})}):t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Propostas Comerciais"}),t.jsx("p",{className:"text-gray-600",children:"Gerencie propostas, etapas e insumos com templates personalizados"})]}),t.jsxs("div",{className:"flex space-x-3",children:[t.jsxs("button",{onClick:()=>Ve(),className:"bg-purple-600 text-white px-4 py-2 rounded-lg hover:bg-purple-700 flex items-center space-x-2",children:[t.jsx(gl,{className:"h-4 w-4"}),t.jsx("span",{children:"Templates"})]}),t.jsxs("button",{onClick:()=>Ce(!0),className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 flex items-center space-x-2",children:[t.jsx(bo,{className:"h-4 w-4"}),t.jsx("span",{children:"Exportar"})]}),t.jsxs("button",{onClick:()=>ut(),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 flex items-center space-x-2",children:[t.jsx(wa,{className:"h-4 w-4"}),t.jsx("span",{children:"Nova Proposta"})]})]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[t.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx(qa,{className:"h-8 w-8 text-blue-600"}),t.jsxs("div",{className:"ml-4",children:[t.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Propostas"}),t.jsx("p",{className:"text-2xl font-bold text-gray-900",children:yt.totalPropostas})]})]})}),t.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx(Ts,{className:"h-8 w-8 text-green-600"}),t.jsxs("div",{className:"ml-4",children:[t.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Valor Total"}),t.jsx("p",{className:"text-2xl font-bold text-gray-900",children:ya(yt.valorTotalPropostas)})]})]})}),t.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx(ps,{className:"h-8 w-8 text-purple-600"}),t.jsxs("div",{className:"ml-4",children:[t.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Aprovadas"}),t.jsx("p",{className:"text-2xl font-bold text-gray-900",children:yt.propostasAprovadas})]})]})}),t.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx(dm,{className:"h-8 w-8 text-orange-600"}),t.jsxs("div",{className:"ml-4",children:[t.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Enviadas"}),t.jsx("p",{className:"text-2xl font-bold text-gray-900",children:yt.propostasEnviadas})]})]})})]}),t.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[t.jsxs("div",{className:"flex justify-between items-center mb-4",children:[t.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Templates de Proposta"}),t.jsxs("button",{onClick:()=>Ve(),className:"bg-purple-600 text-white px-4 py-2 rounded-lg hover:bg-purple-700 flex items-center space-x-2",children:[t.jsx(wa,{className:"h-4 w-4"}),t.jsx("span",{children:"Novo Template"})]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[h.map(V=>t.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:[t.jsxs("div",{className:"flex justify-between items-start mb-3",children:[t.jsxs("div",{children:[t.jsx("h4",{className:"font-medium text-gray-900",children:V.nome}),t.jsx("p",{className:"text-sm text-gray-500",children:V.descricao})]}),t.jsx("div",{className:"flex space-x-1",children:t.jsx("button",{onClick:()=>Ve(V),className:"text-blue-600 hover:text-blue-900",title:"Editar",children:t.jsx(gs,{className:"h-4 w-4"})})})]}),t.jsxs("div",{className:"text-xs text-gray-500 space-y-1",children:[t.jsxs("div",{children:["Empresa: ",V.cabecalho.empresa||"Não definida"]}),t.jsxs("div",{children:["Cores:",t.jsx("span",{className:"inline-block w-3 h-3 rounded-full ml-1 mr-1",style:{backgroundColor:V.configuracoes.corPrimaria}}),t.jsx("span",{className:"inline-block w-3 h-3 rounded-full",style:{backgroundColor:V.configuracoes.corSecundaria}})]})]})]},V._id)),h.length===0&&t.jsxs("div",{className:"col-span-3 text-center py-8 text-gray-500",children:[t.jsx(gl,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),t.jsx("p",{children:"Nenhum template criado ainda"}),t.jsx("p",{className:"text-sm",children:"Crie seu primeiro template para padronizar suas propostas"})]})]})]}),t.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:t.jsxs("div",{className:"flex items-center space-x-4",children:[t.jsx(K2,{className:"h-5 w-5 text-gray-500"}),t.jsxs("select",{value:b,onChange:V=>g(V.target.value),className:"flex-1 border border-gray-300 rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500",children:[t.jsx("option",{value:"",children:"Selecione uma proposta"}),n.map(V=>t.jsxs("option",{value:V._id,children:[V.numero," - ",V.cliente," - ",V.nomeProjeto]},V._id))]})]})}),w&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[t.jsxs("div",{className:"flex justify-between items-start mb-6",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:w.nomeProjeto}),t.jsx("p",{className:"text-gray-600",children:w.cliente}),t.jsxs("p",{className:"text-sm text-gray-500",children:["Status: ",t.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${w.status==="aprovado"?"bg-green-100 text-green-800":w.status==="enviado"?"bg-blue-100 text-blue-800":w.status==="rejeitado"?"bg-red-100 text-red-800":w.status==="revisao"?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"}`,children:w.status})]})]}),t.jsxs("div",{className:"flex gap-1",children:[t.jsxs("button",{onClick:Qe,className:"bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 flex items-center space-x-2",children:[t.jsx(qa,{className:"h-4 w-4"}),t.jsx("span",{children:"PDF"})]}),t.jsxs("button",{onClick:Fe,className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 flex items-center space-x-2",children:[t.jsx(mf,{className:"h-4 w-4"}),t.jsx("span",{children:"Excel"})]})]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-600",children:"Valor Material"}),t.jsx("p",{className:"text-lg font-semibold text-blue-600",children:ya(w.valorMaterial||0)})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-600",children:"Valor Mão de Obra"}),t.jsx("p",{className:"text-lg font-semibold text-green-600",children:ya(w.valorMaoObra||0)})]}),t.jsxs("div",{children:[t.jsxs("p",{className:"text-sm text-gray-600",children:["BDI (",w.bdi||0,"%)"]}),t.jsx("p",{className:"text-lg font-semibold text-purple-600",children:ya(((w.valorMaterial||0)+(w.valorMaoObra||0))*((w.bdi||0)/100))})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-600",children:"Valor Total"}),t.jsx("p",{className:"text-xl font-bold text-gray-900",children:ya(w.valorTotal||0)})]})]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[t.jsx("button",{onClick:ht,className:"bg-white rounded-lg shadow p-6 hover:shadow-md transition-shadow text-left",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx(wa,{className:"h-8 w-8 text-blue-600"}),t.jsxs("div",{className:"ml-4",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Adicionar Etapa"}),t.jsx("p",{className:"text-gray-600",children:"Criar nova etapa do projeto"})]})]})}),t.jsx("button",{onClick:lt,className:"bg-white rounded-lg shadow p-6 hover:shadow-md transition-shadow text-left",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx(Qi,{className:"h-8 w-8 text-green-600"}),t.jsxs("div",{className:"ml-4",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Adicionar Subetapa"}),t.jsx("p",{className:"text-gray-600",children:"Criar subetapa em uma etapa"})]})]})}),t.jsx("button",{onClick:Qe,className:"bg-white rounded-lg shadow p-6 hover:shadow-md transition-shadow text-left",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx(bo,{className:"h-8 w-8 text-purple-600"}),t.jsxs("div",{className:"ml-4",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Relatório PDF"}),t.jsx("p",{className:"text-gray-600",children:"Gerar relatório detalhado"})]})]})})]}),t.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[t.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:t.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Etapas da Proposta"})}),t.jsxs("div",{className:"divide-y divide-gray-200",children:[(w.etapas||[]).map(V=>{const{totalMaterial:He,totalMaoObra:ze}=ot(V);return t.jsxs("div",{className:"p-6",children:[t.jsxs("div",{className:"flex justify-between items-start mb-4",children:[t.jsxs("div",{children:[t.jsxs("h4",{className:"text-lg font-medium text-gray-900",children:[V.numero,". ",V.nome]}),t.jsxs("div",{className:"flex space-x-4 mt-2",children:[t.jsxs("span",{className:"text-sm text-blue-600 font-medium",children:["Material: ",ya(He)]}),t.jsxs("span",{className:"text-sm text-green-600 font-medium",children:["Mão de Obra: ",ya(ze)]}),t.jsxs("span",{className:"text-sm text-purple-600 font-medium",children:["Total: ",ya(He+ze)]})]})]}),t.jsxs("button",{onClick:()=>nt(V.id),className:"bg-blue-600 text-white px-3 py-1 rounded hover:bg-blue-700 flex items-center space-x-1",children:[t.jsx(wa,{className:"h-4 w-4"}),t.jsx("span",{children:"Adicionar Insumo"})]})]}),V.insumos&&V.insumos.length>0&&t.jsxs("div",{className:"mb-4",children:[t.jsx("h5",{className:"text-sm font-medium text-gray-700 mb-2",children:"Insumos da Etapa:"}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:V.insumos.map(vt=>t.jsx("div",{className:"bg-gray-50 p-3 rounded",children:t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-gray-900",children:vt.nome}),t.jsxs("p",{className:"text-xs text-gray-500",children:[mu(vt.quantidade)," ",vt.unidadeMedida," × ",ya(vt.valorUnitario)]})]}),t.jsxs("div",{className:"text-right",children:[t.jsx("p",{className:"text-sm font-medium text-gray-900",children:ya(vt.valorTotal)}),t.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${vt.tipo==="material"?"bg-blue-100 text-blue-800":"bg-green-100 text-green-800"}`,children:vt.tipo==="material"?"Material":"Mão de Obra"})]})]})},vt.id))})]}),V.subetapas&&V.subetapas.length>0&&t.jsxs("div",{className:"space-y-4",children:[t.jsx("h5",{className:"text-sm font-medium text-gray-700",children:"Subetapas:"}),V.subetapas.map(vt=>t.jsxs("div",{className:"bg-gray-50 p-4 rounded",children:[t.jsxs("div",{className:"flex justify-between items-start mb-3",children:[t.jsx("div",{children:t.jsxs("h6",{className:"text-md font-medium text-gray-900",children:[vt.numero,". ",vt.nome]})}),t.jsxs("button",{onClick:()=>Nt(V.id,vt.id),className:"bg-green-600 text-white px-2 py-1 rounded hover:bg-green-700 flex items-center space-x-1 text-sm",children:[t.jsx(wa,{className:"h-3 w-3"}),t.jsx("span",{children:"Insumo"})]})]}),vt.insumos&&vt.insumos.length>0&&t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:vt.insumos.map(xt=>t.jsx("div",{className:"bg-white p-2 rounded border",children:t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-gray-900",children:xt.nome}),t.jsxs("p",{className:"text-xs text-gray-500",children:[mu(xt.quantidade)," ",xt.unidadeMedida," × ",ya(xt.valorUnitario)]})]}),t.jsxs("div",{className:"text-right",children:[t.jsx("p",{className:"text-sm font-medium text-gray-900",children:ya(xt.valorTotal)}),t.jsx("span",{className:`text-xs px-1 py-0.5 rounded ${xt.tipo==="material"?"bg-blue-100 text-blue-800":"bg-green-100 text-green-800"}`,children:xt.tipo==="material"?"Mat":"MO"})]})]})},xt.id))})]},vt.id))]})]},V.id)}),(w.etapas||[]).length===0&&t.jsxs("div",{className:"p-8 text-center text-gray-500",children:[t.jsx(Qr,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),t.jsx("p",{children:"Nenhuma etapa criada ainda"}),t.jsx("p",{className:"text-sm",children:"Adicione a primeira etapa para começar"})]})]})]})]}),v&&t.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:t.jsx("div",{className:"relative top-20 mx-auto p-5 border w-full max-w-2xl shadow-lg rounded-md bg-white",children:t.jsxs("div",{className:"mt-3",children:[t.jsxs("div",{className:"flex justify-between items-center mb-4",children:[t.jsx("h3",{className:"text-lg font-medium text-gray-900",children:Z?"Editar Proposta":"Nova Proposta"}),t.jsx("button",{onClick:je,className:"text-gray-400 hover:text-gray-600",children:t.jsx($t,{className:"h-5 w-5"})})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Cliente"}),t.jsxs("div",{className:"flex space-x-2",children:[t.jsxs("select",{value:B.cliente,onChange:V=>oe({...B,cliente:V.target.value}),className:"flex-1 border border-gray-300 rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500",children:[t.jsx("option",{value:"",children:"Selecione um cliente"}),i.map(V=>t.jsxs("option",{value:V.nome,children:[V.nome," ",V.empresa?`- ${V.empresa}`:""]},V._id))]}),t.jsx("button",{onClick:ue,className:"bg-green-600 text-white px-3 py-2 rounded-md hover:bg-green-700",title:"Novo Cliente",children:t.jsx(pf,{className:"h-4 w-4"})})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Nome do Projeto"}),t.jsx("input",{type:"text",value:B.nomeProjeto,onChange:V=>oe({...B,nomeProjeto:V.target.value}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500",required:!0})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Descrição"}),t.jsx("textarea",{value:B.descricao,onChange:V=>oe({...B,descricao:V.target.value}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500",rows:3})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"BDI (%)"}),t.jsx("input",{type:"number",step:"0.01",value:B.bdi,onChange:V=>oe({...B,bdi:Number(V.target.value)}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Desconto (%)"}),t.jsx("input",{type:"number",step:"0.01",value:B.desconto,onChange:V=>oe({...B,desconto:Number(V.target.value)}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Validade"}),t.jsx("input",{type:"date",value:B.validadeProposta,onChange:V=>oe({...B,validadeProposta:V.target.value}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Observações"}),t.jsx("textarea",{value:B.observacoes,onChange:V=>oe({...B,observacoes:V.target.value}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500",rows:3})]}),t.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[t.jsx("button",{onClick:je,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 border border-gray-300 rounded-md hover:bg-gray-200",children:"Cancelar"}),t.jsxs("button",{onClick:Z?rt:tt,className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-md hover:bg-blue-700 flex items-center space-x-2",children:[t.jsx(bl,{className:"h-4 w-4"}),t.jsxs("span",{children:[Z?"Atualizar":"Criar"," Proposta"]})]})]})]})]})})}),W&&t.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:t.jsx("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:t.jsxs("div",{className:"mt-3",children:[t.jsxs("div",{className:"flex justify-between items-center mb-4",children:[t.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Nova Etapa"}),t.jsx("button",{onClick:qe,className:"text-gray-400 hover:text-gray-600",children:t.jsx($t,{className:"h-5 w-5"})})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Nome da Etapa"}),t.jsx("input",{type:"text",value:Ne.nome,onChange:V=>Be({...Ne,nome:V.target.value}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500",required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Ordem"}),t.jsx("input",{type:"number",value:Ne.ordem,onChange:V=>Be({...Ne,ordem:Number(V.target.value)}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500",min:"1"})]}),t.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[t.jsx("button",{onClick:qe,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 border border-gray-300 rounded-md hover:bg-gray-200",children:"Cancelar"}),t.jsxs("button",{onClick:gt,className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-md hover:bg-blue-700 flex items-center space-x-2",children:[t.jsx(wa,{className:"h-4 w-4"}),t.jsx("span",{children:"Criar Etapa"})]})]})]})]})})}),J&&t.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:t.jsx("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:t.jsxs("div",{className:"mt-3",children:[t.jsxs("div",{className:"flex justify-between items-center mb-4",children:[t.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Nova Subetapa"}),t.jsx("button",{onClick:de,className:"text-gray-400 hover:text-gray-600",children:t.jsx($t,{className:"h-5 w-5"})})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Etapa"}),t.jsxs("select",{value:Xe.etapaId,onChange:V=>dt({...Xe,etapaId:V.target.value}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500",required:!0,children:[t.jsx("option",{value:"",children:"Selecione uma etapa"}),w==null?void 0:w.etapas.map(V=>t.jsxs("option",{value:V.id,children:[V.numero,". ",V.nome]},V.id))]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Nome da Subetapa"}),t.jsx("input",{type:"text",value:Xe.nome,onChange:V=>dt({...Xe,nome:V.target.value}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500",required:!0})]}),t.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[t.jsx("button",{onClick:de,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 border border-gray-300 rounded-md hover:bg-gray-200",children:"Cancelar"}),t.jsxs("button",{onClick:st,className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-md hover:bg-blue-700 flex items-center space-x-2",children:[t.jsx(wa,{className:"h-4 w-4"}),t.jsx("span",{children:"Criar Subetapa"})]})]})]})]})})}),K&&t.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:t.jsx("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:t.jsxs("div",{className:"mt-3",children:[t.jsxs("div",{className:"flex justify-between items-center mb-4",children:[t.jsxs("h3",{className:"text-lg font-medium text-gray-900",children:["Adicionar Insumo",be&&t.jsx("span",{className:"text-sm text-gray-500 block",children:be.type==="etapa"?"à Etapa":"à Subetapa"})]}),t.jsx("button",{onClick:A,className:"text-gray-400 hover:text-gray-600",children:t.jsx($t,{className:"h-5 w-5"})})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Insumo"}),t.jsxs("select",{value:ft.insumoId,onChange:V=>Me({...ft,insumoId:V.target.value}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500",required:!0,children:[t.jsx("option",{value:"",children:"Selecione um insumo"}),d.map(V=>t.jsxs("option",{value:V._id,children:[V.nome," - ",ya(V.precoUnitario)," (",V.tipo,")"]},V._id))]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Quantidade"}),t.jsx("input",{type:"number",value:ft.quantidade,onChange:V=>Me({...ft,quantidade:Number(V.target.value)}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500",min:"1",step:"0.01",required:!0})]}),ft.insumoId&&ft.quantidade>0&&t.jsx("div",{className:"bg-blue-50 p-3 rounded",children:t.jsxs("p",{className:"text-sm text-blue-800",children:["Valor Total: ",ya((((Dt=d.find(V=>V._id===ft.insumoId))==null?void 0:Dt.precoUnitario)||0)*ft.quantidade)]})}),t.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[t.jsx("button",{onClick:A,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 border border-gray-300 rounded-md hover:bg-gray-200",children:"Cancelar"}),t.jsxs("button",{onClick:Tt,className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-md hover:bg-blue-700 flex items-center space-x-2",children:[t.jsx(Qr,{className:"h-4 w-4"}),t.jsx("span",{children:"Adicionar Insumo"})]})]})]})]})})}),me&&t.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:t.jsx("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:t.jsxs("div",{className:"mt-3",children:[t.jsxs("div",{className:"flex justify-between items-center mb-4",children:[t.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Novo Cliente"}),t.jsx("button",{onClick:ke,className:"text-gray-400 hover:text-gray-600",children:t.jsx($t,{className:"h-5 w-5"})})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Nome"}),t.jsx("input",{type:"text",value:te.nome,onChange:V=>Ct({...te,nome:V.target.value}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500",required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Email"}),t.jsx("input",{type:"email",value:te.email,onChange:V=>Ct({...te,email:V.target.value}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Telefone"}),t.jsx("input",{type:"text",value:te.telefone,onChange:V=>Ct({...te,telefone:V.target.value}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Empresa"}),t.jsx("input",{type:"text",value:te.empresa,onChange:V=>Ct({...te,empresa:V.target.value}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500"})]}),t.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[t.jsx("button",{onClick:ke,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 border border-gray-300 rounded-md hover:bg-gray-200",children:"Cancelar"}),t.jsxs("button",{onClick:k,className:"px-4 py-2 text-sm font-medium text-white bg-green-600 border border-transparent rounded-md hover:bg-green-700 flex items-center space-x-2",children:[t.jsx(pf,{className:"h-4 w-4"}),t.jsx("span",{children:"Criar Cliente"})]})]})]})]})})}),R&&t.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:t.jsx("div",{className:"relative top-10 mx-auto p-5 border w-full max-w-4xl shadow-lg rounded-md bg-white",children:t.jsxs("div",{className:"mt-3",children:[t.jsxs("div",{className:"flex justify-between items-center mb-4",children:[t.jsx("h3",{className:"text-lg font-medium text-gray-900",children:q?"Editar Template":"Novo Template"}),t.jsx("button",{onClick:St,className:"text-gray-400 hover:text-gray-600",children:t.jsx($t,{className:"h-5 w-5"})})]}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Nome do Template"}),t.jsx("input",{type:"text",value:ae.nome,onChange:V=>xe({...ae,nome:V.target.value}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500",required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Descrição"}),t.jsx("textarea",{value:ae.descricao,onChange:V=>xe({...ae,descricao:V.target.value}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500",rows:3})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Logo (URL)"}),t.jsx("input",{type:"text",value:ae.logo,onChange:V=>xe({...ae,logo:V.target.value}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"https://exemplo.com/logo.png"})]}),t.jsxs("div",{className:"border-t pt-4",children:[t.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:"Informações da Empresa"}),t.jsxs("div",{className:"space-y-3",children:[t.jsx("input",{type:"text",placeholder:"Nome da Empresa",value:ae.cabecalho.empresa,onChange:V=>xe({...ae,cabecalho:{...ae.cabecalho,empresa:V.target.value}}),className:"block w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500"}),t.jsx("input",{type:"text",placeholder:"Endereço",value:ae.cabecalho.endereco,onChange:V=>xe({...ae,cabecalho:{...ae.cabecalho,endereco:V.target.value}}),className:"block w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500"}),t.jsx("input",{type:"text",placeholder:"Telefone",value:ae.cabecalho.telefone,onChange:V=>xe({...ae,cabecalho:{...ae.cabecalho,telefone:V.target.value}}),className:"block w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500"}),t.jsx("input",{type:"email",placeholder:"Email",value:ae.cabecalho.email,onChange:V=>xe({...ae,cabecalho:{...ae.cabecalho,email:V.target.value}}),className:"block w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500"}),t.jsx("input",{type:"text",placeholder:"CNPJ",value:ae.cabecalho.cnpj,onChange:V=>xe({...ae,cabecalho:{...ae.cabecalho,cnpj:V.target.value}}),className:"block w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500"})]})]})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:"Informações do Rodapé"}),t.jsxs("div",{className:"space-y-3",children:[t.jsx("textarea",{placeholder:"Condições de Pagamento",value:ae.rodape.condicoesPagamento,onChange:V=>xe({...ae,rodape:{...ae.rodape,condicoesPagamento:V.target.value}}),className:"block w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500",rows:2}),t.jsx("input",{type:"text",placeholder:"Validade da Proposta",value:ae.rodape.validadeProposta,onChange:V=>xe({...ae,rodape:{...ae.rodape,validadeProposta:V.target.value}}),className:"block w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500"}),t.jsx("textarea",{placeholder:"Observações Gerais",value:ae.rodape.observacoes,onChange:V=>xe({...ae,rodape:{...ae.rodape,observacoes:V.target.value}}),className:"block w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500",rows:2})]})]}),t.jsxs("div",{className:"border-t pt-4",children:[t.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:"Configurações de Exibição"}),t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{className:"flex items-center",children:[t.jsx("input",{type:"checkbox",checked:ae.configuracoes.mostrarDetalhamento,onChange:V=>xe({...ae,configuracoes:{...ae.configuracoes,mostrarDetalhamento:V.target.checked}}),className:"mr-2"}),t.jsx("label",{className:"text-sm text-gray-700",children:"Mostrar Detalhamento"})]}),t.jsxs("div",{className:"flex items-center",children:[t.jsx("input",{type:"checkbox",checked:ae.configuracoes.mostrarComposicao,onChange:V=>xe({...ae,configuracoes:{...ae.configuracoes,mostrarComposicao:V.target.checked}}),className:"mr-2"}),t.jsx("label",{className:"text-sm text-gray-700",children:"Mostrar Composição"})]}),t.jsxs("div",{className:"flex items-center",children:[t.jsx("input",{type:"checkbox",checked:ae.configuracoes.mostrarBDI,onChange:V=>xe({...ae,configuracoes:{...ae.configuracoes,mostrarBDI:V.target.checked}}),className:"mr-2"}),t.jsx("label",{className:"text-sm text-gray-700",children:"Mostrar BDI"})]}),t.jsxs("div",{className:"flex items-center",children:[t.jsx("input",{type:"checkbox",checked:ae.configuracoes.mostrarDesconto,onChange:V=>xe({...ae,configuracoes:{...ae.configuracoes,mostrarDesconto:V.target.checked}}),className:"mr-2"}),t.jsx("label",{className:"text-sm text-gray-700",children:"Mostrar Desconto"})]})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-3 mt-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Cor Primária"}),t.jsx("input",{type:"color",value:ae.configuracoes.corPrimaria,onChange:V=>xe({...ae,configuracoes:{...ae.configuracoes,corPrimaria:V.target.value}}),className:"mt-1 block w-full h-10 border border-gray-300 rounded-md"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Cor Secundária"}),t.jsx("input",{type:"color",value:ae.configuracoes.corSecundaria,onChange:V=>xe({...ae,configuracoes:{...ae.configuracoes,corSecundaria:V.target.value}}),className:"mt-1 block w-full h-10 border border-gray-300 rounded-md"})]})]})]})]})]}),t.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t",children:[t.jsx("button",{onClick:St,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 border border-gray-300 rounded-md hover:bg-gray-200",children:"Cancelar"}),t.jsxs("button",{onClick:q?at:Pe,className:"px-4 py-2 text-sm font-medium text-white bg-purple-600 border border-transparent rounded-md hover:bg-purple-700 flex items-center space-x-2",children:[t.jsx(bl,{className:"h-4 w-4"}),t.jsxs("span",{children:[q?"Atualizar":"Criar"," Template"]})]})]})]})})}),ce&&t.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:t.jsx("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:t.jsxs("div",{className:"mt-3",children:[t.jsxs("div",{className:"flex justify-between items-center mb-4",children:[t.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Exportar Proposta"}),t.jsx("button",{onClick:()=>Ce(!1),className:"text-gray-400 hover:text-gray-600",children:t.jsx($t,{className:"h-5 w-5"})})]}),w?t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[t.jsx("h4",{className:"font-medium text-gray-900",children:w.nomeProjeto}),t.jsx("p",{className:"text-sm text-gray-600",children:w.cliente}),t.jsxs("p",{className:"text-sm text-gray-500",children:["Valor: ",ya(w.valorTotal)]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Template"}),t.jsxs("select",{value:O,onChange:V=>y(V.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500",children:[t.jsx("option",{value:"",children:"Template Padrão"}),h.map(V=>t.jsx("option",{value:V._id,children:V.nome},V._id))]})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[t.jsxs("button",{onClick:Qe,className:"bg-red-600 text-white px-4 py-3 rounded-lg hover:bg-red-700 flex items-center justify-center space-x-2",children:[t.jsx(qa,{className:"h-5 w-5"}),t.jsx("span",{children:"Exportar PDF"})]}),t.jsxs("button",{onClick:Fe,className:"bg-green-600 text-white px-4 py-3 rounded-lg hover:bg-green-700 flex items-center justify-center space-x-2",children:[t.jsx(mf,{className:"h-5 w-5"}),t.jsx("span",{children:"Exportar Excel"})]})]})]}):t.jsxs("div",{className:"text-center py-8",children:[t.jsx(df,{className:"h-12 w-12 text-yellow-500 mx-auto mb-4"}),t.jsx("p",{className:"text-gray-600",children:"Selecione uma proposta para exportar"})]})]})})}),t.jsxs("div",{className:"text-center py-4 text-gray-500 text-sm",children:["✅ Módulo Proposta carregado com sucesso - ",new Date().toLocaleTimeString()]})]})}const c3={"{{NOME_CLIENTE}}":"Nome completo do cliente contratante","{{ENDERECO_CLIENTE}}":"Endereço completo do cliente","{{TELEFONE_CLIENTE}}":"Telefone de contato do cliente","{{EMAIL_CLIENTE}}":"E-mail do cliente","{{CPF_CNPJ_CLIENTE}}":"CPF ou CNPJ do cliente","{{RG_CLIENTE}}":"RG do cliente (pessoa física)","{{REPRESENTANTE_CLIENTE}}":"Nome do representante legal (pessoa jurídica)","{{NOME_EMPRESA}}":"Razão social da empresa contratada","{{ENDERECO_EMPRESA}}":"Endereço da empresa contratada","{{TELEFONE_EMPRESA}}":"Telefone da empresa contratada","{{EMAIL_EMPRESA}}":"E-mail da empresa contratada","{{CNPJ_EMPRESA}}":"CNPJ da empresa contratada","{{RESPONSAVEL_EMPRESA}}":"Nome do responsável técnico da empresa","{{CREA_RESPONSAVEL}}":"Número do CREA do responsável técnico","{{NOME_PROJETO}}":"Nome/título do projeto de construção","{{ENDERECO_OBRA}}":"Endereço onde será executada a obra","{{AREA_CONSTRUCAO}}":"Área total a ser construída (m²)","{{TIPO_CONSTRUCAO}}":"Tipo de construção (residencial, comercial, etc.)","{{DESCRICAO_PROJETO}}":"Descrição detalhada do projeto","{{ETAPAS_PROJETO}}":"Lista das etapas do projeto (automático do orçamento)","{{VALOR_TOTAL}}":"Valor total do contrato (automático do orçamento)","{{VALOR_EXTENSO}}":"Valor total por extenso","{{PRAZO_EXECUCAO}}":"Prazo total para execução da obra (em dias)","{{DATA_INICIO}}":"Data prevista para início da obra","{{DATA_TERMINO}}":"Data prevista para término da obra","{{FORMA_PAGAMENTO}}":"Forma de pagamento acordada","{{DATA_GERACAO}}":"Data de geração do contrato (automático)","{{DATA_ASSINATURA}}":"Data de assinatura do contrato","{{NUMERO_CONTRATO}}":"Número único do contrato","{{ALVARA_NUMERO}}":"Número do alvará de construção","{{PROJETO_APROVADO}}":"Número do projeto aprovado na prefeitura","{{ASSINANTE_CONTRATANTE}}":"Nome do assinante contratante","{{CARGO_CONTRATANTE}}":"Cargo do assinante contratante","{{ASSINANTE_CONTRATADO}}":"Nome do assinante contratado","{{CARGO_CONTRATADO}}":"Cargo do assinante contratado","{{TESTEMUNHA_1}}":"Nome da primeira testemunha","{{TESTEMUNHA_2}}":"Nome da segunda testemunha","{{LOGO_URL}}":"URL do logo da empresa (automático do template)","{{GARANTIA_OBRA}}":"Período de garantia da obra","{{MULTA_ATRASO}}":"Percentual de multa por atraso","{{REAJUSTE_PRECO}}":"Índice de reajuste de preços","{{SEGURO_OBRA}}":"Detalhes do seguro da obra","{{OBSERVACOES_GERAIS}}":"Observações gerais do contrato","{{CLAUSULAS_ESPECIAIS}}":"Cláusulas especiais específicas do projeto"};function d3(){const[e,a]=I.useState([]),[r,s]=I.useState([]),[n,o]=I.useState([]),[i,c]=I.useState(!0),[d,p]=I.useState([]),[h,x]=I.useState(!1),[b,g]=I.useState(!1),[w,_]=I.useState(!1),[O,y]=I.useState(!1),[v,C]=I.useState(!1),[W,se]=I.useState(!1),[J,Y]=I.useState(!1),[K,fe]=I.useState(null),[me,$]=I.useState(null),[L,le]=I.useState(null),[R,we]=I.useState({templateId:"",orcamentoId:"",dadosPreenchidos:{},assinantes:[]}),[ce,Ce]=I.useState({nome:"",descricao:"",logoUrl:"",recomendacoes:"",conteudo:"",campos:[],assinantes:[]}),[Z,he]=I.useState({descricao:"",valorNovo:0,justificativa:""});I.useEffect(()=>{ie(),Ue()},[]),I.useEffect(()=>{G()},[e]);const ie=async()=>{var ae,xe;try{c(!0);const[be,Te,Ae]=await Promise.all([Ie.entities.contratos.list(),Ie.entities.templates_contrato.list(),Ie.entities.orcamentos.list()]);a(be.list||[]),s((Te.list||[]).filter(rt=>rt==null?void 0:rt.ativo));const tt=(Ae.list||[]).filter(rt=>(rt==null?void 0:rt.status)==="juridico");o(tt),console.log("✅ VALIDAÇÃO: Dados carregados:",{contratos:((ae=be.list)==null?void 0:ae.length)||0,templates:((xe=Te.list)==null?void 0:xe.filter(rt=>rt==null?void 0:rt.ativo).length)||0,orcamentosJuridico:tt.length})}catch(be){console.error("❌ ERRO ao buscar dados:",be),X.error("Erro ao carregar dados")}finally{c(!1)}},Ue=()=>{const ae=localStorage.getItem("notificacoes_contratos");if(ae)try{p(JSON.parse(ae))}catch(xe){console.error("❌ ERRO ao carregar notificações:",xe)}},S=ae=>{localStorage.setItem("notificacoes_contratos",JSON.stringify(ae)),p(ae)},G=()=>{const ae=[...d];let xe=!1;const be=e.filter(Ae=>(Ae==null?void 0:Ae.status)!=="enviado"?!1:Math.floor((new Date().getTime()-new Date(Ae.criadoEm).getTime())/(1e3*60*60*24))>7);if(be.length>0){const Ae="pendentes_assinatura";ae.find(rt=>rt.id===Ae)||(ae.push({id:Ae,tipo:"warning",titulo:"Contratos Pendentes de Assinatura",descricao:`${be.length} contrato(s) enviado(s) há mais de 7 dias sem assinatura`,data:new Date().toISOString(),lida:!1,contratos:be.map(rt=>rt.nomeProjeto)}),xe=!0)}const Te=e.filter(Ae=>(Ae==null?void 0:Ae.status)!=="assinado"||!Ae.dataAssinatura?!1:Math.floor((new Date().getTime()-new Date(Ae.dataAssinatura).getTime())/(1e3*60*60*24))<=1);if(Te.length>0){const Ae="assinados_recentes";ae.find(rt=>rt.id===Ae)||(ae.push({id:Ae,tipo:"success",titulo:"Contratos Assinados",descricao:`${Te.length} contrato(s) assinado(s) nas últimas 24 horas`,data:new Date().toISOString(),lida:!1,contratos:Te.map(rt=>rt.nomeProjeto)}),xe=!0)}xe&&S(ae)},q=ae=>{const xe=d.map(be=>be.id===ae?{...be,lida:!0}:be);S(xe)},N=ae=>{navigator.clipboard.writeText(ae).then(()=>{X.success(`✅ Código ${ae} copiado!`)}).catch(()=>{X.error("❌ ERRO ao copiar código")})},U=async ae=>{ae.preventDefault();try{const xe=r.find(gt=>gt._id===R.templateId),be=n.find(gt=>gt._id===R.orcamentoId);if(!xe||!be){X.error("❌ ERRO: Template ou orçamento não encontrado");return}console.log("✅ VALIDAÇÃO: Criando contrato:",{template:xe.nome,orcamento:be.nomeProjeto});let Te=xe.conteudo;const Ae=xe.logoUrl||"https://images.pexels.com/photos/1109541/pexels-photo-1109541.jpeg";Te=Te.replace(/\{\{LOGO_URL\}\}/g,Ae),Te=Te.replace(/\{\{NOME_PROJETO\}\}/g,be.nomeProjeto),Te=Te.replace(/\{\{VALOR_TOTAL\}\}/g,`R$ ${be.valorTotal.toLocaleString()}`),Te=Te.replace(/\{\{NOME_CLIENTE\}\}/g,be.cliente),Te=Te.replace(/\{\{DATA_GERACAO\}\}/g,new Date().toLocaleDateString("pt-BR"));const tt=(be.etapas||[]).map(gt=>`<div style="margin-bottom: 15px;"><h4 style="color: #1f2937; margin-bottom: 8px;">${(gt==null?void 0:gt.numero)||""}. ${(gt==null?void 0:gt.nome)||""}</h4>${((gt==null?void 0:gt.subetapas)||[]).map(st=>`<p style="margin: 5px 0 5px 20px; color: #374151;">• ${(st==null?void 0:st.numero)||""}. ${(st==null?void 0:st.nome)||""} - R$ ${((st==null?void 0:st.valorTotal)||0).toFixed(2)}</p>`).join("")}</div>`).join("");Te=Te.replace(/\{\{ETAPAS_PROJETO\}\}/g,tt),Object.entries(R.dadosPreenchidos).forEach(([gt,st])=>{Te=Te.replace(new RegExp(gt,"g"),st)}),R.assinantes.forEach((gt,st)=>{Te=Te.replace(new RegExp(gt.placeholder,"g"),gt.nome),Te=Te.replace(new RegExp(gt.placeholder.replace("ASSINANTE","CARGO"),"g"),gt.cargo)});const rt={cliente:be.cliente,status:"em_desenvolvimento",nomeProjeto:be.nomeProjeto,valorTotal:be.valorTotal,orcamentoOrigemId:be._id,templateId:xe._id,conteudo:Te,dadosPreenchidos:R.dadosPreenchidos,assinantes:R.assinantes.map(gt=>({...gt,assinado:!1})),aditivos:[],historico:[{data:new Date().toISOString(),acao:"Criação",descricao:`Contrato criado a partir do orçamento ${be.nomeProjeto}`,usuario:"Sistema"}],criadoEm:new Date().toISOString(),atualizadoEm:new Date().toISOString()};await Ie.entities.contratos.create(rt),await T(be._id,"enviado"),X.success("✅ Contrato criado com sucesso"),console.log("✅ VALIDAÇÃO: Contrato criado e orçamento atualizado"),await ie(),Xe()}catch(xe){console.error("❌ ERRO ao criar contrato:",xe),X.error("❌ ERRO ao criar contrato")}},T=async(ae,xe)=>{try{const{list:be}=await Ie.entities.orcamentos.list(),Te=be.find(Ae=>Ae._id===ae);Te&&(await Ie.entities.orcamentos.update(ae,{...Te,status:xe,atualizadoEm:new Date().toISOString()}),console.log("✅ VALIDAÇÃO: Status do orçamento atualizado:",xe))}catch(be){console.error("❌ ERRO ao atualizar status do orçamento:",be)}},B=async(ae,xe)=>{try{const be=e.find(Ae=>Ae._id===ae);if(!be)return;const Te={...be,status:xe,dataAssinatura:xe==="assinado"?new Date().toISOString():be.dataAssinatura,atualizadoEm:new Date().toISOString(),historico:[...be.historico||[],{data:new Date().toISOString(),acao:"Alteração de Status",descricao:`Status alterado para: ${xe}`,usuario:"Sistema"}]};if(await Ie.entities.contratos.update(ae,Te),be.orcamentoOrigemId){let Ae="juridico";xe==="assinado"?(Ae="assinado",await oe(be)):xe==="enviado"?Ae="enviado":xe==="cancelado"?Ae="perdido":xe==="em_desenvolvimento"&&(Ae="juridico"),await T(be.orcamentoOrigemId,Ae)}await ie(),X.success("✅ Status atualizado e sincronizado com orçamento"),console.log("✅ VALIDAÇÃO: Status do contrato atualizado e sincronizado")}catch(be){console.error("❌ ERRO ao atualizar status:",be),X.error("❌ ERRO ao atualizar status")}},oe=async ae=>{try{const xe=n.find(Ae=>Ae._id===ae.orcamentoOrigemId);if(!xe)return;const be=(xe.etapas||[]).map(Ae=>({...Ae,status:"pendente",dataInicioPrevisao:null,dataTerminoPrevisao:null,dataInicioReal:null,dataTerminoReal:null,progresso:0,valorRealizado:0,subetapas:((Ae==null?void 0:Ae.subetapas)||[]).map(tt=>({...tt,status:"pendente",dataInicioPrevisao:null,dataTerminoPrevisao:null,dataInicioReal:null,dataTerminoReal:null,progresso:0,maoDeObra:[],materiais:((tt==null?void 0:tt.itens)||[]).map(rt=>({insumoId:rt.insumoId,nome:rt.nome,unidadeMedida:rt.unidadeMedida,quantidadeNecessaria:rt.quantidade,quantidadeDisponivel:0,quantidadeSolicitada:0,valorUnitario:rt.valorUnitario,valorTotal:rt.valorTotal,statusCompra:"disponivel",solicitacaoCompraId:""})),valorRealizado:0}))})),Te={contratoId:ae._id,orcamentoId:ae.orcamentoOrigemId,nomeProjeto:ae.nomeProjeto,cliente:ae.cliente,status:"planejamento",dataInicio:new Date().toISOString(),dataPrevisaoTermino:new Date(Date.now()+120*24*60*60*1e3).toISOString(),valorOrcado:ae.valorTotal,valorRealizado:0,progresso:0,etapas:be,alertas:[{id:`alerta_${Date.now()}`,tipo:"criacao",titulo:"Planejamento Criado",descricao:`Planejamento criado automaticamente a partir do contrato ${ae.nomeProjeto}`,data:new Date().toISOString(),lido:!1}],observacoes:`Planejamento criado automaticamente a partir do contrato ${ae.nomeProjeto}`,criadoEm:new Date().toISOString(),atualizadoEm:new Date().toISOString()};await Ie.entities.planejamentos.create(Te),X.success("✅ Planejamento de obra criado automaticamente!"),console.log("✅ VALIDAÇÃO: Planejamento criado automaticamente")}catch(xe){console.error("❌ ERRO ao criar planejamento:",xe),X.error("❌ ERRO ao criar planejamento automático")}},Ne=ae=>{try{const xe=`
        <!DOCTYPE html>
        <html xmlns:o='urn:schemas-microsoft-com:office:office' xmlns:w='urn:schemas-microsoft-com:office:word' xmlns='http://www.w3.org/TR/REC-html40'>
        <head>
          <meta charset='utf-8'>
          <title>Contrato - ${ae.nomeProjeto}</title>
          <style>
            body { font-family: 'Times New Roman', serif; font-size: 12pt; line-height: 1.5; margin: 0; padding: 0; }
            .header { text-align: center; margin-bottom: 30pt; border-bottom: 2pt solid black; padding-bottom: 15pt; }
            .title { font-size: 16pt; font-weight: bold; margin-bottom: 10pt; }
            .content { text-align: justify; margin-bottom: 20pt; }
            .signature-section { margin-top: 50pt; page-break-inside: avoid; }
          </style>
        </head>
        <body>
          ${ae.conteudo}
          
          ${(ae.aditivos||[]).length>0?`
            <div style="page-break-before: always;">
              <h2 style="text-align: center; margin-bottom: 20pt;">ADITIVOS CONTRATUAIS</h2>
              ${(ae.aditivos||[]).map(tt=>`
                <div style="margin-bottom: 20pt; border: 1pt solid black; padding: 10pt;">
                  <h3>Aditivo ${tt.id}</h3>
                  <p><strong>Data:</strong> ${new Date(tt.data).toLocaleDateString("pt-BR")}</p>
                  <p><strong>Descrição:</strong> ${tt.descricao}</p>
                  <p><strong>Valor Anterior:</strong> R$ ${tt.valorAnterior.toLocaleString("pt-BR")}</p>
                  <p><strong>Valor Novo:</strong> R$ ${tt.valorNovo.toLocaleString("pt-BR")}</p>
                  <p><strong>Justificativa:</strong> ${tt.justificativa}</p>
                </div>
              `).join("")}
            </div>
          `:""}
          
          <div style="margin-top: 30pt; text-align: center; font-size: 10pt;">
            <p>Documento gerado em ${new Date().toLocaleDateString("pt-BR")} às ${new Date().toLocaleTimeString("pt-BR")}</p>
            <p>Status: ${ae.status.toUpperCase()}</p>
          </div>
        </body>
        </html>
      `,be=new Blob(["\uFEFF",xe],{type:"application/msword"}),Te=URL.createObjectURL(be),Ae=document.createElement("a");Ae.href=Te,Ae.download=`contrato-${ae.nomeProjeto.replace(/\s+/g,"-").toLowerCase()}.doc`,document.body.appendChild(Ae),Ae.click(),document.body.removeChild(Ae),URL.revokeObjectURL(Te),X.success("✅ Contrato exportado em Word com sucesso!"),console.log("✅ VALIDAÇÃO: Word exportado:",ae.nomeProjeto)}catch(xe){console.error("❌ ERRO ao exportar Word:",xe),X.error("❌ ERRO ao exportar Word")}},Be=()=>{we({templateId:"",orcamentoId:"",dadosPreenchidos:{},assinantes:[]}),g(!0)},Xe=()=>{g(!1),we({templateId:"",orcamentoId:"",dadosPreenchidos:{},assinantes:[]})},dt=async ae=>{if(confirm("Tem certeza que deseja excluir este contrato?"))try{await Ie.entities.contratos.delete(ae),X.success("✅ Contrato excluído com sucesso"),await ie()}catch(xe){console.error("❌ ERRO ao excluir contrato:",xe),X.error("❌ ERRO ao excluir contrato")}},ft=ae=>({em_desenvolvimento:"yellow",enviado:"blue",assinado:"green",cancelado:"red"})[ae]||"gray",Me=ae=>{switch(ae){case"warning":return t.jsx(po,{className:"h-4 w-4 text-orange-500"});case"success":return t.jsx(ps,{className:"h-4 w-4 text-green-500"});case"info":return t.jsx(H4,{className:"h-4 w-4 text-blue-500"});case"manual":return t.jsx(fo,{className:"h-4 w-4 text-purple-500"});default:return t.jsx(fo,{className:"h-4 w-4 text-gray-500"})}},te={total:e.length,ativos:e.filter(ae=>(ae==null?void 0:ae.status)==="assinado").length,valorAtivo:e.filter(ae=>(ae==null?void 0:ae.status)==="assinado").reduce((ae,xe)=>ae+((xe==null?void 0:xe.valorTotal)||0),0),valorConcluido:e.filter(ae=>(ae==null?void 0:ae.status)==="assinado").reduce((ae,xe)=>ae+((xe==null?void 0:xe.valorTotal)||0),0)},Ct=d.filter(ae=>!ae.lida).length;return i?t.jsx("div",{className:"flex items-center justify-center h-64",children:t.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Contratos"}),t.jsx("p",{className:"text-gray-600",children:"Gerencie contratos, templates e aditivos"})]}),t.jsxs("div",{className:"flex space-x-3",children:[t.jsxs("button",{onClick:()=>Y(!0),className:"bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700 flex items-center space-x-2",children:[t.jsx(B4,{className:"h-4 w-4"}),t.jsx("span",{children:"Códigos Template"})]}),t.jsxs("div",{className:"relative",children:[t.jsxs("button",{onClick:()=>x(!h),className:"bg-orange-600 text-white px-4 py-2 rounded-lg hover:bg-orange-700 flex items-center space-x-2 relative",children:[t.jsx(fo,{className:"h-4 w-4"}),t.jsx("span",{children:"Notificações"}),Ct>0&&t.jsx("span",{className:"absolute -top-2 -right-2 bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center",children:Ct})]}),h&&t.jsxs("div",{className:"absolute right-0 mt-2 w-80 bg-white rounded-lg shadow-lg border border-gray-200 z-50",children:[t.jsxs("div",{className:"p-4 border-b border-gray-200 flex justify-between items-center",children:[t.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Notificações de Contratos"}),Ct>0&&t.jsx("button",{onClick:()=>{const ae=d.map(xe=>({...xe,lida:!0}));S(ae)},className:"text-sm text-blue-600 hover:text-blue-800",children:"Marcar todas como lidas"})]}),t.jsx("div",{className:"max-h-96 overflow-y-auto",children:d.length===0?t.jsx("div",{className:"p-4 text-center text-gray-500",children:"Nenhuma notificação"}):d.map(ae=>t.jsx("div",{className:`p-4 border-b border-gray-100 hover:bg-gray-50 ${ae.lida?"":"bg-blue-50"}`,children:t.jsxs("div",{className:"flex items-start space-x-3",children:[Me(ae.tipo),t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex justify-between items-start",children:[t.jsx("h4",{className:"text-sm font-medium text-gray-900",children:ae.titulo}),!ae.lida&&t.jsx("button",{onClick:()=>q(ae.id),className:"text-xs text-blue-600 hover:text-blue-800 ml-2",children:"Marcar como lida"})]}),t.jsx("p",{className:"text-sm text-gray-600 mt-1",children:ae.descricao}),t.jsx("p",{className:"text-xs text-gray-400 mt-2",children:new Date(ae.data).toLocaleString("pt-BR")})]})]})},ae.id))})]})]}),t.jsxs("button",{onClick:Be,className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 flex items-center space-x-2",children:[t.jsx(wa,{className:"h-4 w-4"}),t.jsx("span",{children:"Novo Contrato"})]})]})]}),n.length>0&&t.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[t.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-4 flex items-center",children:[t.jsx(xo,{className:"h-5 w-5 mr-2 text-purple-600"}),"Orçamentos Aprovados (Status Jurídico) - Disponíveis para Contrato"]}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:n.slice(0,6).map(ae=>t.jsx("div",{className:"border border-purple-200 rounded-lg p-4 bg-purple-50",children:t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsxs("div",{children:[t.jsx("h4",{className:"font-medium text-gray-900",children:ae.nomeProjeto}),t.jsx("p",{className:"text-sm text-gray-600",children:ae.cliente}),t.jsxs("p",{className:"text-sm text-purple-600 font-medium",children:["R$ ",ae.valorTotal.toLocaleString()]})]}),t.jsxs("button",{onClick:()=>{we({...R,orcamentoId:ae._id}),g(!0)},className:"bg-purple-600 text-white px-3 py-1 rounded text-sm hover:bg-purple-700 flex items-center space-x-1",children:[t.jsx(qa,{className:"h-3 w-3"}),t.jsx("span",{children:"Criar Contrato"})]})]})},ae._id))}),n.length>6&&t.jsxs("p",{className:"text-sm text-gray-500 mt-3",children:["+",n.length-6," orçamentos jurídicos disponíveis"]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[t.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx(qa,{className:"h-8 w-8 text-blue-600"}),t.jsxs("div",{className:"ml-4",children:[t.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Contratos"}),t.jsx("p",{className:"text-2xl font-bold text-gray-900",children:te.total})]})]})}),t.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx(xo,{className:"h-8 w-8 text-green-600"}),t.jsxs("div",{className:"ml-4",children:[t.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Contratos Ativos"}),t.jsx("p",{className:"text-2xl font-bold text-gray-900",children:te.ativos})]})]})}),t.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx(Ts,{className:"h-8 w-8 text-purple-600"}),t.jsxs("div",{className:"ml-4",children:[t.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Valor Ativo"}),t.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:["R$ ",te.valorAtivo.toLocaleString()]})]})]})}),t.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx(Ga,{className:"h-8 w-8 text-orange-600"}),t.jsxs("div",{className:"ml-4",children:[t.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Valor Concluído"}),t.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:["R$ ",te.valorConcluido.toLocaleString()]})]})]})})]}),t.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[t.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:t.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Lista de Contratos"})}),t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[t.jsx("thead",{className:"bg-gray-50",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Cliente"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Projeto"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Valor"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Data Assinatura"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Assinantes"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Ações"})]})}),t.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:e.map(ae=>t.jsxs("tr",{className:"hover:bg-gray-50",children:[t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.jsx("div",{className:"text-sm font-medium text-gray-900",children:ae.cliente})}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.jsx("div",{className:"text-sm text-gray-900",children:ae.nomeProjeto})}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.jsxs("select",{value:ae.status,onChange:xe=>B(ae._id,xe.target.value),className:`text-sm rounded-full px-3 py-1 font-medium border-0 focus:ring-2 focus:ring-offset-2 ${ft(ae.status)==="green"?"bg-green-100 text-green-800 focus:ring-green-500":ft(ae.status)==="yellow"?"bg-yellow-100 text-yellow-800 focus:ring-yellow-500":ft(ae.status)==="blue"?"bg-blue-100 text-blue-800 focus:ring-blue-500":ft(ae.status)==="red"?"bg-red-100 text-red-800 focus:ring-red-500":"bg-gray-100 text-gray-800 focus:ring-gray-500"}`,children:[t.jsx("option",{value:"em_desenvolvimento",children:"Em Desenvolvimento"}),t.jsx("option",{value:"enviado",children:"Enviado"}),t.jsx("option",{value:"assinado",children:"Assinado"}),t.jsx("option",{value:"cancelado",children:"Cancelado"})]})}),t.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:["R$ ",(ae.valorTotal||0).toLocaleString()]}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:ae.dataAssinatura?new Date(ae.dataAssinatura).toLocaleDateString():"-"}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:t.jsxs("div",{className:"flex items-center space-x-1",children:[t.jsxs("span",{children:[(ae.assinantes||[]).filter(xe=>xe==null?void 0:xe.assinado).length,"/",(ae.assinantes||[]).length]}),t.jsx(Qc,{className:"h-4 w-4"})]})}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:t.jsxs("div",{className:"flex space-x-2",children:[t.jsx("button",{onClick:()=>Ne(ae),className:"text-blue-600 hover:text-blue-900",title:"Exportar Word",children:t.jsx(U4,{className:"h-4 w-4"})}),t.jsx("button",{onClick:()=>dt(ae._id),className:"text-red-600 hover:text-red-900",title:"Excluir",children:t.jsx(Ms,{className:"h-4 w-4"})})]})})]},ae._id))})]})})]}),J&&t.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:t.jsx("div",{className:"relative top-10 mx-auto p-5 border w-full max-w-5xl shadow-lg rounded-md bg-white",children:t.jsxs("div",{className:"mt-3",children:[t.jsxs("div",{className:"flex justify-between items-center mb-4",children:[t.jsxs("h3",{className:"text-lg font-medium text-gray-900 flex items-center",children:[t.jsx(q4,{className:"h-5 w-5 mr-2"}),"Códigos e Significados para Templates HTML"]}),t.jsx("button",{onClick:()=>Y(!1),className:"text-gray-400 hover:text-gray-600",children:t.jsx($t,{className:"h-5 w-5"})})]}),t.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:[t.jsx("h4",{className:"text-md font-medium text-blue-900 mb-2",children:"Como usar os códigos:"}),t.jsxs("p",{className:"text-sm text-blue-800",children:["• Copie os códigos abaixo e cole no conteúdo HTML do seu template",t.jsx("br",{}),"• Os códigos serão substituídos automaticamente pelos valores reais ao gerar o contrato",t.jsx("br",{}),'• Códigos marcados como "automático" são preenchidos pelo sistema',t.jsx("br",{}),"• Outros códigos precisam ser preenchidos durante a criação do contrato"]})]}),t.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 max-h-96 overflow-y-auto",children:Object.entries(c3).map(([ae,xe])=>t.jsx("div",{className:"border border-gray-200 rounded-lg p-4 hover:bg-gray-50",children:t.jsx("div",{className:"flex justify-between items-start",children:t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[t.jsx("code",{className:"bg-gray-100 px-2 py-1 rounded text-sm font-mono text-blue-600",children:ae}),t.jsx("button",{onClick:()=>N(ae),className:"text-gray-400 hover:text-gray-600",title:"Copiar código",children:t.jsx(gl,{className:"h-4 w-4"})})]}),t.jsx("p",{className:"text-sm text-gray-700",children:xe}),["{{NOME_PROJETO}}","{{VALOR_TOTAL}}","{{NOME_CLIENTE}}","{{DATA_GERACAO}}","{{ETAPAS_PROJETO}}","{{LOGO_URL}}"].includes(ae)&&t.jsx("span",{className:"inline-block mt-2 px-2 py-1 bg-green-100 text-green-800 text-xs rounded-full",children:"Automático"})]})})},ae))}),t.jsx("div",{className:"flex justify-end pt-4",children:t.jsx("button",{onClick:()=>Y(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 border border-gray-300 rounded-md hover:bg-gray-200",children:"Fechar"})})]})})}),b&&t.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:t.jsx("div",{className:"relative top-10 mx-auto p-5 border w-full max-w-4xl shadow-lg rounded-md bg-white",children:t.jsxs("div",{className:"mt-3",children:[t.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Novo Contrato"}),t.jsxs("form",{onSubmit:U,className:"space-y-4",children:[t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Template"}),t.jsxs("select",{value:R.templateId,onChange:ae=>{var be;const xe=r.find(Te=>Te._id===ae.target.value);we({...R,templateId:ae.target.value,assinantes:((be=xe==null?void 0:xe.assinantes)==null?void 0:be.map(Te=>({...Te,placeholder:Te.nome})))||[]})},className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500",required:!0,children:[t.jsx("option",{value:"",children:"Selecione um template"}),r.map(ae=>t.jsx("option",{value:ae._id,children:ae.nome},ae._id))]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Orçamento Aprovado (Status Jurídico)"}),t.jsxs("select",{value:R.orcamentoId,onChange:ae=>we({...R,orcamentoId:ae.target.value}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500",required:!0,children:[t.jsx("option",{value:"",children:"Selecione um orçamento"}),n.map(ae=>t.jsxs("option",{value:ae._id,children:[ae.nomeProjeto," - ",ae.cliente," - R$ ",(ae.valorTotal||0).toLocaleString()]},ae._id))]}),n.length===0&&t.jsx("p",{className:"text-sm text-orange-600 mt-1",children:'⚠️ Nenhum orçamento com status "Jurídico" encontrado'})]})]}),t.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[t.jsx("button",{type:"button",onClick:Xe,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 border border-gray-300 rounded-md hover:bg-gray-200",children:"Cancelar"}),t.jsx("button",{type:"submit",className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-md hover:bg-blue-700",children:"Criar Contrato"})]})]})]})})})]})}const u3=()=>{const[e,a]=I.useState([]),[r,s]=I.useState(!0),[n,o]=I.useState(!1),[i,c]=I.useState(!1),[d,p]=I.useState(null),[h,x]=I.useState({}),[b,g]=I.useState(null),w=async()=>{try{s(!0);const{list:C}=await Ie.entities.contract_templates.list();a(C||[])}catch(C){console.error("Erro ao carregar templates:",C),X.error("Erro ao carregar templates")}finally{s(!1)}};I.useEffect(()=>{w()},[]);const _=async C=>{try{b?(await Ie.entities.contract_templates.update(b._id,{...C,updatedAt:new Date().toISOString()}),X.success("Template atualizado com sucesso")):(await Ie.entities.contract_templates.create({...C,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}),X.success("Template criado com sucesso")),o(!1),g(null),w()}catch(W){console.error("Erro ao salvar template:",W),X.error("Erro ao salvar template")}},O=async C=>{if(confirm("Tem certeza que deseja excluir este template?"))try{await Ie.entities.contract_templates.delete(C),X.success("Template excluído com sucesso"),w()}catch(W){console.error("Erro ao excluir template:",W),X.error("Erro ao excluir template")}},y=(C,W)=>{let se=C.content;return C.variables.forEach(J=>{const Y=W[J.name]||`[${J.label}]`,K=new RegExp(`{{${J.name}}}`,"g");se=se.replace(K,Y)}),se},v=(C,W)=>{const se=y(C,W),J=window.open("","_blank");J&&(J.document.write(`
        <html>
          <head>
            <title>${C.name}</title>
            <style>
              body { font-family: Arial, sans-serif; line-height: 1.6; margin: 40px; }
              h1 { color: #333; border-bottom: 2px solid #333; }
              h2 { color: #555; margin-top: 30px; }
              p { margin-bottom: 15px; }
              @media print { body { margin: 20px; } }
            </style>
          </head>
          <body>${se}</body>
        </html>
      `),J.document.close(),J.print())};return r?t.jsx("div",{className:"flex justify-center items-center py-12",children:t.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):t.jsxs("div",{className:"p-6",children:[t.jsxs("div",{className:"flex justify-between items-center mb-6",children:[t.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Templates de Contratos"}),t.jsxs("button",{onClick:()=>o(!0),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 flex items-center gap-2",children:[t.jsx(wa,{size:16}),"Novo Template"]})]}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:e.map(C=>t.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[t.jsxs("div",{className:"flex items-start justify-between mb-4",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(qa,{className:"text-blue-600",size:24}),t.jsxs("div",{children:[t.jsx("h3",{className:"font-semibold text-gray-800",children:C.name}),t.jsx("span",{className:"text-sm text-gray-500 capitalize",children:C.type})]})]}),t.jsx("span",{className:`px-2 py-1 rounded text-xs ${C.status==="ativo"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:C.status})]}),t.jsxs("p",{className:"text-sm text-gray-600 mb-4",children:[C.variables.length," variáveis configuradas"]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsxs("button",{onClick:()=>{p(C),x({}),c(!0)},className:"flex-1 bg-green-100 text-green-700 px-3 py-2 rounded hover:bg-green-200 flex items-center justify-center gap-1",children:[t.jsx(yo,{size:14}),"Usar"]}),t.jsx("button",{onClick:()=>{g(C),o(!0)},className:"bg-yellow-100 text-yellow-700 px-3 py-2 rounded hover:bg-yellow-200",children:t.jsx(gs,{size:14})}),t.jsx("button",{onClick:()=>O(C._id),className:"bg-red-100 text-red-700 px-3 py-2 rounded hover:bg-red-200",children:t.jsx(Ms,{size:14})})]})]},C._id))}),e.length===0&&t.jsxs("div",{className:"text-center py-12",children:[t.jsx(qa,{size:48,className:"text-gray-400 mx-auto mb-4"}),t.jsx("p",{className:"text-gray-500",children:"Nenhum template cadastrado"})]}),n&&t.jsx(m3,{template:b,onSave:_,onClose:()=>{o(!1),g(null)}}),i&&d&&t.jsx(h3,{template:d,previewData:h,onDataChange:x,onGeneratePDF:v,onClose:()=>{c(!1),p(null)}})]})},m3=({template:e,onSave:a,onClose:r})=>{const[s,n]=I.useState({name:(e==null?void 0:e.name)||"",type:(e==null?void 0:e.type)||"construcao",content:(e==null?void 0:e.content)||"",variables:(e==null?void 0:e.variables)||[],status:(e==null?void 0:e.status)||"ativo"}),[o,i]=I.useState({name:"",label:"",type:"text",required:!1}),c=()=>{if(!o.name||!o.label){X.error("Nome e rótulo da variável são obrigatórios");return}n(h=>({...h,variables:[...h.variables,o]})),i({name:"",label:"",type:"text",required:!1})},d=h=>{n(x=>({...x,variables:x.variables.filter((b,g)=>g!==h)}))},p=h=>{if(h.preventDefault(),!s.name||!s.content){X.error("Nome e conteúdo são obrigatórios");return}a(s)};return t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:t.jsxs("div",{className:"bg-white rounded-lg max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[t.jsxs("div",{className:"p-6 border-b flex justify-between items-center",children:[t.jsx("h3",{className:"text-xl font-bold",children:e?"Editar Template":"Novo Template"}),t.jsx("button",{onClick:r,className:"text-gray-400 hover:text-gray-600",children:t.jsx($t,{size:24})})]}),t.jsxs("form",{onSubmit:p,className:"p-6 space-y-6",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-2",children:"Nome do Template"}),t.jsx("input",{type:"text",value:s.name,onChange:h=>n(x=>({...x,name:h.target.value})),className:"w-full p-3 border rounded-lg",required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-2",children:"Tipo"}),t.jsxs("select",{value:s.type,onChange:h=>n(x=>({...x,type:h.target.value})),className:"w-full p-3 border rounded-lg",children:[t.jsx("option",{value:"construcao",children:"Construção"}),t.jsx("option",{value:"reforma",children:"Reforma"}),t.jsx("option",{value:"projeto",children:"Projeto"}),t.jsx("option",{value:"manutencao",children:"Manutenção"}),t.jsx("option",{value:"consultoria",children:"Consultoria"})]})]})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium mb-2",children:["Conteúdo do Contrato (use ","{{variavel}}"," para campos dinâmicos)"]}),t.jsx("textarea",{value:s.content,onChange:h=>n(x=>({...x,content:h.target.value})),className:"w-full p-3 border rounded-lg",rows:12,placeholder:"Digite o conteúdo do contrato...",required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-2",children:"Variáveis do Template"}),t.jsx("div",{className:"space-y-2 mb-4",children:s.variables.map((h,x)=>t.jsxs("div",{className:"flex items-center gap-2 p-2 bg-gray-50 rounded",children:[t.jsx("span",{className:"font-mono text-sm",children:`{{${h.name}}}`}),t.jsx("span",{className:"text-gray-600",children:"-"}),t.jsx("span",{children:h.label}),t.jsxs("span",{className:"text-xs text-gray-500",children:["(",h.type,")"]}),h.required&&t.jsx("span",{className:"text-red-500 text-xs",children:"*"}),t.jsx("button",{type:"button",onClick:()=>d(x),className:"ml-auto text-red-500 hover:text-red-700",children:t.jsx($t,{size:16})})]},x))}),t.jsxs("div",{className:"grid grid-cols-12 gap-2 items-end",children:[t.jsx("div",{className:"col-span-3",children:t.jsx("input",{type:"text",placeholder:"nome_variavel",value:o.name,onChange:h=>i(x=>({...x,name:h.target.value})),className:"w-full p-2 border rounded text-sm"})}),t.jsx("div",{className:"col-span-4",children:t.jsx("input",{type:"text",placeholder:"Rótulo da Variável",value:o.label,onChange:h=>i(x=>({...x,label:h.target.value})),className:"w-full p-2 border rounded text-sm"})}),t.jsx("div",{className:"col-span-2",children:t.jsxs("select",{value:o.type,onChange:h=>i(x=>({...x,type:h.target.value})),className:"w-full p-2 border rounded text-sm",children:[t.jsx("option",{value:"text",children:"Texto"}),t.jsx("option",{value:"number",children:"Número"}),t.jsx("option",{value:"date",children:"Data"}),t.jsx("option",{value:"currency",children:"Moeda"})]})}),t.jsx("div",{className:"col-span-2",children:t.jsxs("label",{className:"flex items-center",children:[t.jsx("input",{type:"checkbox",checked:o.required,onChange:h=>i(x=>({...x,required:h.target.checked})),className:"mr-1"}),t.jsx("span",{className:"text-sm",children:"Obrigatório"})]})}),t.jsx("div",{className:"col-span-1",children:t.jsx("button",{type:"button",onClick:c,className:"w-full bg-blue-600 text-white p-2 rounded hover:bg-blue-700",children:t.jsx(wa,{size:16})})})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-2",children:"Status"}),t.jsxs("select",{value:s.status,onChange:h=>n(x=>({...x,status:h.target.value})),className:"w-full p-3 border rounded-lg",children:[t.jsx("option",{value:"ativo",children:"Ativo"}),t.jsx("option",{value:"inativo",children:"Inativo"})]})]}),t.jsxs("div",{className:"flex gap-3",children:[t.jsxs("button",{type:"submit",className:"bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 flex items-center gap-2",children:[t.jsx(bl,{size:16}),"Salvar Template"]}),t.jsx("button",{type:"button",onClick:r,className:"bg-gray-500 text-white px-6 py-3 rounded-lg hover:bg-gray-600",children:"Cancelar"})]})]})]})})},h3=({template:e,previewData:a,onDataChange:r,onGeneratePDF:s,onClose:n})=>{const[o,i]=I.useState("form"),c=(h,x)=>{r({...a,[h]:x})},d=()=>{let h=e.content;return e.variables.forEach(x=>{const b=a[x.name]||`[${x.label}]`,g=new RegExp(`{{${x.name}}}`,"g");h=h.replace(g,b)}),h},p=()=>e.variables.filter(h=>h.required).every(h=>{var x;return(x=a[h.name])==null?void 0:x.trim()});return t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:t.jsxs("div",{className:"bg-white rounded-lg max-w-6xl w-full max-h-[90vh] overflow-hidden flex flex-col",children:[t.jsxs("div",{className:"p-6 border-b flex justify-between items-center",children:[t.jsxs("h3",{className:"text-xl font-bold",children:["Gerar Contrato: ",e.name]}),t.jsx("button",{onClick:n,className:"text-gray-400 hover:text-gray-600",children:t.jsx($t,{size:24})})]}),t.jsx("div",{className:"border-b",children:t.jsxs("div",{className:"flex",children:[t.jsx("button",{onClick:()=>i("form"),className:`px-6 py-3 font-medium ${o==="form"?"border-b-2 border-blue-600 text-blue-600":"text-gray-500 hover:text-gray-700"}`,children:"Preencher Dados"}),t.jsx("button",{onClick:()=>i("preview"),className:`px-6 py-3 font-medium ${o==="preview"?"border-b-2 border-blue-600 text-blue-600":"text-gray-500 hover:text-gray-700"}`,children:"Preview do Contrato"})]})}),t.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:o==="form"?t.jsxs("div",{className:"space-y-4",children:[t.jsx("h4",{className:"text-lg font-semibold mb-4",children:"Preencha os dados do contrato:"}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:e.variables.map(h=>t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium mb-2",children:[h.label,h.required&&t.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),h.type==="date"?t.jsx("input",{type:"date",value:a[h.name]||"",onChange:x=>c(h.name,x.target.value),className:"w-full p-3 border rounded-lg",required:h.required}):h.type==="number"?t.jsx("input",{type:"number",value:a[h.name]||"",onChange:x=>c(h.name,x.target.value),className:"w-full p-3 border rounded-lg",required:h.required}):h.type==="currency"?t.jsx("input",{type:"text",placeholder:"R$ 0,00",value:a[h.name]||"",onChange:x=>c(h.name,x.target.value),className:"w-full p-3 border rounded-lg",required:h.required}):t.jsx("input",{type:"text",value:a[h.name]||"",onChange:x=>c(h.name,x.target.value),className:"w-full p-3 border rounded-lg",required:h.required})]},h.name))})]}):t.jsxs("div",{children:[t.jsx("h4",{className:"text-lg font-semibold mb-4",children:"Preview do Contrato:"}),t.jsx("div",{className:"border rounded-lg p-6 bg-white",dangerouslySetInnerHTML:{__html:d()},style:{fontFamily:"Arial, sans-serif",lineHeight:"1.6",minHeight:"400px"}})]})}),t.jsxs("div",{className:"p-6 border-t flex gap-3 justify-end",children:[t.jsx("button",{onClick:n,className:"bg-gray-500 text-white px-6 py-3 rounded-lg hover:bg-gray-600",children:"Cancelar"}),t.jsxs("button",{onClick:()=>s(e,a),disabled:!p(),className:"bg-green-600 text-white px-6 py-3 rounded-lg hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[t.jsx(bo,{size:16}),"Gerar PDF"]})]})]})})},p3=()=>{const e=sd(),[a,r]=I.useState([]),[s,n]=I.useState([]),[o,i]=I.useState(!0),[c,d]=I.useState(!1),[p,h]=I.useState(!1),[x,b]=I.useState(!1),[g,w]=I.useState(!1),[_,O]=I.useState(null),[y,v]=I.useState(null),[C,W]=I.useState("contratos"),[se,J]=I.useState({name:"",type:"construcao",content:"",variables:[],status:"ativo"}),[Y,K]=I.useState({numero:"",tipo:"valor",descricao:"",valorAdicional:0,novaDataFim:"",justificativa:""}),[fe,me]=I.useState({name:"",label:"",type:"text",required:!1}),$=async()=>{try{i(!0);const{list:T}=await Ie.entities.contratos.list();r(T||[])}catch(T){console.error("Erro ao carregar contratos:",T),X.error("Erro ao carregar contratos")}finally{i(!1)}},L=async()=>{try{const{list:T}=await Ie.entities.contract_templates.list();n(T||[])}catch(T){console.error("Erro ao carregar templates:",T),X.error("Erro ao carregar templates")}};I.useEffect(()=>{C==="contratos"?$():L()},[C]);const le=async T=>{try{_?(await Ie.entities.contratos.update(_._id,T),X.success("Contrato atualizado com sucesso")):(await Ie.entities.contratos.create({...T,createdAt:new Date().toISOString()}),X.success("Contrato criado com sucesso")),d(!1),O(null),$()}catch(B){console.error("Erro ao salvar contrato:",B),X.error("Erro ao salvar contrato")}},R=async T=>{if(confirm("Tem certeza que deseja excluir este contrato?"))try{await Ie.entities.contratos.delete(T),X.success("Contrato excluído com sucesso"),$()}catch(B){console.error("Erro ao excluir contrato:",B),X.error("Erro ao excluir contrato")}},we=async()=>{if(!se.name||!se.content){X.error("Preencha nome e conteúdo do template");return}try{const T={...se,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};await Ie.entities.contract_templates.create(T),X.success("Template criado com sucesso"),h(!1),Ue(),L()}catch(T){console.error("Erro ao salvar template:",T),X.error("Erro ao salvar template")}},ce=()=>{if(!fe.name||!fe.label){X.error("Nome e rótulo da variável são obrigatórios");return}J(T=>({...T,variables:[...T.variables,fe]})),me({name:"",label:"",type:"text",required:!1})},Ce=T=>{J(B=>({...B,variables:B.variables.filter((oe,Ne)=>Ne!==T)}))},Z=async T=>{try{X.loading("Gerando PDF do contrato...",{id:"pdf-contract"});const B=(T==null?void 0:T.numero)||"SEM-NUMERO",oe=(T==null?void 0:T.cliente)||"Cliente não informado",Ne=(T==null?void 0:T.obra)||"Obra não informada",Be=(T==null?void 0:T.valor)||0,Xe=(T==null?void 0:T.tipo)||"construcao",dt=(T==null?void 0:T.status)||"ativo",ft=(T==null?void 0:T.dataInicio)||new Date().toISOString(),Me=(T==null?void 0:T.dataFim)||new Date().toISOString(),te=(T==null?void 0:T.observacoes)||"",Ct=(T==null?void 0:T.aditivos)||[],ae=Be+Ct.reduce((be,Te)=>be+((Te==null?void 0:Te.valorAdicional)||0),0),xe=`
        <!DOCTYPE html>
        <html>
          <head>
            <meta charset="UTF-8">
            <title>Contrato ${B}</title>
            <style>
              @page {
                size: A4;
                margin: 2cm;
              }
              body { 
                font-family: 'Times New Roman', serif; 
                line-height: 1.6; 
                margin: 0;
                padding: 20px;
                color: #333;
                font-size: 12pt;
              }
              .header { 
                text-align: center; 
                border-bottom: 3px solid #333; 
                padding-bottom: 20px;
                margin-bottom: 30px;
              }
              .header h1 {
                font-size: 18pt;
                font-weight: bold;
                margin: 0 0 10px 0;
              }
              .header h2 {
                font-size: 14pt;
                margin: 0;
                color: #666;
              }
              .section { 
                margin-bottom: 25px; 
                page-break-inside: avoid;
              }
              .section-title { 
                font-weight: bold; 
                font-size: 14pt;
                color: #2563eb;
                margin-bottom: 15px;
                border-left: 4px solid #2563eb;
                padding-left: 10px;
                text-transform: uppercase;
              }
              .info-grid {
                display: grid;
                grid-template-columns: 1fr 1fr;
                gap: 15px;
                margin-bottom: 20px;
              }
              .info-item {
                background: #f8f9fa;
                padding: 12px;
                border-radius: 5px;
                border: 1px solid #e9ecef;
              }
              .info-label {
                font-weight: bold;
                color: #495057;
                display: block;
                margin-bottom: 5px;
              }
              .info-value {
                color: #212529;
              }
              .signatures {
                margin-top: 60px;
                display: grid;
                grid-template-columns: 1fr 1fr;
                gap: 80px;
                page-break-inside: avoid;
              }
              .signature-box {
                text-align: center;
                border-top: 2px solid #333;
                padding-top: 15px;
                min-height: 100px;
              }
              .signature-title {
                font-weight: bold;
                font-size: 12pt;
                margin-bottom: 20px;
              }
              .signature-line {
                margin: 10px 0;
                text-align: left;
              }
              .aditivos {
                background: #fff3cd;
                border: 2px solid #ffc107;
                border-radius: 8px;
                padding: 20px;
                margin-top: 20px;
                page-break-inside: avoid;
              }
              .aditivo-item {
                margin-bottom: 15px; 
                padding: 15px; 
                border-left: 4px solid #ffc107;
                background: #fffbf0;
                border-radius: 4px;
              }
              .aditivo-title {
                font-weight: bold;
                color: #856404;
                margin-bottom: 8px;
                font-size: 11pt;
              }
              .aditivo-content {
                font-size: 10pt;
                line-height: 1.4;
              }
              .footer {
                margin-top: 40px;
                text-align: center;
                font-size: 10pt;
                color: #666;
                border-top: 1px solid #ddd;
                padding-top: 15px;
              }
              .contract-content {
                text-align: justify;
                margin: 20px 0;
                padding: 20px;
                border: 1px solid #ddd;
                background: #fafafa;
              }
              @media print { 
                body { margin: 0; padding: 15px; }
                .no-print { display: none; }
                .page-break { page-break-before: always; }
              }
            </style>
          </head>
          <body>
            <div class="header">
              <h1>CONTRATO DE ${(Xe||"CONSTRUCAO").toUpperCase()}</h1>
              <h2>Número: ${B}</h2>
            </div>

            <div class="section">
              <div class="section-title">Informações Contratuais</div>
              <div class="info-grid">
                <div class="info-item">
                  <span class="info-label">Cliente/Contratante:</span>
                  <div class="info-value">${oe}</div>
                </div>
                <div class="info-item">
                  <span class="info-label">Obra/Projeto:</span>
                  <div class="info-value">${Ne}</div>
                </div>
                <div class="info-item">
                  <span class="info-label">Valor Original:</span>
                  <div class="info-value">${q(Be)}</div>
                </div>
                <div class="info-item">
                  <span class="info-label">Valor Total Atualizado:</span>
                  <div class="info-value"><strong>${q(ae)}</strong></div>
                </div>
                <div class="info-item">
                  <span class="info-label">Data de Início:</span>
                  <div class="info-value">${N(ft)}</div>
                </div>
                <div class="info-item">
                  <span class="info-label">Data de Término:</span>
                  <div class="info-value">${N(Me)}</div>
                </div>
                <div class="info-item">
                  <span class="info-label">Status Atual:</span>
                  <div class="info-value"><strong>${(dt||"ATIVO").toUpperCase()}</strong></div>
                </div>
                <div class="info-item">
                  <span class="info-label">Tipo de Contrato:</span>
                  <div class="info-value">${Xe||"Não informado"}</div>
                </div>
              </div>
            </div>

            <div class="section">
              <div class="section-title">Objeto do Contrato</div>
              <div class="contract-content">
                <p><strong>CONTRATANTE:</strong> ${oe}</p>
                <p><strong>CONTRATADO:</strong> [NOME DA EMPRESA]</p>
                <p><strong>OBJETO:</strong> ${Xe||"Serviço"} da obra "${Ne}", conforme especificações técnicas, projetos e memorial descritivo que fazem parte integrante deste contrato.</p>
                <p><strong>VALOR:</strong> O valor total do contrato é de ${q(ae)}, a ser pago conforme cronograma físico-financeiro anexo.</p>
                <p><strong>PRAZO:</strong> O prazo para execução da obra é de ${he(ft,Me)} dias corridos, com início em ${N(ft)} e término previsto para ${N(Me)}.</p>
              </div>
            </div>

            ${te?`
              <div class="section">
                <div class="section-title">Observações e Condições Especiais</div>
                <div class="contract-content">
                  <p>${te}</p>
                </div>
              </div>
            `:""}

            ${Ct&&Ct.length>0?`
              <div class="section">
                <div class="section-title">Aditivos Contratuais</div>
                <div class="aditivos">
                  <p style="margin-top: 0; font-weight: bold; color: #856404;">
                    Este contrato possui ${Ct.length} aditivo${Ct.length>1?"s":""} aprovado${Ct.length>1?"s":""}:
                  </p>
                  ${Ct.map((be,Te)=>`
                    <div class="aditivo-item">
                      <div class="aditivo-title">
                        ADITIVO ${(be==null?void 0:be.numero)||`${Te+1}`} - ${((be==null?void 0:be.tipo)||"geral").charAt(0).toUpperCase()+((be==null?void 0:be.tipo)||"geral").slice(1)}
                      </div>
                      <div class="aditivo-content">
                        <p><strong>Descrição:</strong> ${(be==null?void 0:be.descricao)||"Não informada"}</p>
                        ${be!=null&&be.valorAdicional?`<p><strong>Valor Adicional:</strong> ${q(be.valorAdicional)}</p>`:""}
                        ${be!=null&&be.novaDataFim?`<p><strong>Nova Data de Término:</strong> ${N(be.novaDataFim)}</p>`:""}
                        <p><strong>Data do Aditivo:</strong> ${N((be==null?void 0:be.dataAditivo)||new Date().toISOString())}</p>
                        <p><strong>Justificativa:</strong> ${(be==null?void 0:be.justificativa)||"Não informada"}</p>
                      </div>
                    </div>
                  `).join("")}
                </div>
              </div>
            `:""}

            <div class="section">
              <div class="section-title">Cláusulas Gerais</div>
              <div class="contract-content">
                <p><strong>CLÁUSULA 1ª - DO OBJETO:</strong> O presente contrato tem por objeto a execução de ${Xe||"serviços"} conforme especificado neste documento.</p>
                <p><strong>CLÁUSULA 2ª - DO VALOR:</strong> O valor total do contrato é de ${q(ae)}.</p>
                <p><strong>CLÁUSULA 3ª - DO PRAZO:</strong> O prazo de execução é de ${he(ft,Me)} dias corridos.</p>
                <p><strong>CLÁUSULA 4ª - DAS RESPONSABILIDADES:</strong> O CONTRATADO se responsabiliza pela execução da obra conforme normas técnicas vigentes.</p>
                <p><strong>CLÁUSULA 5ª - DO FORO:</strong> Fica eleito o foro da comarca de [CIDADE] para dirimir quaisquer questões oriundas deste contrato.</p>
              </div>
            </div>

            <div class="signatures">
              <div class="signature-box">
                <div class="signature-title">CONTRATANTE</div>
                <div style="height: 60px;"></div>
                <div class="signature-line">Nome: ${oe}</div>
                <div class="signature-line">CPF/CNPJ: _____________________________</div>
                <div class="signature-line">Data: ___/___/______</div>
              </div>
              <div class="signature-box">
                <div class="signature-title">CONTRATADO</div>
                <div style="height: 60px;"></div>
                <div class="signature-line">Nome: _________________________________</div>
                <div class="signature-line">CPF/CNPJ: _____________________________</div>
                <div class="signature-line">Data: ___/___/______</div>
              </div>
            </div>

            <div class="footer">
              <p>Documento gerado automaticamente pelo Sistema Gestão /R3</p>
              <p>Data de geração: ${U(new Date().toISOString())}</p>
              <p>Contrato ${B} - ${oe}</p>
            </div>
          </body>
        </html>
      `;try{const be=new Blob([xe],{type:"text/html;charset=utf-8"}),Te=URL.createObjectURL(be),Ae=document.createElement("a");Ae.href=Te,Ae.download=`Contrato_${B}_${oe.replace(/[^a-zA-Z0-9]/g,"_")}.html`,Ae.style.display="none",document.body.appendChild(Ae),Ae.click(),document.body.removeChild(Ae),setTimeout(()=>URL.revokeObjectURL(Te),100),X.success("Arquivo HTML gerado com sucesso! Abra no navegador e use Ctrl+P para imprimir como PDF.",{id:"pdf-contract",duration:8e3})}catch(be){console.warn("Download direto falhou, tentando abordagem alternativa:",be);const Te=window.open("","_blank","width=800,height=600");if(Te)Te.document.write(xe),Te.document.close(),Te.onload=()=>{Te.focus(),setTimeout(()=>{Te.print()},500)},X.success("Contrato aberto em nova janela. Use Ctrl+P para salvar como PDF.",{id:"pdf-contract",duration:6e3});else throw new Error("Não foi possível abrir nova janela. Verifique se o bloqueador de pop-ups está desabilitado.")}}catch(B){console.error("Erro ao gerar PDF:",B),X.error(`Erro ao gerar PDF: ${B instanceof Error?B.message:"Erro desconhecido"}`,{id:"pdf-contract",duration:6e3});try{await navigator.clipboard.writeText(htmlContent),X.info("HTML do contrato copiado para área de transferência como fallback.",{duration:5e3})}catch(oe){console.warn("Não foi possível copiar para clipboard:",oe)}}},he=(T,B)=>{try{const oe=new Date(T),Ne=new Date(B),Be=Math.abs(Ne.getTime()-oe.getTime());return Math.ceil(Be/(1e3*60*60*24))}catch(oe){return console.error("Erro ao calcular prazo:",oe),30}},ie=async()=>{if(!y||!Y.numero||!Y.descricao){X.error("Preencha todos os campos obrigatórios");return}try{const T={id:`aditivo_${Date.now()}`,numero:Y.numero,tipo:Y.tipo,descricao:Y.descricao,valorAdicional:Y.tipo==="valor"?Y.valorAdicional:void 0,novaDataFim:Y.tipo==="prazo"?Y.novaDataFim:void 0,dataAditivo:new Date().toISOString(),justificativa:Y.justificativa},B={...y,aditivos:[...y.aditivos||[],T],valor:Y.tipo==="valor"?y.valor+Y.valorAdicional:y.valor,dataFim:Y.tipo==="prazo"?Y.novaDataFim:y.dataFim};await Ie.entities.contratos.update(y._id,B),X.success("Aditivo adicionado com sucesso"),w(!1),S(),$()}catch(T){console.error("Erro ao adicionar aditivo:",T),X.error("Erro ao adicionar aditivo")}},Ue=()=>{J({name:"",type:"construcao",content:"",variables:[],status:"ativo"}),me({name:"",label:"",type:"text",required:!1})},S=()=>{K({numero:"",tipo:"valor",descricao:"",valorAdicional:0,novaDataFim:"",justificativa:""})},G=T=>{switch(T){case"ativo":return"bg-green-100 text-green-800";case"concluido":return"bg-blue-100 text-blue-800";case"cancelado":return"bg-red-100 text-red-800";case"suspenso":return"bg-yellow-100 text-yellow-800";default:return"bg-gray-100 text-gray-800"}},q=T=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(T||0),N=T=>{try{return new Date(T).toLocaleDateString("pt-BR")}catch{return"Data inválida"}},U=T=>{try{return new Date(T).toLocaleString("pt-BR")}catch{return"Data inválida"}};return o&&C==="contratos"?t.jsx("div",{className:"flex justify-center items-center py-12",children:t.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):t.jsxs("div",{className:"p-6",children:[t.jsxs("div",{className:"mb-6",children:[t.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-6",children:"Gestão de Contratos V2"}),t.jsx("div",{className:"border-b border-gray-200",children:t.jsxs("nav",{className:"-mb-px flex space-x-8",children:[t.jsx("button",{onClick:()=>W("contratos"),className:`py-2 px-1 border-b-2 font-medium text-sm ${C==="contratos"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"Contratos Ativos"}),t.jsx("button",{onClick:()=>W("templates"),className:`py-2 px-1 border-b-2 font-medium text-sm ${C==="templates"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"Templates de Contratos"})]})})]}),C==="templates"?t.jsxs("div",{children:[t.jsxs("div",{className:"flex justify-between items-center mb-6",children:[t.jsx("div",{className:"flex items-center gap-4",children:t.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Templates de Contratos"})}),t.jsxs("button",{onClick:()=>h(!0),className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 flex items-center gap-2",children:[t.jsx(wa,{size:16}),"Adicionar Template"]})]}),t.jsx(u3,{})]}):t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"flex justify-between items-center mb-6",children:[t.jsx("div",{className:"flex items-center gap-4",children:t.jsxs("h2",{className:"text-xl font-semibold text-gray-800",children:["Contratos (",a.length,")"]})}),t.jsxs("div",{className:"flex gap-3",children:[t.jsxs("button",{onClick:()=>e("/proposta"),className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 flex items-center gap-2",title:"Criar Nova Proposta",children:[t.jsx(wa,{size:16}),"Nova Proposta"]}),t.jsxs("button",{onClick:()=>b(!0),className:"bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700 flex items-center gap-2",title:"Consultar Templates de Contratos",children:[t.jsx(yo,{size:16}),"Consultar Templates"]}),t.jsxs("button",{onClick:()=>h(!0),className:"bg-purple-600 text-white px-4 py-2 rounded-lg hover:bg-purple-700 flex items-center gap-2",title:"Cadastrar Template de Contrato",children:[t.jsx(gl,{size:16}),"Cadastrar Template"]}),t.jsxs("button",{onClick:()=>d(!0),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 flex items-center gap-2",children:[t.jsx(wa,{size:16}),"Novo Contrato"]})]})]}),t.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6",children:a.map(T=>{var oe;const B=T.valor+(((oe=T.aditivos)==null?void 0:oe.reduce((Ne,Be)=>Ne+((Be==null?void 0:Be.valorAdicional)||0),0))||0);return t.jsx("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:t.jsxs("div",{className:"p-6",children:[t.jsxs("div",{className:"flex justify-between items-start mb-4",children:[t.jsxs("div",{children:[t.jsxs("h3",{className:"font-semibold text-lg text-gray-800",children:["Contrato #",T.numero]}),t.jsx("span",{className:`inline-block px-2 py-1 rounded-full text-xs font-medium ${G(T.status)}`,children:T.status})]}),t.jsxs("div",{className:"flex gap-1",children:[t.jsx("button",{onClick:()=>Z(T),className:"text-purple-600 hover:text-purple-800 p-1",title:"Baixar PDF",children:t.jsx(bo,{size:16})}),t.jsx("button",{onClick:()=>{v(T),w(!0)},className:"text-orange-600 hover:text-orange-800 p-1",title:"Adicionar Aditivo",children:t.jsx(Pg,{size:16})}),t.jsx("button",{onClick:()=>{O(T),d(!0)},className:"text-blue-600 hover:text-blue-800 p-1",children:t.jsx(gs,{size:16})}),t.jsx("button",{onClick:()=>R(T._id),className:"text-red-600 hover:text-red-800 p-1",children:t.jsx(Ms,{size:16})})]})]}),t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[t.jsx(kl,{size:16}),t.jsx("span",{className:"text-sm",children:T.cliente})]}),t.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[t.jsx(xo,{size:16}),t.jsx("span",{className:"text-sm",children:T.obra})]}),t.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[t.jsx(Ts,{size:16}),t.jsxs("div",{className:"text-sm",children:[t.jsx("span",{className:"font-medium",children:q(B)}),T.aditivos&&T.aditivos.length>0&&t.jsxs("span",{className:"text-xs text-orange-600 ml-1",children:["(com ",T.aditivos.length," aditivo",T.aditivos.length>1?"s":"",")"]})]})]}),t.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[t.jsx(Ga,{size:16}),t.jsxs("span",{className:"text-sm",children:[N(T.dataInicio)," - ",N(T.dataFim)]})]}),t.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[t.jsx(si,{size:16}),t.jsx("span",{className:"text-sm capitalize",children:T.tipo})]})]}),T.observacoes&&t.jsx("div",{className:"mt-4 p-3 bg-gray-50 rounded",children:t.jsx("p",{className:"text-sm text-gray-600",children:T.observacoes})}),T.aditivos&&T.aditivos.length>0&&t.jsxs("div",{className:"mt-4",children:[t.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Aditivos:"}),t.jsxs("div",{className:"space-y-2",children:[T.aditivos.slice(0,2).map(Ne=>t.jsxs("div",{className:"bg-orange-50 p-2 rounded text-xs",children:[t.jsxs("span",{className:"font-medium",children:["#",Ne.numero]})," - ",Ne.tipo,Ne.valorAdicional&&t.jsxs("span",{className:"text-orange-600 ml-1",children:["(+",q(Ne.valorAdicional),")"]})]},Ne.id)),T.aditivos.length>2&&t.jsxs("div",{className:"text-xs text-gray-500",children:["+",T.aditivos.length-2," aditivos adicionais"]})]})]})]})},T._id)})}),a.length===0&&t.jsxs("div",{className:"text-center py-12",children:[t.jsx(qa,{size:48,className:"text-gray-400 mx-auto mb-4"}),t.jsx("p",{className:"text-gray-500",children:"Nenhum contrato cadastrado"})]}),c&&t.jsx(f3,{contrato:_,onSave:le,onClose:()=>{d(!1),O(null)}})]}),p&&t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:t.jsxs("div",{className:"bg-white rounded-lg max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[t.jsxs("div",{className:"p-6 border-b flex justify-between items-center",children:[t.jsx("h3",{className:"text-xl font-bold",children:"Novo Template de Contrato"}),t.jsx("button",{onClick:()=>h(!1),className:"text-gray-400 hover:text-gray-600",children:t.jsx(du,{size:24})})]}),t.jsxs("div",{className:"p-6 space-y-6",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-2",children:"Nome do Template"}),t.jsx("input",{type:"text",value:se.name,onChange:T=>J(B=>({...B,name:T.target.value})),className:"w-full p-3 border rounded-lg",required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-2",children:"Tipo"}),t.jsxs("select",{value:se.type,onChange:T=>J(B=>({...B,type:T.target.value})),className:"w-full p-3 border rounded-lg",children:[t.jsx("option",{value:"construcao",children:"Construção"}),t.jsx("option",{value:"reforma",children:"Reforma"}),t.jsx("option",{value:"projeto",children:"Projeto"}),t.jsx("option",{value:"manutencao",children:"Manutenção"}),t.jsx("option",{value:"consultoria",children:"Consultoria"})]})]})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium mb-2",children:["Conteúdo do Contrato (use ","{{variavel}}"," para campos dinâmicos)"]}),t.jsx("textarea",{value:se.content,onChange:T=>J(B=>({...B,content:T.target.value})),className:"w-full p-3 border rounded-lg",rows:12,placeholder:"Digite o conteúdo do contrato...",required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-2",children:"Variáveis do Template"}),t.jsx("div",{className:"space-y-2 mb-4",children:se.variables.map((T,B)=>t.jsxs("div",{className:"flex items-center gap-2 p-2 bg-gray-50 rounded",children:[t.jsx("span",{className:"font-mono text-sm",children:`{{${T.name}}}`}),t.jsx("span",{className:"text-gray-600",children:"-"}),t.jsx("span",{children:T.label}),t.jsxs("span",{className:"text-xs text-gray-500",children:["(",T.type,")"]}),T.required&&t.jsx("span",{className:"text-red-500 text-xs",children:"*"}),t.jsx("button",{type:"button",onClick:()=>Ce(B),className:"ml-auto text-red-500 hover:text-red-700",children:t.jsx(du,{size:16})})]},B))}),t.jsxs("div",{className:"grid grid-cols-12 gap-2 items-end",children:[t.jsx("div",{className:"col-span-3",children:t.jsx("input",{type:"text",placeholder:"nome_variavel",value:fe.name,onChange:T=>me(B=>({...B,name:T.target.value})),className:"w-full p-2 border rounded text-sm"})}),t.jsx("div",{className:"col-span-4",children:t.jsx("input",{type:"text",placeholder:"Rótulo da Variável",value:fe.label,onChange:T=>me(B=>({...B,label:T.target.value})),className:"w-full p-2 border rounded text-sm"})}),t.jsx("div",{className:"col-span-2",children:t.jsxs("select",{value:fe.type,onChange:T=>me(B=>({...B,type:T.target.value})),className:"w-full p-2 border rounded text-sm",children:[t.jsx("option",{value:"text",children:"Texto"}),t.jsx("option",{value:"number",children:"Número"}),t.jsx("option",{value:"date",children:"Data"}),t.jsx("option",{value:"currency",children:"Moeda"})]})}),t.jsx("div",{className:"col-span-2",children:t.jsxs("label",{className:"flex items-center",children:[t.jsx("input",{type:"checkbox",checked:fe.required,onChange:T=>me(B=>({...B,required:T.target.checked})),className:"mr-1"}),t.jsx("span",{className:"text-sm",children:"Obrigatório"})]})}),t.jsx("div",{className:"col-span-1",children:t.jsx("button",{type:"button",onClick:ce,className:"w-full bg-blue-600 text-white p-2 rounded hover:bg-blue-700",children:t.jsx(wa,{size:16})})})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-2",children:"Status"}),t.jsxs("select",{value:se.status,onChange:T=>J(B=>({...B,status:T.target.value})),className:"w-full p-3 border rounded-lg",children:[t.jsx("option",{value:"ativo",children:"Ativo"}),t.jsx("option",{value:"inativo",children:"Inativo"})]})]}),t.jsxs("div",{className:"flex gap-3",children:[t.jsxs("button",{onClick:we,className:"bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 flex items-center gap-2",children:[t.jsx(tb,{size:16}),"Salvar Template"]}),t.jsx("button",{onClick:()=>h(!1),className:"bg-gray-500 text-white px-6 py-3 rounded-lg hover:bg-gray-600",children:"Cancelar"})]})]})]})}),x&&t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:t.jsxs("div",{className:"bg-white rounded-lg max-w-6xl w-full max-h-[90vh] overflow-y-auto",children:[t.jsxs("div",{className:"p-6 border-b flex justify-between items-center",children:[t.jsx("h3",{className:"text-xl font-bold",children:"Templates de Contratos Cadastrados"}),t.jsx("button",{onClick:()=>b(!1),className:"text-gray-400 hover:text-gray-600",children:t.jsx(du,{size:24})})]}),t.jsx("div",{className:"p-6",children:s.length>0?t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:s.map(T=>{var B;return t.jsxs("div",{className:"bg-white border rounded-lg shadow-sm p-4 hover:shadow-md transition-shadow",children:[t.jsxs("div",{className:"flex items-start justify-between mb-3",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(qa,{className:"text-blue-600",size:20}),t.jsxs("div",{children:[t.jsx("h4",{className:"font-semibold text-gray-800",children:T.name}),t.jsx("span",{className:"text-sm text-gray-500 capitalize",children:T.type})]})]}),t.jsx("span",{className:`px-2 py-1 rounded text-xs ${T.status==="ativo"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:T.status})]}),t.jsxs("div",{className:"text-sm text-gray-600 mb-3",children:[t.jsxs("p",{className:"mb-2",children:[t.jsx("strong",{children:"Variáveis:"})," ",((B=T.variables)==null?void 0:B.length)||0]}),t.jsxs("p",{className:"text-xs",children:[t.jsx("strong",{children:"Criado em:"})," ",U(T.createdAt)]})]}),T.variables&&T.variables.length>0&&t.jsxs("div",{className:"mb-3",children:[t.jsx("p",{className:"text-xs font-medium text-gray-700 mb-1",children:"Variáveis configuradas:"}),t.jsxs("div",{className:"flex flex-wrap gap-1",children:[T.variables.slice(0,3).map((oe,Ne)=>t.jsx("span",{className:"bg-blue-100 text-blue-800 text-xs px-2 py-1 rounded",children:oe.label},Ne)),T.variables.length>3&&t.jsxs("span",{className:"text-xs text-gray-500",children:["+",T.variables.length-3," mais"]})]})]}),t.jsx("div",{className:"flex gap-2",children:t.jsxs("button",{onClick:()=>{X.info("Funcionalidade de usar template será implementada")},className:"flex-1 bg-green-100 text-green-700 px-3 py-2 rounded hover:bg-green-200 flex items-center justify-center gap-1 text-sm",children:[t.jsx(yo,{size:14}),"Usar Template"]})})]},T._id)})}):t.jsxs("div",{className:"text-center py-12",children:[t.jsx(qa,{size:48,className:"text-gray-400 mx-auto mb-4"}),t.jsx("p",{className:"text-gray-500 mb-4",children:"Nenhum template de contrato cadastrado"}),t.jsxs("button",{onClick:()=>{b(!1),h(!0)},className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 flex items-center gap-2 mx-auto",children:[t.jsx(wa,{size:16}),"Cadastrar Primeiro Template"]})]})})]})}),g&&y&&t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:t.jsxs("div",{className:"bg-white rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[t.jsxs("div",{className:"p-6 border-b flex justify-between items-center",children:[t.jsxs("h3",{className:"text-xl font-bold",children:["Adicionar Aditivo - Contrato #",y.numero]}),t.jsx("button",{onClick:()=>w(!1),className:"text-gray-400 hover:text-gray-600",children:t.jsx(du,{size:24})})]}),t.jsxs("div",{className:"p-6 space-y-6",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-2",children:"Número do Aditivo"}),t.jsx("input",{type:"text",value:Y.numero,onChange:T=>K(B=>({...B,numero:T.target.value})),className:"w-full p-3 border rounded-lg",placeholder:"ex: 001/2024",required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-2",children:"Tipo do Aditivo"}),t.jsxs("select",{value:Y.tipo,onChange:T=>K(B=>({...B,tipo:T.target.value})),className:"w-full p-3 border rounded-lg",children:[t.jsx("option",{value:"valor",children:"Aditivo de Valor"}),t.jsx("option",{value:"prazo",children:"Aditivo de Prazo"}),t.jsx("option",{value:"escopo",children:"Aditivo de Escopo"})]})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-2",children:"Descrição do Aditivo"}),t.jsx("textarea",{value:Y.descricao,onChange:T=>K(B=>({...B,descricao:T.target.value})),className:"w-full p-3 border rounded-lg",rows:3,placeholder:"Descreva as alterações do aditivo...",required:!0})]}),Y.tipo==="valor"&&t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-2",children:"Valor Adicional (R$)"}),t.jsx("input",{type:"number",step:"0.01",value:Y.valorAdicional,onChange:T=>K(B=>({...B,valorAdicional:parseFloat(T.target.value)||0})),className:"w-full p-3 border rounded-lg",placeholder:"0.00"})]}),Y.tipo==="prazo"&&t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-2",children:"Nova Data de Término"}),t.jsx("input",{type:"date",value:Y.novaDataFim,onChange:T=>K(B=>({...B,novaDataFim:T.target.value})),className:"w-full p-3 border rounded-lg"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-2",children:"Justificativa"}),t.jsx("textarea",{value:Y.justificativa,onChange:T=>K(B=>({...B,justificativa:T.target.value})),className:"w-full p-3 border rounded-lg",rows:3,placeholder:"Justifique a necessidade do aditivo...",required:!0})]}),t.jsxs("div",{className:"flex gap-3",children:[t.jsxs("button",{onClick:ie,className:"bg-orange-600 text-white px-6 py-3 rounded-lg hover:bg-orange-700 flex items-center gap-2",children:[t.jsx(Pg,{size:16}),"Adicionar Aditivo"]}),t.jsx("button",{onClick:()=>w(!1),className:"bg-gray-500 text-white px-6 py-3 rounded-lg hover:bg-gray-600",children:"Cancelar"})]})]})]})})]})},f3=({contrato:e,onSave:a,onClose:r})=>{var i,c;const[s,n]=I.useState({numero:(e==null?void 0:e.numero)||"",cliente:(e==null?void 0:e.cliente)||"",obra:(e==null?void 0:e.obra)||"",valor:(e==null?void 0:e.valor)||0,dataInicio:((i=e==null?void 0:e.dataInicio)==null?void 0:i.split("T")[0])||"",dataFim:((c=e==null?void 0:e.dataFim)==null?void 0:c.split("T")[0])||"",status:(e==null?void 0:e.status)||"ativo",tipo:(e==null?void 0:e.tipo)||"construcao",observacoes:(e==null?void 0:e.observacoes)||""}),o=d=>{d.preventDefault(),a({...s,dataInicio:new Date(s.dataInicio).toISOString(),dataFim:new Date(s.dataFim).toISOString(),aditivos:(e==null?void 0:e.aditivos)||[]})};return t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:t.jsxs("div",{className:"bg-white rounded-lg max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[t.jsx("div",{className:"p-6 border-b",children:t.jsx("h3",{className:"text-xl font-bold",children:e?"Editar Contrato":"Novo Contrato"})}),t.jsxs("form",{onSubmit:o,className:"p-6 space-y-4",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-2",children:"Número do Contrato"}),t.jsx("input",{type:"text",value:s.numero,onChange:d=>n(p=>({...p,numero:d.target.value})),className:"w-full p-3 border rounded-lg",required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-2",children:"Cliente"}),t.jsx("input",{type:"text",value:s.cliente,onChange:d=>n(p=>({...p,cliente:d.target.value})),className:"w-full p-3 border rounded-lg",required:!0})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-2",children:"Obra"}),t.jsx("input",{type:"text",value:s.obra,onChange:d=>n(p=>({...p,obra:d.target.value})),className:"w-full p-3 border rounded-lg",required:!0})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-2",children:"Valor (R$)"}),t.jsx("input",{type:"number",step:"0.01",value:s.valor,onChange:d=>n(p=>({...p,valor:parseFloat(d.target.value)})),className:"w-full p-3 border rounded-lg",required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-2",children:"Data de Início"}),t.jsx("input",{type:"date",value:s.dataInicio,onChange:d=>n(p=>({...p,dataInicio:d.target.value})),className:"w-full p-3 border rounded-lg",required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-2",children:"Data de Término"}),t.jsx("input",{type:"date",value:s.dataFim,onChange:d=>n(p=>({...p,dataFim:d.target.value})),className:"w-full p-3 border rounded-lg",required:!0})]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-2",children:"Status"}),t.jsxs("select",{value:s.status,onChange:d=>n(p=>({...p,status:d.target.value})),className:"w-full p-3 border rounded-lg",children:[t.jsx("option",{value:"ativo",children:"Ativo"}),t.jsx("option",{value:"concluido",children:"Concluído"}),t.jsx("option",{value:"cancelado",children:"Cancelado"}),t.jsx("option",{value:"suspenso",children:"Suspenso"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-2",children:"Tipo"}),t.jsxs("select",{value:s.tipo,onChange:d=>n(p=>({...p,tipo:d.target.value})),className:"w-full p-3 border rounded-lg",children:[t.jsx("option",{value:"construcao",children:"Construção"}),t.jsx("option",{value:"reforma",children:"Reforma"}),t.jsx("option",{value:"projeto",children:"Projeto"}),t.jsx("option",{value:"manutencao",children:"Manutenção"}),t.jsx("option",{value:"consultoria",children:"Consultoria"})]})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-2",children:"Observações"}),t.jsx("textarea",{value:s.observacoes,onChange:d=>n(p=>({...p,observacoes:d.target.value})),className:"w-full p-3 border rounded-lg",rows:3})]}),t.jsxs("div",{className:"flex gap-3 pt-4",children:[t.jsx("button",{type:"submit",className:"bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700",children:"Salvar Contrato"}),t.jsx("button",{type:"button",onClick:r,className:"bg-gray-500 text-white px-6 py-3 rounded-lg hover:bg-gray-600",children:"Cancelar"})]})]})]})})},zo=e=>e==null||isNaN(Number(e))?"R$ 0,00":`R$ ${Number(e).toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2})}`,kr=e=>e==null||isNaN(Number(e))?0:Number(e),Un=e=>e?new Date(e).toLocaleDateString("pt-BR"):"-";function x3(){var Tt,ne,Pe,at;const[e,a]=I.useState([]),[r,s]=I.useState(!0),[n,o]=I.useState(""),[i,c]=I.useState(""),[d,p]=I.useState("todos"),[h,x]=I.useState(!1),[b,g]=I.useState(!1),[w,_]=I.useState(!1),[O,y]=I.useState(!1),[v,C]=I.useState(!1),[W,se]=I.useState(!1),[J,Y]=I.useState(!1),[K,fe]=I.useState(!1),[me,$]=I.useState(null),[L,le]=I.useState(null),[R,we]=I.useState(""),[ce,Ce]=I.useState({nome:"",cargo:"",funcao:"",cpf:"",rg:"",telefone:"",email:"",endereco:{rua:"",bairro:"",cidade:"",estado:"",cep:""},unidadeMedida:"hora",valorHora:0,valorDiaria:0,valorMensal:0,dataAdmissao:"",diaPagamento:5}),[Z,he]=I.useState({tipoPagamento:"deposito",banco:"",agencia:"",conta:"",tipoConta:"corrente",chavePix:"",tipoChavePix:"cpf",observacoes:""}),[ie,Ue]=I.useState({diaPagamento:5}),[S,G]=I.useState({dataInicio:"",dataFim:"",observacoes:""}),[q,N]=I.useState({tipo:"medica",dataInicio:"",dataFim:"",remunerada:!0,observacoes:""}),[U,T]=I.useState({tipo:"credito",horas:0,descricao:"",aprovadoPor:""}),[B,oe]=I.useState({nome:"",instituicao:"",dataObtencao:"",dataVencimento:""});I.useEffect(()=>{Ne()},[]);const Ne=async()=>{try{s(!0);const{list:k}=await Ie.entities.funcionarios.list();a(k||[])}catch(k){console.error("Erro ao buscar funcionários:",k),X.error("Erro ao carregar funcionários")}finally{s(!1)}},Be=async k=>{k.preventDefault();try{const Qe={...ce,ferias:(me==null?void 0:me.ferias)||[],licencas:(me==null?void 0:me.licencas)||[],bancoHoras:(me==null?void 0:me.bancoHoras)||{saldoHoras:0,limiteMensal:40,historico:[]},escala:(me==null?void 0:me.escala)||{tipoEscala:"normal",horaInicio:"08:00",horaFim:"17:00",diasSemana:["segunda","terca","quarta","quinta","sexta"],observacoes:""},qualificacoes:(me==null?void 0:me.qualificacoes)||[],dadosBancarios:(me==null?void 0:me.dadosBancarios)||void 0,ativo:!0,criadoEm:(me==null?void 0:me.criadoEm)||new Date().toISOString(),atualizadoEm:new Date().toISOString()};me?(await Ie.entities.funcionarios.update(me._id,Qe),X.success("Funcionário atualizado com sucesso")):(await Ie.entities.funcionarios.create(Qe),X.success("Funcionário cadastrado com sucesso")),await Ne(),tt()}catch(Qe){console.error("Erro ao salvar funcionário:",Qe),X.error("Erro ao salvar funcionário")}},Xe=async()=>{if(R)try{const k=e.find(Fe=>Fe._id===R);if(!k)return;const Qe={...k,dadosBancarios:Z,atualizadoEm:new Date().toISOString()};await Ie.entities.funcionarios.update(k._id,Qe),X.success("Dados bancários salvos com sucesso"),await Ne(),Y(!1)}catch(k){console.error("Erro ao salvar dados bancários:",k),X.error("Erro ao salvar dados bancários")}},dt=async()=>{if(R)try{const k=e.find(Fe=>Fe._id===R);if(!k)return;const Qe={...k,diaPagamento:ie.diaPagamento,atualizadoEm:new Date().toISOString()};await Ie.entities.funcionarios.update(k._id,Qe),X.success("Dia de pagamento salvo com sucesso"),await Ne(),fe(!1)}catch(k){console.error("Erro ao salvar dia de pagamento:",k),X.error("Erro ao salvar dia de pagamento")}},ft=async k=>{if(confirm("Tem certeza que deseja excluir este funcionário?"))try{await Ie.entities.funcionarios.delete(k),X.success("Funcionário excluído com sucesso"),await Ne()}catch(Qe){console.error("Erro ao excluir funcionário:",Qe),X.error("Erro ao excluir funcionário")}},Me=async k=>{try{const Qe={...k,ativo:!k.ativo,dataDemissao:k.ativo?new Date().toISOString():void 0,atualizadoEm:new Date().toISOString()};await Ie.entities.funcionarios.update(k._id,Qe),X.success(`Funcionário ${k.ativo?"desativado":"ativado"} com sucesso`),await Ne()}catch(Qe){console.error("Erro ao alterar status:",Qe),X.error("Erro ao alterar status do funcionário")}},te=async()=>{if(!(!R||!S.dataInicio||!S.dataFim))try{const k=e.find(qe=>qe._id===R);if(!k)return;const Qe=new Date(S.dataInicio),Fe=new Date(S.dataFim),ut=Math.ceil((Fe.getTime()-Qe.getTime())/(1e3*60*60*24))+1,je={id:"ferias_"+Date.now().toString(),dataInicio:S.dataInicio+"T00:00:00.000Z",dataFim:S.dataFim+"T00:00:00.000Z",diasCorridos:ut,diasUteis:Math.max(0,ut-Math.floor(ut/7)*2),status:Qe>new Date?"agendado":"em_andamento",observacoes:S.observacoes,criadoEm:new Date().toISOString()},ht={...k,ferias:[...k.ferias||[],je],atualizadoEm:new Date().toISOString()};await Ie.entities.funcionarios.update(k._id,ht),X.success("Férias adicionadas com sucesso"),await Ne(),G({dataInicio:"",dataFim:"",observacoes:""}),_(!1)}catch(k){console.error("Erro ao adicionar férias:",k),X.error("Erro ao adicionar férias")}},Ct=async()=>{if(!(!R||!q.dataInicio||!q.dataFim))try{const k=e.find(qe=>qe._id===R);if(!k)return;const Qe=new Date(q.dataInicio),Fe=new Date(q.dataFim),ut=Math.ceil((Fe.getTime()-Qe.getTime())/(1e3*60*60*24))+1,je={id:"licenca_"+Date.now().toString(),tipo:q.tipo,dataInicio:q.dataInicio+"T00:00:00.000Z",dataFim:q.dataFim+"T00:00:00.000Z",diasCorridos:ut,remunerada:q.remunerada,observacoes:q.observacoes,documentos:[],status:Qe<=new Date&&Fe>=new Date?"ativa":"finalizada",criadoEm:new Date().toISOString()},ht={...k,licencas:[...k.licencas||[],je],atualizadoEm:new Date().toISOString()};await Ie.entities.funcionarios.update(k._id,ht),X.success("Licença adicionada com sucesso"),await Ne(),N({tipo:"medica",dataInicio:"",dataFim:"",remunerada:!0,observacoes:""}),y(!1)}catch(k){console.error("Erro ao adicionar licença:",k),X.error("Erro ao adicionar licença")}},ae=async()=>{var k,Qe;if(!(!R||!U.horas||!U.descricao))try{const Fe=e.find(de=>de._id===R);if(!Fe)return;const ut={id:"bh_"+Date.now().toString(),data:new Date().toISOString(),tipo:U.tipo,horas:U.horas,descricao:U.descricao,aprovadoPor:U.aprovadoPor,criadoEm:new Date().toISOString()},je=kr((k=Fe.bancoHoras)==null?void 0:k.saldoHoras)||0,ht=U.tipo==="credito"?je+U.horas:je-U.horas,qe={...Fe.bancoHoras,saldoHoras:ht,historico:[...((Qe=Fe.bancoHoras)==null?void 0:Qe.historico)||[],ut]},lt={...Fe,bancoHoras:qe,atualizadoEm:new Date().toISOString()};await Ie.entities.funcionarios.update(Fe._id,lt),X.success("Registro no banco de horas adicionado"),await Ne(),T({tipo:"credito",horas:0,descricao:"",aprovadoPor:""}),C(!1)}catch(Fe){console.error("Erro ao adicionar no banco de horas:",Fe),X.error("Erro ao adicionar no banco de horas")}},xe=async()=>{if(!(!R||!B.nome||!B.instituicao))try{const k=e.find(ut=>ut._id===R);if(!k)return;const Qe={nome:B.nome,instituicao:B.instituicao,dataObtencao:B.dataObtencao+"T00:00:00.000Z",dataVencimento:B.dataVencimento?B.dataVencimento+"T00:00:00.000Z":void 0,ativo:!0},Fe={...k,qualificacoes:[...k.qualificacoes||[],Qe],atualizadoEm:new Date().toISOString()};await Ie.entities.funcionarios.update(k._id,Fe),X.success("Qualificação adicionada com sucesso"),await Ne(),oe({nome:"",instituicao:"",dataObtencao:"",dataVencimento:""}),se(!1)}catch(k){console.error("Erro ao adicionar qualificação:",k),X.error("Erro ao adicionar qualificação")}},be=k=>{var Qe;k?($(k),Ce({nome:k.nome||"",cargo:k.cargo||"",funcao:k.funcao||"",cpf:k.cpf||"",rg:k.rg||"",telefone:k.telefone||"",email:k.email||"",endereco:k.endereco||{rua:"",bairro:"",cidade:"",estado:"",cep:""},unidadeMedida:k.unidadeMedida||"hora",valorHora:kr(k.valorHora),valorDiaria:kr(k.valorDiaria),valorMensal:kr(k.valorMensal),dataAdmissao:((Qe=k.dataAdmissao)==null?void 0:Qe.split("T")[0])||"",diaPagamento:k.diaPagamento||5})):($(null),Ce({nome:"",cargo:"",funcao:"",cpf:"",rg:"",telefone:"",email:"",endereco:{rua:"",bairro:"",cidade:"",estado:"",cep:""},unidadeMedida:"hora",valorHora:0,valorDiaria:0,valorMensal:0,dataAdmissao:"",diaPagamento:5})),x(!0)},Te=k=>{var Qe,Fe,ut,je,ht,qe,lt,de;we(k._id),he({tipoPagamento:((Qe=k.dadosBancarios)==null?void 0:Qe.tipoPagamento)||"deposito",banco:((Fe=k.dadosBancarios)==null?void 0:Fe.banco)||"",agencia:((ut=k.dadosBancarios)==null?void 0:ut.agencia)||"",conta:((je=k.dadosBancarios)==null?void 0:je.conta)||"",tipoConta:((ht=k.dadosBancarios)==null?void 0:ht.tipoConta)||"corrente",chavePix:((qe=k.dadosBancarios)==null?void 0:qe.chavePix)||"",tipoChavePix:((lt=k.dadosBancarios)==null?void 0:lt.tipoChavePix)||"cpf",observacoes:((de=k.dadosBancarios)==null?void 0:de.observacoes)||""}),Y(!0)},Ae=k=>{we(k._id),Ue({diaPagamento:k.diaPagamento||5}),fe(!0)},tt=()=>{x(!1),g(!1),_(!1),y(!1),C(!1),se(!1),Y(!1),fe(!1),$(null),le(null),we("")},rt=e.filter(k=>{var je,ht,qe;const Qe=((je=k==null?void 0:k.nome)==null?void 0:je.toLowerCase().includes(n.toLowerCase()))||((ht=k==null?void 0:k.cargo)==null?void 0:ht.toLowerCase().includes(n.toLowerCase()))||((qe=k==null?void 0:k.funcao)==null?void 0:qe.toLowerCase().includes(n.toLowerCase())),Fe=!i||(k==null?void 0:k.cargo)===i,ut=d==="todos"||d==="ativo"&&(k==null?void 0:k.ativo)||d==="inativo"&&!(k!=null&&k.ativo);return Qe&&Fe&&ut}),gt=[...new Set(e.map(k=>k==null?void 0:k.cargo).filter(Boolean))],st={total:e.length,ativos:e.filter(k=>k==null?void 0:k.ativo).length,inativos:e.filter(k=>!(k!=null&&k.ativo)).length,emFerias:e.filter(k=>{var Qe;return(Qe=k==null?void 0:k.ferias)==null?void 0:Qe.some(Fe=>{const ut=new Date,je=new Date(Fe.dataInicio),ht=new Date(Fe.dataFim);return ut>=je&&ut<=ht&&Fe.status==="em_andamento"})}).length,emLicenca:e.filter(k=>{var Qe;return(Qe=k==null?void 0:k.licencas)==null?void 0:Qe.some(Fe=>Fe.status==="ativa")}).length,comDadosBancarios:e.filter(k=>k==null?void 0:k.dadosBancarios).length,comDiaPagamento:e.filter(k=>k==null?void 0:k.diaPagamento).length,folhaPagamento:e.filter(k=>k==null?void 0:k.ativo).reduce((k,Qe)=>Qe.unidadeMedida==="mes"?k+kr(Qe.valorMensal):Qe.unidadeMedida==="dia"?k+kr(Qe.valorDiaria)*22:k+kr(Qe.valorHora)*8*22,0)};return r?t.jsx("div",{className:"flex items-center justify-center h-64",children:t.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Gestão de Funcionários"}),t.jsx("p",{className:"text-gray-600",children:"Gerencie funcionários, dados bancários, férias, licenças e banco de horas"})]}),t.jsx("div",{className:"flex space-x-2",children:t.jsxs("button",{onClick:()=>be(),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 flex items-center space-x-2",children:[t.jsx(wa,{className:"h-4 w-4"}),t.jsx("span",{children:"Novo Funcionário"})]})})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-8 gap-6",children:[t.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx(qr,{className:"h-8 w-8 text-blue-600"}),t.jsxs("div",{className:"ml-4",children:[t.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total"}),t.jsx("p",{className:"text-2xl font-bold text-gray-900",children:st.total})]})]})}),t.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx(ps,{className:"h-8 w-8 text-green-600"}),t.jsxs("div",{className:"ml-4",children:[t.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Ativos"}),t.jsx("p",{className:"text-2xl font-bold text-gray-900",children:st.ativos})]})]})}),t.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx(sl,{className:"h-8 w-8 text-red-600"}),t.jsxs("div",{className:"ml-4",children:[t.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Inativos"}),t.jsx("p",{className:"text-2xl font-bold text-gray-900",children:st.inativos})]})]})}),t.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx(Ga,{className:"h-8 w-8 text-purple-600"}),t.jsxs("div",{className:"ml-4",children:[t.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Em Férias"}),t.jsx("p",{className:"text-2xl font-bold text-gray-900",children:st.emFerias})]})]})}),t.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx(po,{className:"h-8 w-8 text-yellow-600"}),t.jsxs("div",{className:"ml-4",children:[t.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Em Licença"}),t.jsx("p",{className:"text-2xl font-bold text-gray-900",children:st.emLicenca})]})]})}),t.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx(fn,{className:"h-8 w-8 text-indigo-600"}),t.jsxs("div",{className:"ml-4",children:[t.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Com Dados Bancários"}),t.jsx("p",{className:"text-2xl font-bold text-gray-900",children:st.comDadosBancarios})]})]})}),t.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx(Ga,{className:"h-8 w-8 text-orange-600"}),t.jsxs("div",{className:"ml-4",children:[t.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Com Dia Pagamento"}),t.jsx("p",{className:"text-2xl font-bold text-gray-900",children:st.comDiaPagamento})]})]})}),t.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx(Ts,{className:"h-8 w-8 text-green-600"}),t.jsxs("div",{className:"ml-4",children:[t.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Folha Mensal"}),t.jsx("p",{className:"text-2xl font-bold text-gray-900",children:zo(st.folhaPagamento)})]})]})})]}),t.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[t.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Ações Rápidas de Cadastro"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[t.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[t.jsxs("div",{className:"flex items-center justify-between mb-3",children:[t.jsxs("div",{className:"flex items-center",children:[t.jsx(fn,{className:"h-6 w-6 text-indigo-600 mr-2"}),t.jsx("h4",{className:"font-medium text-gray-900",children:"Dados Bancários"})]}),t.jsxs("span",{className:"text-sm text-gray-500",children:[st.comDadosBancarios,"/",st.total," cadastrados"]})]}),t.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"Configure informações bancárias para pagamento dos funcionários"}),t.jsxs("div",{className:"space-y-2",children:[e.filter(k=>!k.dadosBancarios).slice(0,3).map(k=>t.jsxs("div",{className:"flex items-center justify-between bg-yellow-50 p-2 rounded",children:[t.jsx("span",{className:"text-sm text-gray-700",children:k.nome}),t.jsxs("button",{onClick:()=>Te(k),className:"bg-indigo-600 text-white text-xs px-2 py-1 rounded hover:bg-indigo-700",children:[t.jsx(fn,{className:"h-4 w-4"}),t.jsx("span",{children:"Cadastrar"})]})]},k._id)),e.filter(k=>!k.dadosBancarios).length>3&&t.jsxs("p",{className:"text-xs text-gray-500",children:["+",e.filter(k=>!k.dadosBancarios).length-3," funcionários sem dados bancários"]})]})]}),t.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[t.jsxs("div",{className:"flex items-center justify-between mb-3",children:[t.jsxs("div",{className:"flex items-center",children:[t.jsx(Ga,{className:"h-6 w-6 text-orange-600 mr-2"}),t.jsx("h4",{className:"font-medium text-gray-900",children:"Dia de Pagamento"})]}),t.jsxs("span",{className:"text-sm text-gray-500",children:[st.comDiaPagamento,"/",st.total," definidos"]})]}),t.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"Defina o dia do mês para pagamento de cada funcionário"}),t.jsxs("div",{className:"space-y-2",children:[e.filter(k=>!k.diaPagamento).slice(0,3).map(k=>t.jsxs("div",{className:"flex items-center justify-between bg-orange-50 p-2 rounded",children:[t.jsx("span",{className:"text-sm text-gray-700",children:k.nome}),t.jsxs("button",{onClick:()=>Ae(k),className:"bg-orange-600 text-white text-xs px-2 py-1 rounded hover:bg-orange-700",children:[t.jsx(Ga,{className:"h-4 w-4"}),t.jsx("span",{children:"Definir"})]})]},k._id)),e.filter(k=>!k.diaPagamento).length>3&&t.jsxs("p",{className:"text-xs text-gray-500",children:["+",e.filter(k=>!k.diaPagamento).length-3," funcionários sem dia definido"]})]})]}),t.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[t.jsxs("div",{className:"flex items-center justify-between mb-3",children:[t.jsxs("div",{className:"flex items-center",children:[t.jsx(Dm,{className:"h-6 w-6 text-purple-600 mr-2"}),t.jsx("h4",{className:"font-medium text-gray-900",children:"Configuração Completa"})]}),t.jsxs("span",{className:"text-sm text-gray-500",children:[e.filter(k=>k.dadosBancarios&&k.diaPagamento).length,"/",st.total," completos"]})]}),t.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"Funcionários com dados bancários e dia de pagamento configurados"}),t.jsx("div",{className:"space-y-2",children:e.filter(k=>!(k.dadosBancarios&&k.diaPagamento)).slice(0,3).map(k=>t.jsxs("div",{className:"flex items-center justify-between bg-purple-50 p-2 rounded",children:[t.jsx("span",{className:"text-sm text-gray-700",children:k.nome}),t.jsxs("div",{className:"flex space-x-1",children:[!k.dadosBancarios&&t.jsx("button",{onClick:()=>Te(k),className:"bg-indigo-600 text-white text-xs px-1 py-1 rounded hover:bg-indigo-700",title:"Dados Bancários",children:t.jsx(fn,{className:"h-3 w-3"})}),!k.diaPagamento&&t.jsx("button",{onClick:()=>Ae(k),className:"bg-orange-600 text-white text-xs px-1 py-1 rounded hover:bg-orange-700",title:"Dia de Pagamento",children:t.jsx(Ga,{className:"h-3 w-3"})})]})]},k._id))})]})]})]}),t.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Buscar"}),t.jsxs("div",{className:"relative",children:[t.jsx(Sl,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),t.jsx("input",{type:"text",value:n,onChange:k=>o(k.target.value),className:"pl-10 w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Nome, cargo ou função..."})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Cargo"}),t.jsxs("select",{value:i,onChange:k=>c(k.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500",children:[t.jsx("option",{value:"",children:"Todos os cargos"}),gt.map(k=>t.jsx("option",{value:k,children:k},k))]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),t.jsxs("select",{value:d,onChange:k=>p(k.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500",children:[t.jsx("option",{value:"todos",children:"Todos"}),t.jsx("option",{value:"ativo",children:"Ativos"}),t.jsx("option",{value:"inativo",children:"Inativos"})]})]}),t.jsx("div",{className:"flex items-end",children:t.jsxs("button",{className:"bg-gray-600 text-white px-4 py-2 rounded-lg hover:bg-gray-700 flex items-center space-x-2",children:[t.jsx(bo,{className:"h-4 w-4"}),t.jsx("span",{children:"Exportar"})]})})]})}),t.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[t.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:t.jsxs("h3",{className:"text-lg font-medium text-gray-900",children:["Funcionários (",rt.length,")"]})}),t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[t.jsx("thead",{className:"bg-gray-50",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Funcionário"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Cargo/Função"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Contato"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Remuneração"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Dados Bancários"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Dia Pagamento"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Banco de Horas"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Ações"})]})}),t.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:rt.map(k=>{var Qe,Fe,ut,je;return t.jsxs("tr",{className:"hover:bg-gray-50",children:[t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"flex-shrink-0 h-10 w-10",children:t.jsx("div",{className:"h-10 w-10 rounded-full bg-blue-100 flex items-center justify-center",children:t.jsx(kl,{className:"h-5 w-5 text-blue-600"})})}),t.jsxs("div",{className:"ml-4",children:[t.jsx("div",{className:"text-sm font-medium text-gray-900",children:k.nome}),t.jsxs("div",{className:"text-sm text-gray-500",children:["Admissão: ",Un(k.dataAdmissao)]})]})]})}),t.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[t.jsx("div",{className:"text-sm text-gray-900",children:k.cargo}),t.jsx("div",{className:"text-sm text-gray-500",children:k.funcao})]}),t.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[t.jsxs("div",{className:"text-sm text-gray-900 flex items-center",children:[t.jsx(ab,{className:"h-4 w-4 mr-1"}),k.telefone]}),t.jsxs("div",{className:"text-sm text-gray-500 flex items-center",children:[t.jsx(eb,{className:"h-4 w-4 mr-1"}),k.email]})]}),t.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[t.jsxs("div",{className:"text-sm text-gray-900",children:[k.unidadeMedida==="hora"&&`${zo(k.valorHora)}/h`,k.unidadeMedida==="dia"&&`${zo(k.valorDiaria)}/dia`,k.unidadeMedida==="mes"&&`${zo(k.valorMensal)}/mês`]}),t.jsx("div",{className:"text-sm text-gray-500",children:k.unidadeMedida})]}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:k.dadosBancarios?t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center text-sm text-green-900",children:[k.dadosBancarios.tipoPagamento==="pix"?t.jsx(Z4,{className:"h-4 w-4 mr-1"}):t.jsx(fn,{className:"h-4 w-4 mr-1"}),k.dadosBancarios.tipoPagamento==="pix"?"PIX":"Depósito"]}),t.jsx("div",{className:"text-xs text-gray-500",children:k.dadosBancarios.tipoPagamento==="pix"?k.dadosBancarios.tipoChavePix:k.dadosBancarios.banco})]}):t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"text-sm text-red-500 mr-2",children:"Não cadastrado"}),t.jsx("button",{onClick:()=>Te(k),className:"bg-red-100 text-red-800 text-xs px-2 py-1 rounded hover:bg-red-200",title:"Cadastrar Dados Bancários",children:t.jsx(fn,{className:"h-3 w-3"})})]})}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:k.diaPagamento?t.jsxs("div",{className:"text-sm text-gray-900",children:["Dia ",k.diaPagamento]}):t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"text-sm text-red-500 mr-2",children:"Não definido"}),t.jsx("button",{onClick:()=>Ae(k),className:"bg-red-100 text-red-800 text-xs px-2 py-1 rounded hover:bg-red-200",title:"Definir Dia de Pagamento",children:t.jsx(Ga,{className:"h-3 w-3"})})]})}),t.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[t.jsxs("div",{className:`text-sm font-medium ${kr((Qe=k.bancoHoras)==null?void 0:Qe.saldoHoras)>0?"text-green-600":kr((Fe=k.bancoHoras)==null?void 0:Fe.saldoHoras)<0?"text-red-600":"text-gray-900"}`,children:[kr((ut=k.bancoHoras)==null?void 0:ut.saldoHoras),"h"]}),t.jsxs("div",{className:"text-sm text-gray-500",children:["Limite: ",kr((je=k.bancoHoras)==null?void 0:je.limiteMensal),"h/mês"]})]}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.jsx("button",{onClick:()=>Me(k),className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${k.ativo?"bg-green-100 text-green-800 hover:bg-green-200":"bg-red-100 text-red-800 hover:bg-red-200"}`,children:k.ativo?"Ativo":"Inativo"})}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:t.jsxs("div",{className:"flex space-x-2",children:[t.jsx("button",{onClick:()=>{le(k),g(!0)},className:"text-blue-600 hover:text-blue-900",title:"Visualizar",children:t.jsx(yo,{className:"h-4 w-4"})}),t.jsx("button",{onClick:()=>be(k),className:"text-green-600 hover:text-green-900",title:"Editar",children:t.jsx(gs,{className:"h-4 w-4"})}),t.jsx("button",{onClick:()=>Te(k),className:"text-indigo-600 hover:text-indigo-900",title:"Dados Bancários",children:t.jsx(fn,{className:"h-4 w-4"})}),t.jsx("button",{onClick:()=>Ae(k),className:"text-orange-600 hover:text-orange-900",title:"Dia de Pagamento",children:t.jsx(Ga,{className:"h-4 w-4"})}),t.jsx("button",{onClick:()=>{we(k._id),_(!0)},className:"text-purple-600 hover:text-purple-900",title:"Férias",children:t.jsx(Ga,{className:"h-4 w-4"})}),t.jsx("button",{onClick:()=>{we(k._id),C(!0)},className:"text-orange-600 hover:text-orange-900",title:"Banco de Horas",children:t.jsx(si,{className:"h-4 w-4"})}),t.jsx("button",{onClick:()=>ft(k._id),className:"text-red-600 hover:text-red-900",title:"Excluir",children:t.jsx(Ms,{className:"h-4 w-4"})})]})})]},k._id)})})]})})]}),J&&t.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:t.jsx("div",{className:"relative top-20 mx-auto p-5 border w-full max-w-2xl shadow-lg rounded-md bg-white",children:t.jsxs("div",{className:"mt-3",children:[t.jsxs("div",{className:"flex justify-between items-center mb-4",children:[t.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Dados Bancários"}),t.jsx("button",{onClick:tt,className:"text-gray-400 hover:text-gray-600",children:t.jsx($t,{className:"h-5 w-5"})})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Tipo de Pagamento"}),t.jsxs("select",{value:Z.tipoPagamento,onChange:k=>he({...Z,tipoPagamento:k.target.value}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500",children:[t.jsx("option",{value:"deposito",children:"Depósito Bancário"}),t.jsx("option",{value:"pix",children:"PIX"})]})]}),Z.tipoPagamento==="deposito"&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Banco"}),t.jsx("input",{type:"text",value:Z.banco,onChange:k=>he({...Z,banco:k.target.value}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Nome do banco"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Agência"}),t.jsx("input",{type:"text",value:Z.agencia,onChange:k=>he({...Z,agencia:k.target.value}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"0000-0"})]})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Conta"}),t.jsx("input",{type:"text",value:Z.conta,onChange:k=>he({...Z,conta:k.target.value}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"00000-0"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Tipo de Conta"}),t.jsxs("select",{value:Z.tipoConta,onChange:k=>he({...Z,tipoConta:k.target.value}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500",children:[t.jsx("option",{value:"corrente",children:"Conta Corrente"}),t.jsx("option",{value:"poupanca",children:"Poupança"})]})]})]})]}),Z.tipoPagamento==="pix"&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Tipo de Chave PIX"}),t.jsxs("select",{value:Z.tipoChavePix,onChange:k=>he({...Z,tipoChavePix:k.target.value}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500",children:[t.jsx("option",{value:"cpf",children:"CPF"}),t.jsx("option",{value:"email",children:"Email"}),t.jsx("option",{value:"telefone",children:"Telefone"}),t.jsx("option",{value:"aleatoria",children:"Chave Aleatória"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Chave PIX"}),t.jsx("input",{type:"text",value:Z.chavePix,onChange:k=>he({...Z,chavePix:k.target.value}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500",placeholder:Z.tipoChavePix==="cpf"?"000.000.000-00":Z.tipoChavePix==="email"?"email@exemplo.com":Z.tipoChavePix==="telefone"?"(11) 99999-9999":"chave-aleatoria-uuid"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Observações"}),t.jsx("textarea",{value:Z.observacoes,onChange:k=>he({...Z,observacoes:k.target.value}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500",rows:3,placeholder:"Informações adicionais sobre os dados bancários..."})]}),t.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[t.jsx("button",{onClick:tt,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 border border-gray-300 rounded-md hover:bg-gray-200",children:"Cancelar"}),t.jsxs("button",{onClick:Xe,className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-md hover:bg-blue-700 flex items-center space-x-2",children:[t.jsx(bl,{className:"h-4 w-4"}),t.jsx("span",{children:"Salvar Dados Bancários"})]})]})]})]})})}),K&&t.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:t.jsx("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:t.jsxs("div",{className:"mt-3",children:[t.jsxs("div",{className:"flex justify-between items-center mb-4",children:[t.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Definir Dia de Pagamento"}),t.jsx("button",{onClick:tt,className:"text-gray-400 hover:text-gray-600",children:t.jsx($t,{className:"h-5 w-5"})})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Dia do Mês para Pagamento"}),t.jsx("select",{value:ie.diaPagamento,onChange:k=>Ue({...ie,diaPagamento:Number(k.target.value)}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500",children:Array.from({length:31},(k,Qe)=>Qe+1).map(k=>t.jsxs("option",{value:k,children:["Dia ",k]},k))}),t.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Selecione o dia do mês em que este funcionário deve receber o pagamento"})]}),t.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:[t.jsx("h4",{className:"text-sm font-medium text-blue-900 mb-2",children:"Informação Importante:"}),t.jsxs("p",{className:"text-xs text-blue-800",children:["• Para meses com menos dias, o pagamento será feito no último dia útil disponível",t.jsx("br",{}),"• Finais de semana e feriados podem afetar a data real de pagamento",t.jsx("br",{}),"• Esta configuração é usada para gerar relatórios e lembretes automáticos"]})]}),t.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[t.jsx("button",{onClick:tt,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 border border-gray-300 rounded-md hover:bg-gray-200",children:"Cancelar"}),t.jsxs("button",{onClick:dt,className:"px-4 py-2 text-sm font-medium text-white bg-orange-600 border border-transparent rounded-md hover:bg-orange-700 flex items-center space-x-2",children:[t.jsx(bl,{className:"h-4 w-4"}),t.jsx("span",{children:"Salvar Dia de Pagamento"})]})]})]})]})})}),h&&t.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:t.jsx("div",{className:"relative top-10 mx-auto p-5 border w-full max-w-4xl shadow-lg rounded-md bg-white",children:t.jsxs("div",{className:"mt-3",children:[t.jsxs("div",{className:"flex justify-between items-center mb-4",children:[t.jsx("h3",{className:"text-lg font-medium text-gray-900",children:me?"Editar Funcionário":"Novo Funcionário"}),t.jsx("button",{onClick:tt,className:"text-gray-400 hover:text-gray-600",children:t.jsx($t,{className:"h-5 w-5"})})]}),t.jsxs("form",{onSubmit:Be,className:"space-y-6",children:[t.jsxs("div",{children:[t.jsx("h4",{className:"text-md font-medium text-gray-900 mb-4",children:"Dados Pessoais"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Nome Completo"}),t.jsx("input",{type:"text",value:ce.nome,onChange:k=>Ce({...ce,nome:k.target.value}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500",required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"CPF"}),t.jsx("input",{type:"text",value:ce.cpf,onChange:k=>Ce({...ce,cpf:k.target.value}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500",required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"RG"}),t.jsx("input",{type:"text",value:ce.rg,onChange:k=>Ce({...ce,rg:k.target.value}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500",required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Data de Admissão"}),t.jsx("input",{type:"date",value:ce.dataAdmissao,onChange:k=>Ce({...ce,dataAdmissao:k.target.value}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500",required:!0})]})]})]}),t.jsxs("div",{children:[t.jsx("h4",{className:"text-md font-medium text-gray-900 mb-4",children:"Contato"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Telefone"}),t.jsx("input",{type:"text",value:ce.telefone,onChange:k=>Ce({...ce,telefone:k.target.value}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500",required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Email"}),t.jsx("input",{type:"email",value:ce.email,onChange:k=>Ce({...ce,email:k.target.value}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500",required:!0})]})]})]}),t.jsxs("div",{children:[t.jsx("h4",{className:"text-md font-medium text-gray-900 mb-4",children:"Endereço"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{className:"md:col-span-2",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Rua"}),t.jsx("input",{type:"text",value:ce.endereco.rua,onChange:k=>Ce({...ce,endereco:{...ce.endereco,rua:k.target.value}}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Bairro"}),t.jsx("input",{type:"text",value:ce.endereco.bairro,onChange:k=>Ce({...ce,endereco:{...ce.endereco,bairro:k.target.value}}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Cidade"}),t.jsx("input",{type:"text",value:ce.endereco.cidade,onChange:k=>Ce({...ce,endereco:{...ce.endereco,cidade:k.target.value}}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Estado"}),t.jsx("input",{type:"text",value:ce.endereco.estado,onChange:k=>Ce({...ce,endereco:{...ce.endereco,estado:k.target.value}}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"CEP"}),t.jsx("input",{type:"text",value:ce.endereco.cep,onChange:k=>Ce({...ce,endereco:{...ce.endereco,cep:k.target.value}}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500"})]})]})]}),t.jsxs("div",{children:[t.jsx("h4",{className:"text-md font-medium text-gray-900 mb-4",children:"Cargo e Função"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Cargo"}),t.jsx("input",{type:"text",value:ce.cargo,onChange:k=>Ce({...ce,cargo:k.target.value}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500",required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Função"}),t.jsx("input",{type:"text",value:ce.funcao,onChange:k=>Ce({...ce,funcao:k.target.value}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500",required:!0})]})]})]}),t.jsxs("div",{children:[t.jsx("h4",{className:"text-md font-medium text-gray-900 mb-4",children:"Remuneração e Pagamento"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Unidade de Medida"}),t.jsxs("select",{value:ce.unidadeMedida,onChange:k=>Ce({...ce,unidadeMedida:k.target.value}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500",children:[t.jsx("option",{value:"hora",children:"Por Hora"}),t.jsx("option",{value:"dia",children:"Por Dia"}),t.jsx("option",{value:"mes",children:"Por Mês"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Valor por Hora"}),t.jsx("input",{type:"number",step:"0.01",value:ce.valorHora,onChange:k=>Ce({...ce,valorHora:Number(k.target.value)}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Valor por Dia"}),t.jsx("input",{type:"number",step:"0.01",value:ce.valorDiaria,onChange:k=>Ce({...ce,valorDiaria:Number(k.target.value)}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Valor Mensal"}),t.jsx("input",{type:"number",step:"0.01",value:ce.valorMensal,onChange:k=>Ce({...ce,valorMensal:Number(k.target.value)}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Dia de Pagamento"}),t.jsx("input",{type:"number",min:"1",max:"31",value:ce.diaPagamento,onChange:k=>Ce({...ce,diaPagamento:Number(k.target.value)}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Ex: 5"}),t.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Dia do mês (1-31)"})]})]})]}),t.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[t.jsx("button",{type:"button",onClick:tt,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 border border-gray-300 rounded-md hover:bg-gray-200",children:"Cancelar"}),t.jsx("button",{type:"submit",className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-md hover:bg-blue-700",children:me?"Atualizar":"Cadastrar"})]})]})]})})}),b&&L&&t.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:t.jsx("div",{className:"relative top-10 mx-auto p-5 border w-full max-w-4xl shadow-lg rounded-md bg-white",children:t.jsxs("div",{className:"mt-3",children:[t.jsxs("div",{className:"flex justify-between items-center mb-4",children:[t.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Detalhes do Funcionário"}),t.jsx("button",{onClick:tt,className:"text-gray-400 hover:text-gray-600",children:t.jsx($t,{className:"h-5 w-5"})})]}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Informações Pessoais"}),t.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg space-y-2",children:[t.jsxs("p",{children:[t.jsx("span",{className:"font-medium",children:"Nome:"})," ",L.nome]}),t.jsxs("p",{children:[t.jsx("span",{className:"font-medium",children:"CPF:"})," ",L.cpf]}),t.jsxs("p",{children:[t.jsx("span",{className:"font-medium",children:"RG:"})," ",L.rg]}),t.jsxs("p",{children:[t.jsx("span",{className:"font-medium",children:"Telefone:"})," ",L.telefone]}),t.jsxs("p",{children:[t.jsx("span",{className:"font-medium",children:"Email:"})," ",L.email]})]})]}),t.jsxs("div",{children:[t.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Cargo e Função"}),t.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg space-y-2",children:[t.jsxs("p",{children:[t.jsx("span",{className:"font-medium",children:"Cargo:"})," ",L.cargo]}),t.jsxs("p",{children:[t.jsx("span",{className:"font-medium",children:"Função:"})," ",L.funcao]}),t.jsxs("p",{children:[t.jsx("span",{className:"font-medium",children:"Admissão:"})," ",Un(L.dataAdmissao)]}),t.jsxs("p",{children:[t.jsx("span",{className:"font-medium",children:"Status:"}),t.jsx("span",{className:`ml-2 px-2 py-1 rounded-full text-xs ${L.ativo?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:L.ativo?"Ativo":"Inativo"})]})]})]}),t.jsxs("div",{children:[t.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Dados Bancários"}),t.jsx("div",{className:"bg-gray-50 p-4 rounded-lg",children:L.dadosBancarios?t.jsxs("div",{className:"space-y-2",children:[t.jsxs("p",{children:[t.jsx("span",{className:"font-medium",children:"Tipo:"})," ",L.dadosBancarios.tipoPagamento==="pix"?"PIX":"Depósito Bancário"]}),L.dadosBancarios.tipoPagamento==="deposito"?t.jsxs(t.Fragment,{children:[t.jsxs("p",{children:[t.jsx("span",{className:"font-medium",children:"Banco:"})," ",L.dadosBancarios.banco]}),t.jsxs("p",{children:[t.jsx("span",{className:"font-medium",children:"Agência:"})," ",L.dadosBancarios.agencia]}),t.jsxs("p",{children:[t.jsx("span",{className:"font-medium",children:"Conta:"})," ",L.dadosBancarios.conta," (",L.dadosBancarios.tipoConta,")"]})]}):t.jsxs(t.Fragment,{children:[t.jsxs("p",{children:[t.jsx("span",{className:"font-medium",children:"Tipo de Chave:"})," ",L.dadosBancarios.tipoChavePix]}),t.jsxs("p",{children:[t.jsx("span",{className:"font-medium",children:"Chave PIX:"})," ",L.dadosBancarios.chavePix]})]}),L.dadosBancarios.observacoes&&t.jsxs("p",{children:[t.jsx("span",{className:"font-medium",children:"Observações:"})," ",L.dadosBancarios.observacoes]})]}):t.jsx("p",{className:"text-sm text-gray-500",children:"Dados bancários não cadastrados"})})]}),t.jsxs("div",{children:[t.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Remuneração e Pagamento"}),t.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg space-y-2",children:[t.jsxs("p",{children:[t.jsx("span",{className:"font-medium",children:"Unidade:"})," ",L.unidadeMedida]}),t.jsxs("p",{children:[t.jsx("span",{className:"font-medium",children:"Valor/Hora:"})," ",zo(L.valorHora)]}),t.jsxs("p",{children:[t.jsx("span",{className:"font-medium",children:"Valor/Dia:"})," ",zo(L.valorDiaria)]}),t.jsxs("p",{children:[t.jsx("span",{className:"font-medium",children:"Valor/Mês:"})," ",zo(L.valorMensal)]}),t.jsxs("p",{children:[t.jsx("span",{className:"font-medium",children:"Dia de Pagamento:"})," ",L.diaPagamento?`Dia ${L.diaPagamento}`:"Não definido"]})]})]})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Banco de Horas"}),t.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[t.jsxs("p",{className:`text-lg font-bold ${kr((Tt=L.bancoHoras)==null?void 0:Tt.saldoHoras)>0?"text-green-600":kr((ne=L.bancoHoras)==null?void 0:ne.saldoHoras)<0?"text-red-600":"text-gray-900"}`,children:[kr((Pe=L.bancoHoras)==null?void 0:Pe.saldoHoras),"h"]}),t.jsxs("p",{className:"text-sm text-gray-600",children:["Limite mensal: ",kr((at=L.bancoHoras)==null?void 0:at.limiteMensal),"h"]})]})]}),t.jsxs("div",{children:[t.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Férias"}),t.jsx("div",{className:"bg-gray-50 p-4 rounded-lg max-h-40 overflow-y-auto",children:L.ferias&&L.ferias.length>0?L.ferias.map((k,Qe)=>t.jsxs("div",{className:"mb-2 pb-2 border-b border-gray-200 last:border-b-0",children:[t.jsxs("p",{className:"text-sm",children:[t.jsx("span",{className:"font-medium",children:"Período:"})," ",Un(k.dataInicio)," - ",Un(k.dataFim)]}),t.jsxs("p",{className:"text-sm",children:[t.jsx("span",{className:"font-medium",children:"Status:"}),t.jsx("span",{className:`ml-1 px-2 py-1 rounded-full text-xs ${k.status==="concluido"?"bg-green-100 text-green-800":k.status==="em_andamento"?"bg-blue-100 text-blue-800":"bg-yellow-100 text-yellow-800"}`,children:k.status})]})]},Qe)):t.jsx("p",{className:"text-sm text-gray-500",children:"Nenhuma férias registrada"})})]}),t.jsxs("div",{children:[t.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Licenças"}),t.jsx("div",{className:"bg-gray-50 p-4 rounded-lg max-h-40 overflow-y-auto",children:L.licencas&&L.licencas.length>0?L.licencas.map((k,Qe)=>t.jsxs("div",{className:"mb-2 pb-2 border-b border-gray-200 last:border-b-0",children:[t.jsxs("p",{className:"text-sm",children:[t.jsx("span",{className:"font-medium",children:"Tipo:"})," ",k.tipo]}),t.jsxs("p",{className:"text-sm",children:[t.jsx("span",{className:"font-medium",children:"Período:"})," ",Un(k.dataInicio)," - ",Un(k.dataFim)]}),t.jsxs("p",{className:"text-sm",children:[t.jsx("span",{className:"font-medium",children:"Status:"}),t.jsx("span",{className:`ml-1 px-2 py-1 rounded-full text-xs ${k.status==="finalizada"?"bg-green-100 text-green-800":k.status==="ativa"?"bg-blue-100 text-blue-800":"bg-red-100 text-red-800"}`,children:k.status})]})]},Qe)):t.jsx("p",{className:"text-sm text-gray-500",children:"Nenhuma licença registrada"})})]}),t.jsxs("div",{children:[t.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Qualificações"}),t.jsx("div",{className:"bg-gray-50 p-4 rounded-lg max-h-40 overflow-y-auto",children:L.qualificacoes&&L.qualificacoes.length>0?L.qualificacoes.map((k,Qe)=>t.jsxs("div",{className:"mb-2 pb-2 border-b border-gray-200 last:border-b-0",children:[t.jsx("p",{className:"text-sm font-medium",children:k.nome}),t.jsx("p",{className:"text-sm text-gray-600",children:k.instituicao}),t.jsxs("p",{className:"text-sm text-gray-500",children:["Obtida em: ",Un(k.dataObtencao),k.dataVencimento&&` | Vence em: ${Un(k.dataVencimento)}`]})]},Qe)):t.jsx("p",{className:"text-sm text-gray-500",children:"Nenhuma qualificação registrada"})})]})]})]}),t.jsxs("div",{className:"flex justify-between items-center pt-6 border-t border-gray-200",children:[t.jsxs("div",{className:"flex space-x-3",children:[t.jsxs("button",{onClick:()=>Te(L),className:"bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700 flex items-center space-x-2",children:[t.jsx(fn,{className:"h-4 w-4"}),t.jsx("span",{children:"Dados Bancários"})]}),t.jsxs("button",{onClick:()=>Ae(L),className:"bg-orange-600 text-white px-4 py-2 rounded-lg hover:bg-orange-700 flex items-center space-x-2",children:[t.jsx(Ga,{className:"h-4 w-4"}),t.jsx("span",{children:"Dia Pagamento"})]}),t.jsxs("button",{onClick:()=>{we(L._id),_(!0)},className:"bg-purple-600 text-white px-4 py-2 rounded-lg hover:bg-purple-700 flex items-center space-x-2",children:[t.jsx(Ga,{className:"h-4 w-4"}),t.jsx("span",{children:"Férias"})]}),t.jsxs("button",{onClick:()=>{we(L._id),y(!0)},className:"bg-yellow-600 text-white px-4 py-2 rounded-lg hover:bg-yellow-700 flex items-center space-x-2",children:[t.jsx(po,{className:"h-4 w-4"}),t.jsx("span",{children:"Licença"})]}),t.jsxs("button",{onClick:()=>{we(L._id),C(!0)},className:"bg-orange-600 text-white px-4 py-2 rounded-lg hover:bg-orange-700 flex items-center space-x-2",children:[t.jsx(si,{className:"h-4 w-4"}),t.jsx("span",{children:"Banco de Horas"})]}),t.jsxs("button",{onClick:()=>{we(L._id),se(!0)},className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 flex items-center space-x-2",children:[t.jsx(R4,{className:"h-4 w-4"}),t.jsx("span",{children:"Qualificação"})]})]}),t.jsx("button",{onClick:tt,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 border border-gray-300 rounded-md hover:bg-gray-200",children:"Fechar"})]})]})})}),w&&t.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:t.jsx("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:t.jsxs("div",{className:"mt-3",children:[t.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Adicionar Férias"}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Data de Início"}),t.jsx("input",{type:"date",value:S.dataInicio,onChange:k=>G({...S,dataInicio:k.target.value}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500",required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Data de Término"}),t.jsx("input",{type:"date",value:S.dataFim,onChange:k=>G({...S,dataFim:k.target.value}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500",required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Observações"}),t.jsx("textarea",{value:S.observacoes,onChange:k=>G({...S,observacoes:k.target.value}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500",rows:3})]}),t.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[t.jsx("button",{onClick:tt,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 border border-gray-300 rounded-md hover:bg-gray-200",children:"Cancelar"}),t.jsx("button",{onClick:te,className:"px-4 py-2 text-sm font-medium text-white bg-purple-600 border border-transparent rounded-md hover:bg-purple-700",children:"Adicionar Férias"})]})]})]})})}),O&&t.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:t.jsx("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:t.jsxs("div",{className:"mt-3",children:[t.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Adicionar Licença"}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Tipo de Licença"}),t.jsxs("select",{value:q.tipo,onChange:k=>N({...q,tipo:k.target.value}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500",children:[t.jsx("option",{value:"medica",children:"Médica"}),t.jsx("option",{value:"maternidade",children:"Maternidade"}),t.jsx("option",{value:"paternidade",children:"Paternidade"}),t.jsx("option",{value:"acidente",children:"Acidente"}),t.jsx("option",{value:"outras",children:"Outras"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Data de Início"}),t.jsx("input",{type:"date",value:q.dataInicio,onChange:k=>N({...q,dataInicio:k.target.value}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500",required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Data de Término"}),t.jsx("input",{type:"date",value:q.dataFim,onChange:k=>N({...q,dataFim:k.target.value}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500",required:!0})]}),t.jsx("div",{children:t.jsxs("label",{className:"flex items-center",children:[t.jsx("input",{type:"checkbox",checked:q.remunerada,onChange:k=>N({...q,remunerada:k.target.checked}),className:"mr-2"}),t.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Licença remunerada"})]})}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Observações"}),t.jsx("textarea",{value:q.observacoes,onChange:k=>N({...q,observacoes:k.target.value}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500",rows:3})]}),t.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[t.jsx("button",{onClick:tt,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 border border-gray-300 rounded-md hover:bg-gray-200",children:"Cancelar"}),t.jsx("button",{onClick:Ct,className:"px-4 py-2 text-sm font-medium text-white bg-yellow-600 border border-transparent rounded-md hover:bg-yellow-700",children:"Adicionar Licença"})]})]})]})})}),v&&t.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:t.jsx("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:t.jsxs("div",{className:"mt-3",children:[t.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Banco de Horas"}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Tipo de Operação"}),t.jsxs("select",{value:U.tipo,onChange:k=>T({...U,tipo:k.target.value}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500",children:[t.jsx("option",{value:"credito",children:"Crédito (Hora Extra)"}),t.jsx("option",{value:"debito",children:"Débito (Saída Antecipada)"}),t.jsx("option",{value:"compensacao",children:"Compensação"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Quantidade de Horas"}),t.jsx("input",{type:"number",step:"0.5",value:U.horas,onChange:k=>T({...U,horas:Number(k.target.value)}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500",required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Descrição"}),t.jsx("textarea",{value:U.descricao,onChange:k=>T({...U,descricao:k.target.value}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500",rows:3,required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Aprovado por"}),t.jsx("input",{type:"text",value:U.aprovadoPor,onChange:k=>T({...U,aprovadoPor:k.target.value}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500",required:!0})]}),t.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[t.jsx("button",{onClick:tt,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 border border-gray-300 rounded-md hover:bg-gray-200",children:"Cancelar"}),t.jsx("button",{onClick:ae,className:"px-4 py-2 text-sm font-medium text-white bg-orange-600 border border-transparent rounded-md hover:bg-orange-700",children:"Adicionar Registro"})]})]})]})})}),W&&t.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:t.jsx("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:t.jsxs("div",{className:"mt-3",children:[t.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Adicionar Qualificação"}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Nome da Qualificação"}),t.jsx("input",{type:"text",value:B.nome,onChange:k=>oe({...B,nome:k.target.value}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500",required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Instituição"}),t.jsx("input",{type:"text",value:B.instituicao,onChange:k=>oe({...B,instituicao:k.target.value}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500",required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Data de Obtenção"}),t.jsx("input",{type:"date",value:B.dataObtencao,onChange:k=>oe({...B,dataObtencao:k.target.value}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500",required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Data de Vencimento (opcional)"}),t.jsx("input",{type:"date",value:B.dataVencimento,onChange:k=>oe({...B,dataVencimento:k.target.value}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500"})]}),t.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[t.jsx("button",{onClick:tt,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 border border-gray-300 rounded-md hover:bg-gray-200",children:"Cancelar"}),t.jsx("button",{onClick:xe,className:"px-4 py-2 text-sm font-medium text-white bg-green-600 border border-transparent rounded-md hover:bg-green-700",children:"Adicionar Qualificação"})]})]})]})})})]})}const g3="modulepreload",v3=function(e){return"/"+e},Mg={},ff=function(a,r,s){let n=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),c=(i==null?void 0:i.nonce)||(i==null?void 0:i.getAttribute("nonce"));n=Promise.allSettled(r.map(d=>{if(d=v3(d),d in Mg)return;Mg[d]=!0;const p=d.endsWith(".css"),h=p?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${h}`))return;const x=document.createElement("link");if(x.rel=p?"stylesheet":g3,p||(x.as="script"),x.crossOrigin="",x.href=d,c&&x.setAttribute("nonce",c),document.head.appendChild(x),p)return new Promise((b,g)=>{x.addEventListener("load",b),x.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${d}`)))})}))}function o(i){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=i,window.dispatchEvent(c),!c.defaultPrevented)throw i}return n.then(i=>{for(const c of i||[])c.status==="rejected"&&o(c.reason);return a().catch(o)})};function ia(e){"@babel/helpers - typeof";return ia=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(a){return typeof a}:function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},ia(e)}var yr=Uint8Array,Xr=Uint16Array,C0=Int32Array,Om=new yr([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Tm=new yr([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),xf=new yr([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),sb=function(e,a){for(var r=new Xr(31),s=0;s<31;++s)r[s]=a+=1<<e[s-1];for(var n=new C0(r[30]),s=1;s<30;++s)for(var o=r[s];o<r[s+1];++o)n[o]=o-r[s]<<5|s;return{b:r,r:n}},nb=sb(Om,2),ob=nb.b,gf=nb.r;ob[28]=258,gf[258]=28;var ib=sb(Tm,0),b3=ib.b,Fg=ib.r,vf=new Xr(32768);for(var va=0;va<32768;++va){var Vn=(va&43690)>>1|(va&21845)<<1;Vn=(Vn&52428)>>2|(Vn&13107)<<2,Vn=(Vn&61680)>>4|(Vn&3855)<<4,vf[va]=((Vn&65280)>>8|(Vn&255)<<8)>>1}var Xs=function(e,a,r){for(var s=e.length,n=0,o=new Xr(a);n<s;++n)e[n]&&++o[e[n]-1];var i=new Xr(a);for(n=1;n<a;++n)i[n]=i[n-1]+o[n-1]<<1;var c;if(r){c=new Xr(1<<a);var d=15-a;for(n=0;n<s;++n)if(e[n])for(var p=n<<4|e[n],h=a-e[n],x=i[e[n]-1]++<<h,b=x|(1<<h)-1;x<=b;++x)c[vf[x]>>d]=p}else for(c=new Xr(s),n=0;n<s;++n)e[n]&&(c[n]=vf[i[e[n]-1]++]>>15-e[n]);return c},jo=new yr(288);for(var va=0;va<144;++va)jo[va]=8;for(var va=144;va<256;++va)jo[va]=9;for(var va=256;va<280;++va)jo[va]=7;for(var va=280;va<288;++va)jo[va]=8;var Yc=new yr(32);for(var va=0;va<32;++va)Yc[va]=5;var y3=Xs(jo,9,0),j3=Xs(jo,9,1),N3=Xs(Yc,5,0),w3=Xs(Yc,5,1),Xh=function(e){for(var a=e[0],r=1;r<e.length;++r)e[r]>a&&(a=e[r]);return a},ks=function(e,a,r){var s=a/8|0;return(e[s]|e[s+1]<<8)>>(a&7)&r},Kh=function(e,a){var r=a/8|0;return(e[r]|e[r+1]<<8|e[r+2]<<16)>>(a&7)},A0=function(e){return(e+7)/8|0},lb=function(e,a,r){return(r==null||r>e.length)&&(r=e.length),new yr(e.subarray(a,r))},S3=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Es=function(e,a,r){var s=new Error(a||S3[e]);if(s.code=e,Error.captureStackTrace&&Error.captureStackTrace(s,Es),!r)throw s;return s},k3=function(e,a,r,s){var n=e.length,o=0;if(!n||a.f&&!a.l)return r||new yr(0);var i=!r,c=i||a.i!=2,d=a.i;i&&(r=new yr(n*3));var p=function(Be){var Xe=r.length;if(Be>Xe){var dt=new yr(Math.max(Xe*2,Be));dt.set(r),r=dt}},h=a.f||0,x=a.p||0,b=a.b||0,g=a.l,w=a.d,_=a.m,O=a.n,y=n*8;do{if(!g){h=ks(e,x,1);var v=ks(e,x+1,3);if(x+=3,v)if(v==1)g=j3,w=w3,_=9,O=5;else if(v==2){var J=ks(e,x,31)+257,Y=ks(e,x+10,15)+4,K=J+ks(e,x+5,31)+1;x+=14;for(var fe=new yr(K),me=new yr(19),$=0;$<Y;++$)me[xf[$]]=ks(e,x+$*3,7);x+=Y*3;for(var L=Xh(me),le=(1<<L)-1,R=Xs(me,L,1),$=0;$<K;){var we=R[ks(e,x,le)];x+=we&15;var C=we>>4;if(C<16)fe[$++]=C;else{var ce=0,Ce=0;for(C==16?(Ce=3+ks(e,x,3),x+=2,ce=fe[$-1]):C==17?(Ce=3+ks(e,x,7),x+=3):C==18&&(Ce=11+ks(e,x,127),x+=7);Ce--;)fe[$++]=ce}}var Z=fe.subarray(0,J),he=fe.subarray(J);_=Xh(Z),O=Xh(he),g=Xs(Z,_,1),w=Xs(he,O,1)}else Es(1);else{var C=A0(x)+4,W=e[C-4]|e[C-3]<<8,se=C+W;if(se>n){d&&Es(0);break}c&&p(b+W),r.set(e.subarray(C,se),b),a.b=b+=W,a.p=x=se*8,a.f=h;continue}if(x>y){d&&Es(0);break}}c&&p(b+131072);for(var ie=(1<<_)-1,Ue=(1<<O)-1,S=x;;S=x){var ce=g[Kh(e,x)&ie],G=ce>>4;if(x+=ce&15,x>y){d&&Es(0);break}if(ce||Es(2),G<256)r[b++]=G;else if(G==256){S=x,g=null;break}else{var q=G-254;if(G>264){var $=G-257,N=Om[$];q=ks(e,x,(1<<N)-1)+ob[$],x+=N}var U=w[Kh(e,x)&Ue],T=U>>4;U||Es(3),x+=U&15;var he=b3[T];if(T>3){var N=Tm[T];he+=Kh(e,x)&(1<<N)-1,x+=N}if(x>y){d&&Es(0);break}c&&p(b+131072);var B=b+q;if(b<he){var oe=o-he,Ne=Math.min(he,B);for(oe+b<0&&Es(3);b<Ne;++b)r[b]=s[oe+b]}for(;b<B;++b)r[b]=r[b-he]}}a.l=g,a.p=S,a.b=b,a.f=h,g&&(h=1,a.m=_,a.d=w,a.n=O)}while(!h);return b!=r.length&&i?lb(r,0,b):r.subarray(0,b)},un=function(e,a,r){r<<=a&7;var s=a/8|0;e[s]|=r,e[s+1]|=r>>8},uc=function(e,a,r){r<<=a&7;var s=a/8|0;e[s]|=r,e[s+1]|=r>>8,e[s+2]|=r>>16},Zh=function(e,a){for(var r=[],s=0;s<e.length;++s)e[s]&&r.push({s,f:e[s]});var n=r.length,o=r.slice();if(!n)return{t:db,l:0};if(n==1){var i=new yr(r[0].s+1);return i[r[0].s]=1,{t:i,l:1}}r.sort(function(se,J){return se.f-J.f}),r.push({s:-1,f:25001});var c=r[0],d=r[1],p=0,h=1,x=2;for(r[0]={s:-1,f:c.f+d.f,l:c,r:d};h!=n-1;)c=r[r[p].f<r[x].f?p++:x++],d=r[p!=h&&r[p].f<r[x].f?p++:x++],r[h++]={s:-1,f:c.f+d.f,l:c,r:d};for(var b=o[0].s,s=1;s<n;++s)o[s].s>b&&(b=o[s].s);var g=new Xr(b+1),w=bf(r[h-1],g,0);if(w>a){var s=0,_=0,O=w-a,y=1<<O;for(o.sort(function(J,Y){return g[Y.s]-g[J.s]||J.f-Y.f});s<n;++s){var v=o[s].s;if(g[v]>a)_+=y-(1<<w-g[v]),g[v]=a;else break}for(_>>=O;_>0;){var C=o[s].s;g[C]<a?_-=1<<a-g[C]++-1:++s}for(;s>=0&&_;--s){var W=o[s].s;g[W]==a&&(--g[W],++_)}w=a}return{t:new yr(g),l:w}},bf=function(e,a,r){return e.s==-1?Math.max(bf(e.l,a,r+1),bf(e.r,a,r+1)):a[e.s]=r},Rg=function(e){for(var a=e.length;a&&!e[--a];);for(var r=new Xr(++a),s=0,n=e[0],o=1,i=function(d){r[s++]=d},c=1;c<=a;++c)if(e[c]==n&&c!=a)++o;else{if(!n&&o>2){for(;o>138;o-=138)i(32754);o>2&&(i(o>10?o-11<<5|28690:o-3<<5|12305),o=0)}else if(o>3){for(i(n),--o;o>6;o-=6)i(8304);o>2&&(i(o-3<<5|8208),o=0)}for(;o--;)i(n);o=1,n=e[c]}return{c:r.subarray(0,s),n:a}},mc=function(e,a){for(var r=0,s=0;s<a.length;++s)r+=e[s]*a[s];return r},cb=function(e,a,r){var s=r.length,n=A0(a+2);e[n]=s&255,e[n+1]=s>>8,e[n+2]=e[n]^255,e[n+3]=e[n+1]^255;for(var o=0;o<s;++o)e[n+o+4]=r[o];return(n+4+s)*8},qg=function(e,a,r,s,n,o,i,c,d,p,h){un(a,h++,r),++n[256];for(var x=Zh(n,15),b=x.t,g=x.l,w=Zh(o,15),_=w.t,O=w.l,y=Rg(b),v=y.c,C=y.n,W=Rg(_),se=W.c,J=W.n,Y=new Xr(19),K=0;K<v.length;++K)++Y[v[K]&31];for(var K=0;K<se.length;++K)++Y[se[K]&31];for(var fe=Zh(Y,7),me=fe.t,$=fe.l,L=19;L>4&&!me[xf[L-1]];--L);var le=p+5<<3,R=mc(n,jo)+mc(o,Yc)+i,we=mc(n,b)+mc(o,_)+i+14+3*L+mc(Y,me)+2*Y[16]+3*Y[17]+7*Y[18];if(d>=0&&le<=R&&le<=we)return cb(a,h,e.subarray(d,d+p));var ce,Ce,Z,he;if(un(a,h,1+(we<R)),h+=2,we<R){ce=Xs(b,g,0),Ce=b,Z=Xs(_,O,0),he=_;var ie=Xs(me,$,0);un(a,h,C-257),un(a,h+5,J-1),un(a,h+10,L-4),h+=14;for(var K=0;K<L;++K)un(a,h+3*K,me[xf[K]]);h+=3*L;for(var Ue=[v,se],S=0;S<2;++S)for(var G=Ue[S],K=0;K<G.length;++K){var q=G[K]&31;un(a,h,ie[q]),h+=me[q],q>15&&(un(a,h,G[K]>>5&127),h+=G[K]>>12)}}else ce=y3,Ce=jo,Z=N3,he=Yc;for(var K=0;K<c;++K){var N=s[K];if(N>255){var q=N>>18&31;uc(a,h,ce[q+257]),h+=Ce[q+257],q>7&&(un(a,h,N>>23&31),h+=Om[q]);var U=N&31;uc(a,h,Z[U]),h+=he[U],U>3&&(uc(a,h,N>>5&8191),h+=Tm[U])}else uc(a,h,ce[N]),h+=Ce[N]}return uc(a,h,ce[256]),h+Ce[256]},C3=new C0([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),db=new yr(0),A3=function(e,a,r,s,n,o){var i=o.z||e.length,c=new yr(s+i+5*(1+Math.ceil(i/7e3))+n),d=c.subarray(s,c.length-n),p=o.l,h=(o.r||0)&7;if(a){h&&(d[0]=o.r>>3);for(var x=C3[a-1],b=x>>13,g=x&8191,w=(1<<r)-1,_=o.p||new Xr(32768),O=o.h||new Xr(w+1),y=Math.ceil(r/3),v=2*y,C=function(ft){return(e[ft]^e[ft+1]<<y^e[ft+2]<<v)&w},W=new C0(25e3),se=new Xr(288),J=new Xr(32),Y=0,K=0,fe=o.i||0,me=0,$=o.w||0,L=0;fe+2<i;++fe){var le=C(fe),R=fe&32767,we=O[le];if(_[R]=we,O[le]=R,$<=fe){var ce=i-fe;if((Y>7e3||me>24576)&&(ce>423||!p)){h=qg(e,d,0,W,se,J,K,me,L,fe-L,h),me=Y=K=0,L=fe;for(var Ce=0;Ce<286;++Ce)se[Ce]=0;for(var Ce=0;Ce<30;++Ce)J[Ce]=0}var Z=2,he=0,ie=g,Ue=R-we&32767;if(ce>2&&le==C(fe-Ue))for(var S=Math.min(b,ce)-1,G=Math.min(32767,fe),q=Math.min(258,ce);Ue<=G&&--ie&&R!=we;){if(e[fe+Z]==e[fe+Z-Ue]){for(var N=0;N<q&&e[fe+N]==e[fe+N-Ue];++N);if(N>Z){if(Z=N,he=Ue,N>S)break;for(var U=Math.min(Ue,N-2),T=0,Ce=0;Ce<U;++Ce){var B=fe-Ue+Ce&32767,oe=_[B],Ne=B-oe&32767;Ne>T&&(T=Ne,we=B)}}}R=we,we=_[R],Ue+=R-we&32767}if(he){W[me++]=268435456|gf[Z]<<18|Fg[he];var Be=gf[Z]&31,Xe=Fg[he]&31;K+=Om[Be]+Tm[Xe],++se[257+Be],++J[Xe],$=fe+Z,++Y}else W[me++]=e[fe],++se[e[fe]]}}for(fe=Math.max(fe,$);fe<i;++fe)W[me++]=e[fe],++se[e[fe]];h=qg(e,d,p,W,se,J,K,me,L,fe-L,h),p||(o.r=h&7|d[h/8|0]<<3,h-=7,o.h=O,o.p=_,o.i=fe,o.w=$)}else{for(var fe=o.w||0;fe<i+p;fe+=65535){var dt=fe+65535;dt>=i&&(d[h/8|0]=p,dt=i),h=cb(d,h+1,e.subarray(fe,dt))}o.i=i}return lb(c,0,s+A0(h)+n)},ub=function(){var e=1,a=0;return{p:function(r){for(var s=e,n=a,o=r.length|0,i=0;i!=o;){for(var c=Math.min(i+2655,o);i<c;++i)n+=s+=r[i];s=(s&65535)+15*(s>>16),n=(n&65535)+15*(n>>16)}e=s,a=n},d:function(){return e%=65521,a%=65521,(e&255)<<24|(e&65280)<<8|(a&255)<<8|a>>8}}},_3=function(e,a,r,s,n){if(!n&&(n={l:1},a.dictionary)){var o=a.dictionary.subarray(-32768),i=new yr(o.length+e.length);i.set(o),i.set(e,o.length),e=i,n.w=o.length}return A3(e,a.level==null?6:a.level,a.mem==null?n.l?Math.ceil(Math.max(8,Math.min(13,Math.log(e.length)))*1.5):20:12+a.mem,r,s,n)},mb=function(e,a,r){for(;r;++a)e[a]=r,r>>>=8},E3=function(e,a){var r=a.level,s=r==0?0:r<6?1:r==9?3:2;if(e[0]=120,e[1]=s<<6|(a.dictionary&&32),e[1]|=31-(e[0]<<8|e[1])%31,a.dictionary){var n=ub();n.p(a.dictionary),mb(e,2,n.d())}},P3=function(e,a){return((e[0]&15)!=8||e[0]>>4>7||(e[0]<<8|e[1])%31)&&Es(6,"invalid zlib data"),(e[1]>>5&1)==1&&Es(6,"invalid zlib data: "+(e[1]&32?"need":"unexpected")+" dictionary"),(e[1]>>3&4)+2};function yf(e,a){a||(a={});var r=ub();r.p(e);var s=_3(e,a,a.dictionary?6:2,4);return E3(s,a),mb(s,s.length-4,r.d()),s}function L3(e,a){return k3(e.subarray(P3(e),-4),{i:2},a,a)}var I3=typeof TextDecoder<"u"&&new TextDecoder,D3=0;try{I3.decode(db,{stream:!0}),D3=1}catch{}var zt=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function ep(){zt.console&&typeof zt.console.log=="function"&&zt.console.log.apply(zt.console,arguments)}var ua={log:ep,warn:function(e){zt.console&&(typeof zt.console.warn=="function"?zt.console.warn.apply(zt.console,arguments):ep.call(null,arguments))},error:function(e){zt.console&&(typeof zt.console.error=="function"?zt.console.error.apply(zt.console,arguments):ep(e))}};function tp(e,a,r){var s=new XMLHttpRequest;s.open("GET",e),s.responseType="blob",s.onload=function(){Vo(s.response,a,r)},s.onerror=function(){ua.error("could not download file")},s.send()}function zg(e){var a=new XMLHttpRequest;a.open("HEAD",e,!1);try{a.send()}catch{}return a.status>=200&&a.status<=299}function hu(e){try{e.dispatchEvent(new MouseEvent("click"))}catch{var a=document.createEvent("MouseEvents");a.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(a)}}var _c,jf,Vo=zt.saveAs||((typeof window>"u"?"undefined":ia(window))!=="object"||window!==zt?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(e,a,r){var s=zt.URL||zt.webkitURL,n=document.createElement("a");a=a||e.name||"download",n.download=a,n.rel="noopener",typeof e=="string"?(n.href=e,n.origin!==location.origin?zg(n.href)?tp(e,a,r):hu(n,n.target="_blank"):hu(n)):(n.href=s.createObjectURL(e),setTimeout(function(){s.revokeObjectURL(n.href)},4e4),setTimeout(function(){hu(n)},0))}:"msSaveOrOpenBlob"in navigator?function(e,a,r){if(a=a||e.name||"download",typeof e=="string")if(zg(e))tp(e,a,r);else{var s=document.createElement("a");s.href=e,s.target="_blank",setTimeout(function(){hu(s)})}else navigator.msSaveOrOpenBlob(function(n,o){return o===void 0?o={autoBom:!1}:ia(o)!=="object"&&(ua.warn("Deprecated: Expected third argument to be a object"),o={autoBom:!o}),o.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(n.type)?new Blob(["\uFEFF",n],{type:n.type}):n}(e,r),a)}:function(e,a,r,s){if((s=s||open("","_blank"))&&(s.document.title=s.document.body.innerText="downloading..."),typeof e=="string")return tp(e,a,r);var n=e.type==="application/octet-stream",o=/constructor/i.test(zt.HTMLElement)||zt.safari,i=/CriOS\/[\d]+/.test(navigator.userAgent);if((i||n&&o)&&(typeof FileReader>"u"?"undefined":ia(FileReader))==="object"){var c=new FileReader;c.onloadend=function(){var h=c.result;h=i?h:h.replace(/^data:[^;]*;/,"data:attachment/file;"),s?s.location.href=h:location=h,s=null},c.readAsDataURL(e)}else{var d=zt.URL||zt.webkitURL,p=d.createObjectURL(e);s?s.location=p:location.href=p,s=null,setTimeout(function(){d.revokeObjectURL(p)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function hb(e){var a;e=e||"",this.ok=!1,e.charAt(0)=="#"&&(e=e.substr(1,6)),e={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[e=(e=e.replace(/ /g,"")).toLowerCase()]||e;for(var r=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(c){return[parseInt(c[1]),parseInt(c[2]),parseInt(c[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(c){return[parseInt(c[1],16),parseInt(c[2],16),parseInt(c[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(c){return[parseInt(c[1]+c[1],16),parseInt(c[2]+c[2],16),parseInt(c[3]+c[3],16)]}}],s=0;s<r.length;s++){var n=r[s].re,o=r[s].process,i=n.exec(e);i&&(a=o(i),this.r=a[0],this.g=a[1],this.b=a[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var c=this.r.toString(16),d=this.g.toString(16),p=this.b.toString(16);return c.length==1&&(c="0"+c),d.length==1&&(d="0"+d),p.length==1&&(p="0"+p),"#"+c+d+p}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function ap(e,a){var r=e[0],s=e[1],n=e[2],o=e[3];r=fr(r,s,n,o,a[0],7,-680876936),o=fr(o,r,s,n,a[1],12,-389564586),n=fr(n,o,r,s,a[2],17,606105819),s=fr(s,n,o,r,a[3],22,-1044525330),r=fr(r,s,n,o,a[4],7,-176418897),o=fr(o,r,s,n,a[5],12,1200080426),n=fr(n,o,r,s,a[6],17,-1473231341),s=fr(s,n,o,r,a[7],22,-45705983),r=fr(r,s,n,o,a[8],7,1770035416),o=fr(o,r,s,n,a[9],12,-1958414417),n=fr(n,o,r,s,a[10],17,-42063),s=fr(s,n,o,r,a[11],22,-1990404162),r=fr(r,s,n,o,a[12],7,1804603682),o=fr(o,r,s,n,a[13],12,-40341101),n=fr(n,o,r,s,a[14],17,-1502002290),r=xr(r,s=fr(s,n,o,r,a[15],22,1236535329),n,o,a[1],5,-165796510),o=xr(o,r,s,n,a[6],9,-1069501632),n=xr(n,o,r,s,a[11],14,643717713),s=xr(s,n,o,r,a[0],20,-373897302),r=xr(r,s,n,o,a[5],5,-701558691),o=xr(o,r,s,n,a[10],9,38016083),n=xr(n,o,r,s,a[15],14,-660478335),s=xr(s,n,o,r,a[4],20,-405537848),r=xr(r,s,n,o,a[9],5,568446438),o=xr(o,r,s,n,a[14],9,-1019803690),n=xr(n,o,r,s,a[3],14,-187363961),s=xr(s,n,o,r,a[8],20,1163531501),r=xr(r,s,n,o,a[13],5,-1444681467),o=xr(o,r,s,n,a[2],9,-51403784),n=xr(n,o,r,s,a[7],14,1735328473),r=gr(r,s=xr(s,n,o,r,a[12],20,-1926607734),n,o,a[5],4,-378558),o=gr(o,r,s,n,a[8],11,-2022574463),n=gr(n,o,r,s,a[11],16,1839030562),s=gr(s,n,o,r,a[14],23,-35309556),r=gr(r,s,n,o,a[1],4,-1530992060),o=gr(o,r,s,n,a[4],11,1272893353),n=gr(n,o,r,s,a[7],16,-155497632),s=gr(s,n,o,r,a[10],23,-1094730640),r=gr(r,s,n,o,a[13],4,681279174),o=gr(o,r,s,n,a[0],11,-358537222),n=gr(n,o,r,s,a[3],16,-722521979),s=gr(s,n,o,r,a[6],23,76029189),r=gr(r,s,n,o,a[9],4,-640364487),o=gr(o,r,s,n,a[12],11,-421815835),n=gr(n,o,r,s,a[15],16,530742520),r=vr(r,s=gr(s,n,o,r,a[2],23,-995338651),n,o,a[0],6,-198630844),o=vr(o,r,s,n,a[7],10,1126891415),n=vr(n,o,r,s,a[14],15,-1416354905),s=vr(s,n,o,r,a[5],21,-57434055),r=vr(r,s,n,o,a[12],6,1700485571),o=vr(o,r,s,n,a[3],10,-1894986606),n=vr(n,o,r,s,a[10],15,-1051523),s=vr(s,n,o,r,a[1],21,-2054922799),r=vr(r,s,n,o,a[8],6,1873313359),o=vr(o,r,s,n,a[15],10,-30611744),n=vr(n,o,r,s,a[6],15,-1560198380),s=vr(s,n,o,r,a[13],21,1309151649),r=vr(r,s,n,o,a[4],6,-145523070),o=vr(o,r,s,n,a[11],10,-1120210379),n=vr(n,o,r,s,a[2],15,718787259),s=vr(s,n,o,r,a[9],21,-343485551),e[0]=so(r,e[0]),e[1]=so(s,e[1]),e[2]=so(n,e[2]),e[3]=so(o,e[3])}function Mm(e,a,r,s,n,o){return a=so(so(a,e),so(s,o)),so(a<<n|a>>>32-n,r)}function fr(e,a,r,s,n,o,i){return Mm(a&r|~a&s,e,a,n,o,i)}function xr(e,a,r,s,n,o,i){return Mm(a&s|r&~s,e,a,n,o,i)}function gr(e,a,r,s,n,o,i){return Mm(a^r^s,e,a,n,o,i)}function vr(e,a,r,s,n,o,i){return Mm(r^(a|~s),e,a,n,o,i)}function pb(e){var a,r=e.length,s=[1732584193,-271733879,-1732584194,271733878];for(a=64;a<=e.length;a+=64)ap(s,O3(e.substring(a-64,a)));e=e.substring(a-64);var n=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(a=0;a<e.length;a++)n[a>>2]|=e.charCodeAt(a)<<(a%4<<3);if(n[a>>2]|=128<<(a%4<<3),a>55)for(ap(s,n),a=0;a<16;a++)n[a]=0;return n[14]=8*r,ap(s,n),s}function O3(e){var a,r=[];for(a=0;a<64;a+=4)r[a>>2]=e.charCodeAt(a)+(e.charCodeAt(a+1)<<8)+(e.charCodeAt(a+2)<<16)+(e.charCodeAt(a+3)<<24);return r}_c=zt.atob.bind(zt),jf=zt.btoa.bind(zt);var $g="0123456789abcdef".split("");function T3(e){for(var a="",r=0;r<4;r++)a+=$g[e>>8*r+4&15]+$g[e>>8*r&15];return a}function M3(e){return String.fromCharCode((255&e)>>0,(65280&e)>>8,(16711680&e)>>16,(4278190080&e)>>24)}function Nf(e){return pb(e).map(M3).join("")}var F3=function(e){for(var a=0;a<e.length;a++)e[a]=T3(e[a]);return e.join("")}(pb("hello"))!="5d41402abc4b2a76b9719d911017c592";function so(e,a){if(F3){var r=(65535&e)+(65535&a);return(e>>16)+(a>>16)+(r>>16)<<16|65535&r}return e+a&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function wf(e,a){var r,s,n,o;if(e!==r){for(var i=(n=e,o=1+(256/e.length>>0),new Array(o+1).join(n)),c=[],d=0;d<256;d++)c[d]=d;var p=0;for(d=0;d<256;d++){var h=c[d];p=(p+h+i.charCodeAt(d))%256,c[d]=c[p],c[p]=h}r=e,s=c}else c=s;var x=a.length,b=0,g=0,w="";for(d=0;d<x;d++)g=(g+(h=c[b=(b+1)%256]))%256,c[b]=c[g],c[g]=h,i=c[(c[b]+c[g])%256],w+=String.fromCharCode(a.charCodeAt(d)^i);return w}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var Bg={print:4,modify:8,copy:16,"annot-forms":32};function Ti(e,a,r,s){this.v=1,this.r=2;var n=192;e.forEach(function(c){if(Bg.perm!==void 0)throw new Error("Invalid permission: "+c);n+=Bg[c]}),this.padding="(¿N^NuAd\0NVÿú\b..\0¶Ðh>/\f©þdSiz";var o=(a+this.padding).substr(0,32),i=(r+this.padding).substr(0,32);this.O=this.processOwnerPassword(o,i),this.P=-(1+(255^n)),this.encryptionKey=Nf(o+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(s)).substr(0,5),this.U=wf(this.encryptionKey,this.padding)}function Mi(e){if(/[^\u0000-\u00ff]/.test(e))throw new Error("Invalid PDF Name Object: "+e+", Only accept ASCII characters.");for(var a="",r=e.length,s=0;s<r;s++){var n=e.charCodeAt(s);n<33||n===35||n===37||n===40||n===41||n===47||n===60||n===62||n===91||n===93||n===123||n===125||n>126?a+="#"+("0"+n.toString(16)).slice(-2):a+=e[s]}return a}function Ug(e){if(ia(e)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var a={};this.subscribe=function(r,s,n){if(n=n||!1,typeof r!="string"||typeof s!="function"||typeof n!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");a.hasOwnProperty(r)||(a[r]={});var o=Math.random().toString(35);return a[r][o]=[s,!!n],o},this.unsubscribe=function(r){for(var s in a)if(a[s][r])return delete a[s][r],Object.keys(a[s]).length===0&&delete a[s],!0;return!1},this.publish=function(r){if(a.hasOwnProperty(r)){var s=Array.prototype.slice.call(arguments,1),n=[];for(var o in a[r]){var i=a[r][o];try{i[0].apply(e,s)}catch(c){zt.console&&ua.error("jsPDF PubSub Error",c.message,c)}i[1]&&n.push(o)}n.length&&n.forEach(this.unsubscribe)}},this.getTopics=function(){return a}}function um(e){if(!(this instanceof um))return new um(e);var a="opacity,stroke-opacity".split(",");for(var r in e)e.hasOwnProperty(r)&&a.indexOf(r)>=0&&(this[r]=e[r]);this.id="",this.objectNumber=-1}function fb(e,a){this.gState=e,this.matrix=a,this.id="",this.objectNumber=-1}function Ho(e,a,r,s,n){if(!(this instanceof Ho))return new Ho(e,a,r,s,n);this.type=e==="axial"?2:3,this.coords=a,this.colors=r,fb.call(this,s,n)}function Yi(e,a,r,s,n){if(!(this instanceof Yi))return new Yi(e,a,r,s,n);this.boundingBox=e,this.xStep=a,this.yStep=r,this.stream="",this.cloneIndex=0,fb.call(this,s,n)}function Rt(e){var a,r=typeof arguments[0]=="string"?arguments[0]:"p",s=arguments[1],n=arguments[2],o=arguments[3],i=[],c=1,d=16,p="S",h=null;ia(e=e||{})==="object"&&(r=e.orientation,s=e.unit||s,n=e.format||n,o=e.compress||e.compressPdf||o,(h=e.encryption||null)!==null&&(h.userPassword=h.userPassword||"",h.ownerPassword=h.ownerPassword||"",h.userPermissions=h.userPermissions||[]),c=typeof e.userUnit=="number"?Math.abs(e.userUnit):1,e.precision!==void 0&&(a=e.precision),e.floatPrecision!==void 0&&(d=e.floatPrecision),p=e.defaultPathOperation||"S"),i=e.filters||(o===!0?["FlateEncode"]:i),s=s||"mm",r=(""+(r||"P")).toLowerCase();var x=e.putOnlyUsedFonts||!1,b={},g={internal:{},__private__:{}};g.__private__.PubSub=Ug;var w="1.3",_=g.__private__.getPdfVersion=function(){return w};g.__private__.setPdfVersion=function(m){w=m};var O={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};g.__private__.getPageFormats=function(){return O};var y=g.__private__.getPageFormat=function(m){return O[m]};n=n||"a4";var v={COMPAT:"compat",ADVANCED:"advanced"},C=v.COMPAT;function W(){this.saveGraphicsState(),te(new V(k,0,0,-k,0,Pn()*k).toString()+" cm"),this.setFontSize(this.getFontSize()/k),p="n",C=v.ADVANCED}function se(){this.restoreGraphicsState(),p="S",C=v.COMPAT}var J=g.__private__.combineFontStyleAndFontWeight=function(m,P){if(m=="bold"&&P=="normal"||m=="bold"&&P==400||m=="normal"&&P=="italic"||m=="bold"&&P=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return P&&(m=P==400||P==="normal"?m==="italic"?"italic":"normal":P!=700&&P!=="bold"||m!=="normal"?(P==700?"bold":P)+""+m:"bold"),m};g.advancedAPI=function(m){var P=C===v.COMPAT;return P&&W.call(this),typeof m!="function"||(m(this),P&&se.call(this)),this},g.compatAPI=function(m){var P=C===v.ADVANCED;return P&&se.call(this),typeof m!="function"||(m(this),P&&W.call(this)),this},g.isAdvancedAPI=function(){return C===v.ADVANCED};var Y,K=function(m){if(C!==v.ADVANCED)throw new Error(m+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},fe=g.roundToPrecision=g.__private__.roundToPrecision=function(m,P){var re=a||P;if(isNaN(m)||isNaN(re))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return m.toFixed(re).replace(/0+$/,"")};Y=g.hpf=g.__private__.hpf=typeof d=="number"?function(m){if(isNaN(m))throw new Error("Invalid argument passed to jsPDF.hpf");return fe(m,d)}:d==="smart"?function(m){if(isNaN(m))throw new Error("Invalid argument passed to jsPDF.hpf");return fe(m,m>-1&&m<1?16:5)}:function(m){if(isNaN(m))throw new Error("Invalid argument passed to jsPDF.hpf");return fe(m,16)};var me=g.f2=g.__private__.f2=function(m){if(isNaN(m))throw new Error("Invalid argument passed to jsPDF.f2");return fe(m,2)},$=g.__private__.f3=function(m){if(isNaN(m))throw new Error("Invalid argument passed to jsPDF.f3");return fe(m,3)},L=g.scale=g.__private__.scale=function(m){if(isNaN(m))throw new Error("Invalid argument passed to jsPDF.scale");return C===v.COMPAT?m*k:C===v.ADVANCED?m:void 0},le=function(m){return C===v.COMPAT?Pn()-m:C===v.ADVANCED?m:void 0},R=function(m){return L(le(m))};g.__private__.setPrecision=g.setPrecision=function(m){typeof parseInt(m,10)=="number"&&(a=parseInt(m,10))};var we,ce="00000000000000000000000000000000",Ce=g.__private__.getFileId=function(){return ce},Z=g.__private__.setFileId=function(m){return ce=m!==void 0&&/^[a-fA-F0-9]{32}$/.test(m)?m.toUpperCase():ce.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),h!==null&&(ur=new Ti(h.userPermissions,h.userPassword,h.ownerPassword,ce)),ce};g.setFileId=function(m){return Z(m),this},g.getFileId=function(){return Ce()};var he=g.__private__.convertDateToPDFDate=function(m){var P=m.getTimezoneOffset(),re=P<0?"+":"-",pe=Math.floor(Math.abs(P/60)),Ee=Math.abs(P%60),We=[re,q(pe),"'",q(Ee),"'"].join("");return["D:",m.getFullYear(),q(m.getMonth()+1),q(m.getDate()),q(m.getHours()),q(m.getMinutes()),q(m.getSeconds()),We].join("")},ie=g.__private__.convertPDFDateToDate=function(m){var P=parseInt(m.substr(2,4),10),re=parseInt(m.substr(6,2),10)-1,pe=parseInt(m.substr(8,2),10),Ee=parseInt(m.substr(10,2),10),We=parseInt(m.substr(12,2),10),ct=parseInt(m.substr(14,2),10);return new Date(P,re,pe,Ee,We,ct,0)},Ue=g.__private__.setCreationDate=function(m){var P;if(m===void 0&&(m=new Date),m instanceof Date)P=he(m);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(m))throw new Error("Invalid argument passed to jsPDF.setCreationDate");P=m}return we=P},S=g.__private__.getCreationDate=function(m){var P=we;return m==="jsDate"&&(P=ie(we)),P};g.setCreationDate=function(m){return Ue(m),this},g.getCreationDate=function(m){return S(m)};var G,q=g.__private__.padd2=function(m){return("0"+parseInt(m)).slice(-2)},N=g.__private__.padd2Hex=function(m){return("00"+(m=m.toString())).substr(m.length)},U=0,T=[],B=[],oe=0,Ne=[],Be=[],Xe=!1,dt=B,ft=function(){U=0,oe=0,B=[],T=[],Ne=[],F=qt(),Ge=qt()};g.__private__.setCustomOutputDestination=function(m){Xe=!0,dt=m};var Me=function(m){Xe||(dt=m)};g.__private__.resetCustomOutputDestination=function(){Xe=!1,dt=B};var te=g.__private__.out=function(m){return m=m.toString(),oe+=m.length+1,dt.push(m),dt},Ct=g.__private__.write=function(m){return te(arguments.length===1?m.toString():Array.prototype.join.call(arguments," "))},ae=g.__private__.getArrayBuffer=function(m){for(var P=m.length,re=new ArrayBuffer(P),pe=new Uint8Array(re);P--;)pe[P]=m.charCodeAt(P);return re},xe=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];g.__private__.getStandardFonts=function(){return xe};var be=e.fontSize||16;g.__private__.setFontSize=g.setFontSize=function(m){return be=C===v.ADVANCED?m/k:m,this};var Te,Ae=g.__private__.getFontSize=g.getFontSize=function(){return C===v.COMPAT?be:be*k},tt=e.R2L||!1;g.__private__.setR2L=g.setR2L=function(m){return tt=m,this},g.__private__.getR2L=g.getR2L=function(){return tt};var rt,gt=g.__private__.setZoomMode=function(m){var P=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(m))Te=m;else if(isNaN(m)){if(P.indexOf(m)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+m+'" is not recognized.');Te=m}else Te=parseInt(m,10)};g.__private__.getZoomMode=function(){return Te};var st,Tt=g.__private__.setPageMode=function(m){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(m)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+m+'" is not recognized.');rt=m};g.__private__.getPageMode=function(){return rt};var ne=g.__private__.setLayoutMode=function(m){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(m)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+m+'" is not recognized.');st=m};g.__private__.getLayoutMode=function(){return st},g.__private__.setDisplayMode=g.setDisplayMode=function(m,P,re){return gt(m),ne(P),Tt(re),this};var Pe={title:"",subject:"",author:"",keywords:"",creator:""};g.__private__.getDocumentProperty=function(m){if(Object.keys(Pe).indexOf(m)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return Pe[m]},g.__private__.getDocumentProperties=function(){return Pe},g.__private__.setDocumentProperties=g.setProperties=g.setDocumentProperties=function(m){for(var P in Pe)Pe.hasOwnProperty(P)&&m[P]&&(Pe[P]=m[P]);return this},g.__private__.setDocumentProperty=function(m,P){if(Object.keys(Pe).indexOf(m)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return Pe[m]=P};var at,k,Qe,Fe,ut,je={},ht={},qe=[],lt={},de={},nt={},Nt={},A=null,ue=0,ke=[],Ve=new Ug(g),St=e.hotfixes||[],ot={},yt={},Dt=[],V=function m(P,re,pe,Ee,We,ct){if(!(this instanceof m))return new m(P,re,pe,Ee,We,ct);isNaN(P)&&(P=1),isNaN(re)&&(re=0),isNaN(pe)&&(pe=0),isNaN(Ee)&&(Ee=1),isNaN(We)&&(We=0),isNaN(ct)&&(ct=0),this._matrix=[P,re,pe,Ee,We,ct]};Object.defineProperty(V.prototype,"sx",{get:function(){return this._matrix[0]},set:function(m){this._matrix[0]=m}}),Object.defineProperty(V.prototype,"shy",{get:function(){return this._matrix[1]},set:function(m){this._matrix[1]=m}}),Object.defineProperty(V.prototype,"shx",{get:function(){return this._matrix[2]},set:function(m){this._matrix[2]=m}}),Object.defineProperty(V.prototype,"sy",{get:function(){return this._matrix[3]},set:function(m){this._matrix[3]=m}}),Object.defineProperty(V.prototype,"tx",{get:function(){return this._matrix[4]},set:function(m){this._matrix[4]=m}}),Object.defineProperty(V.prototype,"ty",{get:function(){return this._matrix[5]},set:function(m){this._matrix[5]=m}}),Object.defineProperty(V.prototype,"a",{get:function(){return this._matrix[0]},set:function(m){this._matrix[0]=m}}),Object.defineProperty(V.prototype,"b",{get:function(){return this._matrix[1]},set:function(m){this._matrix[1]=m}}),Object.defineProperty(V.prototype,"c",{get:function(){return this._matrix[2]},set:function(m){this._matrix[2]=m}}),Object.defineProperty(V.prototype,"d",{get:function(){return this._matrix[3]},set:function(m){this._matrix[3]=m}}),Object.defineProperty(V.prototype,"e",{get:function(){return this._matrix[4]},set:function(m){this._matrix[4]=m}}),Object.defineProperty(V.prototype,"f",{get:function(){return this._matrix[5]},set:function(m){this._matrix[5]=m}}),Object.defineProperty(V.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(V.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(V.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(V.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),V.prototype.join=function(m){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(Y).join(m)},V.prototype.multiply=function(m){var P=m.sx*this.sx+m.shy*this.shx,re=m.sx*this.shy+m.shy*this.sy,pe=m.shx*this.sx+m.sy*this.shx,Ee=m.shx*this.shy+m.sy*this.sy,We=m.tx*this.sx+m.ty*this.shx+this.tx,ct=m.tx*this.shy+m.ty*this.sy+this.ty;return new V(P,re,pe,Ee,We,ct)},V.prototype.decompose=function(){var m=this.sx,P=this.shy,re=this.shx,pe=this.sy,Ee=this.tx,We=this.ty,ct=Math.sqrt(m*m+P*P),At=(m/=ct)*re+(P/=ct)*pe;re-=m*At,pe-=P*At;var Mt=Math.sqrt(re*re+pe*pe);return At/=Mt,m*(pe/=Mt)<P*(re/=Mt)&&(m=-m,P=-P,At=-At,ct=-ct),{scale:new V(ct,0,0,Mt,0,0),translate:new V(1,0,0,1,Ee,We),rotate:new V(m,P,-P,m,0,0),skew:new V(1,0,At,1,0,0)}},V.prototype.toString=function(m){return this.join(" ")},V.prototype.inversed=function(){var m=this.sx,P=this.shy,re=this.shx,pe=this.sy,Ee=this.tx,We=this.ty,ct=1/(m*pe-P*re),At=pe*ct,Mt=-P*ct,Wt=-re*ct,Ut=m*ct;return new V(At,Mt,Wt,Ut,-At*Ee-Wt*We,-Mt*Ee-Ut*We)},V.prototype.applyToPoint=function(m){var P=m.x*this.sx+m.y*this.shx+this.tx,re=m.x*this.shy+m.y*this.sy+this.ty;return new fi(P,re)},V.prototype.applyToRectangle=function(m){var P=this.applyToPoint(m),re=this.applyToPoint(new fi(m.x+m.w,m.y+m.h));return new Fl(P.x,P.y,re.x-P.x,re.y-P.y)},V.prototype.clone=function(){var m=this.sx,P=this.shy,re=this.shx,pe=this.sy,Ee=this.tx,We=this.ty;return new V(m,P,re,pe,Ee,We)},g.Matrix=V;var He=g.matrixMult=function(m,P){return P.multiply(m)},ze=new V(1,0,0,1,0,0);g.unitMatrix=g.identityMatrix=ze;var vt=function(m,P){if(!de[m]){var re=(P instanceof Ho?"Sh":"P")+(Object.keys(lt).length+1).toString(10);P.id=re,de[m]=re,lt[re]=P,Ve.publish("addPattern",P)}};g.ShadingPattern=Ho,g.TilingPattern=Yi,g.addShadingPattern=function(m,P){return K("addShadingPattern()"),vt(m,P),this},g.beginTilingPattern=function(m){K("beginTilingPattern()"),bd(m.boundingBox[0],m.boundingBox[1],m.boundingBox[2]-m.boundingBox[0],m.boundingBox[3]-m.boundingBox[1],m.matrix)},g.endTilingPattern=function(m,P){K("endTilingPattern()"),P.stream=Be[G].join(`
`),vt(m,P),Ve.publish("endTilingPattern",P),Dt.pop().restore()};var xt=g.__private__.newObject=function(){var m=qt();return Jt(m,!0),m},qt=g.__private__.newObjectDeferred=function(){return U++,T[U]=function(){return oe},U},Jt=function(m,P){return P=typeof P=="boolean"&&P,T[m]=oe,P&&te(m+" 0 obj"),m},ma=g.__private__.newAdditionalObject=function(){var m={objId:qt(),content:""};return Ne.push(m),m},F=qt(),Ge=qt(),Re=g.__private__.decodeColorString=function(m){var P=m.split(" ");if(P.length!==2||P[1]!=="g"&&P[1]!=="G")P.length===5&&(P[4]==="k"||P[4]==="K")&&(P=[(1-P[0])*(1-P[3]),(1-P[1])*(1-P[3]),(1-P[2])*(1-P[3]),"r"]);else{var re=parseFloat(P[0]);P=[re,re,re,"r"]}for(var pe="#",Ee=0;Ee<3;Ee++)pe+=("0"+Math.floor(255*parseFloat(P[Ee])).toString(16)).slice(-2);return pe},bt=g.__private__.encodeColorString=function(m){var P;typeof m=="string"&&(m={ch1:m});var re=m.ch1,pe=m.ch2,Ee=m.ch3,We=m.ch4,ct=m.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof re=="string"&&re.charAt(0)!=="#"){var At=new hb(re);if(At.ok)re=At.toHex();else if(!/^\d*\.?\d*$/.test(re))throw new Error('Invalid color "'+re+'" passed to jsPDF.encodeColorString.')}if(typeof re=="string"&&/^#[0-9A-Fa-f]{3}$/.test(re)&&(re="#"+re[1]+re[1]+re[2]+re[2]+re[3]+re[3]),typeof re=="string"&&/^#[0-9A-Fa-f]{6}$/.test(re)){var Mt=parseInt(re.substr(1),16);re=Mt>>16&255,pe=Mt>>8&255,Ee=255&Mt}if(pe===void 0||We===void 0&&re===pe&&pe===Ee)if(typeof re=="string")P=re+" "+ct[0];else switch(m.precision){case 2:P=me(re/255)+" "+ct[0];break;case 3:default:P=$(re/255)+" "+ct[0]}else if(We===void 0||ia(We)==="object"){if(We&&!isNaN(We.a)&&We.a===0)return P=["1.","1.","1.",ct[1]].join(" ");if(typeof re=="string")P=[re,pe,Ee,ct[1]].join(" ");else switch(m.precision){case 2:P=[me(re/255),me(pe/255),me(Ee/255),ct[1]].join(" ");break;default:case 3:P=[$(re/255),$(pe/255),$(Ee/255),ct[1]].join(" ")}}else if(typeof re=="string")P=[re,pe,Ee,We,ct[2]].join(" ");else switch(m.precision){case 2:P=[me(re),me(pe),me(Ee),me(We),ct[2]].join(" ");break;case 3:default:P=[$(re),$(pe),$(Ee),$(We),ct[2]].join(" ")}return P},Ot=g.__private__.getFilters=function(){return i},Pt=g.__private__.putStream=function(m){var P=(m=m||{}).data||"",re=m.filters||Ot(),pe=m.alreadyAppliedFilters||[],Ee=m.addLength1||!1,We=P.length,ct=m.objectId,At=function(mr){return mr};if(h!==null&&ct===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");h!==null&&(At=ur.encryptor(ct,0));var Mt={};re===!0&&(re=["FlateEncode"]);var Wt=m.additionalKeyValues||[],Ut=(Mt=Rt.API.processDataByFilters!==void 0?Rt.API.processDataByFilters(P,re):{data:P,reverseChain:[]}).reverseChain+(Array.isArray(pe)?pe.join(" "):pe.toString());if(Mt.data.length!==0&&(Wt.push({key:"Length",value:Mt.data.length}),Ee===!0&&Wt.push({key:"Length1",value:We})),Ut.length!=0)if(Ut.split("/").length-1==1)Wt.push({key:"Filter",value:Ut});else{Wt.push({key:"Filter",value:"["+Ut+"]"});for(var Kt=0;Kt<Wt.length;Kt+=1)if(Wt[Kt].key==="DecodeParms"){for(var ka=[],Ea=0;Ea<Mt.reverseChain.split("/").length-1;Ea+=1)ka.push("null");ka.push(Wt[Kt].value),Wt[Kt].value="["+ka.join(" ")+"]"}}te("<<");for(var za=0;za<Wt.length;za++)te("/"+Wt[za].key+" "+Wt[za].value);te(">>"),Mt.data.length!==0&&(te("stream"),te(At(Mt.data)),te("endstream"))},pt=g.__private__.putPage=function(m){var P=m.number,re=m.data,pe=m.objId,Ee=m.contentsObjId;Jt(pe,!0),te("<</Type /Page"),te("/Parent "+m.rootDictionaryObjId+" 0 R"),te("/Resources "+m.resourceDictionaryObjId+" 0 R"),te("/MediaBox ["+parseFloat(Y(m.mediaBox.bottomLeftX))+" "+parseFloat(Y(m.mediaBox.bottomLeftY))+" "+Y(m.mediaBox.topRightX)+" "+Y(m.mediaBox.topRightY)+"]"),m.cropBox!==null&&te("/CropBox ["+Y(m.cropBox.bottomLeftX)+" "+Y(m.cropBox.bottomLeftY)+" "+Y(m.cropBox.topRightX)+" "+Y(m.cropBox.topRightY)+"]"),m.bleedBox!==null&&te("/BleedBox ["+Y(m.bleedBox.bottomLeftX)+" "+Y(m.bleedBox.bottomLeftY)+" "+Y(m.bleedBox.topRightX)+" "+Y(m.bleedBox.topRightY)+"]"),m.trimBox!==null&&te("/TrimBox ["+Y(m.trimBox.bottomLeftX)+" "+Y(m.trimBox.bottomLeftY)+" "+Y(m.trimBox.topRightX)+" "+Y(m.trimBox.topRightY)+"]"),m.artBox!==null&&te("/ArtBox ["+Y(m.artBox.bottomLeftX)+" "+Y(m.artBox.bottomLeftY)+" "+Y(m.artBox.topRightX)+" "+Y(m.artBox.topRightY)+"]"),typeof m.userUnit=="number"&&m.userUnit!==1&&te("/UserUnit "+m.userUnit),Ve.publish("putPage",{objId:pe,pageContext:ke[P],pageNumber:P,page:re}),te("/Contents "+Ee+" 0 R"),te(">>"),te("endobj");var We=re.join(`
`);return C===v.ADVANCED&&(We+=`
Q`),Jt(Ee,!0),Pt({data:We,filters:Ot(),objectId:Ee}),te("endobj"),pe},xa=g.__private__.putPages=function(){var m,P,re=[];for(m=1;m<=ue;m++)ke[m].objId=qt(),ke[m].contentsObjId=qt();for(m=1;m<=ue;m++)re.push(pt({number:m,data:Be[m],objId:ke[m].objId,contentsObjId:ke[m].contentsObjId,mediaBox:ke[m].mediaBox,cropBox:ke[m].cropBox,bleedBox:ke[m].bleedBox,trimBox:ke[m].trimBox,artBox:ke[m].artBox,userUnit:ke[m].userUnit,rootDictionaryObjId:F,resourceDictionaryObjId:Ge}));Jt(F,!0),te("<</Type /Pages");var pe="/Kids [";for(P=0;P<ue;P++)pe+=re[P]+" 0 R ";te(pe+"]"),te("/Count "+ue),te(">>"),te("endobj"),Ve.publish("postPutPages")},Pr=function(m){Ve.publish("putFont",{font:m,out:te,newObject:xt,putStream:Pt}),m.isAlreadyPutted!==!0&&(m.objectNumber=xt(),te("<<"),te("/Type /Font"),te("/BaseFont /"+Mi(m.postScriptName)),te("/Subtype /Type1"),typeof m.encoding=="string"&&te("/Encoding /"+m.encoding),te("/FirstChar 32"),te("/LastChar 255"),te(">>"),te("endobj"))},Q=function(){for(var m in je)je.hasOwnProperty(m)&&(x===!1||x===!0&&b.hasOwnProperty(m))&&Pr(je[m])},_e=function(m){m.objectNumber=xt();var P=[];P.push({key:"Type",value:"/XObject"}),P.push({key:"Subtype",value:"/Form"}),P.push({key:"BBox",value:"["+[Y(m.x),Y(m.y),Y(m.x+m.width),Y(m.y+m.height)].join(" ")+"]"}),P.push({key:"Matrix",value:"["+m.matrix.toString()+"]"});var re=m.pages[1].join(`
`);Pt({data:re,additionalKeyValues:P,objectId:m.objectNumber}),te("endobj")},Le=function(){for(var m in ot)ot.hasOwnProperty(m)&&_e(ot[m])},Je=function(m,P){var re,pe=[],Ee=1/(P-1);for(re=0;re<1;re+=Ee)pe.push(re);if(pe.push(1),m[0].offset!=0){var We={offset:0,color:m[0].color};m.unshift(We)}if(m[m.length-1].offset!=1){var ct={offset:1,color:m[m.length-1].color};m.push(ct)}for(var At="",Mt=0,Wt=0;Wt<pe.length;Wt++){for(re=pe[Wt];re>m[Mt+1].offset;)Mt++;var Ut=m[Mt].offset,Kt=(re-Ut)/(m[Mt+1].offset-Ut),ka=m[Mt].color,Ea=m[Mt+1].color;At+=N(Math.round((1-Kt)*ka[0]+Kt*Ea[0]).toString(16))+N(Math.round((1-Kt)*ka[1]+Kt*Ea[1]).toString(16))+N(Math.round((1-Kt)*ka[2]+Kt*Ea[2]).toString(16))}return At.trim()},Ye=function(m,P){P||(P=21);var re=xt(),pe=Je(m.colors,P),Ee=[];Ee.push({key:"FunctionType",value:"0"}),Ee.push({key:"Domain",value:"[0.0 1.0]"}),Ee.push({key:"Size",value:"["+P+"]"}),Ee.push({key:"BitsPerSample",value:"8"}),Ee.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Ee.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Pt({data:pe,additionalKeyValues:Ee,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:re}),te("endobj"),m.objectNumber=xt(),te("<< /ShadingType "+m.type),te("/ColorSpace /DeviceRGB");var We="/Coords ["+Y(parseFloat(m.coords[0]))+" "+Y(parseFloat(m.coords[1]))+" ";m.type===2?We+=Y(parseFloat(m.coords[2]))+" "+Y(parseFloat(m.coords[3])):We+=Y(parseFloat(m.coords[2]))+" "+Y(parseFloat(m.coords[3]))+" "+Y(parseFloat(m.coords[4]))+" "+Y(parseFloat(m.coords[5])),te(We+="]"),m.matrix&&te("/Matrix ["+m.matrix.toString()+"]"),te("/Function "+re+" 0 R"),te("/Extend [true true]"),te(">>"),te("endobj")},Lt=function(m,P){var re=qt(),pe=xt();P.push({resourcesOid:re,objectOid:pe}),m.objectNumber=pe;var Ee=[];Ee.push({key:"Type",value:"/Pattern"}),Ee.push({key:"PatternType",value:"1"}),Ee.push({key:"PaintType",value:"1"}),Ee.push({key:"TilingType",value:"1"}),Ee.push({key:"BBox",value:"["+m.boundingBox.map(Y).join(" ")+"]"}),Ee.push({key:"XStep",value:Y(m.xStep)}),Ee.push({key:"YStep",value:Y(m.yStep)}),Ee.push({key:"Resources",value:re+" 0 R"}),m.matrix&&Ee.push({key:"Matrix",value:"["+m.matrix.toString()+"]"}),Pt({data:m.stream,additionalKeyValues:Ee,objectId:m.objectNumber}),te("endobj")},Xt=function(m){var P;for(P in lt)lt.hasOwnProperty(P)&&(lt[P]instanceof Ho?Ye(lt[P]):lt[P]instanceof Yi&&Lt(lt[P],m))},sa=function(m){for(var P in m.objectNumber=xt(),te("<<"),m)switch(P){case"opacity":te("/ca "+me(m[P]));break;case"stroke-opacity":te("/CA "+me(m[P]))}te(">>"),te("endobj")},Lr=function(){var m;for(m in nt)nt.hasOwnProperty(m)&&sa(nt[m])},Zs=function(){for(var m in te("/XObject <<"),ot)ot.hasOwnProperty(m)&&ot[m].objectNumber>=0&&te("/"+m+" "+ot[m].objectNumber+" 0 R");Ve.publish("putXobjectDict"),te(">>")},vs=function(){ur.oid=xt(),te("<<"),te("/Filter /Standard"),te("/V "+ur.v),te("/R "+ur.r),te("/U <"+ur.toHexString(ur.U)+">"),te("/O <"+ur.toHexString(ur.O)+">"),te("/P "+ur.P),te(">>"),te("endobj")},_o=function(){for(var m in te("/Font <<"),je)je.hasOwnProperty(m)&&(x===!1||x===!0&&b.hasOwnProperty(m))&&te("/"+m+" "+je[m].objectNumber+" 0 R");te(">>")},Cl=function(){if(Object.keys(lt).length>0){for(var m in te("/Shading <<"),lt)lt.hasOwnProperty(m)&&lt[m]instanceof Ho&&lt[m].objectNumber>=0&&te("/"+m+" "+lt[m].objectNumber+" 0 R");Ve.publish("putShadingPatternDict"),te(">>")}},An=function(m){if(Object.keys(lt).length>0){for(var P in te("/Pattern <<"),lt)lt.hasOwnProperty(P)&&lt[P]instanceof g.TilingPattern&&lt[P].objectNumber>=0&&lt[P].objectNumber<m&&te("/"+P+" "+lt[P].objectNumber+" 0 R");Ve.publish("putTilingPatternDict"),te(">>")}},Al=function(){if(Object.keys(nt).length>0){var m;for(m in te("/ExtGState <<"),nt)nt.hasOwnProperty(m)&&nt[m].objectNumber>=0&&te("/"+m+" "+nt[m].objectNumber+" 0 R");Ve.publish("putGStateDict"),te(">>")}},Zt=function(m){Jt(m.resourcesOid,!0),te("<<"),te("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),_o(),Cl(),An(m.objectOid),Al(),Zs(),te(">>"),te("endobj")},li=function(){var m=[];Q(),Lr(),Le(),Xt(m),Ve.publish("putResources"),m.forEach(Zt),Zt({resourcesOid:Ge,objectOid:Number.MAX_SAFE_INTEGER}),Ve.publish("postPutResources")},Eo=function(){Ve.publish("putAdditionalObjects");for(var m=0;m<Ne.length;m++){var P=Ne[m];Jt(P.objId,!0),te(P.content),te("endobj")}Ve.publish("postPutAdditionalObjects")},od=function(m){ht[m.fontName]=ht[m.fontName]||{},ht[m.fontName][m.fontStyle]=m.id},_l=function(m,P,re,pe,Ee){var We={id:"F"+(Object.keys(je).length+1).toString(10),postScriptName:m,fontName:P,fontStyle:re,encoding:pe,isStandardFont:Ee||!1,metadata:{}};return Ve.publish("addFont",{font:We,instance:this}),je[We.id]=We,od(We),We.id},Fm=function(m){for(var P=0,re=xe.length;P<re;P++){var pe=_l.call(this,m[P][0],m[P][1],m[P][2],xe[P][3],!0);x===!1&&(b[pe]=!0);var Ee=m[P][0].split("-");od({id:pe,fontName:Ee[0],fontStyle:Ee[1]||""})}Ve.publish("addFonts",{fonts:je,dictionary:ht})},bs=function(m){return m.foo=function(){try{return m.apply(this,arguments)}catch(pe){var P=pe.stack||"";~P.indexOf(" at ")&&(P=P.split(" at ")[1]);var re="Error in function "+P.split(`
`)[0].split("<")[0]+": "+pe.message;if(!zt.console)throw new Error(re);zt.console.error(re,pe),zt.alert&&alert(re)}},m.foo.bar=m,m.foo},ci=function(m,P){var re,pe,Ee,We,ct,At,Mt,Wt,Ut;if(Ee=(P=P||{}).sourceEncoding||"Unicode",ct=P.outputEncoding,(P.autoencode||ct)&&je[at].metadata&&je[at].metadata[Ee]&&je[at].metadata[Ee].encoding&&(We=je[at].metadata[Ee].encoding,!ct&&je[at].encoding&&(ct=je[at].encoding),!ct&&We.codePages&&(ct=We.codePages[0]),typeof ct=="string"&&(ct=We[ct]),ct)){for(Mt=!1,At=[],re=0,pe=m.length;re<pe;re++)(Wt=ct[m.charCodeAt(re)])?At.push(String.fromCharCode(Wt)):At.push(m[re]),At[re].charCodeAt(0)>>8&&(Mt=!0);m=At.join("")}for(re=m.length;Mt===void 0&&re!==0;)m.charCodeAt(re-1)>>8&&(Mt=!0),re--;if(!Mt)return m;for(At=P.noBOM?[]:[254,255],re=0,pe=m.length;re<pe;re++){if((Ut=(Wt=m.charCodeAt(re))>>8)>>8)throw new Error("Character at position "+re+" of string '"+m+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");At.push(Ut),At.push(Wt-(Ut<<8))}return String.fromCharCode.apply(void 0,At)},Ir=g.__private__.pdfEscape=g.pdfEscape=function(m,P){return ci(m,P).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},El=g.__private__.beginPage=function(m){Be[++ue]=[],ke[ue]={objId:0,contentsObjId:0,userUnit:Number(c),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(m[0]),topRightY:Number(m[1])}},ld(ue),Me(Be[G])},id=function(m,P){var re,pe,Ee;switch(r=P||r,typeof m=="string"&&(re=y(m.toLowerCase()),Array.isArray(re)&&(pe=re[0],Ee=re[1])),Array.isArray(m)&&(pe=m[0]*k,Ee=m[1]*k),isNaN(pe)&&(pe=n[0],Ee=n[1]),(pe>14400||Ee>14400)&&(ua.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),pe=Math.min(14400,pe),Ee=Math.min(14400,Ee)),n=[pe,Ee],r.substr(0,1)){case"l":Ee>pe&&(n=[Ee,pe]);break;case"p":pe>Ee&&(n=[Ee,pe])}El(n),pd(Dl),te(ys),Tl!==0&&te(Tl+" J"),Ml!==0&&te(Ml+" j"),Ve.publish("addPage",{pageNumber:ue})},Rm=function(m){m>0&&m<=ue&&(Be.splice(m,1),ke.splice(m,1),ue--,G>ue&&(G=ue),this.setPage(G))},ld=function(m){m>0&&m<=ue&&(G=m)},qm=g.__private__.getNumberOfPages=g.getNumberOfPages=function(){return Be.length-1},cd=function(m,P,re){var pe,Ee=void 0;return re=re||{},m=m!==void 0?m:je[at].fontName,P=P!==void 0?P:je[at].fontStyle,pe=m.toLowerCase(),ht[pe]!==void 0&&ht[pe][P]!==void 0?Ee=ht[pe][P]:ht[m]!==void 0&&ht[m][P]!==void 0?Ee=ht[m][P]:re.disableWarning===!1&&ua.warn("Unable to look up font label for font '"+m+"', '"+P+"'. Refer to getFontList() for available fonts."),Ee||re.noFallback||(Ee=ht.times[P])==null&&(Ee=ht.times.normal),Ee},zm=g.__private__.putInfo=function(){var m=xt(),P=function(pe){return pe};for(var re in h!==null&&(P=ur.encryptor(m,0)),te("<<"),te("/Producer ("+Ir(P("jsPDF "+Rt.version))+")"),Pe)Pe.hasOwnProperty(re)&&Pe[re]&&te("/"+re.substr(0,1).toUpperCase()+re.substr(1)+" ("+Ir(P(Pe[re]))+")");te("/CreationDate ("+Ir(P(we))+")"),te(">>"),te("endobj")},Pl=g.__private__.putCatalog=function(m){var P=(m=m||{}).rootDictionaryObjId||F;switch(xt(),te("<<"),te("/Type /Catalog"),te("/Pages "+P+" 0 R"),Te||(Te="fullwidth"),Te){case"fullwidth":te("/OpenAction [3 0 R /FitH null]");break;case"fullheight":te("/OpenAction [3 0 R /FitV null]");break;case"fullpage":te("/OpenAction [3 0 R /Fit]");break;case"original":te("/OpenAction [3 0 R /XYZ null null 1]");break;default:var re=""+Te;re.substr(re.length-1)==="%"&&(Te=parseInt(Te)/100),typeof Te=="number"&&te("/OpenAction [3 0 R /XYZ null null "+me(Te)+"]")}switch(st||(st="continuous"),st){case"continuous":te("/PageLayout /OneColumn");break;case"single":te("/PageLayout /SinglePage");break;case"two":case"twoleft":te("/PageLayout /TwoColumnLeft");break;case"tworight":te("/PageLayout /TwoColumnRight")}rt&&te("/PageMode /"+rt),Ve.publish("putCatalog"),te(">>"),te("endobj")},$m=g.__private__.putTrailer=function(){te("trailer"),te("<<"),te("/Size "+(U+1)),te("/Root "+U+" 0 R"),te("/Info "+(U-1)+" 0 R"),h!==null&&te("/Encrypt "+ur.oid+" 0 R"),te("/ID [ <"+ce+"> <"+ce+"> ]"),te(">>")},Bm=g.__private__.putHeader=function(){te("%PDF-"+w),te("%ºß¬à")},Um=g.__private__.putXRef=function(){var m="0000000000";te("xref"),te("0 "+(U+1)),te("0000000000 65535 f ");for(var P=1;P<=U;P++)typeof T[P]=="function"?te((m+T[P]()).slice(-10)+" 00000 n "):T[P]!==void 0?te((m+T[P]).slice(-10)+" 00000 n "):te("0000000000 00000 n ")},en=g.__private__.buildDocument=function(){ft(),Me(B),Ve.publish("buildDocument"),Bm(),xa(),Eo(),li(),h!==null&&vs(),zm(),Pl();var m=oe;return Um(),$m(),te("startxref"),te(""+m),te("%%EOF"),Me(Be[G]),B.join(`
`)},di=g.__private__.getBlob=function(m){return new Blob([ae(m)],{type:"application/pdf"})},ui=g.output=g.__private__.output=bs(function(m,P){switch(typeof(P=P||{})=="string"?P={filename:P}:P.filename=P.filename||"generated.pdf",m){case void 0:return en();case"save":g.save(P.filename);break;case"arraybuffer":return ae(en());case"blob":return di(en());case"bloburi":case"bloburl":if(zt.URL!==void 0&&typeof zt.URL.createObjectURL=="function")return zt.URL&&zt.URL.createObjectURL(di(en()))||void 0;ua.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var re="",pe=en();try{re=jf(pe)}catch{re=jf(unescape(encodeURIComponent(pe)))}return"data:application/pdf;filename="+P.filename+";base64,"+re;case"pdfobjectnewwindow":if(Object.prototype.toString.call(zt)==="[object Window]"){var Ee="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",We=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';P.pdfObjectUrl&&(Ee=P.pdfObjectUrl,We="");var ct='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+Ee+'"'+We+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(P)+");<\/script></body></html>",At=zt.open();return At!==null&&At.document.write(ct),At}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(zt)==="[object Window]"){var Mt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(P.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+P.filename+'" width="500px" height="400px" /></body></html>',Wt=zt.open();if(Wt!==null){Wt.document.write(Mt);var Ut=this;Wt.document.documentElement.querySelector("#pdfViewer").onload=function(){Wt.document.title=P.filename,Wt.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(Ut.output("bloburl"))}}return Wt}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(zt)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var Kt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",P)+'"></iframe></body></html>',ka=zt.open();if(ka!==null&&(ka.document.write(Kt),ka.document.title=P.filename),ka||typeof safari>"u")return ka;break;case"datauri":case"dataurl":return zt.document.location.href=this.output("datauristring",P);default:return null}}),dd=function(m){return Array.isArray(St)===!0&&St.indexOf(m)>-1};switch(s){case"pt":k=1;break;case"mm":k=72/25.4;break;case"cm":k=72/2.54;break;case"in":k=72;break;case"px":k=dd("px_scaling")==1?.75:96/72;break;case"pc":case"em":k=12;break;case"ex":k=6;break;default:if(typeof s!="number")throw new Error("Invalid unit: "+s);k=s}var ur=null;Ue(),Z();var Vm=function(m){return h!==null?ur.encryptor(m,0):function(P){return P}},ud=g.__private__.getPageInfo=g.getPageInfo=function(m){if(isNaN(m)||m%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:ke[m].objId,pageNumber:m,pageContext:ke[m]}},Bt=g.__private__.getPageInfoByObjId=function(m){if(isNaN(m)||m%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var P in ke)if(ke[P].objId===m)break;return ud(P)},Hm=g.__private__.getCurrentPageInfo=g.getCurrentPageInfo=function(){return{objId:ke[G].objId,pageNumber:G,pageContext:ke[G]}};g.addPage=function(){return id.apply(this,arguments),this},g.setPage=function(){return ld.apply(this,arguments),Me.call(this,Be[G]),this},g.insertPage=function(m){return this.addPage(),this.movePage(G,m),this},g.movePage=function(m,P){var re,pe;if(m>P){re=Be[m],pe=ke[m];for(var Ee=m;Ee>P;Ee--)Be[Ee]=Be[Ee-1],ke[Ee]=ke[Ee-1];Be[P]=re,ke[P]=pe,this.setPage(P)}else if(m<P){re=Be[m],pe=ke[m];for(var We=m;We<P;We++)Be[We]=Be[We+1],ke[We]=ke[We+1];Be[P]=re,ke[P]=pe,this.setPage(P)}return this},g.deletePage=function(){return Rm.apply(this,arguments),this},g.__private__.text=g.text=function(m,P,re,pe,Ee){var We,ct,At,Mt,Wt,Ut,Kt,ka,Ea,za=(pe=pe||{}).scope||this;if(typeof m=="number"&&typeof P=="number"&&(typeof re=="string"||Array.isArray(re))){var mr=re;re=P,P=m,m=mr}if(arguments[3]instanceof V?(K("The transform parameter of text() with a Matrix value"),Ea=Ee):(At=arguments[4],Mt=arguments[5],ia(Kt=arguments[3])==="object"&&Kt!==null||(typeof At=="string"&&(Mt=At,At=null),typeof Kt=="string"&&(Mt=Kt,Kt=null),typeof Kt=="number"&&(At=Kt,Kt=null),pe={flags:Kt,angle:At,align:Mt})),isNaN(P)||isNaN(re)||m==null)throw new Error("Invalid arguments passed to jsPDF.text");if(m.length===0)return za;var Xa="",js=!1,Vr=typeof pe.lineHeightFactor=="number"?pe.lineHeightFactor:Lo,$s=za.internal.scaleFactor;function yd(ha){return ha=ha.split("	").join(Array(pe.TabLen||9).join(" ")),Ir(ha,Kt)}function $l(ha){for(var pa,Oa=ha.concat(),Ha=[],nn=Oa.length;nn--;)typeof(pa=Oa.shift())=="string"?Ha.push(pa):Array.isArray(ha)&&(pa.length===1||pa[1]===void 0&&pa[2]===void 0)?Ha.push(pa[0]):Ha.push([pa[0],pa[1],pa[2]]);return Ha}function Bl(ha,pa){var Oa;if(typeof ha=="string")Oa=pa(ha)[0];else if(Array.isArray(ha)){for(var Ha,nn,Yl=ha.concat(),Ci=[],kd=Yl.length;kd--;)typeof(Ha=Yl.shift())=="string"?Ci.push(pa(Ha)[0]):Array.isArray(Ha)&&typeof Ha[0]=="string"&&(nn=pa(Ha[0],Ha[1],Ha[2]),Ci.push([nn[0],nn[1],nn[2]]));Oa=Ci}return Oa}var gi=!1,Ul=!0;if(typeof m=="string")gi=!0;else if(Array.isArray(m)){var Vl=m.concat();ct=[];for(var vi,sr=Vl.length;sr--;)(typeof(vi=Vl.shift())!="string"||Array.isArray(vi)&&typeof vi[0]!="string")&&(Ul=!1);gi=Ul}if(gi===!1)throw new Error('Type of text must be string or Array. "'+m+'" is not recognized.');typeof m=="string"&&(m=m.match(/[\r?\n]/)?m.split(/\r\n|\r|\n/g):[m]);var bi=be/za.internal.scaleFactor,yi=bi*(Vr-1);switch(pe.baseline){case"bottom":re-=yi;break;case"top":re+=bi-yi;break;case"hanging":re+=bi-2*yi;break;case"middle":re+=bi/2-yi}if((Ut=pe.maxWidth||0)>0&&(typeof m=="string"?m=za.splitTextToSize(m,Ut):Object.prototype.toString.call(m)==="[object Array]"&&(m=m.reduce(function(ha,pa){return ha.concat(za.splitTextToSize(pa,Ut))},[]))),We={text:m,x:P,y:re,options:pe,mutex:{pdfEscape:Ir,activeFontKey:at,fonts:je,activeFontSize:be}},Ve.publish("preProcessText",We),m=We.text,At=(pe=We.options).angle,!(Ea instanceof V)&&At&&typeof At=="number"){At*=Math.PI/180,pe.rotationDirection===0&&(At=-At),C===v.ADVANCED&&(At=-At);var ji=Math.cos(At),Hl=Math.sin(At);Ea=new V(ji,Hl,-Hl,ji,0,0)}else At&&At instanceof V&&(Ea=At);C!==v.ADVANCED||Ea||(Ea=ze),(Wt=pe.charSpace||pi)!==void 0&&(Xa+=Y(L(Wt))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(ka=pe.horizontalScale)!==void 0&&(Xa+=Y(100*ka)+` Tz
`),pe.lang;var Dr=-1,th=pe.renderingMode!==void 0?pe.renderingMode:pe.stroke,Wl=za.internal.getCurrentPageInfo().pageContext;switch(th){case 0:case!1:case"fill":Dr=0;break;case 1:case!0:case"stroke":Dr=1;break;case 2:case"fillThenStroke":Dr=2;break;case 3:case"invisible":Dr=3;break;case 4:case"fillAndAddForClipping":Dr=4;break;case 5:case"strokeAndAddPathForClipping":Dr=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Dr=6;break;case 7:case"addToPathForClipping":Dr=7}var jd=Wl.usedRenderingMode!==void 0?Wl.usedRenderingMode:-1;Dr!==-1?Xa+=Dr+` Tr
`:jd!==-1&&(Xa+=`0 Tr
`),Dr!==-1&&(Wl.usedRenderingMode=Dr),Mt=pe.align||"left";var as,Ni=be*Vr,Nd=za.internal.pageSize.getWidth(),wd=je[at];Wt=pe.charSpace||pi,Ut=pe.maxWidth||0,Kt=Object.assign({autoencode:!0,noBOM:!0},pe.flags);var Ln=[],Oo=function(ha){return za.getStringUnitWidth(ha,{font:wd,charSpace:Wt,fontSize:be,doKerning:!1})*be/$s};if(Object.prototype.toString.call(m)==="[object Array]"){var Or;ct=$l(m),Mt!=="left"&&(as=ct.map(Oo));var Nr,In=0;if(Mt==="right"){P-=as[0],m=[],sr=ct.length;for(var an=0;an<sr;an++)an===0?(Nr=zs(P),Or=tn(re)):(Nr=L(In-as[an]),Or=-Ni),m.push([ct[an],Nr,Or]),In=as[an]}else if(Mt==="center"){P-=as[0]/2,m=[],sr=ct.length;for(var rn=0;rn<sr;rn++)rn===0?(Nr=zs(P),Or=tn(re)):(Nr=L((In-as[rn])/2),Or=-Ni),m.push([ct[rn],Nr,Or]),In=as[rn]}else if(Mt==="left"){m=[],sr=ct.length;for(var wi=0;wi<sr;wi++)m.push(ct[wi])}else if(Mt==="justify"&&wd.encoding==="Identity-H"){m=[],sr=ct.length,Ut=Ut!==0?Ut:Nd;for(var sn=0,Da=0;Da<sr;Da++)if(Or=Da===0?tn(re):-Ni,Nr=Da===0?zs(P):sn,Da<sr-1){var Gl=L((Ut-as[Da])/(ct[Da].split(" ").length-1)),wr=ct[Da].split(" ");m.push([wr[0]+" ",Nr,Or]),sn=0;for(var rs=1;rs<wr.length;rs++){var Si=(Oo(wr[rs-1]+" "+wr[rs])-Oo(wr[rs]))*$s+Gl;rs==wr.length-1?m.push([wr[rs],Si,0]):m.push([wr[rs]+" ",Si,0]),sn-=Si}}else m.push([ct[Da],Nr,Or]);m.push(["",sn,0])}else{if(Mt!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(m=[],sr=ct.length,Ut=Ut!==0?Ut:Nd,Da=0;Da<sr;Da++)Or=Da===0?tn(re):-Ni,Nr=Da===0?zs(P):0,Da<sr-1?Ln.push(Y(L((Ut-as[Da])/(ct[Da].split(" ").length-1)))):Ln.push(0),m.push([ct[Da],Nr,Or])}}var Sd=typeof pe.R2L=="boolean"?pe.R2L:tt;Sd===!0&&(m=Bl(m,function(ha,pa,Oa){return[ha.split("").reverse().join(""),pa,Oa]})),We={text:m,x:P,y:re,options:pe,mutex:{pdfEscape:Ir,activeFontKey:at,fonts:je,activeFontSize:be}},Ve.publish("postProcessText",We),m=We.text,js=We.mutex.isHex||!1;var Jl=je[at].encoding;Jl!=="WinAnsiEncoding"&&Jl!=="StandardEncoding"||(m=Bl(m,function(ha,pa,Oa){return[yd(ha),pa,Oa]})),ct=$l(m),m=[];for(var To,Mo,Dn,Fo=0,ki=1,Ro=Array.isArray(ct[0])?ki:Fo,On="",Ql=function(ha,pa,Oa){var Ha="";return Oa instanceof V?(Oa=typeof pe.angle=="number"?He(Oa,new V(1,0,0,1,ha,pa)):He(new V(1,0,0,1,ha,pa),Oa),C===v.ADVANCED&&(Oa=He(new V(1,0,0,-1,0,0),Oa)),Ha=Oa.join(" ")+` Tm
`):Ha=Y(ha)+" "+Y(pa)+` Td
`,Ha},ss=0;ss<ct.length;ss++){switch(On="",Ro){case ki:Dn=(js?"<":"(")+ct[ss][0]+(js?">":")"),To=parseFloat(ct[ss][1]),Mo=parseFloat(ct[ss][2]);break;case Fo:Dn=(js?"<":"(")+ct[ss]+(js?">":")"),To=zs(P),Mo=tn(re)}Ln!==void 0&&Ln[ss]!==void 0&&(On=Ln[ss]+` Tw
`),ss===0?m.push(On+Ql(To,Mo,Ea)+Dn):Ro===Fo?m.push(On+Dn):Ro===ki&&m.push(On+Ql(To,Mo,Ea)+Dn)}m=Ro===Fo?m.join(` Tj
T* `):m.join(` Tj
`),m+=` Tj
`;var ns=`BT
/`;return ns+=at+" "+be+` Tf
`,ns+=Y(be*Vr)+` TL
`,ns+=Io+`
`,ns+=Xa,ns+=m,te(ns+="ET"),b[at]=!0,za};var Wm=g.__private__.clip=g.clip=function(m){return te(m==="evenodd"?"W*":"W"),this};g.clipEvenOdd=function(){return Wm("evenodd")},g.__private__.discardPath=g.discardPath=function(){return te("n"),this};var qs=g.__private__.isValidStyle=function(m){var P=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(m)!==-1&&(P=!0),P};g.__private__.setDefaultPathOperation=g.setDefaultPathOperation=function(m){return qs(m)&&(p=m),this};var md=g.__private__.getStyle=g.getStyle=function(m){var P=p;switch(m){case"D":case"S":P="S";break;case"F":P="f";break;case"FD":case"DF":P="B";break;case"f":case"f*":case"B":case"B*":P=m}return P},hd=g.close=function(){return te("h"),this};g.stroke=function(){return te("S"),this},g.fill=function(m){return mi("f",m),this},g.fillEvenOdd=function(m){return mi("f*",m),this},g.fillStroke=function(m){return mi("B",m),this},g.fillStrokeEvenOdd=function(m){return mi("B*",m),this};var mi=function(m,P){ia(P)==="object"?Jm(P,m):te(m)},Ll=function(m){m===null||C===v.ADVANCED&&m===void 0||(m=md(m),te(m))};function Gm(m,P,re,pe,Ee){var We=new Yi(P||this.boundingBox,re||this.xStep,pe||this.yStep,this.gState,Ee||this.matrix);We.stream=this.stream;var ct=m+"$$"+this.cloneIndex+++"$$";return vt(ct,We),We}var Jm=function(m,P){var re=de[m.key],pe=lt[re];if(pe instanceof Ho)te("q"),te(Qm(P)),pe.gState&&g.setGState(pe.gState),te(m.matrix.toString()+" cm"),te("/"+re+" sh"),te("Q");else if(pe instanceof Yi){var Ee=new V(1,0,0,-1,0,Pn());m.matrix&&(Ee=Ee.multiply(m.matrix||ze),re=Gm.call(pe,m.key,m.boundingBox,m.xStep,m.yStep,Ee).id),te("q"),te("/Pattern cs"),te("/"+re+" scn"),pe.gState&&g.setGState(pe.gState),te(P),te("Q")}},Qm=function(m){switch(m){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},Il=g.moveTo=function(m,P){return te(Y(L(m))+" "+Y(R(P))+" m"),this},Po=g.lineTo=function(m,P){return te(Y(L(m))+" "+Y(R(P))+" l"),this},_n=g.curveTo=function(m,P,re,pe,Ee,We){return te([Y(L(m)),Y(R(P)),Y(L(re)),Y(R(pe)),Y(L(Ee)),Y(R(We)),"c"].join(" ")),this};g.__private__.line=g.line=function(m,P,re,pe,Ee){if(isNaN(m)||isNaN(P)||isNaN(re)||isNaN(pe)||!qs(Ee))throw new Error("Invalid arguments passed to jsPDF.line");return C===v.COMPAT?this.lines([[re-m,pe-P]],m,P,[1,1],Ee||"S"):this.lines([[re-m,pe-P]],m,P,[1,1]).stroke()},g.__private__.lines=g.lines=function(m,P,re,pe,Ee,We){var ct,At,Mt,Wt,Ut,Kt,ka,Ea,za,mr,Xa,js;if(typeof m=="number"&&(js=re,re=P,P=m,m=js),pe=pe||[1,1],We=We||!1,isNaN(P)||isNaN(re)||!Array.isArray(m)||!Array.isArray(pe)||!qs(Ee)||typeof We!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Il(P,re),ct=pe[0],At=pe[1],Wt=m.length,mr=P,Xa=re,Mt=0;Mt<Wt;Mt++)(Ut=m[Mt]).length===2?(mr=Ut[0]*ct+mr,Xa=Ut[1]*At+Xa,Po(mr,Xa)):(Kt=Ut[0]*ct+mr,ka=Ut[1]*At+Xa,Ea=Ut[2]*ct+mr,za=Ut[3]*At+Xa,mr=Ut[4]*ct+mr,Xa=Ut[5]*At+Xa,_n(Kt,ka,Ea,za,mr,Xa));return We&&hd(),Ll(Ee),this},g.path=function(m){for(var P=0;P<m.length;P++){var re=m[P],pe=re.c;switch(re.op){case"m":Il(pe[0],pe[1]);break;case"l":Po(pe[0],pe[1]);break;case"c":_n.apply(this,pe);break;case"h":hd()}}return this},g.__private__.rect=g.rect=function(m,P,re,pe,Ee){if(isNaN(m)||isNaN(P)||isNaN(re)||isNaN(pe)||!qs(Ee))throw new Error("Invalid arguments passed to jsPDF.rect");return C===v.COMPAT&&(pe=-pe),te([Y(L(m)),Y(R(P)),Y(L(re)),Y(L(pe)),"re"].join(" ")),Ll(Ee),this},g.__private__.triangle=g.triangle=function(m,P,re,pe,Ee,We,ct){if(isNaN(m)||isNaN(P)||isNaN(re)||isNaN(pe)||isNaN(Ee)||isNaN(We)||!qs(ct))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[re-m,pe-P],[Ee-re,We-pe],[m-Ee,P-We]],m,P,[1,1],ct,!0),this},g.__private__.roundedRect=g.roundedRect=function(m,P,re,pe,Ee,We,ct){if(isNaN(m)||isNaN(P)||isNaN(re)||isNaN(pe)||isNaN(Ee)||isNaN(We)||!qs(ct))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var At=4/3*(Math.SQRT2-1);return Ee=Math.min(Ee,.5*re),We=Math.min(We,.5*pe),this.lines([[re-2*Ee,0],[Ee*At,0,Ee,We-We*At,Ee,We],[0,pe-2*We],[0,We*At,-Ee*At,We,-Ee,We],[2*Ee-re,0],[-Ee*At,0,-Ee,-We*At,-Ee,-We],[0,2*We-pe],[0,-We*At,Ee*At,-We,Ee,-We]],m+Ee,P,[1,1],ct,!0),this},g.__private__.ellipse=g.ellipse=function(m,P,re,pe,Ee){if(isNaN(m)||isNaN(P)||isNaN(re)||isNaN(pe)||!qs(Ee))throw new Error("Invalid arguments passed to jsPDF.ellipse");var We=4/3*(Math.SQRT2-1)*re,ct=4/3*(Math.SQRT2-1)*pe;return Il(m+re,P),_n(m+re,P-ct,m+We,P-pe,m,P-pe),_n(m-We,P-pe,m-re,P-ct,m-re,P),_n(m-re,P+ct,m-We,P+pe,m,P+pe),_n(m+We,P+pe,m+re,P+ct,m+re,P),Ll(Ee),this},g.__private__.circle=g.circle=function(m,P,re,pe){if(isNaN(m)||isNaN(P)||isNaN(re)||!qs(pe))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(m,P,re,re,pe)},g.setFont=function(m,P,re){return re&&(P=J(P,re)),at=cd(m,P,{disableWarning:!1}),this};var Ym=g.__private__.getFont=g.getFont=function(){return je[cd.apply(g,arguments)]};g.__private__.getFontList=g.getFontList=function(){var m,P,re={};for(m in ht)if(ht.hasOwnProperty(m))for(P in re[m]=[],ht[m])ht[m].hasOwnProperty(P)&&re[m].push(P);return re},g.addFont=function(m,P,re,pe,Ee){var We=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&We.indexOf(arguments[3])!==-1?Ee=arguments[3]:arguments[3]&&We.indexOf(arguments[3])==-1&&(re=J(re,pe)),Ee=Ee||"Identity-H",_l.call(this,m,P,re,Ee)};var Lo,Dl=e.lineWidth||.200025,hi=g.__private__.getLineWidth=g.getLineWidth=function(){return Dl},pd=g.__private__.setLineWidth=g.setLineWidth=function(m){return Dl=m,te(Y(L(m))+" w"),this};g.__private__.setLineDash=Rt.API.setLineDash=Rt.API.setLineDashPattern=function(m,P){if(m=m||[],P=P||0,isNaN(P)||!Array.isArray(m))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return m=m.map(function(re){return Y(L(re))}).join(" "),P=Y(L(P)),te("["+m+"] "+P+" d"),this};var fd=g.__private__.getLineHeight=g.getLineHeight=function(){return be*Lo};g.__private__.getLineHeight=g.getLineHeight=function(){return be*Lo};var xd=g.__private__.setLineHeightFactor=g.setLineHeightFactor=function(m){return typeof(m=m||1.15)=="number"&&(Lo=m),this},gd=g.__private__.getLineHeightFactor=g.getLineHeightFactor=function(){return Lo};xd(e.lineHeight);var zs=g.__private__.getHorizontalCoordinate=function(m){return L(m)},tn=g.__private__.getVerticalCoordinate=function(m){return C===v.ADVANCED?m:ke[G].mediaBox.topRightY-ke[G].mediaBox.bottomLeftY-L(m)},Xm=g.__private__.getHorizontalCoordinateString=g.getHorizontalCoordinateString=function(m){return Y(zs(m))},En=g.__private__.getVerticalCoordinateString=g.getVerticalCoordinateString=function(m){return Y(tn(m))},ys=e.strokeColor||"0 G";g.__private__.getStrokeColor=g.getDrawColor=function(){return Re(ys)},g.__private__.setStrokeColor=g.setDrawColor=function(m,P,re,pe){return ys=bt({ch1:m,ch2:P,ch3:re,ch4:pe,pdfColorType:"draw",precision:2}),te(ys),this};var Ol=e.fillColor||"0 g";g.__private__.getFillColor=g.getFillColor=function(){return Re(Ol)},g.__private__.setFillColor=g.setFillColor=function(m,P,re,pe){return Ol=bt({ch1:m,ch2:P,ch3:re,ch4:pe,pdfColorType:"fill",precision:2}),te(Ol),this};var Io=e.textColor||"0 g",Km=g.__private__.getTextColor=g.getTextColor=function(){return Re(Io)};g.__private__.setTextColor=g.setTextColor=function(m,P,re,pe){return Io=bt({ch1:m,ch2:P,ch3:re,ch4:pe,pdfColorType:"text",precision:3}),this};var pi=e.charSpace,Zm=g.__private__.getCharSpace=g.getCharSpace=function(){return parseFloat(pi||0)};g.__private__.setCharSpace=g.setCharSpace=function(m){if(isNaN(m))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return pi=m,this};var Tl=0;g.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},g.__private__.setLineCap=g.setLineCap=function(m){var P=g.CapJoinStyles[m];if(P===void 0)throw new Error("Line cap style of '"+m+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Tl=P,te(P+" J"),this};var Ml=0;g.__private__.setLineJoin=g.setLineJoin=function(m){var P=g.CapJoinStyles[m];if(P===void 0)throw new Error("Line join style of '"+m+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Ml=P,te(P+" j"),this},g.__private__.setLineMiterLimit=g.__private__.setMiterLimit=g.setLineMiterLimit=g.setMiterLimit=function(m){if(m=m||0,isNaN(m))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return te(Y(L(m))+" M"),this},g.GState=um,g.setGState=function(m){(m=typeof m=="string"?nt[Nt[m]]:vd(null,m)).equals(A)||(te("/"+m.id+" gs"),A=m)};var vd=function(m,P){if(!m||!Nt[m]){var re=!1;for(var pe in nt)if(nt.hasOwnProperty(pe)&&nt[pe].equals(P)){re=!0;break}if(re)P=nt[pe];else{var Ee="GS"+(Object.keys(nt).length+1).toString(10);nt[Ee]=P,P.id=Ee}return m&&(Nt[m]=P.id),Ve.publish("addGState",P),P}};g.addGState=function(m,P){return vd(m,P),this},g.saveGraphicsState=function(){return te("q"),qe.push({key:at,size:be,color:Io}),this},g.restoreGraphicsState=function(){te("Q");var m=qe.pop();return at=m.key,be=m.size,Io=m.color,A=null,this},g.setCurrentTransformationMatrix=function(m){return te(m.toString()+" cm"),this},g.comment=function(m){return te("#"+m),this};var fi=function(m,P){var re=m||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return re},set:function(We){isNaN(We)||(re=parseFloat(We))}});var pe=P||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return pe},set:function(We){isNaN(We)||(pe=parseFloat(We))}});var Ee="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return Ee},set:function(We){Ee=We.toString()}}),this},Fl=function(m,P,re,pe){fi.call(this,m,P),this.type="rect";var Ee=re||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return Ee},set:function(ct){isNaN(ct)||(Ee=parseFloat(ct))}});var We=pe||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return We},set:function(ct){isNaN(ct)||(We=parseFloat(ct))}}),this},Rl=function(){this.page=ue,this.currentPage=G,this.pages=Be.slice(0),this.pagesContext=ke.slice(0),this.x=Qe,this.y=Fe,this.matrix=ut,this.width=Do(G),this.height=Pn(G),this.outputDestination=dt,this.id="",this.objectNumber=-1};Rl.prototype.restore=function(){ue=this.page,G=this.currentPage,ke=this.pagesContext,Be=this.pages,Qe=this.x,Fe=this.y,ut=this.matrix,ql(G,this.width),zl(G,this.height),dt=this.outputDestination};var bd=function(m,P,re,pe,Ee){Dt.push(new Rl),ue=G=0,Be=[],Qe=m,Fe=P,ut=Ee,El([re,pe])},eh=function(m){if(yt[m])Dt.pop().restore();else{var P=new Rl,re="Xo"+(Object.keys(ot).length+1).toString(10);P.id=re,yt[m]=re,ot[re]=P,Ve.publish("addFormObject",P),Dt.pop().restore()}};for(var xi in g.beginFormObject=function(m,P,re,pe,Ee){return bd(m,P,re,pe,Ee),this},g.endFormObject=function(m){return eh(m),this},g.doFormObject=function(m,P){var re=ot[yt[m]];return te("q"),te(P.toString()+" cm"),te("/"+re.id+" Do"),te("Q"),this},g.getFormObject=function(m){var P=ot[yt[m]];return{x:P.x,y:P.y,width:P.width,height:P.height,matrix:P.matrix}},g.save=function(m,P){return m=m||"generated.pdf",(P=P||{}).returnPromise=P.returnPromise||!1,P.returnPromise===!1?(Vo(di(en()),m),typeof Vo.unload=="function"&&zt.setTimeout&&setTimeout(Vo.unload,911),this):new Promise(function(re,pe){try{var Ee=Vo(di(en()),m);typeof Vo.unload=="function"&&zt.setTimeout&&setTimeout(Vo.unload,911),re(Ee)}catch(We){pe(We.message)}})},Rt.API)Rt.API.hasOwnProperty(xi)&&(xi==="events"&&Rt.API.events.length?function(m,P){var re,pe,Ee;for(Ee=P.length-1;Ee!==-1;Ee--)re=P[Ee][0],pe=P[Ee][1],m.subscribe.apply(m,[re].concat(typeof pe=="function"?[pe]:pe))}(Ve,Rt.API.events):g[xi]=Rt.API[xi]);var Do=g.getPageWidth=function(m){return(ke[m=m||G].mediaBox.topRightX-ke[m].mediaBox.bottomLeftX)/k},ql=g.setPageWidth=function(m,P){ke[m].mediaBox.topRightX=P*k+ke[m].mediaBox.bottomLeftX},Pn=g.getPageHeight=function(m){return(ke[m=m||G].mediaBox.topRightY-ke[m].mediaBox.bottomLeftY)/k},zl=g.setPageHeight=function(m,P){ke[m].mediaBox.topRightY=P*k+ke[m].mediaBox.bottomLeftY};return g.internal={pdfEscape:Ir,getStyle:md,getFont:Ym,getFontSize:Ae,getCharSpace:Zm,getTextColor:Km,getLineHeight:fd,getLineHeightFactor:gd,getLineWidth:hi,write:Ct,getHorizontalCoordinate:zs,getVerticalCoordinate:tn,getCoordinateString:Xm,getVerticalCoordinateString:En,collections:{},newObject:xt,newAdditionalObject:ma,newObjectDeferred:qt,newObjectDeferredBegin:Jt,getFilters:Ot,putStream:Pt,events:Ve,scaleFactor:k,pageSize:{getWidth:function(){return Do(G)},setWidth:function(m){ql(G,m)},getHeight:function(){return Pn(G)},setHeight:function(m){zl(G,m)}},encryptionOptions:h,encryption:ur,getEncryptor:Vm,output:ui,getNumberOfPages:qm,pages:Be,out:te,f2:me,f3:$,getPageInfo:ud,getPageInfoByObjId:Bt,getCurrentPageInfo:Hm,getPDFVersion:_,Point:fi,Rectangle:Fl,Matrix:V,hasHotfix:dd},Object.defineProperty(g.internal.pageSize,"width",{get:function(){return Do(G)},set:function(m){ql(G,m)},enumerable:!0,configurable:!0}),Object.defineProperty(g.internal.pageSize,"height",{get:function(){return Pn(G)},set:function(m){zl(G,m)},enumerable:!0,configurable:!0}),Fm.call(g,xe),at="F1",id(n,r),Ve.publish("initialized"),g}Ti.prototype.lsbFirstWord=function(e){return String.fromCharCode(e>>0&255,e>>8&255,e>>16&255,e>>24&255)},Ti.prototype.toHexString=function(e){return e.split("").map(function(a){return("0"+(255&a.charCodeAt(0)).toString(16)).slice(-2)}).join("")},Ti.prototype.hexToBytes=function(e){for(var a=[],r=0;r<e.length;r+=2)a.push(String.fromCharCode(parseInt(e.substr(r,2),16)));return a.join("")},Ti.prototype.processOwnerPassword=function(e,a){return wf(Nf(a).substr(0,5),e)},Ti.prototype.encryptor=function(e,a){var r=Nf(this.encryptionKey+String.fromCharCode(255&e,e>>8&255,e>>16&255,255&a,a>>8&255)).substr(0,10);return function(s){return wf(r,s)}},um.prototype.equals=function(e){var a,r="id,objectNumber,equals";if(!e||ia(e)!==ia(this))return!1;var s=0;for(a in this)if(!(r.indexOf(a)>=0)){if(this.hasOwnProperty(a)&&!e.hasOwnProperty(a)||this[a]!==e[a])return!1;s++}for(a in e)e.hasOwnProperty(a)&&r.indexOf(a)<0&&s--;return s===0},Rt.API={events:[]},Rt.version="2.5.2";var La=Rt.API,_0=1,ii=function(e){return e.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Ii=function(e){return e.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},Ht=function(e){return e.toFixed(2)},Hn=function(e){return e.toFixed(5)};La.__acroform__={};var Ur=function(e,a){e.prototype=Object.create(a.prototype),e.prototype.constructor=e},Vg=function(e){return e*_0},Vs=function(e){var a=new gb,r=It.internal.getHeight(e)||0,s=It.internal.getWidth(e)||0;return a.BBox=[0,0,Number(Ht(s)),Number(Ht(r))],a},R3=La.__acroform__.setBit=function(e,a){if(e=e||0,a=a||0,isNaN(e)||isNaN(a))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return e|=1<<a},q3=La.__acroform__.clearBit=function(e,a){if(e=e||0,a=a||0,isNaN(e)||isNaN(a))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return e&=~(1<<a)},z3=La.__acroform__.getBit=function(e,a){if(isNaN(e)||isNaN(a))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return e&1<<a?1:0},Ma=La.__acroform__.getBitForPdf=function(e,a){if(isNaN(e)||isNaN(a))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return z3(e,a-1)},Fa=La.__acroform__.setBitForPdf=function(e,a){if(isNaN(e)||isNaN(a))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return R3(e,a-1)},Ra=La.__acroform__.clearBitForPdf=function(e,a){if(isNaN(e)||isNaN(a))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return q3(e,a-1)},$3=La.__acroform__.calculateCoordinates=function(e,a){var r=a.internal.getHorizontalCoordinate,s=a.internal.getVerticalCoordinate,n=e[0],o=e[1],i=e[2],c=e[3],d={};return d.lowerLeft_X=r(n)||0,d.lowerLeft_Y=s(o+c)||0,d.upperRight_X=r(n+i)||0,d.upperRight_Y=s(o)||0,[Number(Ht(d.lowerLeft_X)),Number(Ht(d.lowerLeft_Y)),Number(Ht(d.upperRight_X)),Number(Ht(d.upperRight_Y))]},B3=function(e){if(e.appearanceStreamContent)return e.appearanceStreamContent;if(e.V||e.DV){var a=[],r=e._V||e.DV,s=Sf(e,r),n=e.scope.internal.getFont(e.fontName,e.fontStyle).id;a.push("/Tx BMC"),a.push("q"),a.push("BT"),a.push(e.scope.__private__.encodeColorString(e.color)),a.push("/"+n+" "+Ht(s.fontSize)+" Tf"),a.push("1 0 0 1 0 0 Tm"),a.push(s.text),a.push("ET"),a.push("Q"),a.push("EMC");var o=Vs(e);return o.scope=e.scope,o.stream=a.join(`
`),o}},Sf=function(e,a){var r=e.fontSize===0?e.maxFontSize:e.fontSize,s={text:"",fontSize:""},n=(a=(a=a.substr(0,1)=="("?a.substr(1):a).substr(a.length-1)==")"?a.substr(0,a.length-1):a).split(" ");n=e.multiline?n.map(function($){return $.split(`
`)}):n.map(function($){return[$]});var o=r,i=It.internal.getHeight(e)||0;i=i<0?-i:i;var c=It.internal.getWidth(e)||0;c=c<0?-c:c;var d=function($,L,le){if($+1<n.length){var R=L+" "+n[$+1][0];return pu(R,e,le).width<=c-4}return!1};o++;e:for(;o>0;){a="",o--;var p,h,x=pu("3",e,o).height,b=e.multiline?i-o:(i-x)/2,g=b+=2,w=0,_=0,O=0;if(o<=0){a=`(...) Tj
`,a+="% Width of Text: "+pu(a,e,o=12).width+", FieldWidth:"+c+`
`;break}for(var y="",v=0,C=0;C<n.length;C++)if(n.hasOwnProperty(C)){var W=!1;if(n[C].length!==1&&O!==n[C].length-1){if((x+2)*(v+2)+2>i)continue e;y+=n[C][O],W=!0,_=C,C--}else{y=(y+=n[C][O]+" ").substr(y.length-1)==" "?y.substr(0,y.length-1):y;var se=parseInt(C),J=d(se,y,o),Y=C>=n.length-1;if(J&&!Y){y+=" ",O=0;continue}if(J||Y){if(Y)_=se;else if(e.multiline&&(x+2)*(v+2)+2>i)continue e}else{if(!e.multiline||(x+2)*(v+2)+2>i)continue e;_=se}}for(var K="",fe=w;fe<=_;fe++){var me=n[fe];if(e.multiline){if(fe===_){K+=me[O]+" ",O=(O+1)%me.length;continue}if(fe===w){K+=me[me.length-1]+" ";continue}}K+=me[0]+" "}switch(K=K.substr(K.length-1)==" "?K.substr(0,K.length-1):K,h=pu(K,e,o).width,e.textAlign){case"right":p=c-h-2;break;case"center":p=(c-h)/2;break;case"left":default:p=2}a+=Ht(p)+" "+Ht(g)+` Td
`,a+="("+ii(K)+`) Tj
`,a+=-Ht(p)+` 0 Td
`,g=-(o+2),h=0,w=W?_:_+1,v++,y=""}break}return s.text=a,s.fontSize=o,s},pu=function(e,a,r){var s=a.scope.internal.getFont(a.fontName,a.fontStyle),n=a.scope.getStringUnitWidth(e,{font:s,fontSize:parseFloat(r),charSpace:0})*parseFloat(r);return{height:a.scope.getStringUnitWidth("3",{font:s,fontSize:parseFloat(r),charSpace:0})*parseFloat(r)*1.5,width:n}},U3={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},V3=function(e,a){var r={type:"reference",object:e};a.internal.getPageInfo(e.page).pageContext.annotations.find(function(s){return s.type===r.type&&s.object===r.object})===void 0&&a.internal.getPageInfo(e.page).pageContext.annotations.push(r)},H3=function(e,a){for(var r in e)if(e.hasOwnProperty(r)){var s=r,n=e[r];a.internal.newObjectDeferredBegin(n.objId,!0),ia(n)==="object"&&typeof n.putStream=="function"&&n.putStream(),delete e[s]}},W3=function(e,a){if(a.scope=e,e.internal!==void 0&&(e.internal.acroformPlugin===void 0||e.internal.acroformPlugin.isInitialized===!1)){if(Fs.FieldNum=0,e.internal.acroformPlugin=JSON.parse(JSON.stringify(U3)),e.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");_0=e.internal.scaleFactor,e.internal.acroformPlugin.acroFormDictionaryRoot=new vb,e.internal.acroformPlugin.acroFormDictionaryRoot.scope=e,e.internal.acroformPlugin.acroFormDictionaryRoot._eventID=e.internal.events.subscribe("postPutResources",function(){(function(r){r.internal.events.unsubscribe(r.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete r.internal.acroformPlugin.acroFormDictionaryRoot._eventID,r.internal.acroformPlugin.printedOut=!0})(e)}),e.internal.events.subscribe("buildDocument",function(){(function(r){r.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var s=r.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var n in s)if(s.hasOwnProperty(n)){var o=s[n];o.objId=void 0,o.hasAnnotation&&V3(o,r)}})(e)}),e.internal.events.subscribe("putCatalog",function(){(function(r){if(r.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");r.internal.write("/AcroForm "+r.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(e)}),e.internal.events.subscribe("postPutPages",function(r){(function(s,n){var o=!s;for(var i in s||(n.internal.newObjectDeferredBegin(n.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),n.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),s=s||n.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(s.hasOwnProperty(i)){var c=s[i],d=[],p=c.Rect;if(c.Rect&&(c.Rect=$3(c.Rect,n)),n.internal.newObjectDeferredBegin(c.objId,!0),c.DA=It.createDefaultAppearanceStream(c),ia(c)==="object"&&typeof c.getKeyValueListForStream=="function"&&(d=c.getKeyValueListForStream()),c.Rect=p,c.hasAppearanceStream&&!c.appearanceStreamContent){var h=B3(c);d.push({key:"AP",value:"<</N "+h+">>"}),n.internal.acroformPlugin.xForms.push(h)}if(c.appearanceStreamContent){var x="";for(var b in c.appearanceStreamContent)if(c.appearanceStreamContent.hasOwnProperty(b)){var g=c.appearanceStreamContent[b];if(x+="/"+b+" ",x+="<<",Object.keys(g).length>=1||Array.isArray(g)){for(var i in g)if(g.hasOwnProperty(i)){var w=g[i];typeof w=="function"&&(w=w.call(n,c)),x+="/"+i+" "+w+" ",n.internal.acroformPlugin.xForms.indexOf(w)>=0||n.internal.acroformPlugin.xForms.push(w)}}else typeof(w=g)=="function"&&(w=w.call(n,c)),x+="/"+i+" "+w,n.internal.acroformPlugin.xForms.indexOf(w)>=0||n.internal.acroformPlugin.xForms.push(w);x+=">>"}d.push({key:"AP",value:`<<
`+x+">>"})}n.internal.putStream({additionalKeyValues:d,objectId:c.objId}),n.internal.out("endobj")}o&&H3(n.internal.acroformPlugin.xForms,n)})(r,e)}),e.internal.acroformPlugin.isInitialized=!0}},xb=La.__acroform__.arrayToPdfArray=function(e,a,r){var s=function(i){return i};if(Array.isArray(e)){for(var n="[",o=0;o<e.length;o++)switch(o!==0&&(n+=" "),ia(e[o])){case"boolean":case"number":case"object":n+=e[o].toString();break;case"string":e[o].substr(0,1)!=="/"?(a!==void 0&&r&&(s=r.internal.getEncryptor(a)),n+="("+ii(s(e[o].toString()))+")"):n+=e[o].toString()}return n+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},rp=function(e,a,r){var s=function(n){return n};return a!==void 0&&r&&(s=r.internal.getEncryptor(a)),(e=e||"").toString(),e="("+ii(s(e))+")"},Js=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(e){this._objId=e}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};Js.prototype.toString=function(){return this.objId+" 0 R"},Js.prototype.putStream=function(){var e=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:e,objectId:this.objId}),this.scope.internal.out("endobj")},Js.prototype.getKeyValueListForStream=function(){var e=[],a=Object.getOwnPropertyNames(this).filter(function(o){return o!="content"&&o!="appearanceStreamContent"&&o!="scope"&&o!="objId"&&o.substring(0,1)!="_"});for(var r in a)if(Object.getOwnPropertyDescriptor(this,a[r]).configurable===!1){var s=a[r],n=this[s];n&&(Array.isArray(n)?e.push({key:s,value:xb(n,this.objId,this.scope)}):n instanceof Js?(n.scope=this.scope,e.push({key:s,value:n.objId+" 0 R"})):typeof n!="function"&&e.push({key:s,value:n}))}return e};var gb=function(){Js.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var e,a=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return a},set:function(r){a=r}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(r){e=r.trim()},get:function(){return e||null}})};Ur(gb,Js);var vb=function(){Js.call(this);var e,a=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return a.length>0?a:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return a}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(e){var r=function(s){return s};return this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),"("+ii(r(e))+")"}},set:function(r){e=r}})};Ur(vb,Js);var Fs=function e(){Js.call(this);var a=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return a},set:function(y){if(isNaN(y))throw new Error('Invalid value "'+y+'" for attribute F supplied.');a=y}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!Ma(a,3)},set:function(y){y?this.F=Fa(a,3):this.F=Ra(a,3)}});var r=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return r},set:function(y){if(isNaN(y))throw new Error('Invalid value "'+y+'" for attribute Ff supplied.');r=y}});var s=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(s.length!==0)return s},set:function(y){s=y!==void 0?y:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!s||isNaN(s[0])?0:s[0]},set:function(y){s[0]=y}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!s||isNaN(s[1])?0:s[1]},set:function(y){s[1]=y}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!s||isNaN(s[2])?0:s[2]},set:function(y){s[2]=y}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!s||isNaN(s[3])?0:s[3]},set:function(y){s[3]=y}});var n="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return n},set:function(y){switch(y){case"/Btn":case"/Tx":case"/Ch":case"/Sig":n=y;break;default:throw new Error('Invalid value "'+y+'" for attribute FT supplied.')}}});var o=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!o||o.length<1){if(this instanceof mm)return;o="FieldObject"+e.FieldNum++}var y=function(v){return v};return this.scope&&(y=this.scope.internal.getEncryptor(this.objId)),"("+ii(y(o))+")"},set:function(y){o=y.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return o},set:function(y){o=y}});var i="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return i},set:function(y){i=y}});var c="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return c},set:function(y){c=y}});var d=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return d},set:function(y){d=y}});var p=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return p===void 0?50/_0:p},set:function(y){p=y}});var h="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return h},set:function(y){h=y}});var x="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!x||this instanceof mm||this instanceof Ko))return rp(x,this.objId,this.scope)},set:function(y){y=y.toString(),x=y}});var b=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(b)return this instanceof ar?b:rp(b,this.objId,this.scope)},set:function(y){y=y.toString(),b=this instanceof ar?y:y.substr(0,1)==="("?Ii(y.substr(1,y.length-2)):Ii(y)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof ar?Ii(b.substr(1,b.length-1)):b},set:function(y){y=y.toString(),b=this instanceof ar?"/"+y:y}});var g=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(g)return g},set:function(y){this.V=y}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(g)return this instanceof ar?g:rp(g,this.objId,this.scope)},set:function(y){y=y.toString(),g=this instanceof ar?y:y.substr(0,1)==="("?Ii(y.substr(1,y.length-2)):Ii(y)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof ar?Ii(g.substr(1,g.length-1)):g},set:function(y){y=y.toString(),g=this instanceof ar?"/"+y:y}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var w,_=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return _},set:function(y){y=!!y,_=y}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(w)return w},set:function(y){w=y}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!Ma(this.Ff,1)},set:function(y){y?this.Ff=Fa(this.Ff,1):this.Ff=Ra(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!Ma(this.Ff,2)},set:function(y){y?this.Ff=Fa(this.Ff,2):this.Ff=Ra(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!Ma(this.Ff,3)},set:function(y){y?this.Ff=Fa(this.Ff,3):this.Ff=Ra(this.Ff,3)}});var O=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(O!==null)return O},set:function(y){if([0,1,2].indexOf(y)===-1)throw new Error('Invalid value "'+y+'" for attribute Q supplied.');O=y}}),Object.defineProperty(this,"textAlign",{get:function(){var y;switch(O){case 0:default:y="left";break;case 1:y="center";break;case 2:y="right"}return y},configurable:!0,enumerable:!0,set:function(y){switch(y){case"right":case 2:O=2;break;case"center":case 1:O=1;break;case"left":case 0:default:O=0}}})};Ur(Fs,Js);var nl=function(){Fs.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var e=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return e},set:function(r){e=r}});var a=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return xb(a,this.objId,this.scope)},set:function(r){var s,n;n=[],typeof(s=r)=="string"&&(n=function(o,i,c){c||(c=1);for(var d,p=[];d=i.exec(o);)p.push(d[c]);return p}(s,/\((.*?)\)/g)),a=n}}),this.getOptions=function(){return a},this.setOptions=function(r){a=r,this.sort&&a.sort()},this.addOption=function(r){r=(r=r||"").toString(),a.push(r),this.sort&&a.sort()},this.removeOption=function(r,s){for(s=s||!1,r=(r=r||"").toString();a.indexOf(r)!==-1&&(a.splice(a.indexOf(r),1),s!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!Ma(this.Ff,18)},set:function(r){r?this.Ff=Fa(this.Ff,18):this.Ff=Ra(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!Ma(this.Ff,19)},set:function(r){this.combo===!0&&(r?this.Ff=Fa(this.Ff,19):this.Ff=Ra(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!Ma(this.Ff,20)},set:function(r){r?(this.Ff=Fa(this.Ff,20),a.sort()):this.Ff=Ra(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!Ma(this.Ff,22)},set:function(r){r?this.Ff=Fa(this.Ff,22):this.Ff=Ra(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Ma(this.Ff,23)},set:function(r){r?this.Ff=Fa(this.Ff,23):this.Ff=Ra(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!Ma(this.Ff,27)},set:function(r){r?this.Ff=Fa(this.Ff,27):this.Ff=Ra(this.Ff,27)}}),this.hasAppearanceStream=!1};Ur(nl,Fs);var ol=function(){nl.call(this),this.fontName="helvetica",this.combo=!1};Ur(ol,nl);var il=function(){ol.call(this),this.combo=!0};Ur(il,ol);var Du=function(){il.call(this),this.edit=!0};Ur(Du,il);var ar=function(){Fs.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!Ma(this.Ff,15)},set:function(r){r?this.Ff=Fa(this.Ff,15):this.Ff=Ra(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!Ma(this.Ff,16)},set:function(r){r?this.Ff=Fa(this.Ff,16):this.Ff=Ra(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!Ma(this.Ff,17)},set:function(r){r?this.Ff=Fa(this.Ff,17):this.Ff=Ra(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!Ma(this.Ff,26)},set:function(r){r?this.Ff=Fa(this.Ff,26):this.Ff=Ra(this.Ff,26)}});var e,a={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var r=function(o){return o};if(this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),Object.keys(a).length!==0){var s,n=[];for(s in n.push("<<"),a)n.push("/"+s+" ("+ii(r(a[s]))+")");return n.push(">>"),n.join(`
`)}},set:function(r){ia(r)==="object"&&(a=r)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return a.CA||""},set:function(r){typeof r=="string"&&(a.CA=r)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return e.substr(1,e.length-1)},set:function(r){e="/"+r}})};Ur(ar,Fs);var Ou=function(){ar.call(this),this.pushButton=!0};Ur(Ou,ar);var ll=function(){ar.call(this),this.radio=!0,this.pushButton=!1;var e=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return e},set:function(a){e=a!==void 0?a:[]}})};Ur(ll,ar);var mm=function(){var e,a;Fs.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return e},set:function(n){e=n}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return a},set:function(n){a=n}});var r,s={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var n=function(c){return c};this.scope&&(n=this.scope.internal.getEncryptor(this.objId));var o,i=[];for(o in i.push("<<"),s)i.push("/"+o+" ("+ii(n(s[o]))+")");return i.push(">>"),i.join(`
`)},set:function(n){ia(n)==="object"&&(s=n)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return s.CA||""},set:function(n){typeof n=="string"&&(s.CA=n)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return r},set:function(n){r=n}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return r.substr(1,r.length-1)},set:function(n){r="/"+n}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=It.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Ur(mm,Fs),ll.prototype.setAppearance=function(e){if(!("createAppearanceStream"in e)||!("getCA"in e))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var a in this.Kids)if(this.Kids.hasOwnProperty(a)){var r=this.Kids[a];r.appearanceStreamContent=e.createAppearanceStream(r.optionName),r.caption=e.getCA()}},ll.prototype.createOption=function(e){var a=new mm;return a.Parent=this,a.optionName=e,this.Kids.push(a),G3.call(this.scope,a),a};var Tu=function(){ar.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=It.CheckBox.createAppearanceStream()};Ur(Tu,ar);var Ko=function(){Fs.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!Ma(this.Ff,13)},set:function(a){a?this.Ff=Fa(this.Ff,13):this.Ff=Ra(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!Ma(this.Ff,21)},set:function(a){a?this.Ff=Fa(this.Ff,21):this.Ff=Ra(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Ma(this.Ff,23)},set:function(a){a?this.Ff=Fa(this.Ff,23):this.Ff=Ra(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!Ma(this.Ff,24)},set:function(a){a?this.Ff=Fa(this.Ff,24):this.Ff=Ra(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!Ma(this.Ff,25)},set:function(a){a?this.Ff=Fa(this.Ff,25):this.Ff=Ra(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!Ma(this.Ff,26)},set:function(a){a?this.Ff=Fa(this.Ff,26):this.Ff=Ra(this.Ff,26)}});var e=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return e},set:function(a){e=a}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return e},set:function(a){Number.isInteger(a)&&(e=a)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Ur(Ko,Fs);var Mu=function(){Ko.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!Ma(this.Ff,14)},set:function(e){e?this.Ff=Fa(this.Ff,14):this.Ff=Ra(this.Ff,14)}}),this.password=!0};Ur(Mu,Ko);var It={CheckBox:{createAppearanceStream:function(){return{N:{On:It.CheckBox.YesNormal},D:{On:It.CheckBox.YesPushDown,Off:It.CheckBox.OffPushDown}}},YesPushDown:function(e){var a=Vs(e);a.scope=e.scope;var r=[],s=e.scope.internal.getFont(e.fontName,e.fontStyle).id,n=e.scope.__private__.encodeColorString(e.color),o=Sf(e,e.caption);return r.push("0.749023 g"),r.push("0 0 "+Ht(It.internal.getWidth(e))+" "+Ht(It.internal.getHeight(e))+" re"),r.push("f"),r.push("BMC"),r.push("q"),r.push("0 0 1 rg"),r.push("/"+s+" "+Ht(o.fontSize)+" Tf "+n),r.push("BT"),r.push(o.text),r.push("ET"),r.push("Q"),r.push("EMC"),a.stream=r.join(`
`),a},YesNormal:function(e){var a=Vs(e);a.scope=e.scope;var r=e.scope.internal.getFont(e.fontName,e.fontStyle).id,s=e.scope.__private__.encodeColorString(e.color),n=[],o=It.internal.getHeight(e),i=It.internal.getWidth(e),c=Sf(e,e.caption);return n.push("1 g"),n.push("0 0 "+Ht(i)+" "+Ht(o)+" re"),n.push("f"),n.push("q"),n.push("0 0 1 rg"),n.push("0 0 "+Ht(i-1)+" "+Ht(o-1)+" re"),n.push("W"),n.push("n"),n.push("0 g"),n.push("BT"),n.push("/"+r+" "+Ht(c.fontSize)+" Tf "+s),n.push(c.text),n.push("ET"),n.push("Q"),a.stream=n.join(`
`),a},OffPushDown:function(e){var a=Vs(e);a.scope=e.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+Ht(It.internal.getWidth(e))+" "+Ht(It.internal.getHeight(e))+" re"),r.push("f"),a.stream=r.join(`
`),a}},RadioButton:{Circle:{createAppearanceStream:function(e){var a={D:{Off:It.RadioButton.Circle.OffPushDown},N:{}};return a.N[e]=It.RadioButton.Circle.YesNormal,a.D[e]=It.RadioButton.Circle.YesPushDown,a},getCA:function(){return"l"},YesNormal:function(e){var a=Vs(e);a.scope=e.scope;var r=[],s=It.internal.getWidth(e)<=It.internal.getHeight(e)?It.internal.getWidth(e)/4:It.internal.getHeight(e)/4;s=Number((.9*s).toFixed(5));var n=It.internal.Bezier_C,o=Number((s*n).toFixed(5));return r.push("q"),r.push("1 0 0 1 "+Hn(It.internal.getWidth(e)/2)+" "+Hn(It.internal.getHeight(e)/2)+" cm"),r.push(s+" 0 m"),r.push(s+" "+o+" "+o+" "+s+" 0 "+s+" c"),r.push("-"+o+" "+s+" -"+s+" "+o+" -"+s+" 0 c"),r.push("-"+s+" -"+o+" -"+o+" -"+s+" 0 -"+s+" c"),r.push(o+" -"+s+" "+s+" -"+o+" "+s+" 0 c"),r.push("f"),r.push("Q"),a.stream=r.join(`
`),a},YesPushDown:function(e){var a=Vs(e);a.scope=e.scope;var r=[],s=It.internal.getWidth(e)<=It.internal.getHeight(e)?It.internal.getWidth(e)/4:It.internal.getHeight(e)/4;s=Number((.9*s).toFixed(5));var n=Number((2*s).toFixed(5)),o=Number((n*It.internal.Bezier_C).toFixed(5)),i=Number((s*It.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+Hn(It.internal.getWidth(e)/2)+" "+Hn(It.internal.getHeight(e)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+o+" "+o+" "+n+" 0 "+n+" c"),r.push("-"+o+" "+n+" -"+n+" "+o+" -"+n+" 0 c"),r.push("-"+n+" -"+o+" -"+o+" -"+n+" 0 -"+n+" c"),r.push(o+" -"+n+" "+n+" -"+o+" "+n+" 0 c"),r.push("f"),r.push("Q"),r.push("0 g"),r.push("q"),r.push("1 0 0 1 "+Hn(It.internal.getWidth(e)/2)+" "+Hn(It.internal.getHeight(e)/2)+" cm"),r.push(s+" 0 m"),r.push(s+" "+i+" "+i+" "+s+" 0 "+s+" c"),r.push("-"+i+" "+s+" -"+s+" "+i+" -"+s+" 0 c"),r.push("-"+s+" -"+i+" -"+i+" -"+s+" 0 -"+s+" c"),r.push(i+" -"+s+" "+s+" -"+i+" "+s+" 0 c"),r.push("f"),r.push("Q"),a.stream=r.join(`
`),a},OffPushDown:function(e){var a=Vs(e);a.scope=e.scope;var r=[],s=It.internal.getWidth(e)<=It.internal.getHeight(e)?It.internal.getWidth(e)/4:It.internal.getHeight(e)/4;s=Number((.9*s).toFixed(5));var n=Number((2*s).toFixed(5)),o=Number((n*It.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+Hn(It.internal.getWidth(e)/2)+" "+Hn(It.internal.getHeight(e)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+o+" "+o+" "+n+" 0 "+n+" c"),r.push("-"+o+" "+n+" -"+n+" "+o+" -"+n+" 0 c"),r.push("-"+n+" -"+o+" -"+o+" -"+n+" 0 -"+n+" c"),r.push(o+" -"+n+" "+n+" -"+o+" "+n+" 0 c"),r.push("f"),r.push("Q"),a.stream=r.join(`
`),a}},Cross:{createAppearanceStream:function(e){var a={D:{Off:It.RadioButton.Cross.OffPushDown},N:{}};return a.N[e]=It.RadioButton.Cross.YesNormal,a.D[e]=It.RadioButton.Cross.YesPushDown,a},getCA:function(){return"8"},YesNormal:function(e){var a=Vs(e);a.scope=e.scope;var r=[],s=It.internal.calculateCross(e);return r.push("q"),r.push("1 1 "+Ht(It.internal.getWidth(e)-2)+" "+Ht(It.internal.getHeight(e)-2)+" re"),r.push("W"),r.push("n"),r.push(Ht(s.x1.x)+" "+Ht(s.x1.y)+" m"),r.push(Ht(s.x2.x)+" "+Ht(s.x2.y)+" l"),r.push(Ht(s.x4.x)+" "+Ht(s.x4.y)+" m"),r.push(Ht(s.x3.x)+" "+Ht(s.x3.y)+" l"),r.push("s"),r.push("Q"),a.stream=r.join(`
`),a},YesPushDown:function(e){var a=Vs(e);a.scope=e.scope;var r=It.internal.calculateCross(e),s=[];return s.push("0.749023 g"),s.push("0 0 "+Ht(It.internal.getWidth(e))+" "+Ht(It.internal.getHeight(e))+" re"),s.push("f"),s.push("q"),s.push("1 1 "+Ht(It.internal.getWidth(e)-2)+" "+Ht(It.internal.getHeight(e)-2)+" re"),s.push("W"),s.push("n"),s.push(Ht(r.x1.x)+" "+Ht(r.x1.y)+" m"),s.push(Ht(r.x2.x)+" "+Ht(r.x2.y)+" l"),s.push(Ht(r.x4.x)+" "+Ht(r.x4.y)+" m"),s.push(Ht(r.x3.x)+" "+Ht(r.x3.y)+" l"),s.push("s"),s.push("Q"),a.stream=s.join(`
`),a},OffPushDown:function(e){var a=Vs(e);a.scope=e.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+Ht(It.internal.getWidth(e))+" "+Ht(It.internal.getHeight(e))+" re"),r.push("f"),a.stream=r.join(`
`),a}}},createDefaultAppearanceStream:function(e){var a=e.scope.internal.getFont(e.fontName,e.fontStyle).id,r=e.scope.__private__.encodeColorString(e.color);return"/"+a+" "+e.fontSize+" Tf "+r}};It.internal={Bezier_C:.551915024494,calculateCross:function(e){var a=It.internal.getWidth(e),r=It.internal.getHeight(e),s=Math.min(a,r);return{x1:{x:(a-s)/2,y:(r-s)/2+s},x2:{x:(a-s)/2+s,y:(r-s)/2},x3:{x:(a-s)/2,y:(r-s)/2},x4:{x:(a-s)/2+s,y:(r-s)/2+s}}}},It.internal.getWidth=function(e){var a=0;return ia(e)==="object"&&(a=Vg(e.Rect[2])),a},It.internal.getHeight=function(e){var a=0;return ia(e)==="object"&&(a=Vg(e.Rect[3])),a};var G3=La.addField=function(e){if(W3(this,e),!(e instanceof Fs))throw new Error("Invalid argument passed to jsPDF.addField.");var a;return(a=e).scope.internal.acroformPlugin.printedOut&&(a.scope.internal.acroformPlugin.printedOut=!1,a.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),a.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(a),e.page=e.scope.internal.getCurrentPageInfo().pageNumber,this};La.AcroFormChoiceField=nl,La.AcroFormListBox=ol,La.AcroFormComboBox=il,La.AcroFormEditBox=Du,La.AcroFormButton=ar,La.AcroFormPushButton=Ou,La.AcroFormRadioButton=ll,La.AcroFormCheckBox=Tu,La.AcroFormTextField=Ko,La.AcroFormPasswordField=Mu,La.AcroFormAppearance=It,La.AcroForm={ChoiceField:nl,ListBox:ol,ComboBox:il,EditBox:Du,Button:ar,PushButton:Ou,RadioButton:ll,CheckBox:Tu,TextField:Ko,PasswordField:Mu,Appearance:It},Rt.AcroForm={ChoiceField:nl,ListBox:ol,ComboBox:il,EditBox:Du,Button:ar,PushButton:Ou,RadioButton:ll,CheckBox:Tu,TextField:Ko,PasswordField:Mu,Appearance:It};Rt.AcroForm;function bb(e){return e.reduce(function(a,r,s){return a[r]=s,a},{})}(function(e){e.__addimage__={};var a="UNKNOWN",r={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},s=e.__addimage__.getImageFileTypeByImageData=function($,L){var le,R,we,ce,Ce,Z=a;if((L=L||a)==="RGBA"||$.data!==void 0&&$.data instanceof Uint8ClampedArray&&"height"in $&&"width"in $)return"RGBA";if(J($))for(Ce in r)for(we=r[Ce],le=0;le<we.length;le+=1){for(ce=!0,R=0;R<we[le].length;R+=1)if(we[le][R]!==void 0&&we[le][R]!==$[R]){ce=!1;break}if(ce===!0){Z=Ce;break}}else for(Ce in r)for(we=r[Ce],le=0;le<we.length;le+=1){for(ce=!0,R=0;R<we[le].length;R+=1)if(we[le][R]!==void 0&&we[le][R]!==$.charCodeAt(R)){ce=!1;break}if(ce===!0){Z=Ce;break}}return Z===a&&L!==a&&(Z=L),Z},n=function $(L){for(var le=this.internal.write,R=this.internal.putStream,we=(0,this.internal.getFilters)();we.indexOf("FlateEncode")!==-1;)we.splice(we.indexOf("FlateEncode"),1);L.objectId=this.internal.newObject();var ce=[];if(ce.push({key:"Type",value:"/XObject"}),ce.push({key:"Subtype",value:"/Image"}),ce.push({key:"Width",value:L.width}),ce.push({key:"Height",value:L.height}),L.colorSpace===O.INDEXED?ce.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(L.palette.length/3-1)+" "+("sMask"in L&&L.sMask!==void 0?L.objectId+2:L.objectId+1)+" 0 R]"}):(ce.push({key:"ColorSpace",value:"/"+L.colorSpace}),L.colorSpace===O.DEVICE_CMYK&&ce.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),ce.push({key:"BitsPerComponent",value:L.bitsPerComponent}),"decodeParameters"in L&&L.decodeParameters!==void 0&&ce.push({key:"DecodeParms",value:"<<"+L.decodeParameters+">>"}),"transparency"in L&&Array.isArray(L.transparency)){for(var Ce="",Z=0,he=L.transparency.length;Z<he;Z++)Ce+=L.transparency[Z]+" "+L.transparency[Z]+" ";ce.push({key:"Mask",value:"["+Ce+"]"})}L.sMask!==void 0&&ce.push({key:"SMask",value:L.objectId+1+" 0 R"});var ie=L.filter!==void 0?["/"+L.filter]:void 0;if(R({data:L.data,additionalKeyValues:ce,alreadyAppliedFilters:ie,objectId:L.objectId}),le("endobj"),"sMask"in L&&L.sMask!==void 0){var Ue="/Predictor "+L.predictor+" /Colors 1 /BitsPerComponent "+L.bitsPerComponent+" /Columns "+L.width,S={width:L.width,height:L.height,colorSpace:"DeviceGray",bitsPerComponent:L.bitsPerComponent,decodeParameters:Ue,data:L.sMask};"filter"in L&&(S.filter=L.filter),$.call(this,S)}if(L.colorSpace===O.INDEXED){var G=this.internal.newObject();R({data:K(new Uint8Array(L.palette)),objectId:G}),le("endobj")}},o=function(){var $=this.internal.collections.addImage_images;for(var L in $)n.call(this,$[L])},i=function(){var $,L=this.internal.collections.addImage_images,le=this.internal.write;for(var R in L)le("/I"+($=L[R]).index,$.objectId,"0","R")},c=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",o),this.internal.events.subscribe("putXobjectDict",i))},d=function(){var $=this.internal.collections.addImage_images;return c.call(this),$},p=function(){return Object.keys(this.internal.collections.addImage_images).length},h=function($){return typeof e["process"+$.toUpperCase()]=="function"},x=function($){return ia($)==="object"&&$.nodeType===1},b=function($,L){if($.nodeName==="IMG"&&$.hasAttribute("src")){var le=""+$.getAttribute("src");if(le.indexOf("data:image/")===0)return _c(unescape(le).split("base64,").pop());var R=e.loadFile(le,!0);if(R!==void 0)return R}if($.nodeName==="CANVAS"){if($.width===0||$.height===0)throw new Error("Given canvas must have data. Canvas width: "+$.width+", height: "+$.height);var we;switch(L){case"PNG":we="image/png";break;case"WEBP":we="image/webp";break;case"JPEG":case"JPG":default:we="image/jpeg"}return _c($.toDataURL(we,1).split("base64,").pop())}},g=function($){var L=this.internal.collections.addImage_images;if(L){for(var le in L)if($===L[le].alias)return L[le]}},w=function($,L,le){return $||L||($=-96,L=-96),$<0&&($=-1*le.width*72/$/this.internal.scaleFactor),L<0&&(L=-1*le.height*72/L/this.internal.scaleFactor),$===0&&($=L*le.width/le.height),L===0&&(L=$*le.height/le.width),[$,L]},_=function($,L,le,R,we,ce){var Ce=w.call(this,le,R,we),Z=this.internal.getCoordinateString,he=this.internal.getVerticalCoordinateString,ie=d.call(this);if(le=Ce[0],R=Ce[1],ie[we.index]=we,ce){ce*=Math.PI/180;var Ue=Math.cos(ce),S=Math.sin(ce),G=function(N){return N.toFixed(4)},q=[G(Ue),G(S),G(-1*S),G(Ue),0,0,"cm"]}this.internal.write("q"),ce?(this.internal.write([1,"0","0",1,Z($),he(L+R),"cm"].join(" ")),this.internal.write(q.join(" ")),this.internal.write([Z(le),"0","0",Z(R),"0","0","cm"].join(" "))):this.internal.write([Z(le),"0","0",Z(R),Z($),he(L+R),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+we.index+" Do"),this.internal.write("Q")},O=e.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};e.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var y=e.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},v=e.__addimage__.sHashCode=function($){var L,le,R=0;if(typeof $=="string")for(le=$.length,L=0;L<le;L++)R=(R<<5)-R+$.charCodeAt(L),R|=0;else if(J($))for(le=$.byteLength/2,L=0;L<le;L++)R=(R<<5)-R+$[L],R|=0;return R},C=e.__addimage__.validateStringAsBase64=function($){($=$||"").toString().trim();var L=!0;return $.length===0&&(L=!1),$.length%4!=0&&(L=!1),/^[A-Za-z0-9+/]+$/.test($.substr(0,$.length-2))===!1&&(L=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test($.substr(-2))===!1&&(L=!1),L},W=e.__addimage__.extractImageFromDataUrl=function($){var L=($=$||"").split("base64,"),le=null;if(L.length===2){var R=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(L[0]);Array.isArray(R)&&(le={mimeType:R[1],charset:R[2],data:L[1]})}return le},se=e.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};e.__addimage__.isArrayBuffer=function($){return se()&&$ instanceof ArrayBuffer};var J=e.__addimage__.isArrayBufferView=function($){return se()&&typeof Uint32Array<"u"&&($ instanceof Int8Array||$ instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&$ instanceof Uint8ClampedArray||$ instanceof Int16Array||$ instanceof Uint16Array||$ instanceof Int32Array||$ instanceof Uint32Array||$ instanceof Float32Array||$ instanceof Float64Array)},Y=e.__addimage__.binaryStringToUint8Array=function($){for(var L=$.length,le=new Uint8Array(L),R=0;R<L;R++)le[R]=$.charCodeAt(R);return le},K=e.__addimage__.arrayBufferToBinaryString=function($){for(var L="",le=J($)?$:new Uint8Array($),R=0;R<le.length;R+=8192)L+=String.fromCharCode.apply(null,le.subarray(R,R+8192));return L};e.addImage=function(){var $,L,le,R,we,ce,Ce,Z,he;if(typeof arguments[1]=="number"?(L=a,le=arguments[1],R=arguments[2],we=arguments[3],ce=arguments[4],Ce=arguments[5],Z=arguments[6],he=arguments[7]):(L=arguments[1],le=arguments[2],R=arguments[3],we=arguments[4],ce=arguments[5],Ce=arguments[6],Z=arguments[7],he=arguments[8]),ia($=arguments[0])==="object"&&!x($)&&"imageData"in $){var ie=$;$=ie.imageData,L=ie.format||L||a,le=ie.x||le||0,R=ie.y||R||0,we=ie.w||ie.width||we,ce=ie.h||ie.height||ce,Ce=ie.alias||Ce,Z=ie.compression||Z,he=ie.rotation||ie.angle||he}var Ue=this.internal.getFilters();if(Z===void 0&&Ue.indexOf("FlateEncode")!==-1&&(Z="SLOW"),isNaN(le)||isNaN(R))throw new Error("Invalid coordinates passed to jsPDF.addImage");c.call(this);var S=fe.call(this,$,L,Ce,Z);return _.call(this,le,R,we,ce,S,he),this};var fe=function($,L,le,R){var we,ce,Ce;if(typeof $=="string"&&s($)===a){$=unescape($);var Z=me($,!1);(Z!==""||(Z=e.loadFile($,!0))!==void 0)&&($=Z)}if(x($)&&($=b($,L)),L=s($,L),!h(L))throw new Error("addImage does not support files of type '"+L+"', please ensure that a plugin for '"+L+"' support is added.");if(((Ce=le)==null||Ce.length===0)&&(le=function(he){return typeof he=="string"||J(he)?v(he):J(he.data)?v(he.data):null}($)),(we=g.call(this,le))||(se()&&($ instanceof Uint8Array||L==="RGBA"||(ce=$,$=Y($))),we=this["process"+L.toUpperCase()]($,p.call(this),le,function(he){return he&&typeof he=="string"&&(he=he.toUpperCase()),he in e.image_compression?he:y.NONE}(R),ce)),!we)throw new Error("An unknown error occurred whilst processing the image.");return we},me=e.__addimage__.convertBase64ToBinaryString=function($,L){var le;L=typeof L!="boolean"||L;var R,we="";if(typeof $=="string"){R=(le=W($))!==null?le.data:$;try{we=_c(R)}catch(ce){if(L)throw C(R)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+ce.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return we};e.getImageProperties=function($){var L,le,R="";if(x($)&&($=b($)),typeof $=="string"&&s($)===a&&((R=me($,!1))===""&&(R=e.loadFile($)||""),$=R),le=s($),!h(le))throw new Error("addImage does not support files of type '"+le+"', please ensure that a plugin for '"+le+"' support is added.");if(!se()||$ instanceof Uint8Array||($=Y($)),!(L=this["process"+le.toUpperCase()]($)))throw new Error("An unknown error occurred whilst processing the image");return L.fileType=le,L}})(Rt.API),function(e){var a=function(r){if(r!==void 0&&r!="")return!0};Rt.API.events.push(["addPage",function(r){this.internal.getPageInfo(r.pageNumber).pageContext.annotations=[]}]),e.events.push(["putPage",function(r){for(var s,n,o,i=this.internal.getCoordinateString,c=this.internal.getVerticalCoordinateString,d=this.internal.getPageInfoByObjId(r.objId),p=r.pageContext.annotations,h=!1,x=0;x<p.length&&!h;x++)switch((s=p[x]).type){case"link":(a(s.options.url)||a(s.options.pageNumber))&&(h=!0);break;case"reference":case"text":case"freetext":h=!0}if(h!=0){this.internal.write("/Annots [");for(var b=0;b<p.length;b++){s=p[b];var g=this.internal.pdfEscape,w=this.internal.getEncryptor(r.objId);switch(s.type){case"reference":this.internal.write(" "+s.object.objId+" 0 R ");break;case"text":var _=this.internal.newAdditionalObject(),O=this.internal.newAdditionalObject(),y=this.internal.getEncryptor(_.objId),v=s.title||"Note";o="<</Type /Annot /Subtype /Text "+(n="/Rect ["+i(s.bounds.x)+" "+c(s.bounds.y+s.bounds.h)+" "+i(s.bounds.x+s.bounds.w)+" "+c(s.bounds.y)+"] ")+"/Contents ("+g(y(s.contents))+")",o+=" /Popup "+O.objId+" 0 R",o+=" /P "+d.objId+" 0 R",o+=" /T ("+g(y(v))+") >>",_.content=o;var C=_.objId+" 0 R";o="<</Type /Annot /Subtype /Popup "+(n="/Rect ["+i(s.bounds.x+30)+" "+c(s.bounds.y+s.bounds.h)+" "+i(s.bounds.x+s.bounds.w+30)+" "+c(s.bounds.y)+"] ")+" /Parent "+C,s.open&&(o+=" /Open true"),o+=" >>",O.content=o,this.internal.write(_.objId,"0 R",O.objId,"0 R");break;case"freetext":n="/Rect ["+i(s.bounds.x)+" "+c(s.bounds.y)+" "+i(s.bounds.x+s.bounds.w)+" "+c(s.bounds.y+s.bounds.h)+"] ";var W=s.color||"#000000";o="<</Type /Annot /Subtype /FreeText "+n+"/Contents ("+g(w(s.contents))+")",o+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+W+")",o+=" /Border [0 0 0]",o+=" >>",this.internal.write(o);break;case"link":if(s.options.name){var se=this.annotations._nameMap[s.options.name];s.options.pageNumber=se.page,s.options.top=se.y}else s.options.top||(s.options.top=0);if(n="/Rect ["+s.finalBounds.x+" "+s.finalBounds.y+" "+s.finalBounds.w+" "+s.finalBounds.h+"] ",o="",s.options.url)o="<</Type /Annot /Subtype /Link "+n+"/Border [0 0 0] /A <</S /URI /URI ("+g(w(s.options.url))+") >>";else if(s.options.pageNumber)switch(o="<</Type /Annot /Subtype /Link "+n+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(s.options.pageNumber).objId+" 0 R",s.options.magFactor=s.options.magFactor||"XYZ",s.options.magFactor){case"Fit":o+=" /Fit]";break;case"FitH":o+=" /FitH "+s.options.top+"]";break;case"FitV":s.options.left=s.options.left||0,o+=" /FitV "+s.options.left+"]";break;case"XYZ":default:var J=c(s.options.top);s.options.left=s.options.left||0,s.options.zoom===void 0&&(s.options.zoom=0),o+=" /XYZ "+s.options.left+" "+J+" "+s.options.zoom+"]"}o!=""&&(o+=" >>",this.internal.write(o))}}this.internal.write("]")}}]),e.createAnnotation=function(r){var s=this.internal.getCurrentPageInfo();switch(r.type){case"link":this.link(r.bounds.x,r.bounds.y,r.bounds.w,r.bounds.h,r);break;case"text":case"freetext":s.pageContext.annotations.push(r)}},e.link=function(r,s,n,o,i){var c=this.internal.getCurrentPageInfo(),d=this.internal.getCoordinateString,p=this.internal.getVerticalCoordinateString;c.pageContext.annotations.push({finalBounds:{x:d(r),y:p(s),w:d(r+n),h:p(s+o)},options:i,type:"link"})},e.textWithLink=function(r,s,n,o){var i,c,d=this.getTextWidth(r),p=this.internal.getLineHeight()/this.internal.scaleFactor;if(o.maxWidth!==void 0){c=o.maxWidth;var h=this.splitTextToSize(r,c).length;i=Math.ceil(p*h)}else c=d,i=p;return this.text(r,s,n,o),n+=.2*p,o.align==="center"&&(s-=d/2),o.align==="right"&&(s-=d),this.link(s,n-p,c,i,o),d},e.getTextWidth=function(r){var s=this.internal.getFontSize();return this.getStringUnitWidth(r)*s/this.internal.scaleFactor}}(Rt.API),function(e){var a={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},r={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},s={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},n=[1570,1571,1573,1575];e.__arabicParser__={};var o=e.__arabicParser__.isInArabicSubstitutionA=function(_){return a[_.charCodeAt(0)]!==void 0},i=e.__arabicParser__.isArabicLetter=function(_){return typeof _=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(_)},c=e.__arabicParser__.isArabicEndLetter=function(_){return i(_)&&o(_)&&a[_.charCodeAt(0)].length<=2},d=e.__arabicParser__.isArabicAlfLetter=function(_){return i(_)&&n.indexOf(_.charCodeAt(0))>=0};e.__arabicParser__.arabicLetterHasIsolatedForm=function(_){return i(_)&&o(_)&&a[_.charCodeAt(0)].length>=1};var p=e.__arabicParser__.arabicLetterHasFinalForm=function(_){return i(_)&&o(_)&&a[_.charCodeAt(0)].length>=2};e.__arabicParser__.arabicLetterHasInitialForm=function(_){return i(_)&&o(_)&&a[_.charCodeAt(0)].length>=3};var h=e.__arabicParser__.arabicLetterHasMedialForm=function(_){return i(_)&&o(_)&&a[_.charCodeAt(0)].length==4},x=e.__arabicParser__.resolveLigatures=function(_){var O=0,y=r,v="",C=0;for(O=0;O<_.length;O+=1)y[_.charCodeAt(O)]!==void 0?(C++,typeof(y=y[_.charCodeAt(O)])=="number"&&(v+=String.fromCharCode(y),y=r,C=0),O===_.length-1&&(y=r,v+=_.charAt(O-(C-1)),O-=C-1,C=0)):(y=r,v+=_.charAt(O-C),O-=C,C=0);return v};e.__arabicParser__.isArabicDiacritic=function(_){return _!==void 0&&s[_.charCodeAt(0)]!==void 0};var b=e.__arabicParser__.getCorrectForm=function(_,O,y){return i(_)?o(_)===!1?-1:!p(_)||!i(O)&&!i(y)||!i(y)&&c(O)||c(_)&&!i(O)||c(_)&&d(O)||c(_)&&c(O)?0:h(_)&&i(O)&&!c(O)&&i(y)&&p(y)?3:c(_)||!i(y)?1:2:-1},g=function(_){var O=0,y=0,v=0,C="",W="",se="",J=(_=_||"").split("\\s+"),Y=[];for(O=0;O<J.length;O+=1){for(Y.push(""),y=0;y<J[O].length;y+=1)C=J[O][y],W=J[O][y-1],se=J[O][y+1],i(C)?(v=b(C,W,se),Y[O]+=v!==-1?String.fromCharCode(a[C.charCodeAt(0)][v]):C):Y[O]+=C;Y[O]=x(Y[O])}return Y.join(" ")},w=e.__arabicParser__.processArabic=e.processArabic=function(){var _,O=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,y=[];if(Array.isArray(O)){var v=0;for(y=[],v=0;v<O.length;v+=1)Array.isArray(O[v])?y.push([g(O[v][0]),O[v][1],O[v][2]]):y.push([g(O[v])]);_=y}else _=g(O);return typeof arguments[0]=="string"?_:(arguments[0].text=_,arguments[0])};e.events.push(["preProcessText",w])}(Rt.API),Rt.API.autoPrint=function(e){var a;switch((e=e||{}).variant=e.variant||"non-conform",e.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){a=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+a+" 0 R")})}return this},function(e){var a=function(){var r=void 0;Object.defineProperty(this,"pdf",{get:function(){return r},set:function(c){r=c}});var s=150;Object.defineProperty(this,"width",{get:function(){return s},set:function(c){s=isNaN(c)||Number.isInteger(c)===!1||c<0?150:c,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=s+1)}});var n=300;Object.defineProperty(this,"height",{get:function(){return n},set:function(c){n=isNaN(c)||Number.isInteger(c)===!1||c<0?300:c,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=n+1)}});var o=[];Object.defineProperty(this,"childNodes",{get:function(){return o},set:function(c){o=c}});var i={};Object.defineProperty(this,"style",{get:function(){return i},set:function(c){i=c}}),Object.defineProperty(this,"parentNode",{})};a.prototype.getContext=function(r,s){var n;if((r=r||"2d")!=="2d")return null;for(n in s)this.pdf.context2d.hasOwnProperty(n)&&(this.pdf.context2d[n]=s[n]);return this.pdf.context2d._canvas=this,this.pdf.context2d},a.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},e.events.push(["initialized",function(){this.canvas=new a,this.canvas.pdf=this}])}(Rt.API),function(e){var a={left:0,top:0,bottom:0,right:0},r=!1,s=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},a),this.internal.__cell__.margins.width=this.getPageWidth(),n.call(this))},n=function(){this.internal.__cell__.lastCell=new o,this.internal.__cell__.pages=1},o=function(){var d=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return d},set:function(_){d=_}});var p=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return p},set:function(_){p=_}});var h=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return h},set:function(_){h=_}});var x=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return x},set:function(_){x=_}});var b=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return b},set:function(_){b=_}});var g=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return g},set:function(_){g=_}});var w=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return w},set:function(_){w=_}}),this};o.prototype.clone=function(){return new o(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},o.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},e.setHeaderFunction=function(d){return s.call(this),this.internal.__cell__.headerFunction=typeof d=="function"?d:void 0,this},e.getTextDimensions=function(d,p){s.call(this);var h=(p=p||{}).fontSize||this.getFontSize(),x=p.font||this.getFont(),b=p.scaleFactor||this.internal.scaleFactor,g=0,w=0,_=0,O=this;if(!Array.isArray(d)&&typeof d!="string"){if(typeof d!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");d=String(d)}var y=p.maxWidth;y>0?typeof d=="string"?d=this.splitTextToSize(d,y):Object.prototype.toString.call(d)==="[object Array]"&&(d=d.reduce(function(C,W){return C.concat(O.splitTextToSize(W,y))},[])):d=Array.isArray(d)?d:[d];for(var v=0;v<d.length;v++)g<(_=this.getStringUnitWidth(d[v],{font:x})*h)&&(g=_);return g!==0&&(w=d.length),{w:g/=b,h:Math.max((w*h*this.getLineHeightFactor()-h*(this.getLineHeightFactor()-1))/b,0)}},e.cellAddPage=function(){s.call(this),this.addPage();var d=this.internal.__cell__.margins||a;return this.internal.__cell__.lastCell=new o(d.left,d.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var i=e.cell=function(){var d;d=arguments[0]instanceof o?arguments[0]:new o(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),s.call(this);var p=this.internal.__cell__.lastCell,h=this.internal.__cell__.padding,x=this.internal.__cell__.margins||a,b=this.internal.__cell__.tableHeaderRow,g=this.internal.__cell__.printHeaders;return p.lineNumber!==void 0&&(p.lineNumber===d.lineNumber?(d.x=(p.x||0)+(p.width||0),d.y=p.y||0):p.y+p.height+d.height+x.bottom>this.getPageHeight()?(this.cellAddPage(),d.y=x.top,g&&b&&(this.printHeaderRow(d.lineNumber,!0),d.y+=b[0].height)):d.y=p.y+p.height||d.y),d.text[0]!==void 0&&(this.rect(d.x,d.y,d.width,d.height,r===!0?"FD":void 0),d.align==="right"?this.text(d.text,d.x+d.width-h,d.y+h,{align:"right",baseline:"top"}):d.align==="center"?this.text(d.text,d.x+d.width/2,d.y+h,{align:"center",baseline:"top",maxWidth:d.width-h-h}):this.text(d.text,d.x+h,d.y+h,{align:"left",baseline:"top",maxWidth:d.width-h-h})),this.internal.__cell__.lastCell=d,this};e.table=function(d,p,h,x,b){if(s.call(this),!h)throw new Error("No data for PDF table.");var g,w,_,O,y=[],v=[],C=[],W={},se={},J=[],Y=[],K=(b=b||{}).autoSize||!1,fe=b.printHeaders!==!1,me=b.css&&b.css["font-size"]!==void 0?16*b.css["font-size"]:b.fontSize||12,$=b.margins||Object.assign({width:this.getPageWidth()},a),L=typeof b.padding=="number"?b.padding:3,le=b.headerBackgroundColor||"#c8c8c8",R=b.headerTextColor||"#000";if(n.call(this),this.internal.__cell__.printHeaders=fe,this.internal.__cell__.margins=$,this.internal.__cell__.table_font_size=me,this.internal.__cell__.padding=L,this.internal.__cell__.headerBackgroundColor=le,this.internal.__cell__.headerTextColor=R,this.setFontSize(me),x==null)v=y=Object.keys(h[0]),C=y.map(function(){return"left"});else if(Array.isArray(x)&&ia(x[0])==="object")for(y=x.map(function(ie){return ie.name}),v=x.map(function(ie){return ie.prompt||ie.name||""}),C=x.map(function(ie){return ie.align||"left"}),g=0;g<x.length;g+=1)se[x[g].name]=x[g].width*(19.049976/25.4);else Array.isArray(x)&&typeof x[0]=="string"&&(v=y=x,C=y.map(function(){return"left"}));if(K||Array.isArray(x)&&typeof x[0]=="string")for(g=0;g<y.length;g+=1){for(W[O=y[g]]=h.map(function(ie){return ie[O]}),this.setFont(void 0,"bold"),J.push(this.getTextDimensions(v[g],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),w=W[O],this.setFont(void 0,"normal"),_=0;_<w.length;_+=1)J.push(this.getTextDimensions(w[_],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);se[O]=Math.max.apply(null,J)+L+L,J=[]}if(fe){var we={};for(g=0;g<y.length;g+=1)we[y[g]]={},we[y[g]].text=v[g],we[y[g]].align=C[g];var ce=c.call(this,we,se);Y=y.map(function(ie){return new o(d,p,se[ie],ce,we[ie].text,void 0,we[ie].align)}),this.setTableHeaderRow(Y),this.printHeaderRow(1,!1)}var Ce=x.reduce(function(ie,Ue){return ie[Ue.name]=Ue.align,ie},{});for(g=0;g<h.length;g+=1){"rowStart"in b&&b.rowStart instanceof Function&&b.rowStart({row:g,data:h[g]},this);var Z=c.call(this,h[g],se);for(_=0;_<y.length;_+=1){var he=h[g][y[_]];"cellStart"in b&&b.cellStart instanceof Function&&b.cellStart({row:g,col:_,data:he},this),i.call(this,new o(d,p,se[y[_]],Z,he,g+2,Ce[y[_]]))}}return this.internal.__cell__.table_x=d,this.internal.__cell__.table_y=p,this};var c=function(d,p){var h=this.internal.__cell__.padding,x=this.internal.__cell__.table_font_size,b=this.internal.scaleFactor;return Object.keys(d).map(function(g){var w=d[g];return this.splitTextToSize(w.hasOwnProperty("text")?w.text:w,p[g]-h-h)},this).map(function(g){return this.getLineHeightFactor()*g.length*x/b+h+h},this).reduce(function(g,w){return Math.max(g,w)},0)};e.setTableHeaderRow=function(d){s.call(this),this.internal.__cell__.tableHeaderRow=d},e.printHeaderRow=function(d,p){if(s.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var h;if(r=!0,typeof this.internal.__cell__.headerFunction=="function"){var x=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new o(x[0],x[1],x[2],x[3],void 0,-1)}this.setFont(void 0,"bold");for(var b=[],g=0;g<this.internal.__cell__.tableHeaderRow.length;g+=1){h=this.internal.__cell__.tableHeaderRow[g].clone(),p&&(h.y=this.internal.__cell__.margins.top||0,b.push(h)),h.lineNumber=d;var w=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),i.call(this,h),this.setTextColor(w)}b.length>0&&this.setTableHeaderRow(b),this.setFont(void 0,"normal"),r=!1}}(Rt.API);var yb={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},jb=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],kf=bb(jb),Nb=[100,200,300,400,500,600,700,800,900],J3=bb(Nb);function Cf(e){var a=e.family.replace(/"|'/g,"").toLowerCase(),r=function(o){return yb[o=o||"normal"]?o:"normal"}(e.style),s=function(o){if(!o)return 400;if(typeof o=="number")return o>=100&&o<=900&&o%100==0?o:400;if(/^\d00$/.test(o))return parseInt(o);switch(o){case"bold":return 700;case"normal":default:return 400}}(e.weight),n=function(o){return typeof kf[o=o||"normal"]=="number"?o:"normal"}(e.stretch);return{family:a,style:r,weight:s,stretch:n,src:e.src||[],ref:e.ref||{name:a,style:[n,r,s].join(" ")}}}function Hg(e,a,r,s){var n;for(n=r;n>=0&&n<a.length;n+=s)if(e[a[n]])return e[a[n]];for(n=r;n>=0&&n<a.length;n-=s)if(e[a[n]])return e[a[n]]}var Q3={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},Wg={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function Gg(e){return[e.stretch,e.style,e.weight,e.family].join(" ")}function Y3(e,a,r){for(var s=(r=r||{}).defaultFontFamily||"times",n=Object.assign({},Q3,r.genericFontFamilies||{}),o=null,i=null,c=0;c<a.length;++c)if(n[(o=Cf(a[c])).family]&&(o.family=n[o.family]),e.hasOwnProperty(o.family)){i=e[o.family];break}if(!(i=i||e[s]))throw new Error("Could not find a font-family for the rule '"+Gg(o)+"' and default family '"+s+"'.");if(i=function(d,p){if(p[d])return p[d];var h=kf[d],x=h<=kf.normal?-1:1,b=Hg(p,jb,h,x);if(!b)throw new Error("Could not find a matching font-stretch value for "+d);return b}(o.stretch,i),i=function(d,p){if(p[d])return p[d];for(var h=yb[d],x=0;x<h.length;++x)if(p[h[x]])return p[h[x]];throw new Error("Could not find a matching font-style for "+d)}(o.style,i),!(i=function(d,p){if(p[d])return p[d];if(d===400&&p[500])return p[500];if(d===500&&p[400])return p[400];var h=J3[d],x=Hg(p,Nb,h,d<400?-1:1);if(!x)throw new Error("Could not find a matching font-weight for value "+d);return x}(o.weight,i)))throw new Error("Failed to resolve a font for the rule '"+Gg(o)+"'.");return i}function Jg(e){return e.trimLeft()}function X3(e,a){for(var r=0;r<e.length;){if(e.charAt(r)===a)return[e.substring(0,r),e.substring(r+1)];r+=1}return null}function K3(e){var a=e.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return a===null?null:[a[0],e.substring(a[0].length)]}var fu,Qg,Yg,sp=["times"];(function(e){var a,r,s,n,o,i,c,d,p,h=function(S){return S=S||{},this.isStrokeTransparent=S.isStrokeTransparent||!1,this.strokeOpacity=S.strokeOpacity||1,this.strokeStyle=S.strokeStyle||"#000000",this.fillStyle=S.fillStyle||"#000000",this.isFillTransparent=S.isFillTransparent||!1,this.fillOpacity=S.fillOpacity||1,this.font=S.font||"10px sans-serif",this.textBaseline=S.textBaseline||"alphabetic",this.textAlign=S.textAlign||"left",this.lineWidth=S.lineWidth||1,this.lineJoin=S.lineJoin||"miter",this.lineCap=S.lineCap||"butt",this.path=S.path||[],this.transform=S.transform!==void 0?S.transform.clone():new d,this.globalCompositeOperation=S.globalCompositeOperation||"normal",this.globalAlpha=S.globalAlpha||1,this.clip_path=S.clip_path||[],this.currentPoint=S.currentPoint||new i,this.miterLimit=S.miterLimit||10,this.lastPoint=S.lastPoint||new i,this.lineDashOffset=S.lineDashOffset||0,this.lineDash=S.lineDash||[],this.margin=S.margin||[0,0,0,0],this.prevPageLastElemOffset=S.prevPageLastElemOffset||0,this.ignoreClearRect=typeof S.ignoreClearRect!="boolean"||S.ignoreClearRect,this};e.events.push(["initialized",function(){this.context2d=new x(this),a=this.internal.f2,r=this.internal.getCoordinateString,s=this.internal.getVerticalCoordinateString,n=this.internal.getHorizontalCoordinate,o=this.internal.getVerticalCoordinate,i=this.internal.Point,c=this.internal.Rectangle,d=this.internal.Matrix,p=new h}]);var x=function(S){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var G=S;Object.defineProperty(this,"pdf",{get:function(){return G}});var q=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return q},set:function(Me){q=!!Me}});var N=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return N},set:function(Me){N=!!Me}});var U=0;Object.defineProperty(this,"posX",{get:function(){return U},set:function(Me){isNaN(Me)||(U=Me)}});var T=0;Object.defineProperty(this,"posY",{get:function(){return T},set:function(Me){isNaN(Me)||(T=Me)}}),Object.defineProperty(this,"margin",{get:function(){return p.margin},set:function(Me){var te;typeof Me=="number"?te=[Me,Me,Me,Me]:((te=new Array(4))[0]=Me[0],te[1]=Me.length>=2?Me[1]:te[0],te[2]=Me.length>=3?Me[2]:te[0],te[3]=Me.length>=4?Me[3]:te[1]),p.margin=te}});var B=!1;Object.defineProperty(this,"autoPaging",{get:function(){return B},set:function(Me){B=Me}});var oe=0;Object.defineProperty(this,"lastBreak",{get:function(){return oe},set:function(Me){oe=Me}});var Ne=[];Object.defineProperty(this,"pageBreaks",{get:function(){return Ne},set:function(Me){Ne=Me}}),Object.defineProperty(this,"ctx",{get:function(){return p},set:function(Me){Me instanceof h&&(p=Me)}}),Object.defineProperty(this,"path",{get:function(){return p.path},set:function(Me){p.path=Me}});var Be=[];Object.defineProperty(this,"ctxStack",{get:function(){return Be},set:function(Me){Be=Me}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(Me){var te;te=b(Me),this.ctx.fillStyle=te.style,this.ctx.isFillTransparent=te.a===0,this.ctx.fillOpacity=te.a,this.pdf.setFillColor(te.r,te.g,te.b,{a:te.a}),this.pdf.setTextColor(te.r,te.g,te.b,{a:te.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(Me){var te=b(Me);this.ctx.strokeStyle=te.style,this.ctx.isStrokeTransparent=te.a===0,this.ctx.strokeOpacity=te.a,te.a===0?this.pdf.setDrawColor(255,255,255):(te.a,this.pdf.setDrawColor(te.r,te.g,te.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(Me){["butt","round","square"].indexOf(Me)!==-1&&(this.ctx.lineCap=Me,this.pdf.setLineCap(Me))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(Me){isNaN(Me)||(this.ctx.lineWidth=Me,this.pdf.setLineWidth(Me))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(Me){["bevel","round","miter"].indexOf(Me)!==-1&&(this.ctx.lineJoin=Me,this.pdf.setLineJoin(Me))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(Me){isNaN(Me)||(this.ctx.miterLimit=Me,this.pdf.setMiterLimit(Me))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(Me){this.ctx.textBaseline=Me}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(Me){["right","end","center","left","start"].indexOf(Me)!==-1&&(this.ctx.textAlign=Me)}});var Xe=null;function dt(Me,te){if(Xe===null){var Ct=function(ae){var xe=[];return Object.keys(ae).forEach(function(be){ae[be].forEach(function(Te){var Ae=null;switch(Te){case"bold":Ae={family:be,weight:"bold"};break;case"italic":Ae={family:be,style:"italic"};break;case"bolditalic":Ae={family:be,weight:"bold",style:"italic"};break;case"":case"normal":Ae={family:be}}Ae!==null&&(Ae.ref={name:be,style:Te},xe.push(Ae))})}),xe}(Me.getFontList());Xe=function(ae){for(var xe={},be=0;be<ae.length;++be){var Te=Cf(ae[be]),Ae=Te.family,tt=Te.stretch,rt=Te.style,gt=Te.weight;xe[Ae]=xe[Ae]||{},xe[Ae][tt]=xe[Ae][tt]||{},xe[Ae][tt][rt]=xe[Ae][tt][rt]||{},xe[Ae][tt][rt][gt]=Te}return xe}(Ct.concat(te))}return Xe}var ft=null;Object.defineProperty(this,"fontFaces",{get:function(){return ft},set:function(Me){Xe=null,ft=Me}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(Me){var te;if(this.ctx.font=Me,(te=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(Me))!==null){var Ct=te[1],ae=(te[2],te[3]),xe=te[4],be=(te[5],te[6]),Te=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(xe)[2];xe=Math.floor(Te==="px"?parseFloat(xe)*this.pdf.internal.scaleFactor:Te==="em"?parseFloat(xe)*this.pdf.getFontSize():parseFloat(xe)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(xe);var Ae=function(Pe){var at,k,Qe=[],Fe=Pe.trim();if(Fe==="")return sp;if(Fe in Wg)return[Wg[Fe]];for(;Fe!=="";){switch(k=null,at=(Fe=Jg(Fe)).charAt(0)){case'"':case"'":k=X3(Fe.substring(1),at);break;default:k=K3(Fe)}if(k===null||(Qe.push(k[0]),(Fe=Jg(k[1]))!==""&&Fe.charAt(0)!==","))return sp;Fe=Fe.replace(/^,/,"")}return Qe}(be);if(this.fontFaces){var tt=Y3(dt(this.pdf,this.fontFaces),Ae.map(function(Pe){return{family:Pe,stretch:"normal",weight:ae,style:Ct}}));this.pdf.setFont(tt.ref.name,tt.ref.style)}else{var rt="";(ae==="bold"||parseInt(ae,10)>=700||Ct==="bold")&&(rt="bold"),Ct==="italic"&&(rt+="italic"),rt.length===0&&(rt="normal");for(var gt="",st={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},Tt=0;Tt<Ae.length;Tt++){if(this.pdf.internal.getFont(Ae[Tt],rt,{noFallback:!0,disableWarning:!0})!==void 0){gt=Ae[Tt];break}if(rt==="bolditalic"&&this.pdf.internal.getFont(Ae[Tt],"bold",{noFallback:!0,disableWarning:!0})!==void 0)gt=Ae[Tt],rt="bold";else if(this.pdf.internal.getFont(Ae[Tt],"normal",{noFallback:!0,disableWarning:!0})!==void 0){gt=Ae[Tt],rt="normal";break}}if(gt===""){for(var ne=0;ne<Ae.length;ne++)if(st[Ae[ne]]){gt=st[Ae[ne]];break}}gt=gt===""?"Times":gt,this.pdf.setFont(gt,rt)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(Me){this.ctx.globalCompositeOperation=Me}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(Me){this.ctx.globalAlpha=Me}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(Me){this.ctx.lineDashOffset=Me,Ue.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(Me){this.ctx.lineDash=Me,Ue.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(Me){this.ctx.ignoreClearRect=!!Me}})};x.prototype.setLineDash=function(S){this.lineDash=S},x.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},x.prototype.fill=function(){W.call(this,"fill",!1)},x.prototype.stroke=function(){W.call(this,"stroke",!1)},x.prototype.beginPath=function(){this.path=[{type:"begin"}]},x.prototype.moveTo=function(S,G){if(isNaN(S)||isNaN(G))throw ua.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var q=this.ctx.transform.applyToPoint(new i(S,G));this.path.push({type:"mt",x:q.x,y:q.y}),this.ctx.lastPoint=new i(S,G)},x.prototype.closePath=function(){var S=new i(0,0),G=0;for(G=this.path.length-1;G!==-1;G--)if(this.path[G].type==="begin"&&ia(this.path[G+1])==="object"&&typeof this.path[G+1].x=="number"){S=new i(this.path[G+1].x,this.path[G+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new i(S.x,S.y)},x.prototype.lineTo=function(S,G){if(isNaN(S)||isNaN(G))throw ua.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var q=this.ctx.transform.applyToPoint(new i(S,G));this.path.push({type:"lt",x:q.x,y:q.y}),this.ctx.lastPoint=new i(q.x,q.y)},x.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),W.call(this,null,!0)},x.prototype.quadraticCurveTo=function(S,G,q,N){if(isNaN(q)||isNaN(N)||isNaN(S)||isNaN(G))throw ua.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var U=this.ctx.transform.applyToPoint(new i(q,N)),T=this.ctx.transform.applyToPoint(new i(S,G));this.path.push({type:"qct",x1:T.x,y1:T.y,x:U.x,y:U.y}),this.ctx.lastPoint=new i(U.x,U.y)},x.prototype.bezierCurveTo=function(S,G,q,N,U,T){if(isNaN(U)||isNaN(T)||isNaN(S)||isNaN(G)||isNaN(q)||isNaN(N))throw ua.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var B=this.ctx.transform.applyToPoint(new i(U,T)),oe=this.ctx.transform.applyToPoint(new i(S,G)),Ne=this.ctx.transform.applyToPoint(new i(q,N));this.path.push({type:"bct",x1:oe.x,y1:oe.y,x2:Ne.x,y2:Ne.y,x:B.x,y:B.y}),this.ctx.lastPoint=new i(B.x,B.y)},x.prototype.arc=function(S,G,q,N,U,T){if(isNaN(S)||isNaN(G)||isNaN(q)||isNaN(N)||isNaN(U))throw ua.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(T=!!T,!this.ctx.transform.isIdentity){var B=this.ctx.transform.applyToPoint(new i(S,G));S=B.x,G=B.y;var oe=this.ctx.transform.applyToPoint(new i(0,q)),Ne=this.ctx.transform.applyToPoint(new i(0,0));q=Math.sqrt(Math.pow(oe.x-Ne.x,2)+Math.pow(oe.y-Ne.y,2))}Math.abs(U-N)>=2*Math.PI&&(N=0,U=2*Math.PI),this.path.push({type:"arc",x:S,y:G,radius:q,startAngle:N,endAngle:U,counterclockwise:T})},x.prototype.arcTo=function(S,G,q,N,U){throw new Error("arcTo not implemented.")},x.prototype.rect=function(S,G,q,N){if(isNaN(S)||isNaN(G)||isNaN(q)||isNaN(N))throw ua.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(S,G),this.lineTo(S+q,G),this.lineTo(S+q,G+N),this.lineTo(S,G+N),this.lineTo(S,G),this.lineTo(S+q,G),this.lineTo(S,G)},x.prototype.fillRect=function(S,G,q,N){if(isNaN(S)||isNaN(G)||isNaN(q)||isNaN(N))throw ua.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!g.call(this)){var U={};this.lineCap!=="butt"&&(U.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(U.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(S,G,q,N),this.fill(),U.hasOwnProperty("lineCap")&&(this.lineCap=U.lineCap),U.hasOwnProperty("lineJoin")&&(this.lineJoin=U.lineJoin)}},x.prototype.strokeRect=function(S,G,q,N){if(isNaN(S)||isNaN(G)||isNaN(q)||isNaN(N))throw ua.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");w.call(this)||(this.beginPath(),this.rect(S,G,q,N),this.stroke())},x.prototype.clearRect=function(S,G,q,N){if(isNaN(S)||isNaN(G)||isNaN(q)||isNaN(N))throw ua.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(S,G,q,N))},x.prototype.save=function(S){S=typeof S!="boolean"||S;for(var G=this.pdf.internal.getCurrentPageInfo().pageNumber,q=0;q<this.pdf.internal.getNumberOfPages();q++)this.pdf.setPage(q+1),this.pdf.internal.out("q");if(this.pdf.setPage(G),S){this.ctx.fontSize=this.pdf.internal.getFontSize();var N=new h(this.ctx);this.ctxStack.push(this.ctx),this.ctx=N}},x.prototype.restore=function(S){S=typeof S!="boolean"||S;for(var G=this.pdf.internal.getCurrentPageInfo().pageNumber,q=0;q<this.pdf.internal.getNumberOfPages();q++)this.pdf.setPage(q+1),this.pdf.internal.out("Q");this.pdf.setPage(G),S&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},x.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var b=function(S){var G,q,N,U;if(S.isCanvasGradient===!0&&(S=S.getColor()),!S)return{r:0,g:0,b:0,a:0,style:S};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(S))G=0,q=0,N=0,U=0;else{var T=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(S);if(T!==null)G=parseInt(T[1]),q=parseInt(T[2]),N=parseInt(T[3]),U=1;else if((T=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(S))!==null)G=parseInt(T[1]),q=parseInt(T[2]),N=parseInt(T[3]),U=parseFloat(T[4]);else{if(U=1,typeof S=="string"&&S.charAt(0)!=="#"){var B=new hb(S);S=B.ok?B.toHex():"#000000"}S.length===4?(G=S.substring(1,2),G+=G,q=S.substring(2,3),q+=q,N=S.substring(3,4),N+=N):(G=S.substring(1,3),q=S.substring(3,5),N=S.substring(5,7)),G=parseInt(G,16),q=parseInt(q,16),N=parseInt(N,16)}}return{r:G,g:q,b:N,a:U,style:S}},g=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},w=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};x.prototype.fillText=function(S,G,q,N){if(isNaN(G)||isNaN(q)||typeof S!="string")throw ua.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(N=isNaN(N)?void 0:N,!g.call(this)){var U=Z(this.ctx.transform.rotation),T=this.ctx.transform.scaleX;L.call(this,{text:S,x:G,y:q,scale:T,angle:U,align:this.textAlign,maxWidth:N})}},x.prototype.strokeText=function(S,G,q,N){if(isNaN(G)||isNaN(q)||typeof S!="string")throw ua.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!w.call(this)){N=isNaN(N)?void 0:N;var U=Z(this.ctx.transform.rotation),T=this.ctx.transform.scaleX;L.call(this,{text:S,x:G,y:q,scale:T,renderingMode:"stroke",angle:U,align:this.textAlign,maxWidth:N})}},x.prototype.measureText=function(S){if(typeof S!="string")throw ua.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var G=this.pdf,q=this.pdf.internal.scaleFactor,N=G.internal.getFontSize(),U=G.getStringUnitWidth(S)*N/G.internal.scaleFactor,T=function(B){var oe=(B=B||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return oe}}),this};return new T({width:U*=Math.round(96*q/72*1e4)/1e4})},x.prototype.scale=function(S,G){if(isNaN(S)||isNaN(G))throw ua.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var q=new d(S,0,0,G,0,0);this.ctx.transform=this.ctx.transform.multiply(q)},x.prototype.rotate=function(S){if(isNaN(S))throw ua.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var G=new d(Math.cos(S),Math.sin(S),-Math.sin(S),Math.cos(S),0,0);this.ctx.transform=this.ctx.transform.multiply(G)},x.prototype.translate=function(S,G){if(isNaN(S)||isNaN(G))throw ua.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var q=new d(1,0,0,1,S,G);this.ctx.transform=this.ctx.transform.multiply(q)},x.prototype.transform=function(S,G,q,N,U,T){if(isNaN(S)||isNaN(G)||isNaN(q)||isNaN(N)||isNaN(U)||isNaN(T))throw ua.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var B=new d(S,G,q,N,U,T);this.ctx.transform=this.ctx.transform.multiply(B)},x.prototype.setTransform=function(S,G,q,N,U,T){S=isNaN(S)?1:S,G=isNaN(G)?0:G,q=isNaN(q)?0:q,N=isNaN(N)?1:N,U=isNaN(U)?0:U,T=isNaN(T)?0:T,this.ctx.transform=new d(S,G,q,N,U,T)};var _=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};x.prototype.drawImage=function(S,G,q,N,U,T,B,oe,Ne){var Be=this.pdf.getImageProperties(S),Xe=1,dt=1,ft=1,Me=1;N!==void 0&&oe!==void 0&&(ft=oe/N,Me=Ne/U,Xe=Be.width/N*oe/N,dt=Be.height/U*Ne/U),T===void 0&&(T=G,B=q,G=0,q=0),N!==void 0&&oe===void 0&&(oe=N,Ne=U),N===void 0&&oe===void 0&&(oe=Be.width,Ne=Be.height);for(var te,Ct=this.ctx.transform.decompose(),ae=Z(Ct.rotate.shx),xe=new d,be=(xe=(xe=(xe=xe.multiply(Ct.translate)).multiply(Ct.skew)).multiply(Ct.scale)).applyToRectangle(new c(T-G*ft,B-q*Me,N*Xe,U*dt)),Te=O.call(this,be),Ae=[],tt=0;tt<Te.length;tt+=1)Ae.indexOf(Te[tt])===-1&&Ae.push(Te[tt]);if(C(Ae),this.autoPaging)for(var rt=Ae[0],gt=Ae[Ae.length-1],st=rt;st<gt+1;st++){this.pdf.setPage(st);var Tt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],ne=st===1?this.posY+this.margin[0]:this.margin[0],Pe=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],at=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],k=st===1?0:Pe+(st-2)*at;if(this.ctx.clip_path.length!==0){var Qe=this.path;te=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=v(te,this.posX+this.margin[3],-k+ne+this.ctx.prevPageLastElemOffset),se.call(this,"fill",!0),this.path=Qe}var Fe=JSON.parse(JSON.stringify(be));Fe=v([Fe],this.posX+this.margin[3],-k+ne+this.ctx.prevPageLastElemOffset)[0];var ut=(st>rt||st<gt)&&_.call(this);ut&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Tt,at,null).clip().discardPath()),this.pdf.addImage(S,"JPEG",Fe.x,Fe.y,Fe.w,Fe.h,null,null,ae),ut&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(S,"JPEG",be.x,be.y,be.w,be.h,null,null,ae)};var O=function(S,G,q){var N=[];G=G||this.pdf.internal.pageSize.width,q=q||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var U=this.posY+this.ctx.prevPageLastElemOffset;switch(S.type){default:case"mt":case"lt":N.push(Math.floor((S.y+U)/q)+1);break;case"arc":N.push(Math.floor((S.y+U-S.radius)/q)+1),N.push(Math.floor((S.y+U+S.radius)/q)+1);break;case"qct":var T=he(this.ctx.lastPoint.x,this.ctx.lastPoint.y,S.x1,S.y1,S.x,S.y);N.push(Math.floor((T.y+U)/q)+1),N.push(Math.floor((T.y+T.h+U)/q)+1);break;case"bct":var B=ie(this.ctx.lastPoint.x,this.ctx.lastPoint.y,S.x1,S.y1,S.x2,S.y2,S.x,S.y);N.push(Math.floor((B.y+U)/q)+1),N.push(Math.floor((B.y+B.h+U)/q)+1);break;case"rect":N.push(Math.floor((S.y+U)/q)+1),N.push(Math.floor((S.y+S.h+U)/q)+1)}for(var oe=0;oe<N.length;oe+=1)for(;this.pdf.internal.getNumberOfPages()<N[oe];)y.call(this);return N},y=function(){var S=this.fillStyle,G=this.strokeStyle,q=this.font,N=this.lineCap,U=this.lineWidth,T=this.lineJoin;this.pdf.addPage(),this.fillStyle=S,this.strokeStyle=G,this.font=q,this.lineCap=N,this.lineWidth=U,this.lineJoin=T},v=function(S,G,q){for(var N=0;N<S.length;N++)switch(S[N].type){case"bct":S[N].x2+=G,S[N].y2+=q;case"qct":S[N].x1+=G,S[N].y1+=q;case"mt":case"lt":case"arc":default:S[N].x+=G,S[N].y+=q}return S},C=function(S){return S.sort(function(G,q){return G-q})},W=function(S,G){for(var q,N,U=this.fillStyle,T=this.strokeStyle,B=this.lineCap,oe=this.lineWidth,Ne=Math.abs(oe*this.ctx.transform.scaleX),Be=this.lineJoin,Xe=JSON.parse(JSON.stringify(this.path)),dt=JSON.parse(JSON.stringify(this.path)),ft=[],Me=0;Me<dt.length;Me++)if(dt[Me].x!==void 0)for(var te=O.call(this,dt[Me]),Ct=0;Ct<te.length;Ct+=1)ft.indexOf(te[Ct])===-1&&ft.push(te[Ct]);for(var ae=0;ae<ft.length;ae++)for(;this.pdf.internal.getNumberOfPages()<ft[ae];)y.call(this);if(C(ft),this.autoPaging)for(var xe=ft[0],be=ft[ft.length-1],Te=xe;Te<be+1;Te++){this.pdf.setPage(Te),this.fillStyle=U,this.strokeStyle=T,this.lineCap=B,this.lineWidth=Ne,this.lineJoin=Be;var Ae=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],tt=Te===1?this.posY+this.margin[0]:this.margin[0],rt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],gt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],st=Te===1?0:rt+(Te-2)*gt;if(this.ctx.clip_path.length!==0){var Tt=this.path;q=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=v(q,this.posX+this.margin[3],-st+tt+this.ctx.prevPageLastElemOffset),se.call(this,S,!0),this.path=Tt}if(N=JSON.parse(JSON.stringify(Xe)),this.path=v(N,this.posX+this.margin[3],-st+tt+this.ctx.prevPageLastElemOffset),G===!1||Te===0){var ne=(Te>xe||Te<be)&&_.call(this);ne&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Ae,gt,null).clip().discardPath()),se.call(this,S,G),ne&&this.pdf.restoreGraphicsState()}this.lineWidth=oe}else this.lineWidth=Ne,se.call(this,S,G),this.lineWidth=oe;this.path=Xe},se=function(S,G){if((S!=="stroke"||G||!w.call(this))&&(S==="stroke"||G||!g.call(this))){for(var q,N,U=[],T=this.path,B=0;B<T.length;B++){var oe=T[B];switch(oe.type){case"begin":U.push({begin:!0});break;case"close":U.push({close:!0});break;case"mt":U.push({start:oe,deltas:[],abs:[]});break;case"lt":var Ne=U.length;if(T[B-1]&&!isNaN(T[B-1].x)&&(q=[oe.x-T[B-1].x,oe.y-T[B-1].y],Ne>0)){for(;Ne>=0;Ne--)if(U[Ne-1].close!==!0&&U[Ne-1].begin!==!0){U[Ne-1].deltas.push(q),U[Ne-1].abs.push(oe);break}}break;case"bct":q=[oe.x1-T[B-1].x,oe.y1-T[B-1].y,oe.x2-T[B-1].x,oe.y2-T[B-1].y,oe.x-T[B-1].x,oe.y-T[B-1].y],U[U.length-1].deltas.push(q);break;case"qct":var Be=T[B-1].x+2/3*(oe.x1-T[B-1].x),Xe=T[B-1].y+2/3*(oe.y1-T[B-1].y),dt=oe.x+2/3*(oe.x1-oe.x),ft=oe.y+2/3*(oe.y1-oe.y),Me=oe.x,te=oe.y;q=[Be-T[B-1].x,Xe-T[B-1].y,dt-T[B-1].x,ft-T[B-1].y,Me-T[B-1].x,te-T[B-1].y],U[U.length-1].deltas.push(q);break;case"arc":U.push({deltas:[],abs:[],arc:!0}),Array.isArray(U[U.length-1].abs)&&U[U.length-1].abs.push(oe)}}N=G?null:S==="stroke"?"stroke":"fill";for(var Ct=!1,ae=0;ae<U.length;ae++)if(U[ae].arc)for(var xe=U[ae].abs,be=0;be<xe.length;be++){var Te=xe[be];Te.type==="arc"?K.call(this,Te.x,Te.y,Te.radius,Te.startAngle,Te.endAngle,Te.counterclockwise,void 0,G,!Ct):le.call(this,Te.x,Te.y),Ct=!0}else if(U[ae].close===!0)this.pdf.internal.out("h"),Ct=!1;else if(U[ae].begin!==!0){var Ae=U[ae].start.x,tt=U[ae].start.y;R.call(this,U[ae].deltas,Ae,tt),Ct=!0}N&&fe.call(this,N),G&&me.call(this)}},J=function(S){var G=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,q=G*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return S-q;case"top":return S+G-q;case"hanging":return S+G-2*q;case"middle":return S+G/2-q;case"ideographic":return S;case"alphabetic":default:return S}},Y=function(S){return S+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};x.prototype.createLinearGradient=function(){var S=function(){};return S.colorStops=[],S.addColorStop=function(G,q){this.colorStops.push([G,q])},S.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},S.isCanvasGradient=!0,S},x.prototype.createPattern=function(){return this.createLinearGradient()},x.prototype.createRadialGradient=function(){return this.createLinearGradient()};var K=function(S,G,q,N,U,T,B,oe,Ne){for(var Be=ce.call(this,q,N,U,T),Xe=0;Xe<Be.length;Xe++){var dt=Be[Xe];Xe===0&&(Ne?$.call(this,dt.x1+S,dt.y1+G):le.call(this,dt.x1+S,dt.y1+G)),we.call(this,S,G,dt.x2,dt.y2,dt.x3,dt.y3,dt.x4,dt.y4)}oe?me.call(this):fe.call(this,B)},fe=function(S){switch(S){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},me=function(){this.pdf.clip(),this.pdf.discardPath()},$=function(S,G){this.pdf.internal.out(r(S)+" "+s(G)+" m")},L=function(S){var G;switch(S.align){case"right":case"end":G="right";break;case"center":G="center";break;case"left":case"start":default:G="left"}var q=this.pdf.getTextDimensions(S.text),N=J.call(this,S.y),U=Y.call(this,N)-q.h,T=this.ctx.transform.applyToPoint(new i(S.x,N)),B=this.ctx.transform.decompose(),oe=new d;oe=(oe=(oe=oe.multiply(B.translate)).multiply(B.skew)).multiply(B.scale);for(var Ne,Be,Xe,dt=this.ctx.transform.applyToRectangle(new c(S.x,N,q.w,q.h)),ft=oe.applyToRectangle(new c(S.x,U,q.w,q.h)),Me=O.call(this,ft),te=[],Ct=0;Ct<Me.length;Ct+=1)te.indexOf(Me[Ct])===-1&&te.push(Me[Ct]);if(C(te),this.autoPaging)for(var ae=te[0],xe=te[te.length-1],be=ae;be<xe+1;be++){this.pdf.setPage(be);var Te=be===1?this.posY+this.margin[0]:this.margin[0],Ae=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],tt=this.pdf.internal.pageSize.height-this.margin[2],rt=tt-this.margin[0],gt=this.pdf.internal.pageSize.width-this.margin[1],st=gt-this.margin[3],Tt=be===1?0:Ae+(be-2)*rt;if(this.ctx.clip_path.length!==0){var ne=this.path;Ne=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=v(Ne,this.posX+this.margin[3],-1*Tt+Te),se.call(this,"fill",!0),this.path=ne}var Pe=v([JSON.parse(JSON.stringify(ft))],this.posX+this.margin[3],-Tt+Te+this.ctx.prevPageLastElemOffset)[0];S.scale>=.01&&(Be=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Be*S.scale),Xe=this.lineWidth,this.lineWidth=Xe*S.scale);var at=this.autoPaging!=="text";if(at||Pe.y+Pe.h<=tt){if(at||Pe.y>=Te&&Pe.x<=gt){var k=at?S.text:this.pdf.splitTextToSize(S.text,S.maxWidth||gt-Pe.x)[0],Qe=v([JSON.parse(JSON.stringify(dt))],this.posX+this.margin[3],-Tt+Te+this.ctx.prevPageLastElemOffset)[0],Fe=at&&(be>ae||be<xe)&&_.call(this);Fe&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],st,rt,null).clip().discardPath()),this.pdf.text(k,Qe.x,Qe.y,{angle:S.angle,align:G,renderingMode:S.renderingMode}),Fe&&this.pdf.restoreGraphicsState()}}else Pe.y<tt&&(this.ctx.prevPageLastElemOffset+=tt-Pe.y);S.scale>=.01&&(this.pdf.setFontSize(Be),this.lineWidth=Xe)}else S.scale>=.01&&(Be=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Be*S.scale),Xe=this.lineWidth,this.lineWidth=Xe*S.scale),this.pdf.text(S.text,T.x+this.posX,T.y+this.posY,{angle:S.angle,align:G,renderingMode:S.renderingMode,maxWidth:S.maxWidth}),S.scale>=.01&&(this.pdf.setFontSize(Be),this.lineWidth=Xe)},le=function(S,G,q,N){q=q||0,N=N||0,this.pdf.internal.out(r(S+q)+" "+s(G+N)+" l")},R=function(S,G,q){return this.pdf.lines(S,G,q,null,null)},we=function(S,G,q,N,U,T,B,oe){this.pdf.internal.out([a(n(q+S)),a(o(N+G)),a(n(U+S)),a(o(T+G)),a(n(B+S)),a(o(oe+G)),"c"].join(" "))},ce=function(S,G,q,N){for(var U=2*Math.PI,T=Math.PI/2;G>q;)G-=U;var B=Math.abs(q-G);B<U&&N&&(B=U-B);for(var oe=[],Ne=N?-1:1,Be=G;B>1e-5;){var Xe=Be+Ne*Math.min(B,T);oe.push(Ce.call(this,S,Be,Xe)),B-=Math.abs(Xe-Be),Be=Xe}return oe},Ce=function(S,G,q){var N=(q-G)/2,U=S*Math.cos(N),T=S*Math.sin(N),B=U,oe=-T,Ne=B*B+oe*oe,Be=Ne+B*U+oe*T,Xe=4/3*(Math.sqrt(2*Ne*Be)-Be)/(B*T-oe*U),dt=B-Xe*oe,ft=oe+Xe*B,Me=dt,te=-ft,Ct=N+G,ae=Math.cos(Ct),xe=Math.sin(Ct);return{x1:S*Math.cos(G),y1:S*Math.sin(G),x2:dt*ae-ft*xe,y2:dt*xe+ft*ae,x3:Me*ae-te*xe,y3:Me*xe+te*ae,x4:S*Math.cos(q),y4:S*Math.sin(q)}},Z=function(S){return 180*S/Math.PI},he=function(S,G,q,N,U,T){var B=S+.5*(q-S),oe=G+.5*(N-G),Ne=U+.5*(q-U),Be=T+.5*(N-T),Xe=Math.min(S,U,B,Ne),dt=Math.max(S,U,B,Ne),ft=Math.min(G,T,oe,Be),Me=Math.max(G,T,oe,Be);return new c(Xe,ft,dt-Xe,Me-ft)},ie=function(S,G,q,N,U,T,B,oe){var Ne,Be,Xe,dt,ft,Me,te,Ct,ae,xe,be,Te,Ae,tt,rt=q-S,gt=N-G,st=U-q,Tt=T-N,ne=B-U,Pe=oe-T;for(Be=0;Be<41;Be++)ae=(te=(Xe=S+(Ne=Be/40)*rt)+Ne*((ft=q+Ne*st)-Xe))+Ne*(ft+Ne*(U+Ne*ne-ft)-te),xe=(Ct=(dt=G+Ne*gt)+Ne*((Me=N+Ne*Tt)-dt))+Ne*(Me+Ne*(T+Ne*Pe-Me)-Ct),Be==0?(be=ae,Te=xe,Ae=ae,tt=xe):(be=Math.min(be,ae),Te=Math.min(Te,xe),Ae=Math.max(Ae,ae),tt=Math.max(tt,xe));return new c(Math.round(be),Math.round(Te),Math.round(Ae-be),Math.round(tt-Te))},Ue=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var S,G,q=(S=this.ctx.lineDash,G=this.ctx.lineDashOffset,JSON.stringify({lineDash:S,lineDashOffset:G}));this.prevLineDash!==q&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=q)}}})(Rt.API),function(e){var a=function(o){var i,c,d,p,h,x,b,g,w,_;for(c=[],d=0,p=(o+=i="\0\0\0\0".slice(o.length%4||4)).length;p>d;d+=4)(h=(o.charCodeAt(d)<<24)+(o.charCodeAt(d+1)<<16)+(o.charCodeAt(d+2)<<8)+o.charCodeAt(d+3))!==0?(x=(h=((h=((h=((h=(h-(_=h%85))/85)-(w=h%85))/85)-(g=h%85))/85)-(b=h%85))/85)%85,c.push(x+33,b+33,g+33,w+33,_+33)):c.push(122);return function(O,y){for(var v=y;v>0;v--)O.pop()}(c,i.length),String.fromCharCode.apply(String,c)+"~>"},r=function(o){var i,c,d,p,h,x=String,b="length",g=255,w="charCodeAt",_="slice",O="replace";for(o[_](-2),o=o[_](0,-2)[O](/\s/g,"")[O]("z","!!!!!"),d=[],p=0,h=(o+=i="uuuuu"[_](o[b]%5||5))[b];h>p;p+=5)c=52200625*(o[w](p)-33)+614125*(o[w](p+1)-33)+7225*(o[w](p+2)-33)+85*(o[w](p+3)-33)+(o[w](p+4)-33),d.push(g&c>>24,g&c>>16,g&c>>8,g&c);return function(y,v){for(var C=v;C>0;C--)y.pop()}(d,i[b]),x.fromCharCode.apply(x,d)},s=function(o){var i=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((o=o.replace(/\s/g,"")).indexOf(">")!==-1&&(o=o.substr(0,o.indexOf(">"))),o.length%2&&(o+="0"),i.test(o)===!1)return"";for(var c="",d=0;d<o.length;d+=2)c+=String.fromCharCode("0x"+(o[d]+o[d+1]));return c},n=function(o){for(var i=new Uint8Array(o.length),c=o.length;c--;)i[c]=o.charCodeAt(c);return o=(i=yf(i)).reduce(function(d,p){return d+String.fromCharCode(p)},"")};e.processDataByFilters=function(o,i){var c=0,d=o||"",p=[];for(typeof(i=i||[])=="string"&&(i=[i]),c=0;c<i.length;c+=1)switch(i[c]){case"ASCII85Decode":case"/ASCII85Decode":d=r(d),p.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":d=a(d),p.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":d=s(d),p.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":d=d.split("").map(function(h){return("0"+h.charCodeAt().toString(16)).slice(-2)}).join("")+">",p.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":d=n(d),p.push("/FlateDecode");break;default:throw new Error('The filter: "'+i[c]+'" is not implemented')}return{data:d,reverseChain:p.reverse().join(" ")}}}(Rt.API),function(e){e.loadFile=function(a,r,s){return function(n,o,i){o=o!==!1,i=typeof i=="function"?i:function(){};var c=void 0;try{c=function(d,p,h){var x=new XMLHttpRequest,b=0,g=function(w){var _=w.length,O=[],y=String.fromCharCode;for(b=0;b<_;b+=1)O.push(y(255&w.charCodeAt(b)));return O.join("")};if(x.open("GET",d,!p),x.overrideMimeType("text/plain; charset=x-user-defined"),p===!1&&(x.onload=function(){x.status===200?h(g(this.responseText)):h(void 0)}),x.send(null),p&&x.status===200)return g(x.responseText)}(n,o,i)}catch{}return c}(a,r,s)},e.loadImageFile=e.loadFile}(Rt.API),function(e){function a(){return(zt.html2canvas?Promise.resolve(zt.html2canvas):ff(()=>import("./html2canvas.esm-CBrSDip1.js"),[])).catch(function(i){return Promise.reject(new Error("Could not load html2canvas: "+i))}).then(function(i){return i.default?i.default:i})}function r(){return(zt.DOMPurify?Promise.resolve(zt.DOMPurify):ff(()=>import("./purify.es-C_uT9hQ1.js"),[])).catch(function(i){return Promise.reject(new Error("Could not load dompurify: "+i))}).then(function(i){return i.default?i.default:i})}var s=function(i){var c=ia(i);return c==="undefined"?"undefined":c==="string"||i instanceof String?"string":c==="number"||i instanceof Number?"number":c==="function"||i instanceof Function?"function":i&&i.constructor===Array?"array":i&&i.nodeType===1?"element":c==="object"?"object":"unknown"},n=function(i,c){var d=document.createElement(i);for(var p in c.className&&(d.className=c.className),c.innerHTML&&c.dompurify&&(d.innerHTML=c.dompurify.sanitize(c.innerHTML)),c.style)d.style[p]=c.style[p];return d},o=function i(c){var d=Object.assign(i.convert(Promise.resolve()),JSON.parse(JSON.stringify(i.template))),p=i.convert(Promise.resolve(),d);return p=(p=p.setProgress(1,i,1,[i])).set(c)};(o.prototype=Object.create(Promise.prototype)).constructor=o,o.convert=function(i,c){return i.__proto__=c||o.prototype,i},o.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},o.prototype.from=function(i,c){return this.then(function(){switch(c=c||function(d){switch(s(d)){case"string":return"string";case"element":return d.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(i)){case"string":return this.then(r).then(function(d){return this.set({src:n("div",{innerHTML:i,dompurify:d})})});case"element":return this.set({src:i});case"canvas":return this.set({canvas:i});case"img":return this.set({img:i});default:return this.error("Unknown source type.")}})},o.prototype.to=function(i){switch(i){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},o.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var i={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},c=function d(p,h){for(var x=p.nodeType===3?document.createTextNode(p.nodeValue):p.cloneNode(!1),b=p.firstChild;b;b=b.nextSibling)h!==!0&&b.nodeType===1&&b.nodeName==="SCRIPT"||x.appendChild(d(b,h));return p.nodeType===1&&(p.nodeName==="CANVAS"?(x.width=p.width,x.height=p.height,x.getContext("2d").drawImage(p,0,0)):p.nodeName!=="TEXTAREA"&&p.nodeName!=="SELECT"||(x.value=p.value),x.addEventListener("load",function(){x.scrollTop=p.scrollTop,x.scrollLeft=p.scrollLeft},!0)),x}(this.prop.src,this.opt.html2canvas.javascriptEnabled);c.tagName==="BODY"&&(i.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=n("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=n("div",{className:"html2pdf__container",style:i}),this.prop.container.appendChild(c),this.prop.container.firstChild.appendChild(n("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},o.prototype.toCanvas=function(){var i=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(i).then(a).then(function(c){var d=Object.assign({},this.opt.html2canvas);return delete d.onrendered,c(this.prop.container,d)}).then(function(c){(this.opt.html2canvas.onrendered||function(){})(c),this.prop.canvas=c,document.body.removeChild(this.prop.overlay)})},o.prototype.toContext2d=function(){var i=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(i).then(a).then(function(c){var d=this.opt.jsPDF,p=this.opt.fontFaces,h=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,x=Object.assign({async:!0,allowTaint:!0,scale:h,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete x.onrendered,d.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,d.context2d.posX=this.opt.x,d.context2d.posY=this.opt.y,d.context2d.margin=this.opt.margin,d.context2d.fontFaces=p,p)for(var b=0;b<p.length;++b){var g=p[b],w=g.src.find(function(_){return _.format==="truetype"});w&&d.addFont(w.url,g.ref.name,g.ref.style)}return x.windowHeight=x.windowHeight||0,x.windowHeight=x.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):x.windowHeight,d.context2d.save(!0),c(this.prop.container,x)}).then(function(c){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(c),this.prop.canvas=c,document.body.removeChild(this.prop.overlay)})},o.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var i=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=i})},o.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},o.prototype.output=function(i,c,d){return(d=d||"pdf").toLowerCase()==="img"||d.toLowerCase()==="image"?this.outputImg(i,c):this.outputPdf(i,c)},o.prototype.outputPdf=function(i,c){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(i,c)})},o.prototype.outputImg=function(i){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(i){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+i+'" is not supported.'}})},o.prototype.save=function(i){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(i?{filename:i}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},o.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},o.prototype.set=function(i){if(s(i)!=="object")return this;var c=Object.keys(i||{}).map(function(d){if(d in o.template.prop)return function(){this.prop[d]=i[d]};switch(d){case"margin":return this.setMargin.bind(this,i.margin);case"jsPDF":return function(){return this.opt.jsPDF=i.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,i.pageSize);default:return function(){this.opt[d]=i[d]}}},this);return this.then(function(){return this.thenList(c)})},o.prototype.get=function(i,c){return this.then(function(){var d=i in o.template.prop?this.prop[i]:this.opt[i];return c?c(d):d})},o.prototype.setMargin=function(i){return this.then(function(){switch(s(i)){case"number":i=[i,i,i,i];case"array":if(i.length===2&&(i=[i[0],i[1],i[0],i[1]]),i.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=i}).then(this.setPageSize)},o.prototype.setPageSize=function(i){function c(d,p){return Math.floor(d*p/72*96)}return this.then(function(){(i=i||Rt.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(i.inner={width:i.width-this.opt.margin[1]-this.opt.margin[3],height:i.height-this.opt.margin[0]-this.opt.margin[2]},i.inner.px={width:c(i.inner.width,i.k),height:c(i.inner.height,i.k)},i.inner.ratio=i.inner.height/i.inner.width),this.prop.pageSize=i})},o.prototype.setProgress=function(i,c,d,p){return i!=null&&(this.progress.val=i),c!=null&&(this.progress.state=c),d!=null&&(this.progress.n=d),p!=null&&(this.progress.stack=p),this.progress.ratio=this.progress.val/this.progress.state,this},o.prototype.updateProgress=function(i,c,d,p){return this.setProgress(i?this.progress.val+i:null,c||null,d?this.progress.n+d:null,p?this.progress.stack.concat(p):null)},o.prototype.then=function(i,c){var d=this;return this.thenCore(i,c,function(p,h){return d.updateProgress(null,null,1,[p]),Promise.prototype.then.call(this,function(x){return d.updateProgress(null,p),x}).then(p,h).then(function(x){return d.updateProgress(1),x})})},o.prototype.thenCore=function(i,c,d){d=d||Promise.prototype.then,i&&(i=i.bind(this)),c&&(c=c.bind(this));var p=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:o.convert(Object.assign({},this),Promise.prototype),h=d.call(p,i,c);return o.convert(h,this.__proto__)},o.prototype.thenExternal=function(i,c){return Promise.prototype.then.call(this,i,c)},o.prototype.thenList=function(i){var c=this;return i.forEach(function(d){c=c.thenCore(d)}),c},o.prototype.catch=function(i){i&&(i=i.bind(this));var c=Promise.prototype.catch.call(this,i);return o.convert(c,this)},o.prototype.catchExternal=function(i){return Promise.prototype.catch.call(this,i)},o.prototype.error=function(i){return this.then(function(){throw new Error(i)})},o.prototype.using=o.prototype.set,o.prototype.saveAs=o.prototype.save,o.prototype.export=o.prototype.output,o.prototype.run=o.prototype.then,Rt.getPageSize=function(i,c,d){if(ia(i)==="object"){var p=i;i=p.orientation,c=p.unit||c,d=p.format||d}c=c||"mm",d=d||"a4",i=(""+(i||"P")).toLowerCase();var h,x=(""+d).toLowerCase(),b={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(c){case"pt":h=1;break;case"mm":h=72/25.4;break;case"cm":h=72/2.54;break;case"in":h=72;break;case"px":h=.75;break;case"pc":case"em":h=12;break;case"ex":h=6;break;default:throw"Invalid unit: "+c}var g,w=0,_=0;if(b.hasOwnProperty(x))w=b[x][1]/h,_=b[x][0]/h;else try{w=d[1],_=d[0]}catch{throw new Error("Invalid format: "+d)}if(i==="p"||i==="portrait")i="p",_>w&&(g=_,_=w,w=g);else{if(i!=="l"&&i!=="landscape")throw"Invalid orientation: "+i;i="l",w>_&&(g=_,_=w,w=g)}return{width:_,height:w,unit:c,k:h,orientation:i}},e.html=function(i,c){(c=c||{}).callback=c.callback||function(){},c.html2canvas=c.html2canvas||{},c.html2canvas.canvas=c.html2canvas.canvas||this.canvas,c.jsPDF=c.jsPDF||this,c.fontFaces=c.fontFaces?c.fontFaces.map(Cf):null;var d=new o(c);return c.worker?d:d.from(i).doCallback()}}(Rt.API),Rt.API.addJS=function(e){return Yg=e,this.internal.events.subscribe("postPutResources",function(){fu=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(fu+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),Qg=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+Yg+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){fu!==void 0&&Qg!==void 0&&this.internal.out("/Names <</JavaScript "+fu+" 0 R>>")}),this},function(e){var a;e.events.push(["postPutResources",function(){var r=this,s=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var n=r.outline.render().split(/\r\n/),o=0;o<n.length;o++){var i=n[o],c=s.exec(i);if(c!=null){var d=c[1];r.internal.newObjectDeferredBegin(d,!1)}r.internal.write(i)}if(this.outline.createNamedDestinations){var p=this.internal.pages.length,h=[];for(o=0;o<p;o++){var x=r.internal.newObject();h.push(x);var b=r.internal.getPageInfo(o+1);r.internal.write("<< /D["+b.objId+" 0 R /XYZ null null null]>> endobj")}var g=r.internal.newObject();for(r.internal.write("<< /Names [ "),o=0;o<h.length;o++)r.internal.write("(page_"+(o+1)+")"+h[o]+" 0 R");r.internal.write(" ] >>","endobj"),a=r.internal.newObject(),r.internal.write("<< /Dests "+g+" 0 R"),r.internal.write(">>","endobj")}}]),e.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+a+" 0 R"))}]),e.events.push(["initialized",function(){var r=this;r.outline={createNamedDestinations:!1,root:{children:[]}},r.outline.add=function(s,n,o){var i={title:n,options:o,children:[]};return s==null&&(s=this.root),s.children.push(i),i},r.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=r,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},r.outline.genIds_r=function(s){s.id=r.internal.newObjectDeferred();for(var n=0;n<s.children.length;n++)this.genIds_r(s.children[n])},r.outline.renderRoot=function(s){this.objStart(s),this.line("/Type /Outlines"),s.children.length>0&&(this.line("/First "+this.makeRef(s.children[0])),this.line("/Last "+this.makeRef(s.children[s.children.length-1]))),this.line("/Count "+this.count_r({count:0},s)),this.objEnd()},r.outline.renderItems=function(s){for(var n=this.ctx.pdf.internal.getVerticalCoordinateString,o=0;o<s.children.length;o++){var i=s.children[o];this.objStart(i),this.line("/Title "+this.makeString(i.title)),this.line("/Parent "+this.makeRef(s)),o>0&&this.line("/Prev "+this.makeRef(s.children[o-1])),o<s.children.length-1&&this.line("/Next "+this.makeRef(s.children[o+1])),i.children.length>0&&(this.line("/First "+this.makeRef(i.children[0])),this.line("/Last "+this.makeRef(i.children[i.children.length-1])));var c=this.count=this.count_r({count:0},i);if(c>0&&this.line("/Count "+c),i.options&&i.options.pageNumber){var d=r.internal.getPageInfo(i.options.pageNumber);this.line("/Dest ["+d.objId+" 0 R /XYZ 0 "+n(0)+" 0]")}this.objEnd()}for(var p=0;p<s.children.length;p++)this.renderItems(s.children[p])},r.outline.line=function(s){this.ctx.val+=s+`\r
`},r.outline.makeRef=function(s){return s.id+" 0 R"},r.outline.makeString=function(s){return"("+r.internal.pdfEscape(s)+")"},r.outline.objStart=function(s){this.ctx.val+=`\r
`+s.id+` 0 obj\r
<<\r
`},r.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},r.outline.count_r=function(s,n){for(var o=0;o<n.children.length;o++)s.count++,this.count_r(s,n.children[o]);return s.count}}])}(Rt.API),function(e){var a=[192,193,194,195,196,197,198,199];e.processJPEG=function(r,s,n,o,i,c){var d,p=this.decode.DCT_DECODE,h=null;if(typeof r=="string"||this.__addimage__.isArrayBuffer(r)||this.__addimage__.isArrayBufferView(r)){switch(r=i||r,r=this.__addimage__.isArrayBuffer(r)?new Uint8Array(r):r,(d=function(x){for(var b,g=256*x.charCodeAt(4)+x.charCodeAt(5),w=x.length,_={width:0,height:0,numcomponents:1},O=4;O<w;O+=2){if(O+=g,a.indexOf(x.charCodeAt(O+1))!==-1){b=256*x.charCodeAt(O+5)+x.charCodeAt(O+6),_={width:256*x.charCodeAt(O+7)+x.charCodeAt(O+8),height:b,numcomponents:x.charCodeAt(O+9)};break}g=256*x.charCodeAt(O+2)+x.charCodeAt(O+3)}return _}(r=this.__addimage__.isArrayBufferView(r)?this.__addimage__.arrayBufferToBinaryString(r):r)).numcomponents){case 1:c=this.color_spaces.DEVICE_GRAY;break;case 4:c=this.color_spaces.DEVICE_CMYK;break;case 3:c=this.color_spaces.DEVICE_RGB}h={data:r,width:d.width,height:d.height,colorSpace:c,bitsPerComponent:8,filter:p,index:s,alias:n}}return h}}(Rt.API);var Di,xu,Xg,Kg,Zg,Z3=function(){var e,a,r;function s(o){var i,c,d,p,h,x,b,g,w,_,O,y,v,C;for(this.data=o,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},x=null;;){switch(i=this.readUInt32(),w=(function(){var W,se;for(se=[],W=0;W<4;++W)se.push(String.fromCharCode(this.data[this.pos++]));return se}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(i);break;case"fcTL":x&&this.animation.frames.push(x),this.pos+=4,x={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},h=this.readUInt16(),p=this.readUInt16()||100,x.delay=1e3*h/p,x.disposeOp=this.data[this.pos++],x.blendOp=this.data[this.pos++],x.data=[];break;case"IDAT":case"fdAT":for(w==="fdAT"&&(this.pos+=4,i-=4),o=(x!=null?x.data:void 0)||this.imgData,y=0;0<=i?y<i:y>i;0<=i?++y:--y)o.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(d=this.palette.length/3,this.transparency.indexed=this.read(i),this.transparency.indexed.length>d)throw new Error("More transparent colors than palette size");if((_=d-this.transparency.indexed.length)>0)for(v=0;0<=_?v<_:v>_;0<=_?++v:--v)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(i)[0];break;case 2:this.transparency.rgb=this.read(i)}break;case"tEXt":b=(O=this.read(i)).indexOf(0),g=String.fromCharCode.apply(String,O.slice(0,b)),this.text[g]=String.fromCharCode.apply(String,O.slice(b+1));break;case"IEND":return x&&this.animation.frames.push(x),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(C=this.colorType)===4||C===6,c=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*c,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=i}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}s.prototype.read=function(o){var i,c;for(c=[],i=0;0<=o?i<o:i>o;0<=o?++i:--i)c.push(this.data[this.pos++]);return c},s.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},s.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},s.prototype.decodePixels=function(o){var i=this.pixelBitlength/8,c=new Uint8Array(this.width*this.height*i),d=0,p=this;if(o==null&&(o=this.imgData),o.length===0)return new Uint8Array(0);function h(x,b,g,w){var _,O,y,v,C,W,se,J,Y,K,fe,me,$,L,le,R,we,ce,Ce,Z,he,ie=Math.ceil((p.width-x)/g),Ue=Math.ceil((p.height-b)/w),S=p.width==ie&&p.height==Ue;for(L=i*ie,me=S?c:new Uint8Array(L*Ue),W=o.length,$=0,O=0;$<Ue&&d<W;){switch(o[d++]){case 0:for(v=we=0;we<L;v=we+=1)me[O++]=o[d++];break;case 1:for(v=ce=0;ce<L;v=ce+=1)_=o[d++],C=v<i?0:me[O-i],me[O++]=(_+C)%256;break;case 2:for(v=Ce=0;Ce<L;v=Ce+=1)_=o[d++],y=(v-v%i)/i,le=$&&me[($-1)*L+y*i+v%i],me[O++]=(le+_)%256;break;case 3:for(v=Z=0;Z<L;v=Z+=1)_=o[d++],y=(v-v%i)/i,C=v<i?0:me[O-i],le=$&&me[($-1)*L+y*i+v%i],me[O++]=(_+Math.floor((C+le)/2))%256;break;case 4:for(v=he=0;he<L;v=he+=1)_=o[d++],y=(v-v%i)/i,C=v<i?0:me[O-i],$===0?le=R=0:(le=me[($-1)*L+y*i+v%i],R=y&&me[($-1)*L+(y-1)*i+v%i]),se=C+le-R,J=Math.abs(se-C),K=Math.abs(se-le),fe=Math.abs(se-R),Y=J<=K&&J<=fe?C:K<=fe?le:R,me[O++]=(_+Y)%256;break;default:throw new Error("Invalid filter algorithm: "+o[d-1])}if(!S){var G=((b+$*w)*p.width+x)*i,q=$*L;for(v=0;v<ie;v+=1){for(var N=0;N<i;N+=1)c[G++]=me[q++];G+=(g-1)*i}}$++}}return o=L3(o),p.interlaceMethod==1?(h(0,0,8,8),h(4,0,8,8),h(0,4,4,8),h(2,0,4,4),h(0,2,2,4),h(1,0,2,2),h(0,1,1,2)):h(0,0,1,1),c},s.prototype.decodePalette=function(){var o,i,c,d,p,h,x,b,g;for(c=this.palette,h=this.transparency.indexed||[],p=new Uint8Array((h.length||0)+c.length),d=0,o=0,i=x=0,b=c.length;x<b;i=x+=3)p[d++]=c[i],p[d++]=c[i+1],p[d++]=c[i+2],p[d++]=(g=h[o++])!=null?g:255;return p},s.prototype.copyToImageData=function(o,i){var c,d,p,h,x,b,g,w,_,O,y;if(d=this.colors,_=null,c=this.hasAlphaChannel,this.palette.length&&(_=(y=this._decodedPalette)!=null?y:this._decodedPalette=this.decodePalette(),d=4,c=!0),w=(p=o.data||o).length,x=_||i,h=b=0,d===1)for(;h<w;)g=_?4*i[h/4]:b,O=x[g++],p[h++]=O,p[h++]=O,p[h++]=O,p[h++]=c?x[g++]:255,b=g;else for(;h<w;)g=_?4*i[h/4]:b,p[h++]=x[g++],p[h++]=x[g++],p[h++]=x[g++],p[h++]=c?x[g++]:255,b=g},s.prototype.decode=function(){var o;return o=new Uint8Array(this.width*this.height*4),this.copyToImageData(o,this.decodePixels()),o};var n=function(){if(Object.prototype.toString.call(zt)==="[object Window]"){try{a=zt.document.createElement("canvas"),r=a.getContext("2d")}catch{return!1}return!0}return!1};return n(),e=function(o){var i;if(n()===!0)return r.width=o.width,r.height=o.height,r.clearRect(0,0,o.width,o.height),r.putImageData(o,0,0),(i=new Image).src=a.toDataURL(),i;throw new Error("This method requires a Browser with Canvas-capability.")},s.prototype.decodeFrames=function(o){var i,c,d,p,h,x,b,g;if(this.animation){for(g=[],c=h=0,x=(b=this.animation.frames).length;h<x;c=++h)i=b[c],d=o.createImageData(i.width,i.height),p=this.decodePixels(new Uint8Array(i.data)),this.copyToImageData(d,p),i.imageData=d,g.push(i.image=e(d));return g}},s.prototype.renderFrame=function(o,i){var c,d,p;return c=(d=this.animation.frames)[i],p=d[i-1],i===0&&o.clearRect(0,0,this.width,this.height),(p!=null?p.disposeOp:void 0)===1?o.clearRect(p.xOffset,p.yOffset,p.width,p.height):(p!=null?p.disposeOp:void 0)===2&&o.putImageData(p.imageData,p.xOffset,p.yOffset),c.blendOp===0&&o.clearRect(c.xOffset,c.yOffset,c.width,c.height),o.drawImage(c.image,c.xOffset,c.yOffset)},s.prototype.animate=function(o){var i,c,d,p,h,x,b=this;return c=0,x=this.animation,p=x.numFrames,d=x.frames,h=x.numPlays,(i=function(){var g,w;if(g=c++%p,w=d[g],b.renderFrame(o,g),p>1&&c/p<h)return b.animation._timeout=setTimeout(i,w.delay)})()},s.prototype.stopAnimation=function(){var o;return clearTimeout((o=this.animation)!=null?o._timeout:void 0)},s.prototype.render=function(o){var i,c;return o._png&&o._png.stopAnimation(),o._png=this,o.width=this.width,o.height=this.height,i=o.getContext("2d"),this.animation?(this.decodeFrames(i),this.animate(i)):(c=i.createImageData(this.width,this.height),this.copyToImageData(c,this.decodePixels()),i.putImageData(c,0,0))},s}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function e6(e){var a=0;if(e[a++]!==71||e[a++]!==73||e[a++]!==70||e[a++]!==56||(e[a++]+1&253)!=56||e[a++]!==97)throw new Error("Invalid GIF 87a/89a header.");var r=e[a++]|e[a++]<<8,s=e[a++]|e[a++]<<8,n=e[a++],o=n>>7,i=1<<(7&n)+1;e[a++],e[a++];var c=null,d=null;o&&(c=a,d=i,a+=3*i);var p=!0,h=[],x=0,b=null,g=0,w=null;for(this.width=r,this.height=s;p&&a<e.length;)switch(e[a++]){case 33:switch(e[a++]){case 255:if(e[a]!==11||e[a+1]==78&&e[a+2]==69&&e[a+3]==84&&e[a+4]==83&&e[a+5]==67&&e[a+6]==65&&e[a+7]==80&&e[a+8]==69&&e[a+9]==50&&e[a+10]==46&&e[a+11]==48&&e[a+12]==3&&e[a+13]==1&&e[a+16]==0)a+=14,w=e[a++]|e[a++]<<8,a++;else for(a+=12;;){if(!(($=e[a++])>=0))throw Error("Invalid block size");if($===0)break;a+=$}break;case 249:if(e[a++]!==4||e[a+4]!==0)throw new Error("Invalid graphics extension block.");var _=e[a++];x=e[a++]|e[a++]<<8,b=e[a++],!(1&_)&&(b=null),g=_>>2&7,a++;break;case 254:for(;;){if(!(($=e[a++])>=0))throw Error("Invalid block size");if($===0)break;a+=$}break;default:throw new Error("Unknown graphic control label: 0x"+e[a-1].toString(16))}break;case 44:var O=e[a++]|e[a++]<<8,y=e[a++]|e[a++]<<8,v=e[a++]|e[a++]<<8,C=e[a++]|e[a++]<<8,W=e[a++],se=W>>6&1,J=1<<(7&W)+1,Y=c,K=d,fe=!1;W>>7&&(fe=!0,Y=a,K=J,a+=3*J);var me=a;for(a++;;){var $;if(!(($=e[a++])>=0))throw Error("Invalid block size");if($===0)break;a+=$}h.push({x:O,y,width:v,height:C,has_local_palette:fe,palette_offset:Y,palette_size:K,data_offset:me,data_length:a-me,transparent_index:b,interlaced:!!se,delay:x,disposal:g});break;case 59:p=!1;break;default:throw new Error("Unknown gif block: 0x"+e[a-1].toString(16))}this.numFrames=function(){return h.length},this.loopCount=function(){return w},this.frameInfo=function(L){if(L<0||L>=h.length)throw new Error("Frame index out of range.");return h[L]},this.decodeAndBlitFrameBGRA=function(L,le){var R=this.frameInfo(L),we=R.width*R.height,ce=new Uint8Array(we);ev(e,R.data_offset,ce,we);var Ce=R.palette_offset,Z=R.transparent_index;Z===null&&(Z=256);var he=R.width,ie=r-he,Ue=he,S=4*(R.y*r+R.x),G=4*((R.y+R.height)*r+R.x),q=S,N=4*ie;R.interlaced===!0&&(N+=4*r*7);for(var U=8,T=0,B=ce.length;T<B;++T){var oe=ce[T];if(Ue===0&&(Ue=he,(q+=N)>=G&&(N=4*ie+4*r*(U-1),q=S+(he+ie)*(U<<1),U>>=1)),oe===Z)q+=4;else{var Ne=e[Ce+3*oe],Be=e[Ce+3*oe+1],Xe=e[Ce+3*oe+2];le[q++]=Xe,le[q++]=Be,le[q++]=Ne,le[q++]=255}--Ue}},this.decodeAndBlitFrameRGBA=function(L,le){var R=this.frameInfo(L),we=R.width*R.height,ce=new Uint8Array(we);ev(e,R.data_offset,ce,we);var Ce=R.palette_offset,Z=R.transparent_index;Z===null&&(Z=256);var he=R.width,ie=r-he,Ue=he,S=4*(R.y*r+R.x),G=4*((R.y+R.height)*r+R.x),q=S,N=4*ie;R.interlaced===!0&&(N+=4*r*7);for(var U=8,T=0,B=ce.length;T<B;++T){var oe=ce[T];if(Ue===0&&(Ue=he,(q+=N)>=G&&(N=4*ie+4*r*(U-1),q=S+(he+ie)*(U<<1),U>>=1)),oe===Z)q+=4;else{var Ne=e[Ce+3*oe],Be=e[Ce+3*oe+1],Xe=e[Ce+3*oe+2];le[q++]=Ne,le[q++]=Be,le[q++]=Xe,le[q++]=255}--Ue}}}function ev(e,a,r,s){for(var n=e[a++],o=1<<n,i=o+1,c=i+1,d=n+1,p=(1<<d)-1,h=0,x=0,b=0,g=e[a++],w=new Int32Array(4096),_=null;;){for(;h<16&&g!==0;)x|=e[a++]<<h,h+=8,g===1?g=e[a++]:--g;if(h<d)break;var O=x&p;if(x>>=d,h-=d,O!==o){if(O===i)break;for(var y=O<c?O:_,v=0,C=y;C>o;)C=w[C]>>8,++v;var W=C;if(b+v+(y!==O?1:0)>s)return void ua.log("Warning, gif stream longer than expected.");r[b++]=W;var se=b+=v;for(y!==O&&(r[b++]=W),C=y;v--;)C=w[C],r[--se]=255&C,C>>=8;_!==null&&c<4096&&(w[c++]=_<<8|W,c>=p+1&&d<12&&(++d,p=p<<1|1)),_=O}else c=i+1,p=(1<<(d=n+1))-1,_=null}return b!==s&&ua.log("Warning, gif stream shorter than expected."),r}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function np(e){var a,r,s,n,o,i=Math.floor,c=new Array(64),d=new Array(64),p=new Array(64),h=new Array(64),x=new Array(65535),b=new Array(65535),g=new Array(64),w=new Array(64),_=[],O=0,y=7,v=new Array(64),C=new Array(64),W=new Array(64),se=new Array(256),J=new Array(2048),Y=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],K=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],fe=[0,1,2,3,4,5,6,7,8,9,10,11],me=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],$=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],L=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],le=[0,1,2,3,4,5,6,7,8,9,10,11],R=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],we=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function ce(S,G){for(var q=0,N=0,U=new Array,T=1;T<=16;T++){for(var B=1;B<=S[T];B++)U[G[N]]=[],U[G[N]][0]=q,U[G[N]][1]=T,N++,q++;q*=2}return U}function Ce(S){for(var G=S[0],q=S[1]-1;q>=0;)G&1<<q&&(O|=1<<y),q--,--y<0&&(O==255?(Z(255),Z(0)):Z(O),y=7,O=0)}function Z(S){_.push(S)}function he(S){Z(S>>8&255),Z(255&S)}function ie(S,G,q,N,U){for(var T,B=U[0],oe=U[240],Ne=function(xe,be){var Te,Ae,tt,rt,gt,st,Tt,ne,Pe,at,k=0;for(Pe=0;Pe<8;++Pe){Te=xe[k],Ae=xe[k+1],tt=xe[k+2],rt=xe[k+3],gt=xe[k+4],st=xe[k+5],Tt=xe[k+6];var Qe=Te+(ne=xe[k+7]),Fe=Te-ne,ut=Ae+Tt,je=Ae-Tt,ht=tt+st,qe=tt-st,lt=rt+gt,de=rt-gt,nt=Qe+lt,Nt=Qe-lt,A=ut+ht,ue=ut-ht;xe[k]=nt+A,xe[k+4]=nt-A;var ke=.707106781*(ue+Nt);xe[k+2]=Nt+ke,xe[k+6]=Nt-ke;var Ve=.382683433*((nt=de+qe)-(ue=je+Fe)),St=.5411961*nt+Ve,ot=1.306562965*ue+Ve,yt=.707106781*(A=qe+je),Dt=Fe+yt,V=Fe-yt;xe[k+5]=V+St,xe[k+3]=V-St,xe[k+1]=Dt+ot,xe[k+7]=Dt-ot,k+=8}for(k=0,Pe=0;Pe<8;++Pe){Te=xe[k],Ae=xe[k+8],tt=xe[k+16],rt=xe[k+24],gt=xe[k+32],st=xe[k+40],Tt=xe[k+48];var He=Te+(ne=xe[k+56]),ze=Te-ne,vt=Ae+Tt,xt=Ae-Tt,qt=tt+st,Jt=tt-st,ma=rt+gt,F=rt-gt,Ge=He+ma,Re=He-ma,bt=vt+qt,Ot=vt-qt;xe[k]=Ge+bt,xe[k+32]=Ge-bt;var Pt=.707106781*(Ot+Re);xe[k+16]=Re+Pt,xe[k+48]=Re-Pt;var pt=.382683433*((Ge=F+Jt)-(Ot=xt+ze)),xa=.5411961*Ge+pt,Pr=1.306562965*Ot+pt,Q=.707106781*(bt=Jt+xt),_e=ze+Q,Le=ze-Q;xe[k+40]=Le+xa,xe[k+24]=Le-xa,xe[k+8]=_e+Pr,xe[k+56]=_e-Pr,k++}for(Pe=0;Pe<64;++Pe)at=xe[Pe]*be[Pe],g[Pe]=at>0?at+.5|0:at-.5|0;return g}(S,G),Be=0;Be<64;++Be)w[Y[Be]]=Ne[Be];var Xe=w[0]-q;q=w[0],Xe==0?Ce(N[0]):(Ce(N[b[T=32767+Xe]]),Ce(x[T]));for(var dt=63;dt>0&&w[dt]==0;)dt--;if(dt==0)return Ce(B),q;for(var ft,Me=1;Me<=dt;){for(var te=Me;w[Me]==0&&Me<=dt;)++Me;var Ct=Me-te;if(Ct>=16){ft=Ct>>4;for(var ae=1;ae<=ft;++ae)Ce(oe);Ct&=15}T=32767+w[Me],Ce(U[(Ct<<4)+b[T]]),Ce(x[T]),Me++}return dt!=63&&Ce(B),q}function Ue(S){S=Math.min(Math.max(S,1),100),o!=S&&(function(G){for(var q=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],N=0;N<64;N++){var U=i((q[N]*G+50)/100);U=Math.min(Math.max(U,1),255),c[Y[N]]=U}for(var T=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],B=0;B<64;B++){var oe=i((T[B]*G+50)/100);oe=Math.min(Math.max(oe,1),255),d[Y[B]]=oe}for(var Ne=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Be=0,Xe=0;Xe<8;Xe++)for(var dt=0;dt<8;dt++)p[Be]=1/(c[Y[Be]]*Ne[Xe]*Ne[dt]*8),h[Be]=1/(d[Y[Be]]*Ne[Xe]*Ne[dt]*8),Be++}(S<50?Math.floor(5e3/S):Math.floor(200-2*S)),o=S)}this.encode=function(S,G){G&&Ue(G),_=new Array,O=0,y=7,he(65496),he(65504),he(16),Z(74),Z(70),Z(73),Z(70),Z(0),Z(1),Z(1),Z(0),he(1),he(1),Z(0),Z(0),function(){he(65499),he(132),Z(0);for(var Ae=0;Ae<64;Ae++)Z(c[Ae]);Z(1);for(var tt=0;tt<64;tt++)Z(d[tt])}(),function(Ae,tt){he(65472),he(17),Z(8),he(tt),he(Ae),Z(3),Z(1),Z(17),Z(0),Z(2),Z(17),Z(1),Z(3),Z(17),Z(1)}(S.width,S.height),function(){he(65476),he(418),Z(0);for(var Ae=0;Ae<16;Ae++)Z(K[Ae+1]);for(var tt=0;tt<=11;tt++)Z(fe[tt]);Z(16);for(var rt=0;rt<16;rt++)Z(me[rt+1]);for(var gt=0;gt<=161;gt++)Z($[gt]);Z(1);for(var st=0;st<16;st++)Z(L[st+1]);for(var Tt=0;Tt<=11;Tt++)Z(le[Tt]);Z(17);for(var ne=0;ne<16;ne++)Z(R[ne+1]);for(var Pe=0;Pe<=161;Pe++)Z(we[Pe])}(),he(65498),he(12),Z(3),Z(1),Z(0),Z(2),Z(17),Z(3),Z(17),Z(0),Z(63),Z(0);var q=0,N=0,U=0;O=0,y=7,this.encode.displayName="_encode_";for(var T,B,oe,Ne,Be,Xe,dt,ft,Me,te=S.data,Ct=S.width,ae=S.height,xe=4*Ct,be=0;be<ae;){for(T=0;T<xe;){for(Be=xe*be+T,dt=-1,ft=0,Me=0;Me<64;Me++)Xe=Be+(ft=Me>>3)*xe+(dt=4*(7&Me)),be+ft>=ae&&(Xe-=xe*(be+1+ft-ae)),T+dt>=xe&&(Xe-=T+dt-xe+4),B=te[Xe++],oe=te[Xe++],Ne=te[Xe++],v[Me]=(J[B]+J[oe+256>>0]+J[Ne+512>>0]>>16)-128,C[Me]=(J[B+768>>0]+J[oe+1024>>0]+J[Ne+1280>>0]>>16)-128,W[Me]=(J[B+1280>>0]+J[oe+1536>>0]+J[Ne+1792>>0]>>16)-128;q=ie(v,p,q,a,s),N=ie(C,h,N,r,n),U=ie(W,h,U,r,n),T+=32}be+=8}if(y>=0){var Te=[];Te[1]=y+1,Te[0]=(1<<y+1)-1,Ce(Te)}return he(65497),new Uint8Array(_)},e=e||50,function(){for(var S=String.fromCharCode,G=0;G<256;G++)se[G]=S(G)}(),a=ce(K,fe),r=ce(L,le),s=ce(me,$),n=ce(R,we),function(){for(var S=1,G=2,q=1;q<=15;q++){for(var N=S;N<G;N++)b[32767+N]=q,x[32767+N]=[],x[32767+N][1]=q,x[32767+N][0]=N;for(var U=-(G-1);U<=-S;U++)b[32767+U]=q,x[32767+U]=[],x[32767+U][1]=q,x[32767+U][0]=G-1+U;S<<=1,G<<=1}}(),function(){for(var S=0;S<256;S++)J[S]=19595*S,J[S+256>>0]=38470*S,J[S+512>>0]=7471*S+32768,J[S+768>>0]=-11059*S,J[S+1024>>0]=-21709*S,J[S+1280>>0]=32768*S+8421375,J[S+1536>>0]=-27439*S,J[S+1792>>0]=-5329*S}(),Ue(e)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function Cs(e,a){if(this.pos=0,this.buffer=e,this.datav=new DataView(e.buffer),this.is_with_alpha=!!a,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function tv(e){function a(K){if(!K)throw Error("assert :P")}function r(K,fe,me){for(var $=0;4>$;$++)if(K[fe+$]!=me.charCodeAt($))return!0;return!1}function s(K,fe,me,$,L){for(var le=0;le<L;le++)K[fe+le]=me[$+le]}function n(K,fe,me,$){for(var L=0;L<$;L++)K[fe+L]=me}function o(K){return new Int32Array(K)}function i(K,fe){for(var me=[],$=0;$<K;$++)me.push(new fe);return me}function c(K,fe){var me=[];return function $(L,le,R){for(var we=R[le],ce=0;ce<we&&(L.push(R.length>le+1?[]:new fe),!(R.length<le+1));ce++)$(L[ce],le+1,R)}(me,0,K),me}var d=function(){var K=this;function fe(l,u){for(var f=1<<u-1>>>0;l&f;)f>>>=1;return f?(l&f-1)+f:l}function me(l,u,f,j,E){a(!(j%f));do l[u+(j-=f)]=E;while(0<j)}function $(l,u,f,j,E){if(a(2328>=E),512>=E)var D=o(512);else if((D=o(E))==null)return 0;return function(M,z,H,ee,ge,De){var Oe,Se,et=z,$e=1<<H,ve=o(16),ye=o(16);for(a(ge!=0),a(ee!=null),a(M!=null),a(0<H),Se=0;Se<ge;++Se){if(15<ee[Se])return 0;++ve[ee[Se]]}if(ve[0]==ge)return 0;for(ye[1]=0,Oe=1;15>Oe;++Oe){if(ve[Oe]>1<<Oe)return 0;ye[Oe+1]=ye[Oe]+ve[Oe]}for(Se=0;Se<ge;++Se)Oe=ee[Se],0<ee[Se]&&(De[ye[Oe]++]=Se);if(ye[15]==1)return(ee=new L).g=0,ee.value=De[0],me(M,et,1,$e,ee),$e;var Ke,it=-1,Ze=$e-1,_t=0,jt=1,Ft=1,kt=1<<H;for(Se=0,Oe=1,ge=2;Oe<=H;++Oe,ge<<=1){if(jt+=Ft<<=1,0>(Ft-=ve[Oe]))return 0;for(;0<ve[Oe];--ve[Oe])(ee=new L).g=Oe,ee.value=De[Se++],me(M,et+_t,ge,kt,ee),_t=fe(_t,Oe)}for(Oe=H+1,ge=2;15>=Oe;++Oe,ge<<=1){if(jt+=Ft<<=1,0>(Ft-=ve[Oe]))return 0;for(;0<ve[Oe];--ve[Oe]){if(ee=new L,(_t&Ze)!=it){for(et+=kt,Ke=1<<(it=Oe)-H;15>it&&!(0>=(Ke-=ve[it]));)++it,Ke<<=1;$e+=kt=1<<(Ke=it-H),M[z+(it=_t&Ze)].g=Ke+H,M[z+it].value=et-z-it}ee.g=Oe-H,ee.value=De[Se++],me(M,et+(_t>>H),ge,kt,ee),_t=fe(_t,Oe)}}return jt!=2*ye[15]-1?0:$e}(l,u,f,j,E,D)}function L(){this.value=this.g=0}function le(){this.value=this.g=0}function R(){this.G=i(5,L),this.H=o(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=i(sr,le)}function we(l,u,f,j){a(l!=null),a(u!=null),a(2147483648>j),l.Ca=254,l.I=0,l.b=-8,l.Ka=0,l.oa=u,l.pa=f,l.Jd=u,l.Yc=f+j,l.Zc=4<=j?f+j-4+1:f,T(l)}function ce(l,u){for(var f=0;0<u--;)f|=oe(l,128)<<u;return f}function Ce(l,u){var f=ce(l,u);return B(l)?-f:f}function Z(l,u,f,j){var E,D=0;for(a(l!=null),a(u!=null),a(4294967288>j),l.Sb=j,l.Ra=0,l.u=0,l.h=0,4<j&&(j=4),E=0;E<j;++E)D+=u[f+E]<<8*E;l.Ra=D,l.bb=j,l.oa=u,l.pa=f}function he(l){for(;8<=l.u&&l.bb<l.Sb;)l.Ra>>>=8,l.Ra+=l.oa[l.pa+l.bb]<<ji-8>>>0,++l.bb,l.u-=8;q(l)&&(l.h=1,l.u=0)}function ie(l,u){if(a(0<=u),!l.h&&u<=yi){var f=G(l)&bi[u];return l.u+=u,he(l),f}return l.h=1,l.u=0}function Ue(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function S(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function G(l){return l.Ra>>>(l.u&ji-1)>>>0}function q(l){return a(l.bb<=l.Sb),l.h||l.bb==l.Sb&&l.u>ji}function N(l,u){l.u=u,l.h=q(l)}function U(l){l.u>=Hl&&(a(l.u>=Hl),he(l))}function T(l){a(l!=null&&l.oa!=null),l.pa<l.Zc?(l.I=(l.oa[l.pa++]|l.I<<8)>>>0,l.b+=8):(a(l!=null&&l.oa!=null),l.pa<l.Yc?(l.b+=8,l.I=l.oa[l.pa++]|l.I<<8):l.Ka?l.b=0:(l.I<<=8,l.b+=8,l.Ka=1))}function B(l){return ce(l,1)}function oe(l,u){var f=l.Ca;0>l.b&&T(l);var j=l.b,E=f*u>>>8,D=(l.I>>>j>E)+0;for(D?(f-=E,l.I-=E+1<<j>>>0):f=E+1,j=f,E=0;256<=j;)E+=8,j>>=8;return j=7^E+Dr[j],l.b-=j,l.Ca=(f<<j)-1,D}function Ne(l,u,f){l[u+0]=f>>24&255,l[u+1]=f>>16&255,l[u+2]=f>>8&255,l[u+3]=f>>0&255}function Be(l,u){return l[u+0]<<0|l[u+1]<<8}function Xe(l,u){return Be(l,u)|l[u+2]<<16}function dt(l,u){return Be(l,u)|Be(l,u+2)<<16}function ft(l,u){var f=1<<u;return a(l!=null),a(0<u),l.X=o(f),l.X==null?0:(l.Mb=32-u,l.Xa=u,1)}function Me(l,u){a(l!=null),a(u!=null),a(l.Xa==u.Xa),s(u.X,0,l.X,0,1<<u.Xa)}function te(){this.X=[],this.Xa=this.Mb=0}function Ct(l,u,f,j){a(f!=null),a(j!=null);var E=f[0],D=j[0];return E==0&&(E=(l*D+u/2)/u),D==0&&(D=(u*E+l/2)/l),0>=E||0>=D?0:(f[0]=E,j[0]=D,1)}function ae(l,u){return l+(1<<u)-1>>>u}function xe(l,u){return((4278255360&l)+(4278255360&u)>>>0&4278255360)+((16711935&l)+(16711935&u)>>>0&16711935)>>>0}function be(l,u){K[u]=function(f,j,E,D,M,z,H){var ee;for(ee=0;ee<M;++ee){var ge=K[l](z[H+ee-1],E,D+ee);z[H+ee]=xe(f[j+ee],ge)}}}function Te(){this.ud=this.hd=this.jd=0}function Ae(l,u){return((4278124286&(l^u))>>>1)+(l&u)>>>0}function tt(l){return 0<=l&&256>l?l:0>l?0:255<l?255:void 0}function rt(l,u){return tt(l+(l-u+.5>>1))}function gt(l,u,f){return Math.abs(u-f)-Math.abs(l-f)}function st(l,u,f,j,E,D,M){for(j=D[M-1],f=0;f<E;++f)D[M+f]=j=xe(l[u+f],j)}function Tt(l,u,f,j,E){var D;for(D=0;D<f;++D){var M=l[u+D],z=M>>8&255,H=16711935&(H=(H=16711935&M)+((z<<16)+z));j[E+D]=(4278255360&M)+H>>>0}}function ne(l,u){u.jd=l>>0&255,u.hd=l>>8&255,u.ud=l>>16&255}function Pe(l,u,f,j,E,D){var M;for(M=0;M<j;++M){var z=u[f+M],H=z>>>8,ee=z,ge=255&(ge=(ge=z>>>16)+((l.jd<<24>>24)*(H<<24>>24)>>>5));ee=255&(ee=(ee=ee+((l.hd<<24>>24)*(H<<24>>24)>>>5))+((l.ud<<24>>24)*(ge<<24>>24)>>>5)),E[D+M]=(4278255360&z)+(ge<<16)+ee}}function at(l,u,f,j,E){K[u]=function(D,M,z,H,ee,ge,De,Oe,Se){for(H=De;H<Oe;++H)for(De=0;De<Se;++De)ee[ge++]=E(z[j(D[M++])])},K[l]=function(D,M,z,H,ee,ge,De){var Oe=8>>D.b,Se=D.Ea,et=D.K[0],$e=D.w;if(8>Oe)for(D=(1<<D.b)-1,$e=(1<<Oe)-1;M<z;++M){var ve,ye=0;for(ve=0;ve<Se;++ve)ve&D||(ye=j(H[ee++])),ge[De++]=E(et[ye&$e]),ye>>=Oe}else K["VP8LMapColor"+f](H,ee,et,$e,ge,De,M,z,Se)}}function k(l,u,f,j,E){for(f=u+f;u<f;){var D=l[u++];j[E++]=D>>16&255,j[E++]=D>>8&255,j[E++]=D>>0&255}}function Qe(l,u,f,j,E){for(f=u+f;u<f;){var D=l[u++];j[E++]=D>>16&255,j[E++]=D>>8&255,j[E++]=D>>0&255,j[E++]=D>>24&255}}function Fe(l,u,f,j,E){for(f=u+f;u<f;){var D=(M=l[u++])>>16&240|M>>12&15,M=M>>0&240|M>>28&15;j[E++]=D,j[E++]=M}}function ut(l,u,f,j,E){for(f=u+f;u<f;){var D=(M=l[u++])>>16&248|M>>13&7,M=M>>5&224|M>>3&31;j[E++]=D,j[E++]=M}}function je(l,u,f,j,E){for(f=u+f;u<f;){var D=l[u++];j[E++]=D>>0&255,j[E++]=D>>8&255,j[E++]=D>>16&255}}function ht(l,u,f,j,E,D){if(D==0)for(f=u+f;u<f;)Ne(j,((D=l[u++])[0]>>24|D[1]>>8&65280|D[2]<<8&16711680|D[3]<<24)>>>0),E+=32;else s(j,E,l,u,f)}function qe(l,u){K[u][0]=K[l+"0"],K[u][1]=K[l+"1"],K[u][2]=K[l+"2"],K[u][3]=K[l+"3"],K[u][4]=K[l+"4"],K[u][5]=K[l+"5"],K[u][6]=K[l+"6"],K[u][7]=K[l+"7"],K[u][8]=K[l+"8"],K[u][9]=K[l+"9"],K[u][10]=K[l+"10"],K[u][11]=K[l+"11"],K[u][12]=K[l+"12"],K[u][13]=K[l+"13"],K[u][14]=K[l+"0"],K[u][15]=K[l+"0"]}function lt(l){return l==sh||l==nh||l==Ld||l==oh}function de(){this.eb=[],this.size=this.A=this.fb=0}function nt(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function Nt(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new de,this.f.kb=new nt,this.sd=null}function A(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function ue(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function ke(l){return alert("todo:WebPSamplerProcessPlane"),l.T}function Ve(l,u){var f=l.T,j=u.ba.f.RGBA,E=j.eb,D=j.fb+l.ka*j.A,M=is[u.ba.S],z=l.y,H=l.O,ee=l.f,ge=l.N,De=l.ea,Oe=l.W,Se=u.cc,et=u.dc,$e=u.Mc,ve=u.Nc,ye=l.ka,Ke=l.ka+l.T,it=l.U,Ze=it+1>>1;for(ye==0?M(z,H,null,null,ee,ge,De,Oe,ee,ge,De,Oe,E,D,null,null,it):(M(u.ec,u.fc,z,H,Se,et,$e,ve,ee,ge,De,Oe,E,D-j.A,E,D,it),++f);ye+2<Ke;ye+=2)Se=ee,et=ge,$e=De,ve=Oe,ge+=l.Rc,Oe+=l.Rc,D+=2*j.A,M(z,(H+=2*l.fa)-l.fa,z,H,Se,et,$e,ve,ee,ge,De,Oe,E,D-j.A,E,D,it);return H+=l.fa,l.j+Ke<l.o?(s(u.ec,u.fc,z,H,it),s(u.cc,u.dc,ee,ge,Ze),s(u.Mc,u.Nc,De,Oe,Ze),f--):1&Ke||M(z,H,null,null,ee,ge,De,Oe,ee,ge,De,Oe,E,D+j.A,null,null,it),f}function St(l,u,f){var j=l.F,E=[l.J];if(j!=null){var D=l.U,M=u.ba.S,z=M==Pd||M==Ld;u=u.ba.f.RGBA;var H=[0],ee=l.ka;H[0]=l.T,l.Kb&&(ee==0?--H[0]:(--ee,E[0]-=l.width),l.j+l.ka+l.T==l.o&&(H[0]=l.o-l.j-ee));var ge=u.eb;ee=u.fb+ee*u.A,l=pa(j,E[0],l.width,D,H,ge,ee+(z?0:3),u.A),a(f==H),l&&lt(M)&&ns(ge,ee,z,D,H,u.A)}return 0}function ot(l){var u=l.ma,f=u.ba.S,j=11>f,E=f==_d||f==Ed||f==Pd||f==rh||f==12||lt(f);if(u.memory=null,u.Ib=null,u.Jb=null,u.Nd=null,!Ul(u.Oa,l,E?11:12))return 0;if(E&&lt(f)&&ct(),l.da)alert("todo:use_scaling");else{if(j){if(u.Ib=ke,l.Kb){if(f=l.U+1>>1,u.memory=o(l.U+2*f),u.memory==null)return 0;u.ec=u.memory,u.fc=0,u.cc=u.ec,u.dc=u.fc+l.U,u.Mc=u.cc,u.Nc=u.dc+f,u.Ib=Ve,ct()}}else alert("todo:EmitYUV");E&&(u.Jb=St,j&&Ee())}if(j&&!R0){for(l=0;256>l;++l)Ub[l]=89858*(l-128)+Dd>>Id,Wb[l]=-22014*(l-128)+Dd,Hb[l]=-45773*(l-128),Vb[l]=113618*(l-128)+Dd>>Id;for(l=Kl;l<ch;++l)u=76283*(l-16)+Dd>>Id,Gb[l-Kl]=Vr(u,255),Jb[l-Kl]=Vr(u+8>>4,15);R0=1}return 1}function yt(l){var u=l.ma,f=l.U,j=l.T;return a(!(1&l.ka)),0>=f||0>=j?0:(f=u.Ib(l,u),u.Jb!=null&&u.Jb(l,u,f),u.Dc+=f,1)}function Dt(l){l.ma.memory=null}function V(l,u,f,j){return ie(l,8)!=47?0:(u[0]=ie(l,14)+1,f[0]=ie(l,14)+1,j[0]=ie(l,1),ie(l,3)!=0?0:!l.h)}function He(l,u){if(4>l)return l+1;var f=l-2>>1;return(2+(1&l)<<f)+ie(u,f)+1}function ze(l,u){return 120<u?u-120:1<=(f=((f=Eb[u-1])>>4)*l+(8-(15&f)))?f:1;var f}function vt(l,u,f){var j=G(f),E=l[u+=255&j].g-8;return 0<E&&(N(f,f.u+8),j=G(f),u+=l[u].value,u+=j&(1<<E)-1),N(f,f.u+l[u].g),l[u].value}function xt(l,u,f){return f.g+=l.g,f.value+=l.value<<u>>>0,a(8>=f.g),l.g}function qt(l,u,f){var j=l.xc;return a((u=j==0?0:l.vc[l.md*(f>>j)+(u>>j)])<l.Wb),l.Ya[u]}function Jt(l,u,f,j){var E=l.ab,D=l.c*u,M=l.C;u=M+u;var z=f,H=j;for(j=l.Ta,f=l.Ua;0<E--;){var ee=l.gc[E],ge=M,De=u,Oe=z,Se=H,et=(H=j,z=f,ee.Ea);switch(a(ge<De),a(De<=ee.nc),ee.hc){case 2:jd(Oe,Se,(De-ge)*et,H,z);break;case 0:var $e=ge,ve=De,ye=H,Ke=z,it=(kt=ee).Ea;$e==0&&(th(Oe,Se,null,null,1,ye,Ke),st(Oe,Se+1,0,0,it-1,ye,Ke+1),Se+=it,Ke+=it,++$e);for(var Ze=1<<kt.b,_t=Ze-1,jt=ae(it,kt.b),Ft=kt.K,kt=kt.w+($e>>kt.b)*jt;$e<ve;){var aa=Ft,na=kt,ea=1;for(Wl(Oe,Se,ye,Ke-it,1,ye,Ke);ea<it;){var Yt=(ea&~_t)+Ze;Yt>it&&(Yt=it),(0,Ln[aa[na++]>>8&15])(Oe,Se+ +ea,ye,Ke+ea-it,Yt-ea,ye,Ke+ea),ea=Yt}Se+=it,Ke+=it,++$e&_t||(kt+=jt)}De!=ee.nc&&s(H,z-et,H,z+(De-ge-1)*et,et);break;case 1:for(et=Oe,ve=Se,it=(Oe=ee.Ea)-(Ke=Oe&~(ye=(Se=1<<ee.b)-1)),$e=ae(Oe,ee.b),Ze=ee.K,ee=ee.w+(ge>>ee.b)*$e;ge<De;){for(_t=Ze,jt=ee,Ft=new Te,kt=ve+Ke,aa=ve+Oe;ve<kt;)ne(_t[jt++],Ft),Oo(Ft,et,ve,Se,H,z),ve+=Se,z+=Se;ve<aa&&(ne(_t[jt++],Ft),Oo(Ft,et,ve,it,H,z),ve+=it,z+=it),++ge&ye||(ee+=$e)}break;case 3:if(Oe==H&&Se==z&&0<ee.b){for(ve=H,Oe=et=z+(De-ge)*et-(Ke=(De-ge)*ae(ee.Ea,ee.b)),Se=H,ye=z,$e=[],Ke=(it=Ke)-1;0<=Ke;--Ke)$e[Ke]=Se[ye+Ke];for(Ke=it-1;0<=Ke;--Ke)ve[Oe+Ke]=$e[Ke];as(ee,ge,De,H,et,H,z)}else as(ee,ge,De,Oe,Se,H,z)}z=j,H=f}H!=f&&s(j,f,z,H,D)}function ma(l,u){var f=l.V,j=l.Ba+l.c*l.C,E=u-l.C;if(a(u<=l.l.o),a(16>=E),0<E){var D=l.l,M=l.Ta,z=l.Ua,H=D.width;if(Jt(l,E,f,j),E=z=[z],a((f=l.C)<(j=u)),a(D.v<D.va),j>D.o&&(j=D.o),f<D.j){var ee=D.j-f;f=D.j,E[0]+=ee*H}if(f>=j?f=0:(E[0]+=4*D.v,D.ka=f-D.j,D.U=D.va-D.v,D.T=j-f,f=1),f){if(z=z[0],11>(f=l.ca).S){var ge=f.f.RGBA,De=(j=f.S,E=D.U,D=D.T,ee=ge.eb,ge.A),Oe=D;for(ge=ge.fb+l.Ma*ge.A;0<Oe--;){var Se=M,et=z,$e=E,ve=ee,ye=ge;switch(j){case Ad:Or(Se,et,$e,ve,ye);break;case _d:Nr(Se,et,$e,ve,ye);break;case sh:Nr(Se,et,$e,ve,ye),ns(ve,ye,0,$e,1,0);break;case E0:rn(Se,et,$e,ve,ye);break;case Ed:ht(Se,et,$e,ve,ye,1);break;case nh:ht(Se,et,$e,ve,ye,1),ns(ve,ye,0,$e,1,0);break;case Pd:ht(Se,et,$e,ve,ye,0);break;case Ld:ht(Se,et,$e,ve,ye,0),ns(ve,ye,1,$e,1,0);break;case rh:In(Se,et,$e,ve,ye);break;case oh:In(Se,et,$e,ve,ye),ha(ve,ye,$e,1,0);break;case P0:an(Se,et,$e,ve,ye);break;default:a(0)}z+=H,ge+=De}l.Ma+=D}else alert("todo:EmitRescaledRowsYUVA");a(l.Ma<=f.height)}}l.C=u,a(l.C<=l.i)}function F(l){var u;if(0<l.ua)return 0;for(u=0;u<l.Wb;++u){var f=l.Ya[u].G,j=l.Ya[u].H;if(0<f[1][j[1]+0].g||0<f[2][j[2]+0].g||0<f[3][j[3]+0].g)return 0}return 1}function Ge(l,u,f,j,E,D){if(l.Z!=0){var M=l.qd,z=l.rd;for(a(Mn[l.Z]!=null);u<f;++u)Mn[l.Z](M,z,j,E,j,E,D),M=j,z=E,E+=D;l.qd=M,l.rd=z}}function Re(l,u){var f=l.l.ma,j=f.Z==0||f.Z==1?l.l.j:l.C;if(j=l.C<j?j:l.C,a(u<=l.l.o),u>j){var E=l.l.width,D=f.ca,M=f.tb+E*j,z=l.V,H=l.Ba+l.c*j,ee=l.gc;a(l.ab==1),a(ee[0].hc==3),Nd(ee[0],j,u,z,H,D,M),Ge(f,j,u,D,M,E)}l.C=l.Ma=u}function bt(l,u,f,j,E,D,M){var z=l.$/j,H=l.$%j,ee=l.m,ge=l.s,De=f+l.$,Oe=De;E=f+j*E;var Se=f+j*D,et=280+ge.ua,$e=l.Pb?z:16777216,ve=0<ge.ua?ge.Wa:null,ye=ge.wc,Ke=De<Se?qt(ge,H,z):null;a(l.C<D),a(Se<=E);var it=!1;e:for(;;){for(;it||De<Se;){var Ze=0;if(z>=$e){var _t=De-f;a(($e=l).Pb),$e.wd=$e.m,$e.xd=_t,0<$e.s.ua&&Me($e.s.Wa,$e.s.vb),$e=z+Lb}if(H&ye||(Ke=qt(ge,H,z)),a(Ke!=null),Ke.Qb&&(u[De]=Ke.qb,it=!0),!it)if(U(ee),Ke.jc){Ze=ee,_t=u;var jt=De,Ft=Ke.pd[G(Ze)&sr-1];a(Ke.jc),256>Ft.g?(N(Ze,Ze.u+Ft.g),_t[jt]=Ft.value,Ze=0):(N(Ze,Ze.u+Ft.g-256),a(256<=Ft.value),Ze=Ft.value),Ze==0&&(it=!0)}else Ze=vt(Ke.G[0],Ke.H[0],ee);if(ee.h)break;if(it||256>Ze){if(!it)if(Ke.nd)u[De]=(Ke.qb|Ze<<8)>>>0;else{if(U(ee),it=vt(Ke.G[1],Ke.H[1],ee),U(ee),_t=vt(Ke.G[2],Ke.H[2],ee),jt=vt(Ke.G[3],Ke.H[3],ee),ee.h)break;u[De]=(jt<<24|it<<16|Ze<<8|_t)>>>0}if(it=!1,++De,++H>=j&&(H=0,++z,M!=null&&z<=D&&!(z%16)&&M(l,z),ve!=null))for(;Oe<De;)Ze=u[Oe++],ve.X[(506832829*Ze&4294967295)>>>ve.Mb]=Ze}else if(280>Ze){if(Ze=He(Ze-256,ee),_t=vt(Ke.G[4],Ke.H[4],ee),U(ee),_t=ze(j,_t=He(_t,ee)),ee.h)break;if(De-f<_t||E-De<Ze)break e;for(jt=0;jt<Ze;++jt)u[De+jt]=u[De+jt-_t];for(De+=Ze,H+=Ze;H>=j;)H-=j,++z,M!=null&&z<=D&&!(z%16)&&M(l,z);if(a(De<=E),H&ye&&(Ke=qt(ge,H,z)),ve!=null)for(;Oe<De;)Ze=u[Oe++],ve.X[(506832829*Ze&4294967295)>>>ve.Mb]=Ze}else{if(!(Ze<et))break e;for(it=Ze-280,a(ve!=null);Oe<De;)Ze=u[Oe++],ve.X[(506832829*Ze&4294967295)>>>ve.Mb]=Ze;Ze=De,a(!(it>>>(_t=ve).Xa)),u[Ze]=_t.X[it],it=!0}it||a(ee.h==q(ee))}if(l.Pb&&ee.h&&De<E)a(l.m.h),l.a=5,l.m=l.wd,l.$=l.xd,0<l.s.ua&&Me(l.s.vb,l.s.Wa);else{if(ee.h)break e;M!=null&&M(l,z>D?D:z),l.a=0,l.$=De-f}return 1}return l.a=3,0}function Ot(l){a(l!=null),l.vc=null,l.yc=null,l.Ya=null;var u=l.Wa;u!=null&&(u.X=null),l.vb=null,a(l!=null)}function Pt(){var l=new eh;return l==null?null:(l.a=0,l.xb=D0,qe("Predictor","VP8LPredictors"),qe("Predictor","VP8LPredictors_C"),qe("PredictorAdd","VP8LPredictorsAdd"),qe("PredictorAdd","VP8LPredictorsAdd_C"),jd=Tt,Oo=Pe,Or=k,Nr=Qe,In=Fe,an=ut,rn=je,K.VP8LMapColor32b=Ni,K.VP8LMapColor8b=wd,l)}function pt(l,u,f,j,E){var D=1,M=[l],z=[u],H=j.m,ee=j.s,ge=null,De=0;e:for(;;){if(f)for(;D&&ie(H,1);){var Oe=M,Se=z,et=j,$e=1,ve=et.m,ye=et.gc[et.ab],Ke=ie(ve,2);if(et.Oc&1<<Ke)D=0;else{switch(et.Oc|=1<<Ke,ye.hc=Ke,ye.Ea=Oe[0],ye.nc=Se[0],ye.K=[null],++et.ab,a(4>=et.ab),Ke){case 0:case 1:ye.b=ie(ve,3)+2,$e=pt(ae(ye.Ea,ye.b),ae(ye.nc,ye.b),0,et,ye.K),ye.K=ye.K[0];break;case 3:var it,Ze=ie(ve,8)+1,_t=16<Ze?0:4<Ze?1:2<Ze?2:3;if(Oe[0]=ae(ye.Ea,_t),ye.b=_t,it=$e=pt(Ze,1,0,et,ye.K)){var jt,Ft=Ze,kt=ye,aa=1<<(8>>kt.b),na=o(aa);if(na==null)it=0;else{var ea=kt.K[0],Yt=kt.w;for(na[0]=kt.K[0][0],jt=1;jt<1*Ft;++jt)na[jt]=xe(ea[Yt+jt],na[jt-1]);for(;jt<4*aa;++jt)na[jt]=0;kt.K[0]=null,kt.K[0]=na,it=1}}$e=it;break;case 2:break;default:a(0)}D=$e}}if(M=M[0],z=z[0],D&&ie(H,1)&&!(D=1<=(De=ie(H,4))&&11>=De)){j.a=3;break e}var da;if(da=D)t:{var ca,Gt,$a,Tr=j,Ba=M,Mr=z,oa=De,Wr=f,Gr=Tr.m,Ka=Tr.s,nr=[null],Sr=1,ls=0,Bs=Pb[oa];a:for(;;){if(Wr&&ie(Gr,1)){var Za=ie(Gr,3)+2,ln=ae(Ba,Za),qo=ae(Mr,Za),Ai=ln*qo;if(!pt(ln,qo,0,Tr,nr))break a;for(nr=nr[0],Ka.xc=Za,ca=0;ca<Ai;++ca){var Fn=nr[ca]>>8&65535;nr[ca]=Fn,Fn>=Sr&&(Sr=Fn+1)}}if(Gr.h)break a;for(Gt=0;5>Gt;++Gt){var Pa=L0[Gt];!Gt&&0<oa&&(Pa+=1<<oa),ls<Pa&&(ls=Pa)}var dh=i(Sr*Bs,L),$0=Sr,B0=i($0,R);if(B0==null)var Td=null;else a(65536>=$0),Td=B0;var Zl=o(ls);if(Td==null||Zl==null||dh==null){Tr.a=1;break a}var Md=dh;for(ca=$a=0;ca<Sr;++ca){var ws=Td[ca],_i=ws.G,Ei=ws.H,U0=0,Fd=1,V0=0;for(Gt=0;5>Gt;++Gt){Pa=L0[Gt],_i[Gt]=Md,Ei[Gt]=$a,!Gt&&0<oa&&(Pa+=1<<oa);s:{var Rd,uh=Pa,qd=Tr,ec=Zl,Xb=Md,Kb=$a,mh=0,Rn=qd.m,Zb=ie(Rn,1);if(n(ec,0,0,uh),Zb){var ey=ie(Rn,1)+1,ty=ie(Rn,1),H0=ie(Rn,ty==0?1:8);ec[H0]=1,ey==2&&(ec[H0=ie(Rn,8)]=1);var zd=1}else{var W0=o(19),G0=ie(Rn,4)+4;if(19<G0){qd.a=3;var $d=0;break s}for(Rd=0;Rd<G0;++Rd)W0[_b[Rd]]=ie(Rn,3);var hh=void 0,tc=void 0,J0=qd,ay=W0,Bd=uh,Q0=ec,ph=0,qn=J0.m,Y0=8,X0=i(128,L);r:for(;$(X0,0,7,ay,19);){if(ie(qn,1)){var ry=2+2*ie(qn,3);if((hh=2+ie(qn,ry))>Bd)break r}else hh=Bd;for(tc=0;tc<Bd&&hh--;){U(qn);var K0=X0[0+(127&G(qn))];N(qn,qn.u+K0.g);var Pi=K0.value;if(16>Pi)Q0[tc++]=Pi,Pi!=0&&(Y0=Pi);else{var sy=Pi==16,Z0=Pi-16,ny=Cb[Z0],ex=ie(qn,kb[Z0])+ny;if(tc+ex>Bd)break r;for(var oy=sy?Y0:0;0<ex--;)Q0[tc++]=oy}}ph=1;break r}ph||(J0.a=3),zd=ph}(zd=zd&&!Rn.h)&&(mh=$(Xb,Kb,8,ec,uh)),zd&&mh!=0?$d=mh:(qd.a=3,$d=0)}if($d==0)break a;if(Fd&&Ab[Gt]==1&&(Fd=Md[$a].g==0),U0+=Md[$a].g,$a+=$d,3>=Gt){var ac,fh=Zl[0];for(ac=1;ac<Pa;++ac)Zl[ac]>fh&&(fh=Zl[ac]);V0+=fh}}if(ws.nd=Fd,ws.Qb=0,Fd&&(ws.qb=(_i[3][Ei[3]+0].value<<24|_i[1][Ei[1]+0].value<<16|_i[2][Ei[2]+0].value)>>>0,U0==0&&256>_i[0][Ei[0]+0].value&&(ws.Qb=1,ws.qb+=_i[0][Ei[0]+0].value<<8)),ws.jc=!ws.Qb&&6>V0,ws.jc){var Ud,cn=ws;for(Ud=0;Ud<sr;++Ud){var zn=Ud,$n=cn.pd[zn],Vd=cn.G[0][cn.H[0]+zn];256<=Vd.value?($n.g=Vd.g+256,$n.value=Vd.value):($n.g=0,$n.value=0,zn>>=xt(Vd,8,$n),zn>>=xt(cn.G[1][cn.H[1]+zn],16,$n),zn>>=xt(cn.G[2][cn.H[2]+zn],0,$n),xt(cn.G[3][cn.H[3]+zn],24,$n))}}}Ka.vc=nr,Ka.Wb=Sr,Ka.Ya=Td,Ka.yc=dh,da=1;break t}da=0}if(!(D=da)){j.a=3;break e}if(0<De){if(ee.ua=1<<De,!ft(ee.Wa,De)){j.a=1,D=0;break e}}else ee.ua=0;var xh=j,tx=M,iy=z,gh=xh.s,vh=gh.xc;if(xh.c=tx,xh.i=iy,gh.md=ae(tx,vh),gh.wc=vh==0?-1:(1<<vh)-1,f){j.xb=Rb;break e}if((ge=o(M*z))==null){j.a=1,D=0;break e}D=(D=bt(j,ge,0,M,z,z,null))&&!H.h;break e}return D?(E!=null?E[0]=ge:(a(ge==null),a(f)),j.$=0,f||Ot(ee)):Ot(ee),D}function xa(l,u){var f=l.c*l.i,j=f+u+16*u;return a(l.c<=u),l.V=o(j),l.V==null?(l.Ta=null,l.Ua=0,l.a=1,0):(l.Ta=l.V,l.Ua=l.Ba+f+u,1)}function Pr(l,u){var f=l.C,j=u-f,E=l.V,D=l.Ba+l.c*f;for(a(u<=l.l.o);0<j;){var M=16<j?16:j,z=l.l.ma,H=l.l.width,ee=H*M,ge=z.ca,De=z.tb+H*f,Oe=l.Ta,Se=l.Ua;Jt(l,M,E,D),Oa(Oe,Se,ge,De,ee),Ge(z,f,f+M,ge,De,H),j-=M,E+=M*l.c,f+=M}a(f==u),l.C=l.Ma=u}function Q(){this.ub=this.yd=this.td=this.Rb=0}function _e(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Le(){this.Fb=this.Bb=this.Cb=0,this.Zb=o(4),this.Lb=o(4)}function Je(){this.Yb=function(){var l=[];return function u(f,j,E){for(var D=E[j],M=0;M<D&&(f.push(E.length>j+1?[]:0),!(E.length<j+1));M++)u(f[M],j+1,E)}(l,0,[3,11]),l}()}function Ye(){this.jb=o(3),this.Wc=c([4,8],Je),this.Xc=c([4,17],Je)}function Lt(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new o(4),this.od=new o(4)}function Xt(){this.ld=this.La=this.dd=this.tc=0}function sa(){this.Na=this.la=0}function Lr(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Zs(){this.ad=o(384),this.Za=0,this.Ob=o(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function vs(){this.uc=this.M=this.Nb=0,this.wa=Array(new Xt),this.Y=0,this.ya=Array(new Zs),this.aa=0,this.l=new An}function _o(){this.y=o(16),this.f=o(8),this.ea=o(8)}function Cl(){this.cb=this.a=0,this.sc="",this.m=new Ue,this.Od=new Q,this.Kc=new _e,this.ed=new Lt,this.Qa=new Le,this.Ic=this.$c=this.Aa=0,this.D=new vs,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=i(8,Ue),this.ia=0,this.pb=i(4,Lr),this.Pa=new Ye,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new _o),this.Hd=0,this.rb=Array(new sa),this.sb=0,this.wa=Array(new Xt),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Zs),this.L=this.aa=0,this.gd=c([4,2],Xt),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function An(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Al(){var l=new Cl;return l!=null&&(l.a=0,l.sc="OK",l.cb=0,l.Xb=0,Xl||(Xl=od)),l}function Zt(l,u,f){return l.a==0&&(l.a=u,l.sc=f,l.cb=0),0}function li(l,u,f){return 3<=f&&l[u+0]==157&&l[u+1]==1&&l[u+2]==42}function Eo(l,u){if(l==null)return 0;if(l.a=0,l.sc="OK",u==null)return Zt(l,2,"null VP8Io passed to VP8GetHeaders()");var f=u.data,j=u.w,E=u.ha;if(4>E)return Zt(l,7,"Truncated header.");var D=f[j+0]|f[j+1]<<8|f[j+2]<<16,M=l.Od;if(M.Rb=!(1&D),M.td=D>>1&7,M.yd=D>>4&1,M.ub=D>>5,3<M.td)return Zt(l,3,"Incorrect keyframe parameters.");if(!M.yd)return Zt(l,4,"Frame not displayable.");j+=3,E-=3;var z=l.Kc;if(M.Rb){if(7>E)return Zt(l,7,"cannot parse picture header");if(!li(f,j,E))return Zt(l,3,"Bad code word");z.c=16383&(f[j+4]<<8|f[j+3]),z.Td=f[j+4]>>6,z.i=16383&(f[j+6]<<8|f[j+5]),z.Ud=f[j+6]>>6,j+=7,E-=7,l.za=z.c+15>>4,l.Ub=z.i+15>>4,u.width=z.c,u.height=z.i,u.Da=0,u.j=0,u.v=0,u.va=u.width,u.o=u.height,u.da=0,u.ib=u.width,u.hb=u.height,u.U=u.width,u.T=u.height,n((D=l.Pa).jb,0,255,D.jb.length),a((D=l.Qa)!=null),D.Cb=0,D.Bb=0,D.Fb=1,n(D.Zb,0,0,D.Zb.length),n(D.Lb,0,0,D.Lb)}if(M.ub>E)return Zt(l,7,"bad partition length");we(D=l.m,f,j,M.ub),j+=M.ub,E-=M.ub,M.Rb&&(z.Ld=B(D),z.Kd=B(D)),z=l.Qa;var H,ee=l.Pa;if(a(D!=null),a(z!=null),z.Cb=B(D),z.Cb){if(z.Bb=B(D),B(D)){for(z.Fb=B(D),H=0;4>H;++H)z.Zb[H]=B(D)?Ce(D,7):0;for(H=0;4>H;++H)z.Lb[H]=B(D)?Ce(D,6):0}if(z.Bb)for(H=0;3>H;++H)ee.jb[H]=B(D)?ce(D,8):255}else z.Bb=0;if(D.Ka)return Zt(l,3,"cannot parse segment header");if((z=l.ed).zd=B(D),z.Tb=ce(D,6),z.wb=ce(D,3),z.Pc=B(D),z.Pc&&B(D)){for(ee=0;4>ee;++ee)B(D)&&(z.vd[ee]=Ce(D,6));for(ee=0;4>ee;++ee)B(D)&&(z.od[ee]=Ce(D,6))}if(l.L=z.Tb==0?0:z.zd?1:2,D.Ka)return Zt(l,3,"cannot parse filter header");var ge=E;if(E=H=j,j=H+ge,z=ge,l.Xb=(1<<ce(l.m,2))-1,ge<3*(ee=l.Xb))f=7;else{for(H+=3*ee,z-=3*ee,ge=0;ge<ee;++ge){var De=f[E+0]|f[E+1]<<8|f[E+2]<<16;De>z&&(De=z),we(l.Jc[+ge],f,H,De),H+=De,z-=De,E+=3}we(l.Jc[+ee],f,H,z),f=H<j?0:5}if(f!=0)return Zt(l,f,"cannot parse partitions");for(f=ce(H=l.m,7),E=B(H)?Ce(H,4):0,j=B(H)?Ce(H,4):0,z=B(H)?Ce(H,4):0,ee=B(H)?Ce(H,4):0,H=B(H)?Ce(H,4):0,ge=l.Qa,De=0;4>De;++De){if(ge.Cb){var Oe=ge.Zb[De];ge.Fb||(Oe+=f)}else{if(0<De){l.pb[De]=l.pb[0];continue}Oe=f}var Se=l.pb[De];Se.Sc[0]=ih[Vr(Oe+E,127)],Se.Sc[1]=lh[Vr(Oe+0,127)],Se.Eb[0]=2*ih[Vr(Oe+j,127)],Se.Eb[1]=101581*lh[Vr(Oe+z,127)]>>16,8>Se.Eb[1]&&(Se.Eb[1]=8),Se.Qc[0]=ih[Vr(Oe+ee,117)],Se.Qc[1]=lh[Vr(Oe+H,127)],Se.lc=Oe+H}if(!M.Rb)return Zt(l,4,"Not a key frame.");for(B(D),M=l.Pa,f=0;4>f;++f){for(E=0;8>E;++E)for(j=0;3>j;++j)for(z=0;11>z;++z)ee=oe(D,Mb[f][E][j][z])?ce(D,8):Ob[f][E][j][z],M.Wc[f][E].Yb[j][z]=ee;for(E=0;17>E;++E)M.Xc[f][E]=M.Wc[f][Fb[E]]}return l.kc=B(D),l.kc&&(l.Bd=ce(D,8)),l.cb=1}function od(l,u,f,j,E,D,M){var z=u[E].Yb[f];for(f=0;16>E;++E){if(!oe(l,z[f+0]))return E;for(;!oe(l,z[f+1]);)if(z=u[++E].Yb[0],f=0,E==16)return 16;var H=u[E+1].Yb;if(oe(l,z[f+2])){var ee=l,ge=0;if(oe(ee,(Oe=z)[(De=f)+3]))if(oe(ee,Oe[De+6])){for(z=0,De=2*(ge=oe(ee,Oe[De+8]))+(Oe=oe(ee,Oe[De+9+ge])),ge=0,Oe=Ib[De];Oe[z];++z)ge+=ge+oe(ee,Oe[z]);ge+=3+(8<<De)}else oe(ee,Oe[De+7])?(ge=7+2*oe(ee,165),ge+=oe(ee,145)):ge=5+oe(ee,159);else ge=oe(ee,Oe[De+4])?3+oe(ee,Oe[De+5]):2;z=H[2]}else ge=1,z=H[1];H=M+Db[E],0>(ee=l).b&&T(ee);var De,Oe=ee.b,Se=(De=ee.Ca>>1)-(ee.I>>Oe)>>31;--ee.b,ee.Ca+=Se,ee.Ca|=1,ee.I-=(De+1&Se)<<Oe,D[H]=((ge^Se)-Se)*j[(0<E)+0]}return 16}function _l(l){var u=l.rb[l.sb-1];u.la=0,u.Na=0,n(l.zc,0,0,l.zc.length),l.ja=0}function Fm(l,u){if(l==null)return 0;if(u==null)return Zt(l,2,"NULL VP8Io parameter in VP8Decode().");if(!l.cb&&!Eo(l,u))return 0;if(a(l.cb),u.ac==null||u.ac(u)){u.ob&&(l.L=0);var f=Od[l.L];if(l.L==2?(l.yb=0,l.zb=0):(l.yb=u.v-f>>4,l.zb=u.j-f>>4,0>l.yb&&(l.yb=0),0>l.zb&&(l.zb=0)),l.Va=u.o+15+f>>4,l.Hb=u.va+15+f>>4,l.Hb>l.za&&(l.Hb=l.za),l.Va>l.Ub&&(l.Va=l.Ub),0<l.L){var j=l.ed;for(f=0;4>f;++f){var E;if(l.Qa.Cb){var D=l.Qa.Lb[f];l.Qa.Fb||(D+=j.Tb)}else D=j.Tb;for(E=0;1>=E;++E){var M=l.gd[f][E],z=D;if(j.Pc&&(z+=j.vd[0],E&&(z+=j.od[0])),0<(z=0>z?0:63<z?63:z)){var H=z;0<j.wb&&(H=4<j.wb?H>>2:H>>1)>9-j.wb&&(H=9-j.wb),1>H&&(H=1),M.dd=H,M.tc=2*z+H,M.ld=40<=z?2:15<=z?1:0}else M.tc=0;M.La=E}}}f=0}else Zt(l,6,"Frame setup failed"),f=l.a;if(f=f==0){if(f){l.$c=0,0<l.Aa||(l.Ic=Yb);e:{f=l.Ic,j=4*(H=l.za);var ee=32*H,ge=H+1,De=0<l.L?H*(0<l.Aa?2:1):0,Oe=(l.Aa==2?2:1)*H;if((M=j+832+(E=3*(16*f+Od[l.L])/2*ee)+(D=l.Fa!=null&&0<l.Fa.length?l.Kc.c*l.Kc.i:0))!=M)f=0;else{if(M>l.Vb){if(l.Vb=0,l.Ec=o(M),l.Fc=0,l.Ec==null){f=Zt(l,1,"no memory during frame initialization.");break e}l.Vb=M}M=l.Ec,z=l.Fc,l.Ac=M,l.Bc=z,z+=j,l.Gd=i(ee,_o),l.Hd=0,l.rb=i(ge+1,sa),l.sb=1,l.wa=De?i(De,Xt):null,l.Y=0,l.D.Nb=0,l.D.wa=l.wa,l.D.Y=l.Y,0<l.Aa&&(l.D.Y+=H),a(!0),l.oc=M,l.pc=z,z+=832,l.ya=i(Oe,Zs),l.aa=0,l.D.ya=l.ya,l.D.aa=l.aa,l.Aa==2&&(l.D.aa+=H),l.R=16*H,l.B=8*H,H=(ee=Od[l.L])*l.R,ee=ee/2*l.B,l.sa=M,l.ta=z+H,l.qa=l.sa,l.ra=l.ta+16*f*l.R+ee,l.Ha=l.qa,l.Ia=l.ra+8*f*l.B+ee,l.$c=0,z+=E,l.mb=D?M:null,l.nb=D?z:null,a(z+D<=l.Fc+l.Vb),_l(l),n(l.Ac,l.Bc,0,j),f=1}}if(f){if(u.ka=0,u.y=l.sa,u.O=l.ta,u.f=l.qa,u.N=l.ra,u.ea=l.Ha,u.Vd=l.Ia,u.fa=l.R,u.Rc=l.B,u.F=null,u.J=0,!kd){for(f=-255;255>=f;++f)Ha[255+f]=0>f?-f:f;for(f=-1020;1020>=f;++f)nn[1020+f]=-128>f?-128:127<f?127:f;for(f=-112;112>=f;++f)Yl[112+f]=-16>f?-16:15<f?15:f;for(f=-255;510>=f;++f)Ci[255+f]=0>f?0:255<f?255:f;kd=1}wi=zm,sn=Rm,Gl=ld,wr=qm,rs=cd,Da=id,Si=Ol,Sd=Io,Jl=Zm,To=Tl,Mo=Km,Dn=pi,Fo=Ml,ki=vd,Ro=gd,On=zs,Ql=tn,ss=Xm,Ns[0]=qs,Ns[1]=$m,Ns[2]=Hm,Ns[3]=Wm,Ns[4]=md,Ns[5]=mi,Ns[6]=hd,Ns[7]=Ll,Ns[8]=Jm,Ns[9]=Gm,Tn[0]=dd,Tn[1]=Um,Tn[2]=en,Tn[3]=di,Tn[4]=ur,Tn[5]=Vm,Tn[6]=ud,on[0]=_n,on[1]=Bm,on[2]=Qm,on[3]=Il,on[4]=Lo,on[5]=Ym,on[6]=Dl,f=1}else f=0}f&&(f=function(Se,et){for(Se.M=0;Se.M<Se.Va;++Se.M){var $e,ve=Se.Jc[Se.M&Se.Xb],ye=Se.m,Ke=Se;for($e=0;$e<Ke.za;++$e){var it=ye,Ze=Ke,_t=Ze.Ac,jt=Ze.Bc+4*$e,Ft=Ze.zc,kt=Ze.ya[Ze.aa+$e];if(Ze.Qa.Bb?kt.$b=oe(it,Ze.Pa.jb[0])?2+oe(it,Ze.Pa.jb[2]):oe(it,Ze.Pa.jb[1]):kt.$b=0,Ze.kc&&(kt.Ad=oe(it,Ze.Bd)),kt.Za=!oe(it,145)+0,kt.Za){var aa=kt.Ob,na=0;for(Ze=0;4>Ze;++Ze){var ea,Yt=Ft[0+Ze];for(ea=0;4>ea;++ea){Yt=Tb[_t[jt+ea]][Yt];for(var da=I0[oe(it,Yt[0])];0<da;)da=I0[2*da+oe(it,Yt[da])];Yt=-da,_t[jt+ea]=Yt}s(aa,na,_t,jt,4),na+=4,Ft[0+Ze]=Yt}}else Yt=oe(it,156)?oe(it,128)?1:3:oe(it,163)?2:0,kt.Ob[0]=Yt,n(_t,jt,Yt,4),n(Ft,0,Yt,4);kt.Dd=oe(it,142)?oe(it,114)?oe(it,183)?1:3:2:0}if(Ke.m.Ka)return Zt(Se,7,"Premature end-of-partition0 encountered.");for(;Se.ja<Se.za;++Se.ja){if(Ke=ve,it=(ye=Se).rb[ye.sb-1],_t=ye.rb[ye.sb+ye.ja],$e=ye.ya[ye.aa+ye.ja],jt=ye.kc?$e.Ad:0)it.la=_t.la=0,$e.Za||(it.Na=_t.Na=0),$e.Hc=0,$e.Gc=0,$e.ia=0;else{var ca,Gt;if(it=_t,_t=Ke,jt=ye.Pa.Xc,Ft=ye.ya[ye.aa+ye.ja],kt=ye.pb[Ft.$b],Ze=Ft.ad,aa=0,na=ye.rb[ye.sb-1],Yt=ea=0,n(Ze,aa,0,384),Ft.Za)var $a=0,Tr=jt[3];else{da=o(16);var Ba=it.Na+na.Na;if(Ba=Xl(_t,jt[1],Ba,kt.Eb,0,da,0),it.Na=na.Na=(0<Ba)+0,1<Ba)wi(da,0,Ze,aa);else{var Mr=da[0]+3>>3;for(da=0;256>da;da+=16)Ze[aa+da]=Mr}$a=1,Tr=jt[0]}var oa=15&it.la,Wr=15&na.la;for(da=0;4>da;++da){var Gr=1&Wr;for(Mr=Gt=0;4>Mr;++Mr)oa=oa>>1|(Gr=(Ba=Xl(_t,Tr,Ba=Gr+(1&oa),kt.Sc,$a,Ze,aa))>$a)<<7,Gt=Gt<<2|(3<Ba?3:1<Ba?2:Ze[aa+0]!=0),aa+=16;oa>>=4,Wr=Wr>>1|Gr<<7,ea=(ea<<8|Gt)>>>0}for(Tr=oa,$a=Wr>>4,ca=0;4>ca;ca+=2){for(Gt=0,oa=it.la>>4+ca,Wr=na.la>>4+ca,da=0;2>da;++da){for(Gr=1&Wr,Mr=0;2>Mr;++Mr)Ba=Gr+(1&oa),oa=oa>>1|(Gr=0<(Ba=Xl(_t,jt[2],Ba,kt.Qc,0,Ze,aa)))<<3,Gt=Gt<<2|(3<Ba?3:1<Ba?2:Ze[aa+0]!=0),aa+=16;oa>>=2,Wr=Wr>>1|Gr<<5}Yt|=Gt<<4*ca,Tr|=oa<<4<<ca,$a|=(240&Wr)<<ca}it.la=Tr,na.la=$a,Ft.Hc=ea,Ft.Gc=Yt,Ft.ia=43690&Yt?0:kt.ia,jt=!(ea|Yt)}if(0<ye.L&&(ye.wa[ye.Y+ye.ja]=ye.gd[$e.$b][$e.Za],ye.wa[ye.Y+ye.ja].La|=!jt),Ke.Ka)return Zt(Se,7,"Premature end-of-file encountered.")}if(_l(Se),ye=et,Ke=1,$e=(ve=Se).D,it=0<ve.L&&ve.M>=ve.zb&&ve.M<=ve.Va,ve.Aa==0)e:{if($e.M=ve.M,$e.uc=it,Bl(ve,$e),Ke=1,$e=(Gt=ve.D).Nb,it=(Yt=Od[ve.L])*ve.R,_t=Yt/2*ve.B,da=16*$e*ve.R,Mr=8*$e*ve.B,jt=ve.sa,Ft=ve.ta-it+da,kt=ve.qa,Ze=ve.ra-_t+Mr,aa=ve.Ha,na=ve.Ia-_t+Mr,Wr=(oa=Gt.M)==0,ea=oa>=ve.Va-1,ve.Aa==2&&Bl(ve,Gt),Gt.uc)for(Gr=(Ba=ve).D.M,a(Ba.D.uc),Gt=Ba.yb;Gt<Ba.Hb;++Gt){$a=Gt,Tr=Gr;var Ka=(nr=(Pa=Ba).D).Nb;ca=Pa.R;var nr=nr.wa[nr.Y+$a],Sr=Pa.sa,ls=Pa.ta+16*Ka*ca+16*$a,Bs=nr.dd,Za=nr.tc;if(Za!=0)if(a(3<=Za),Pa.L==1)0<$a&&On(Sr,ls,ca,Za+4),nr.La&&ss(Sr,ls,ca,Za),0<Tr&&Ro(Sr,ls,ca,Za+4),nr.La&&Ql(Sr,ls,ca,Za);else{var ln=Pa.B,qo=Pa.qa,Ai=Pa.ra+8*Ka*ln+8*$a,Fn=Pa.Ha,Pa=Pa.Ia+8*Ka*ln+8*$a;Ka=nr.ld,0<$a&&(Sd(Sr,ls,ca,Za+4,Bs,Ka),To(qo,Ai,Fn,Pa,ln,Za+4,Bs,Ka)),nr.La&&(Dn(Sr,ls,ca,Za,Bs,Ka),ki(qo,Ai,Fn,Pa,ln,Za,Bs,Ka)),0<Tr&&(Si(Sr,ls,ca,Za+4,Bs,Ka),Jl(qo,Ai,Fn,Pa,ln,Za+4,Bs,Ka)),nr.La&&(Mo(Sr,ls,ca,Za,Bs,Ka),Fo(qo,Ai,Fn,Pa,ln,Za,Bs,Ka))}}if(ve.ia&&alert("todo:DitherRow"),ye.put!=null){if(Gt=16*oa,oa=16*(oa+1),Wr?(ye.y=ve.sa,ye.O=ve.ta+da,ye.f=ve.qa,ye.N=ve.ra+Mr,ye.ea=ve.Ha,ye.W=ve.Ia+Mr):(Gt-=Yt,ye.y=jt,ye.O=Ft,ye.f=kt,ye.N=Ze,ye.ea=aa,ye.W=na),ea||(oa-=Yt),oa>ye.o&&(oa=ye.o),ye.F=null,ye.J=null,ve.Fa!=null&&0<ve.Fa.length&&Gt<oa&&(ye.J=zl(ve,ye,Gt,oa-Gt),ye.F=ve.mb,ye.F==null&&ye.F.length==0)){Ke=Zt(ve,3,"Could not decode alpha data.");break e}Gt<ye.j&&(Yt=ye.j-Gt,Gt=ye.j,a(!(1&Yt)),ye.O+=ve.R*Yt,ye.N+=ve.B*(Yt>>1),ye.W+=ve.B*(Yt>>1),ye.F!=null&&(ye.J+=ye.width*Yt)),Gt<oa&&(ye.O+=ye.v,ye.N+=ye.v>>1,ye.W+=ye.v>>1,ye.F!=null&&(ye.J+=ye.v),ye.ka=Gt-ye.j,ye.U=ye.va-ye.v,ye.T=oa-Gt,Ke=ye.put(ye))}$e+1!=ve.Ic||ea||(s(ve.sa,ve.ta-it,jt,Ft+16*ve.R,it),s(ve.qa,ve.ra-_t,kt,Ze+8*ve.B,_t),s(ve.Ha,ve.Ia-_t,aa,na+8*ve.B,_t))}if(!Ke)return Zt(Se,6,"Output aborted.")}return 1}(l,u)),u.bc!=null&&u.bc(u),f&=1}return f?(l.cb=0,f):0}function bs(l,u,f,j,E){E=l[u+f+32*j]+(E>>3),l[u+f+32*j]=-256&E?0>E?0:255:E}function ci(l,u,f,j,E,D){bs(l,u,0,f,j+E),bs(l,u,1,f,j+D),bs(l,u,2,f,j-D),bs(l,u,3,f,j-E)}function Ir(l){return(20091*l>>16)+l}function El(l,u,f,j){var E,D=0,M=o(16);for(E=0;4>E;++E){var z=l[u+0]+l[u+8],H=l[u+0]-l[u+8],ee=(35468*l[u+4]>>16)-Ir(l[u+12]),ge=Ir(l[u+4])+(35468*l[u+12]>>16);M[D+0]=z+ge,M[D+1]=H+ee,M[D+2]=H-ee,M[D+3]=z-ge,D+=4,u++}for(E=D=0;4>E;++E)z=(l=M[D+0]+4)+M[D+8],H=l-M[D+8],ee=(35468*M[D+4]>>16)-Ir(M[D+12]),bs(f,j,0,0,z+(ge=Ir(M[D+4])+(35468*M[D+12]>>16))),bs(f,j,1,0,H+ee),bs(f,j,2,0,H-ee),bs(f,j,3,0,z-ge),D++,j+=32}function id(l,u,f,j){var E=l[u+0]+4,D=35468*l[u+4]>>16,M=Ir(l[u+4]),z=35468*l[u+1]>>16;ci(f,j,0,E+M,l=Ir(l[u+1]),z),ci(f,j,1,E+D,l,z),ci(f,j,2,E-D,l,z),ci(f,j,3,E-M,l,z)}function Rm(l,u,f,j,E){El(l,u,f,j),E&&El(l,u+16,f,j+4)}function ld(l,u,f,j){sn(l,u+0,f,j,1),sn(l,u+32,f,j+128,1)}function qm(l,u,f,j){var E;for(l=l[u+0]+4,E=0;4>E;++E)for(u=0;4>u;++u)bs(f,j,u,E,l)}function cd(l,u,f,j){l[u+0]&&wr(l,u+0,f,j),l[u+16]&&wr(l,u+16,f,j+4),l[u+32]&&wr(l,u+32,f,j+128),l[u+48]&&wr(l,u+48,f,j+128+4)}function zm(l,u,f,j){var E,D=o(16);for(E=0;4>E;++E){var M=l[u+0+E]+l[u+12+E],z=l[u+4+E]+l[u+8+E],H=l[u+4+E]-l[u+8+E],ee=l[u+0+E]-l[u+12+E];D[0+E]=M+z,D[8+E]=M-z,D[4+E]=ee+H,D[12+E]=ee-H}for(E=0;4>E;++E)M=(l=D[0+4*E]+3)+D[3+4*E],z=D[1+4*E]+D[2+4*E],H=D[1+4*E]-D[2+4*E],ee=l-D[3+4*E],f[j+0]=M+z>>3,f[j+16]=ee+H>>3,f[j+32]=M-z>>3,f[j+48]=ee-H>>3,j+=64}function Pl(l,u,f){var j,E=u-32,D=Hr,M=255-l[E-1];for(j=0;j<f;++j){var z,H=D,ee=M+l[u-1];for(z=0;z<f;++z)l[u+z]=H[ee+l[E+z]];u+=32}}function $m(l,u){Pl(l,u,4)}function Bm(l,u){Pl(l,u,8)}function Um(l,u){Pl(l,u,16)}function en(l,u){var f;for(f=0;16>f;++f)s(l,u+32*f,l,u-32,16)}function di(l,u){var f;for(f=16;0<f;--f)n(l,u,l[u-1],16),u+=32}function ui(l,u,f){var j;for(j=0;16>j;++j)n(u,f+32*j,l,16)}function dd(l,u){var f,j=16;for(f=0;16>f;++f)j+=l[u-1+32*f]+l[u+f-32];ui(j>>5,l,u)}function ur(l,u){var f,j=8;for(f=0;16>f;++f)j+=l[u-1+32*f];ui(j>>4,l,u)}function Vm(l,u){var f,j=8;for(f=0;16>f;++f)j+=l[u+f-32];ui(j>>4,l,u)}function ud(l,u){ui(128,l,u)}function Bt(l,u,f){return l+2*u+f+2>>2}function Hm(l,u){var f,j=u-32;for(j=new Uint8Array([Bt(l[j-1],l[j+0],l[j+1]),Bt(l[j+0],l[j+1],l[j+2]),Bt(l[j+1],l[j+2],l[j+3]),Bt(l[j+2],l[j+3],l[j+4])]),f=0;4>f;++f)s(l,u+32*f,j,0,j.length)}function Wm(l,u){var f=l[u-1],j=l[u-1+32],E=l[u-1+64],D=l[u-1+96];Ne(l,u+0,16843009*Bt(l[u-1-32],f,j)),Ne(l,u+32,16843009*Bt(f,j,E)),Ne(l,u+64,16843009*Bt(j,E,D)),Ne(l,u+96,16843009*Bt(E,D,D))}function qs(l,u){var f,j=4;for(f=0;4>f;++f)j+=l[u+f-32]+l[u-1+32*f];for(j>>=3,f=0;4>f;++f)n(l,u+32*f,j,4)}function md(l,u){var f=l[u-1+0],j=l[u-1+32],E=l[u-1+64],D=l[u-1-32],M=l[u+0-32],z=l[u+1-32],H=l[u+2-32],ee=l[u+3-32];l[u+0+96]=Bt(j,E,l[u-1+96]),l[u+1+96]=l[u+0+64]=Bt(f,j,E),l[u+2+96]=l[u+1+64]=l[u+0+32]=Bt(D,f,j),l[u+3+96]=l[u+2+64]=l[u+1+32]=l[u+0+0]=Bt(M,D,f),l[u+3+64]=l[u+2+32]=l[u+1+0]=Bt(z,M,D),l[u+3+32]=l[u+2+0]=Bt(H,z,M),l[u+3+0]=Bt(ee,H,z)}function hd(l,u){var f=l[u+1-32],j=l[u+2-32],E=l[u+3-32],D=l[u+4-32],M=l[u+5-32],z=l[u+6-32],H=l[u+7-32];l[u+0+0]=Bt(l[u+0-32],f,j),l[u+1+0]=l[u+0+32]=Bt(f,j,E),l[u+2+0]=l[u+1+32]=l[u+0+64]=Bt(j,E,D),l[u+3+0]=l[u+2+32]=l[u+1+64]=l[u+0+96]=Bt(E,D,M),l[u+3+32]=l[u+2+64]=l[u+1+96]=Bt(D,M,z),l[u+3+64]=l[u+2+96]=Bt(M,z,H),l[u+3+96]=Bt(z,H,H)}function mi(l,u){var f=l[u-1+0],j=l[u-1+32],E=l[u-1+64],D=l[u-1-32],M=l[u+0-32],z=l[u+1-32],H=l[u+2-32],ee=l[u+3-32];l[u+0+0]=l[u+1+64]=D+M+1>>1,l[u+1+0]=l[u+2+64]=M+z+1>>1,l[u+2+0]=l[u+3+64]=z+H+1>>1,l[u+3+0]=H+ee+1>>1,l[u+0+96]=Bt(E,j,f),l[u+0+64]=Bt(j,f,D),l[u+0+32]=l[u+1+96]=Bt(f,D,M),l[u+1+32]=l[u+2+96]=Bt(D,M,z),l[u+2+32]=l[u+3+96]=Bt(M,z,H),l[u+3+32]=Bt(z,H,ee)}function Ll(l,u){var f=l[u+0-32],j=l[u+1-32],E=l[u+2-32],D=l[u+3-32],M=l[u+4-32],z=l[u+5-32],H=l[u+6-32],ee=l[u+7-32];l[u+0+0]=f+j+1>>1,l[u+1+0]=l[u+0+64]=j+E+1>>1,l[u+2+0]=l[u+1+64]=E+D+1>>1,l[u+3+0]=l[u+2+64]=D+M+1>>1,l[u+0+32]=Bt(f,j,E),l[u+1+32]=l[u+0+96]=Bt(j,E,D),l[u+2+32]=l[u+1+96]=Bt(E,D,M),l[u+3+32]=l[u+2+96]=Bt(D,M,z),l[u+3+64]=Bt(M,z,H),l[u+3+96]=Bt(z,H,ee)}function Gm(l,u){var f=l[u-1+0],j=l[u-1+32],E=l[u-1+64],D=l[u-1+96];l[u+0+0]=f+j+1>>1,l[u+2+0]=l[u+0+32]=j+E+1>>1,l[u+2+32]=l[u+0+64]=E+D+1>>1,l[u+1+0]=Bt(f,j,E),l[u+3+0]=l[u+1+32]=Bt(j,E,D),l[u+3+32]=l[u+1+64]=Bt(E,D,D),l[u+3+64]=l[u+2+64]=l[u+0+96]=l[u+1+96]=l[u+2+96]=l[u+3+96]=D}function Jm(l,u){var f=l[u-1+0],j=l[u-1+32],E=l[u-1+64],D=l[u-1+96],M=l[u-1-32],z=l[u+0-32],H=l[u+1-32],ee=l[u+2-32];l[u+0+0]=l[u+2+32]=f+M+1>>1,l[u+0+32]=l[u+2+64]=j+f+1>>1,l[u+0+64]=l[u+2+96]=E+j+1>>1,l[u+0+96]=D+E+1>>1,l[u+3+0]=Bt(z,H,ee),l[u+2+0]=Bt(M,z,H),l[u+1+0]=l[u+3+32]=Bt(f,M,z),l[u+1+32]=l[u+3+64]=Bt(j,f,M),l[u+1+64]=l[u+3+96]=Bt(E,j,f),l[u+1+96]=Bt(D,E,j)}function Qm(l,u){var f;for(f=0;8>f;++f)s(l,u+32*f,l,u-32,8)}function Il(l,u){var f;for(f=0;8>f;++f)n(l,u,l[u-1],8),u+=32}function Po(l,u,f){var j;for(j=0;8>j;++j)n(u,f+32*j,l,8)}function _n(l,u){var f,j=8;for(f=0;8>f;++f)j+=l[u+f-32]+l[u-1+32*f];Po(j>>4,l,u)}function Ym(l,u){var f,j=4;for(f=0;8>f;++f)j+=l[u+f-32];Po(j>>3,l,u)}function Lo(l,u){var f,j=4;for(f=0;8>f;++f)j+=l[u-1+32*f];Po(j>>3,l,u)}function Dl(l,u){Po(128,l,u)}function hi(l,u,f){var j=l[u-f],E=l[u+0],D=3*(E-j)+ah[1020+l[u-2*f]-l[u+f]],M=Cd[112+(D+4>>3)];l[u-f]=Hr[255+j+Cd[112+(D+3>>3)]],l[u+0]=Hr[255+E-M]}function pd(l,u,f,j){var E=l[u+0],D=l[u+f];return os[255+l[u-2*f]-l[u-f]]>j||os[255+D-E]>j}function fd(l,u,f,j){return 4*os[255+l[u-f]-l[u+0]]+os[255+l[u-2*f]-l[u+f]]<=j}function xd(l,u,f,j,E){var D=l[u-3*f],M=l[u-2*f],z=l[u-f],H=l[u+0],ee=l[u+f],ge=l[u+2*f],De=l[u+3*f];return 4*os[255+z-H]+os[255+M-ee]>j?0:os[255+l[u-4*f]-D]<=E&&os[255+D-M]<=E&&os[255+M-z]<=E&&os[255+De-ge]<=E&&os[255+ge-ee]<=E&&os[255+ee-H]<=E}function gd(l,u,f,j){var E=2*j+1;for(j=0;16>j;++j)fd(l,u+j,f,E)&&hi(l,u+j,f)}function zs(l,u,f,j){var E=2*j+1;for(j=0;16>j;++j)fd(l,u+j*f,1,E)&&hi(l,u+j*f,1)}function tn(l,u,f,j){var E;for(E=3;0<E;--E)gd(l,u+=4*f,f,j)}function Xm(l,u,f,j){var E;for(E=3;0<E;--E)zs(l,u+=4,f,j)}function En(l,u,f,j,E,D,M,z){for(D=2*D+1;0<E--;){if(xd(l,u,f,D,M))if(pd(l,u,f,z))hi(l,u,f);else{var H=l,ee=u,ge=f,De=H[ee-2*ge],Oe=H[ee-ge],Se=H[ee+0],et=H[ee+ge],$e=H[ee+2*ge],ve=27*(Ke=ah[1020+3*(Se-Oe)+ah[1020+De-et]])+63>>7,ye=18*Ke+63>>7,Ke=9*Ke+63>>7;H[ee-3*ge]=Hr[255+H[ee-3*ge]+Ke],H[ee-2*ge]=Hr[255+De+ye],H[ee-ge]=Hr[255+Oe+ve],H[ee+0]=Hr[255+Se-ve],H[ee+ge]=Hr[255+et-ye],H[ee+2*ge]=Hr[255+$e-Ke]}u+=j}}function ys(l,u,f,j,E,D,M,z){for(D=2*D+1;0<E--;){if(xd(l,u,f,D,M))if(pd(l,u,f,z))hi(l,u,f);else{var H=l,ee=u,ge=f,De=H[ee-ge],Oe=H[ee+0],Se=H[ee+ge],et=Cd[112+(($e=3*(Oe-De))+4>>3)],$e=Cd[112+($e+3>>3)],ve=et+1>>1;H[ee-2*ge]=Hr[255+H[ee-2*ge]+ve],H[ee-ge]=Hr[255+De+$e],H[ee+0]=Hr[255+Oe-et],H[ee+ge]=Hr[255+Se-ve]}u+=j}}function Ol(l,u,f,j,E,D){En(l,u,f,1,16,j,E,D)}function Io(l,u,f,j,E,D){En(l,u,1,f,16,j,E,D)}function Km(l,u,f,j,E,D){var M;for(M=3;0<M;--M)ys(l,u+=4*f,f,1,16,j,E,D)}function pi(l,u,f,j,E,D){var M;for(M=3;0<M;--M)ys(l,u+=4,1,f,16,j,E,D)}function Zm(l,u,f,j,E,D,M,z){En(l,u,E,1,8,D,M,z),En(f,j,E,1,8,D,M,z)}function Tl(l,u,f,j,E,D,M,z){En(l,u,1,E,8,D,M,z),En(f,j,1,E,8,D,M,z)}function Ml(l,u,f,j,E,D,M,z){ys(l,u+4*E,E,1,8,D,M,z),ys(f,j+4*E,E,1,8,D,M,z)}function vd(l,u,f,j,E,D,M,z){ys(l,u+4,1,E,8,D,M,z),ys(f,j+4,1,E,8,D,M,z)}function fi(){this.ba=new Nt,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new ue,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function Fl(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function Rl(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function bd(){this.ua=0,this.Wa=new te,this.vb=new te,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new R,this.yc=new L}function eh(){this.xb=this.a=0,this.l=new An,this.ca=new Nt,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new S,this.Pb=0,this.wd=new S,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new bd,this.ab=0,this.gc=i(4,Rl),this.Oc=0}function xi(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new An,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function Do(l,u,f,j,E,D,M){for(l=l==null?0:l[u+0],u=0;u<M;++u)E[D+u]=l+f[j+u]&255,l=E[D+u]}function ql(l,u,f,j,E,D,M){var z;if(l==null)Do(null,null,f,j,E,D,M);else for(z=0;z<M;++z)E[D+z]=l[u+z]+f[j+z]&255}function Pn(l,u,f,j,E,D,M){if(l==null)Do(null,null,f,j,E,D,M);else{var z,H=l[u+0],ee=H,ge=H;for(z=0;z<M;++z)ee=ge+(H=l[u+z])-ee,ge=f[j+z]+(-256&ee?0>ee?0:255:ee)&255,ee=H,E[D+z]=ge}}function zl(l,u,f,j){var E=u.width,D=u.o;if(a(l!=null&&u!=null),0>f||0>=j||f+j>D)return null;if(!l.Cc){if(l.ga==null){var M;if(l.ga=new xi,(M=l.ga==null)||(M=u.width*u.o,a(l.Gb.length==0),l.Gb=o(M),l.Uc=0,l.Gb==null?M=0:(l.mb=l.Gb,l.nb=l.Uc,l.rc=null,M=1),M=!M),!M){M=l.ga;var z=l.Fa,H=l.P,ee=l.qc,ge=l.mb,De=l.nb,Oe=H+1,Se=ee-1,et=M.l;if(a(z!=null&&ge!=null&&u!=null),Mn[0]=null,Mn[1]=Do,Mn[2]=ql,Mn[3]=Pn,M.ca=ge,M.tb=De,M.c=u.width,M.i=u.height,a(0<M.c&&0<M.i),1>=ee)u=0;else if(M.$a=z[H+0]>>0&3,M.Z=z[H+0]>>2&3,M.Lc=z[H+0]>>4&3,H=z[H+0]>>6&3,0>M.$a||1<M.$a||4<=M.Z||1<M.Lc||H)u=0;else if(et.put=yt,et.ac=ot,et.bc=Dt,et.ma=M,et.width=u.width,et.height=u.height,et.Da=u.Da,et.v=u.v,et.va=u.va,et.j=u.j,et.o=u.o,M.$a)e:{a(M.$a==1),u=Pt();t:for(;;){if(u==null){u=0;break e}if(a(M!=null),M.mc=u,u.c=M.c,u.i=M.i,u.l=M.l,u.l.ma=M,u.l.width=M.c,u.l.height=M.i,u.a=0,Z(u.m,z,Oe,Se),!pt(M.c,M.i,1,u,null)||(u.ab==1&&u.gc[0].hc==3&&F(u.s)?(M.ic=1,z=u.c*u.i,u.Ta=null,u.Ua=0,u.V=o(z),u.Ba=0,u.V==null?(u.a=1,u=0):u=1):(M.ic=0,u=xa(u,M.c)),!u))break t;u=1;break e}M.mc=null,u=0}else u=Se>=M.c*M.i;M=!u}if(M)return null;l.ga.Lc!=1?l.Ga=0:j=D-f}a(l.ga!=null),a(f+j<=D);e:{if(u=(z=l.ga).c,D=z.l.o,z.$a==0){if(Oe=l.rc,Se=l.Vc,et=l.Fa,H=l.P+1+f*u,ee=l.mb,ge=l.nb+f*u,a(H<=l.P+l.qc),z.Z!=0)for(a(Mn[z.Z]!=null),M=0;M<j;++M)Mn[z.Z](Oe,Se,et,H,ee,ge,u),Oe=ee,Se=ge,ge+=u,H+=u;else for(M=0;M<j;++M)s(ee,ge,et,H,u),Oe=ee,Se=ge,ge+=u,H+=u;l.rc=Oe,l.Vc=Se}else{if(a(z.mc!=null),u=f+j,a((M=z.mc)!=null),a(u<=M.i),M.C>=u)u=1;else if(z.ic||Ee(),z.ic){z=M.V,Oe=M.Ba,Se=M.c;var $e=M.i,ve=(et=1,H=M.$/Se,ee=M.$%Se,ge=M.m,De=M.s,M.$),ye=Se*$e,Ke=Se*u,it=De.wc,Ze=ve<Ke?qt(De,ee,H):null;a(ve<=ye),a(u<=$e),a(F(De));t:for(;;){for(;!ge.h&&ve<Ke;){if(ee&it||(Ze=qt(De,ee,H)),a(Ze!=null),U(ge),256>($e=vt(Ze.G[0],Ze.H[0],ge)))z[Oe+ve]=$e,++ve,++ee>=Se&&(ee=0,++H<=u&&!(H%16)&&Re(M,H));else{if(!(280>$e)){et=0;break t}$e=He($e-256,ge);var _t,jt=vt(Ze.G[4],Ze.H[4],ge);if(U(ge),!(ve>=(jt=ze(Se,jt=He(jt,ge)))&&ye-ve>=$e)){et=0;break t}for(_t=0;_t<$e;++_t)z[Oe+ve+_t]=z[Oe+ve+_t-jt];for(ve+=$e,ee+=$e;ee>=Se;)ee-=Se,++H<=u&&!(H%16)&&Re(M,H);ve<Ke&&ee&it&&(Ze=qt(De,ee,H))}a(ge.h==q(ge))}Re(M,H>u?u:H);break t}!et||ge.h&&ve<ye?(et=0,M.a=ge.h?5:3):M.$=ve,u=et}else u=bt(M,M.V,M.Ba,M.c,M.i,u,Pr);if(!u){j=0;break e}}f+j>=D&&(l.Cc=1),j=1}if(!j)return null;if(l.Cc&&((j=l.ga)!=null&&(j.mc=null),l.ga=null,0<l.Ga))return alert("todo:WebPDequantizeLevels"),null}return l.nb+f*E}function m(l,u,f,j,E,D){for(;0<E--;){var M,z=l,H=u+(f?1:0),ee=l,ge=u+(f?0:3);for(M=0;M<j;++M){var De=ee[ge+4*M];De!=255&&(De*=32897,z[H+4*M+0]=z[H+4*M+0]*De>>23,z[H+4*M+1]=z[H+4*M+1]*De>>23,z[H+4*M+2]=z[H+4*M+2]*De>>23)}u+=D}}function P(l,u,f,j,E){for(;0<j--;){var D;for(D=0;D<f;++D){var M=l[u+2*D+0],z=15&(ee=l[u+2*D+1]),H=4369*z,ee=(240&ee|ee>>4)*H>>16;l[u+2*D+0]=(240&M|M>>4)*H>>16&240|(15&M|M<<4)*H>>16>>4&15,l[u+2*D+1]=240&ee|z}u+=E}}function re(l,u,f,j,E,D,M,z){var H,ee,ge=255;for(ee=0;ee<E;++ee){for(H=0;H<j;++H){var De=l[u+H];D[M+4*H]=De,ge&=De}u+=f,M+=z}return ge!=255}function pe(l,u,f,j,E){var D;for(D=0;D<E;++D)f[j+D]=l[u+D]>>8}function Ee(){ns=m,ha=P,pa=re,Oa=pe}function We(l,u,f){K[l]=function(j,E,D,M,z,H,ee,ge,De,Oe,Se,et,$e,ve,ye,Ke,it){var Ze,_t=it-1>>1,jt=z[H+0]|ee[ge+0]<<16,Ft=De[Oe+0]|Se[et+0]<<16;a(j!=null);var kt=3*jt+Ft+131074>>2;for(u(j[E+0],255&kt,kt>>16,$e,ve),D!=null&&(kt=3*Ft+jt+131074>>2,u(D[M+0],255&kt,kt>>16,ye,Ke)),Ze=1;Ze<=_t;++Ze){var aa=z[H+Ze]|ee[ge+Ze]<<16,na=De[Oe+Ze]|Se[et+Ze]<<16,ea=jt+aa+Ft+na+524296,Yt=ea+2*(aa+Ft)>>3;kt=Yt+jt>>1,jt=(ea=ea+2*(jt+na)>>3)+aa>>1,u(j[E+2*Ze-1],255&kt,kt>>16,$e,ve+(2*Ze-1)*f),u(j[E+2*Ze-0],255&jt,jt>>16,$e,ve+(2*Ze-0)*f),D!=null&&(kt=ea+Ft>>1,jt=Yt+na>>1,u(D[M+2*Ze-1],255&kt,kt>>16,ye,Ke+(2*Ze-1)*f),u(D[M+2*Ze+0],255&jt,jt>>16,ye,Ke+(2*Ze+0)*f)),jt=aa,Ft=na}1&it||(kt=3*jt+Ft+131074>>2,u(j[E+it-1],255&kt,kt>>16,$e,ve+(it-1)*f),D!=null&&(kt=3*Ft+jt+131074>>2,u(D[M+it-1],255&kt,kt>>16,ye,Ke+(it-1)*f)))}}function ct(){is[Ad]=qb,is[_d]=O0,is[E0]=zb,is[Ed]=T0,is[Pd]=M0,is[rh]=F0,is[P0]=$b,is[sh]=O0,is[nh]=T0,is[Ld]=M0,is[oh]=F0}function At(l){return l&-16384?0>l?0:255:l>>Bb}function Mt(l,u){return At((19077*l>>8)+(26149*u>>8)-14234)}function Wt(l,u,f){return At((19077*l>>8)-(6419*u>>8)-(13320*f>>8)+8708)}function Ut(l,u){return At((19077*l>>8)+(33050*u>>8)-17685)}function Kt(l,u,f,j,E){j[E+0]=Mt(l,f),j[E+1]=Wt(l,u,f),j[E+2]=Ut(l,u)}function ka(l,u,f,j,E){j[E+0]=Ut(l,u),j[E+1]=Wt(l,u,f),j[E+2]=Mt(l,f)}function Ea(l,u,f,j,E){var D=Wt(l,u,f);u=D<<3&224|Ut(l,u)>>3,j[E+0]=248&Mt(l,f)|D>>5,j[E+1]=u}function za(l,u,f,j,E){var D=240&Ut(l,u)|15;j[E+0]=240&Mt(l,f)|Wt(l,u,f)>>4,j[E+1]=D}function mr(l,u,f,j,E){j[E+0]=255,Kt(l,u,f,j,E+1)}function Xa(l,u,f,j,E){ka(l,u,f,j,E),j[E+3]=255}function js(l,u,f,j,E){Kt(l,u,f,j,E),j[E+3]=255}function Vr(l,u){return 0>l?0:l>u?u:l}function $s(l,u,f){K[l]=function(j,E,D,M,z,H,ee,ge,De){for(var Oe=ge+(-2&De)*f;ge!=Oe;)u(j[E+0],D[M+0],z[H+0],ee,ge),u(j[E+1],D[M+0],z[H+0],ee,ge+f),E+=2,++M,++H,ge+=2*f;1&De&&u(j[E+0],D[M+0],z[H+0],ee,ge)}}function yd(l,u,f){return f==0?l==0?u==0?6:5:u==0?4:0:f}function $l(l,u,f,j,E){switch(l>>>30){case 3:sn(u,f,j,E,0);break;case 2:Da(u,f,j,E);break;case 1:wr(u,f,j,E)}}function Bl(l,u){var f,j,E=u.M,D=u.Nb,M=l.oc,z=l.pc+40,H=l.oc,ee=l.pc+584,ge=l.oc,De=l.pc+600;for(f=0;16>f;++f)M[z+32*f-1]=129;for(f=0;8>f;++f)H[ee+32*f-1]=129,ge[De+32*f-1]=129;for(0<E?M[z-1-32]=H[ee-1-32]=ge[De-1-32]=129:(n(M,z-32-1,127,21),n(H,ee-32-1,127,9),n(ge,De-32-1,127,9)),j=0;j<l.za;++j){var Oe=u.ya[u.aa+j];if(0<j){for(f=-1;16>f;++f)s(M,z+32*f-4,M,z+32*f+12,4);for(f=-1;8>f;++f)s(H,ee+32*f-4,H,ee+32*f+4,4),s(ge,De+32*f-4,ge,De+32*f+4,4)}var Se=l.Gd,et=l.Hd+j,$e=Oe.ad,ve=Oe.Hc;if(0<E&&(s(M,z-32,Se[et].y,0,16),s(H,ee-32,Se[et].f,0,8),s(ge,De-32,Se[et].ea,0,8)),Oe.Za){var ye=M,Ke=z-32+16;for(0<E&&(j>=l.za-1?n(ye,Ke,Se[et].y[15],4):s(ye,Ke,Se[et+1].y,0,4)),f=0;4>f;f++)ye[Ke+128+f]=ye[Ke+256+f]=ye[Ke+384+f]=ye[Ke+0+f];for(f=0;16>f;++f,ve<<=2)ye=M,Ke=z+q0[f],Ns[Oe.Ob[f]](ye,Ke),$l(ve,$e,16*+f,ye,Ke)}else if(ye=yd(j,E,Oe.Ob[0]),Tn[ye](M,z),ve!=0)for(f=0;16>f;++f,ve<<=2)$l(ve,$e,16*+f,M,z+q0[f]);for(f=Oe.Gc,ye=yd(j,E,Oe.Dd),on[ye](H,ee),on[ye](ge,De),ve=$e,ye=H,Ke=ee,255&(Oe=f>>0)&&(170&Oe?Gl(ve,256,ye,Ke):rs(ve,256,ye,Ke)),Oe=ge,ve=De,255&(f>>=8)&&(170&f?Gl($e,320,Oe,ve):rs($e,320,Oe,ve)),E<l.Ub-1&&(s(Se[et].y,0,M,z+480,16),s(Se[et].f,0,H,ee+224,8),s(Se[et].ea,0,ge,De+224,8)),f=8*D*l.B,Se=l.sa,et=l.ta+16*j+16*D*l.R,$e=l.qa,Oe=l.ra+8*j+f,ve=l.Ha,ye=l.Ia+8*j+f,f=0;16>f;++f)s(Se,et+f*l.R,M,z+32*f,16);for(f=0;8>f;++f)s($e,Oe+f*l.B,H,ee+32*f,8),s(ve,ye+f*l.B,ge,De+32*f,8)}}function gi(l,u,f,j,E,D,M,z,H){var ee=[0],ge=[0],De=0,Oe=H!=null?H.kd:0,Se=H??new Fl;if(l==null||12>f)return 7;Se.data=l,Se.w=u,Se.ha=f,u=[u],f=[f],Se.gb=[Se.gb];e:{var et=u,$e=f,ve=Se.gb;if(a(l!=null),a($e!=null),a(ve!=null),ve[0]=0,12<=$e[0]&&!r(l,et[0],"RIFF")){if(r(l,et[0]+8,"WEBP")){ve=3;break e}var ye=dt(l,et[0]+4);if(12>ye||4294967286<ye){ve=3;break e}if(Oe&&ye>$e[0]-8){ve=7;break e}ve[0]=ye,et[0]+=12,$e[0]-=12}ve=0}if(ve!=0)return ve;for(ye=0<Se.gb[0],f=f[0];;){e:{var Ke=l;$e=u,ve=f;var it=ee,Ze=ge,_t=et=[0];if((kt=De=[De])[0]=0,8>ve[0])ve=7;else{if(!r(Ke,$e[0],"VP8X")){if(dt(Ke,$e[0]+4)!=10){ve=3;break e}if(18>ve[0]){ve=7;break e}var jt=dt(Ke,$e[0]+8),Ft=1+Xe(Ke,$e[0]+12);if(2147483648<=Ft*(Ke=1+Xe(Ke,$e[0]+15))){ve=3;break e}_t!=null&&(_t[0]=jt),it!=null&&(it[0]=Ft),Ze!=null&&(Ze[0]=Ke),$e[0]+=18,ve[0]-=18,kt[0]=1}ve=0}}if(De=De[0],et=et[0],ve!=0)return ve;if($e=!!(2&et),!ye&&De)return 3;if(D!=null&&(D[0]=!!(16&et)),M!=null&&(M[0]=$e),z!=null&&(z[0]=0),M=ee[0],et=ge[0],De&&$e&&H==null){ve=0;break}if(4>f){ve=7;break}if(ye&&De||!ye&&!De&&!r(l,u[0],"ALPH")){f=[f],Se.na=[Se.na],Se.P=[Se.P],Se.Sa=[Se.Sa];e:{jt=l,ve=u,ye=f;var kt=Se.gb;it=Se.na,Ze=Se.P,_t=Se.Sa,Ft=22,a(jt!=null),a(ye!=null),Ke=ve[0];var aa=ye[0];for(a(it!=null),a(_t!=null),it[0]=null,Ze[0]=null,_t[0]=0;;){if(ve[0]=Ke,ye[0]=aa,8>aa){ve=7;break e}var na=dt(jt,Ke+4);if(4294967286<na){ve=3;break e}var ea=8+na+1&-2;if(Ft+=ea,0<kt&&Ft>kt){ve=3;break e}if(!r(jt,Ke,"VP8 ")||!r(jt,Ke,"VP8L")){ve=0;break e}if(aa[0]<ea){ve=7;break e}r(jt,Ke,"ALPH")||(it[0]=jt,Ze[0]=Ke+8,_t[0]=na),Ke+=ea,aa-=ea}}if(f=f[0],Se.na=Se.na[0],Se.P=Se.P[0],Se.Sa=Se.Sa[0],ve!=0)break}f=[f],Se.Ja=[Se.Ja],Se.xa=[Se.xa];e:if(kt=l,ve=u,ye=f,it=Se.gb[0],Ze=Se.Ja,_t=Se.xa,jt=ve[0],Ke=!r(kt,jt,"VP8 "),Ft=!r(kt,jt,"VP8L"),a(kt!=null),a(ye!=null),a(Ze!=null),a(_t!=null),8>ye[0])ve=7;else{if(Ke||Ft){if(kt=dt(kt,jt+4),12<=it&&kt>it-12){ve=3;break e}if(Oe&&kt>ye[0]-8){ve=7;break e}Ze[0]=kt,ve[0]+=8,ye[0]-=8,_t[0]=Ft}else _t[0]=5<=ye[0]&&kt[jt+0]==47&&!(kt[jt+4]>>5),Ze[0]=ye[0];ve=0}if(f=f[0],Se.Ja=Se.Ja[0],Se.xa=Se.xa[0],u=u[0],ve!=0)break;if(4294967286<Se.Ja)return 3;if(z==null||$e||(z[0]=Se.xa?2:1),M=[M],et=[et],Se.xa){if(5>f){ve=7;break}z=M,Oe=et,$e=D,l==null||5>f?l=0:5<=f&&l[u+0]==47&&!(l[u+4]>>5)?(ye=[0],kt=[0],it=[0],Z(Ze=new S,l,u,f),V(Ze,ye,kt,it)?(z!=null&&(z[0]=ye[0]),Oe!=null&&(Oe[0]=kt[0]),$e!=null&&($e[0]=it[0]),l=1):l=0):l=0}else{if(10>f){ve=7;break}z=et,l==null||10>f||!li(l,u+3,f-3)?l=0:(Oe=l[u+0]|l[u+1]<<8|l[u+2]<<16,$e=16383&(l[u+7]<<8|l[u+6]),l=16383&(l[u+9]<<8|l[u+8]),1&Oe||3<(Oe>>1&7)||!(Oe>>4&1)||Oe>>5>=Se.Ja||!$e||!l?l=0:(M&&(M[0]=$e),z&&(z[0]=l),l=1))}if(!l||(M=M[0],et=et[0],De&&(ee[0]!=M||ge[0]!=et)))return 3;H!=null&&(H[0]=Se,H.offset=u-H.w,a(4294967286>u-H.w),a(H.offset==H.ha-f));break}return ve==0||ve==7&&De&&H==null?(D!=null&&(D[0]|=Se.na!=null&&0<Se.na.length),j!=null&&(j[0]=M),E!=null&&(E[0]=et),0):ve}function Ul(l,u,f){var j=u.width,E=u.height,D=0,M=0,z=j,H=E;if(u.Da=l!=null&&0<l.Da,u.Da&&(z=l.cd,H=l.bd,D=l.v,M=l.j,11>f||(D&=-2,M&=-2),0>D||0>M||0>=z||0>=H||D+z>j||M+H>E))return 0;if(u.v=D,u.j=M,u.va=D+z,u.o=M+H,u.U=z,u.T=H,u.da=l!=null&&0<l.da,u.da){if(!Ct(z,H,f=[l.ib],D=[l.hb]))return 0;u.ib=f[0],u.hb=D[0]}return u.ob=l!=null&&l.ob,u.Kb=l==null||!l.Sd,u.da&&(u.ob=u.ib<3*j/4&&u.hb<3*E/4,u.Kb=0),1}function Vl(l){if(l==null)return 2;if(11>l.S){var u=l.f.RGBA;u.fb+=(l.height-1)*u.A,u.A=-u.A}else u=l.f.kb,l=l.height,u.O+=(l-1)*u.fa,u.fa=-u.fa,u.N+=(l-1>>1)*u.Ab,u.Ab=-u.Ab,u.W+=(l-1>>1)*u.Db,u.Db=-u.Db,u.F!=null&&(u.J+=(l-1)*u.lb,u.lb=-u.lb);return 0}function vi(l,u,f,j){if(j==null||0>=l||0>=u)return 2;if(f!=null){if(f.Da){var E=f.cd,D=f.bd,M=-2&f.v,z=-2&f.j;if(0>M||0>z||0>=E||0>=D||M+E>l||z+D>u)return 2;l=E,u=D}if(f.da){if(!Ct(l,u,E=[f.ib],D=[f.hb]))return 2;l=E[0],u=D[0]}}j.width=l,j.height=u;e:{var H=j.width,ee=j.height;if(l=j.S,0>=H||0>=ee||!(l>=Ad&&13>l))l=2;else{if(0>=j.Rd&&j.sd==null){M=D=E=u=0;var ge=(z=H*z0[l])*ee;if(11>l||(D=(ee+1)/2*(u=(H+1)/2),l==12&&(M=(E=H)*ee)),(ee=o(ge+2*D+M))==null){l=1;break e}j.sd=ee,11>l?((H=j.f.RGBA).eb=ee,H.fb=0,H.A=z,H.size=ge):((H=j.f.kb).y=ee,H.O=0,H.fa=z,H.Fd=ge,H.f=ee,H.N=0+ge,H.Ab=u,H.Cd=D,H.ea=ee,H.W=0+ge+D,H.Db=u,H.Ed=D,l==12&&(H.F=ee,H.J=0+ge+2*D),H.Tc=M,H.lb=E)}if(u=1,E=j.S,D=j.width,M=j.height,E>=Ad&&13>E)if(11>E)l=j.f.RGBA,u&=(z=Math.abs(l.A))*(M-1)+D<=l.size,u&=z>=D*z0[E],u&=l.eb!=null;else{l=j.f.kb,z=(D+1)/2,ge=(M+1)/2,H=Math.abs(l.fa),ee=Math.abs(l.Ab);var De=Math.abs(l.Db),Oe=Math.abs(l.lb),Se=Oe*(M-1)+D;u&=H*(M-1)+D<=l.Fd,u&=ee*(ge-1)+z<=l.Cd,u=(u&=De*(ge-1)+z<=l.Ed)&H>=D&ee>=z&De>=z,u&=l.y!=null,u&=l.f!=null,u&=l.ea!=null,E==12&&(u&=Oe>=D,u&=Se<=l.Tc,u&=l.F!=null)}else u=0;l=u?0:2}}return l!=0||f!=null&&f.fd&&(l=Vl(j)),l}var sr=64,bi=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],yi=24,ji=32,Hl=8,Dr=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];be("Predictor0","PredictorAdd0"),K.Predictor0=function(){return 4278190080},K.Predictor1=function(l){return l},K.Predictor2=function(l,u,f){return u[f+0]},K.Predictor3=function(l,u,f){return u[f+1]},K.Predictor4=function(l,u,f){return u[f-1]},K.Predictor5=function(l,u,f){return Ae(Ae(l,u[f+1]),u[f+0])},K.Predictor6=function(l,u,f){return Ae(l,u[f-1])},K.Predictor7=function(l,u,f){return Ae(l,u[f+0])},K.Predictor8=function(l,u,f){return Ae(u[f-1],u[f+0])},K.Predictor9=function(l,u,f){return Ae(u[f+0],u[f+1])},K.Predictor10=function(l,u,f){return Ae(Ae(l,u[f-1]),Ae(u[f+0],u[f+1]))},K.Predictor11=function(l,u,f){var j=u[f+0];return 0>=gt(j>>24&255,l>>24&255,(u=u[f-1])>>24&255)+gt(j>>16&255,l>>16&255,u>>16&255)+gt(j>>8&255,l>>8&255,u>>8&255)+gt(255&j,255&l,255&u)?j:l},K.Predictor12=function(l,u,f){var j=u[f+0];return(tt((l>>24&255)+(j>>24&255)-((u=u[f-1])>>24&255))<<24|tt((l>>16&255)+(j>>16&255)-(u>>16&255))<<16|tt((l>>8&255)+(j>>8&255)-(u>>8&255))<<8|tt((255&l)+(255&j)-(255&u)))>>>0},K.Predictor13=function(l,u,f){var j=u[f-1];return(rt((l=Ae(l,u[f+0]))>>24&255,j>>24&255)<<24|rt(l>>16&255,j>>16&255)<<16|rt(l>>8&255,j>>8&255)<<8|rt(l>>0&255,j>>0&255))>>>0};var th=K.PredictorAdd0;K.PredictorAdd1=st,be("Predictor2","PredictorAdd2"),be("Predictor3","PredictorAdd3"),be("Predictor4","PredictorAdd4"),be("Predictor5","PredictorAdd5"),be("Predictor6","PredictorAdd6"),be("Predictor7","PredictorAdd7"),be("Predictor8","PredictorAdd8"),be("Predictor9","PredictorAdd9"),be("Predictor10","PredictorAdd10"),be("Predictor11","PredictorAdd11"),be("Predictor12","PredictorAdd12"),be("Predictor13","PredictorAdd13");var Wl=K.PredictorAdd2;at("ColorIndexInverseTransform","MapARGB","32b",function(l){return l>>8&255},function(l){return l}),at("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(l){return l},function(l){return l>>8&255});var jd,as=K.ColorIndexInverseTransform,Ni=K.MapARGB,Nd=K.VP8LColorIndexInverseTransformAlpha,wd=K.MapAlpha,Ln=K.VP8LPredictorsAdd=[];Ln.length=16,(K.VP8LPredictors=[]).length=16,(K.VP8LPredictorsAdd_C=[]).length=16,(K.VP8LPredictors_C=[]).length=16;var Oo,Or,Nr,In,an,rn,wi,sn,Da,Gl,wr,rs,Si,Sd,Jl,To,Mo,Dn,Fo,ki,Ro,On,Ql,ss,ns,ha,pa,Oa,Ha=o(511),nn=o(2041),Yl=o(225),Ci=o(767),kd=0,ah=nn,Cd=Yl,Hr=Ci,os=Ha,Ad=0,_d=1,E0=2,Ed=3,Pd=4,rh=5,P0=6,sh=7,nh=8,Ld=9,oh=10,kb=[2,3,7],Cb=[3,3,11],L0=[280,256,256,256,40],Ab=[0,1,1,1,0],_b=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],Eb=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],Pb=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],Lb=8,ih=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],lh=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],Xl=null,Ib=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],Db=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],I0=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],Ob=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],Tb=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],Mb=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],Fb=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Tn=[],Ns=[],on=[],Rb=1,D0=2,Mn=[],is=[];We("UpsampleRgbLinePair",Kt,3),We("UpsampleBgrLinePair",ka,3),We("UpsampleRgbaLinePair",js,4),We("UpsampleBgraLinePair",Xa,4),We("UpsampleArgbLinePair",mr,4),We("UpsampleRgba4444LinePair",za,2),We("UpsampleRgb565LinePair",Ea,2);var qb=K.UpsampleRgbLinePair,zb=K.UpsampleBgrLinePair,O0=K.UpsampleRgbaLinePair,T0=K.UpsampleBgraLinePair,M0=K.UpsampleArgbLinePair,F0=K.UpsampleRgba4444LinePair,$b=K.UpsampleRgb565LinePair,Id=16,Dd=1<<Id-1,Kl=-227,ch=482,Bb=6,R0=0,Ub=o(256),Vb=o(256),Hb=o(256),Wb=o(256),Gb=o(ch-Kl),Jb=o(ch-Kl);$s("YuvToRgbRow",Kt,3),$s("YuvToBgrRow",ka,3),$s("YuvToRgbaRow",js,4),$s("YuvToBgraRow",Xa,4),$s("YuvToArgbRow",mr,4),$s("YuvToRgba4444Row",za,2),$s("YuvToRgb565Row",Ea,2);var q0=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],Od=[0,2,8],Qb=[8,7,6,4,4,2,2,2,1,1,1,1],Yb=1;this.WebPDecodeRGBA=function(l,u,f,j,E){var D=_d,M=new fi,z=new Nt;M.ba=z,z.S=D,z.width=[z.width],z.height=[z.height];var H=z.width,ee=z.height,ge=new A;if(ge==null||l==null)var De=2;else a(ge!=null),De=gi(l,u,f,ge.width,ge.height,ge.Pd,ge.Qd,ge.format,null);if(De!=0?H=0:(H!=null&&(H[0]=ge.width[0]),ee!=null&&(ee[0]=ge.height[0]),H=1),H){z.width=z.width[0],z.height=z.height[0],j!=null&&(j[0]=z.width),E!=null&&(E[0]=z.height);e:{if(j=new An,(E=new Fl).data=l,E.w=u,E.ha=f,E.kd=1,u=[0],a(E!=null),((l=gi(E.data,E.w,E.ha,null,null,null,u,null,E))==0||l==7)&&u[0]&&(l=4),(u=l)==0){if(a(M!=null),j.data=E.data,j.w=E.w+E.offset,j.ha=E.ha-E.offset,j.put=yt,j.ac=ot,j.bc=Dt,j.ma=M,E.xa){if((l=Pt())==null){M=1;break e}if(function(Oe,Se){var et=[0],$e=[0],ve=[0];t:for(;;){if(Oe==null)return 0;if(Se==null)return Oe.a=2,0;if(Oe.l=Se,Oe.a=0,Z(Oe.m,Se.data,Se.w,Se.ha),!V(Oe.m,et,$e,ve)){Oe.a=3;break t}if(Oe.xb=D0,Se.width=et[0],Se.height=$e[0],!pt(et[0],$e[0],1,Oe,null))break t;return 1}return a(Oe.a!=0),0}(l,j)){if(j=(u=vi(j.width,j.height,M.Oa,M.ba))==0){t:{j=l;a:for(;;){if(j==null){j=0;break t}if(a(j.s.yc!=null),a(j.s.Ya!=null),a(0<j.s.Wb),a((f=j.l)!=null),a((E=f.ma)!=null),j.xb!=0){if(j.ca=E.ba,j.tb=E.tb,a(j.ca!=null),!Ul(E.Oa,f,Ed)){j.a=2;break a}if(!xa(j,f.width)||f.da)break a;if((f.da||lt(j.ca.S))&&Ee(),11>j.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),j.ca.f.kb.F!=null&&Ee()),j.Pb&&0<j.s.ua&&j.s.vb.X==null&&!ft(j.s.vb,j.s.Wa.Xa)){j.a=1;break a}j.xb=0}if(!bt(j,j.V,j.Ba,j.c,j.i,f.o,ma))break a;E.Dc=j.Ma,j=1;break t}a(j.a!=0),j=0}j=!j}j&&(u=l.a)}else u=l.a}else{if((l=new Al)==null){M=1;break e}if(l.Fa=E.na,l.P=E.P,l.qc=E.Sa,Eo(l,j)){if((u=vi(j.width,j.height,M.Oa,M.ba))==0){if(l.Aa=0,f=M.Oa,a((E=l)!=null),f!=null){if(0<(H=0>(H=f.Md)?0:100<H?255:255*H/100)){for(ee=ge=0;4>ee;++ee)12>(De=E.pb[ee]).lc&&(De.ia=H*Qb[0>De.lc?0:De.lc]>>3),ge|=De.ia;ge&&(alert("todo:VP8InitRandom"),E.ia=1)}E.Ga=f.Id,100<E.Ga?E.Ga=100:0>E.Ga&&(E.Ga=0)}Fm(l,j)||(u=l.a)}}else u=l.a}u==0&&M.Oa!=null&&M.Oa.fd&&(u=Vl(M.ba))}M=u}D=M!=0?null:11>D?z.f.RGBA.eb:z.f.kb.y}else D=null;return D};var z0=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function p(K,fe){for(var me="",$=0;$<4;$++)me+=String.fromCharCode(K[fe++]);return me}function h(K,fe){return(K[fe+0]<<0|K[fe+1]<<8|K[fe+2]<<16)>>>0}function x(K,fe){return(K[fe+0]<<0|K[fe+1]<<8|K[fe+2]<<16|K[fe+3]<<24)>>>0}new d;var b=[0],g=[0],w=[],_=new d,O=e,y=function(K,fe){var me={},$=0,L=!1,le=0,R=0;if(me.frames=[],!function(G,q,N,U){for(var T=0;T<U;T++)if(G[q+T]!=N.charCodeAt(T))return!0;return!1}(K,fe,"RIFF",4)){var we,ce;for(x(K,fe+=4),fe+=8;fe<K.length;){var Ce=p(K,fe),Z=x(K,fe+=4);fe+=4;var he=Z+(1&Z);switch(Ce){case"VP8 ":case"VP8L":me.frames[$]===void 0&&(me.frames[$]={}),(S=me.frames[$]).src_off=L?R:fe-8,S.src_size=le+Z+8,$++,L&&(L=!1,le=0,R=0);break;case"VP8X":(S=me.header={}).feature_flags=K[fe];var ie=fe+4;S.canvas_width=1+h(K,ie),ie+=3,S.canvas_height=1+h(K,ie),ie+=3;break;case"ALPH":L=!0,le=he+8,R=fe-8;break;case"ANIM":(S=me.header).bgcolor=x(K,fe),ie=fe+4,S.loop_count=(we=K)[(ce=ie)+0]<<0|we[ce+1]<<8,ie+=2;break;case"ANMF":var Ue,S;(S=me.frames[$]={}).offset_x=2*h(K,fe),fe+=3,S.offset_y=2*h(K,fe),fe+=3,S.width=1+h(K,fe),fe+=3,S.height=1+h(K,fe),fe+=3,S.duration=h(K,fe),fe+=3,Ue=K[fe++],S.dispose=1&Ue,S.blend=Ue>>1&1}Ce!="ANMF"&&(fe+=he)}return me}}(O,0);y.response=O,y.rgbaoutput=!0,y.dataurl=!1;var v=y.header?y.header:null,C=y.frames?y.frames:null;if(v){v.loop_counter=v.loop_count,b=[v.canvas_height],g=[v.canvas_width];for(var W=0;W<C.length&&C[W].blend!=0;W++);}var se=C[0],J=_.WebPDecodeRGBA(O,se.src_off,se.src_size,g,b);se.rgba=J,se.imgwidth=g[0],se.imgheight=b[0];for(var Y=0;Y<g[0]*b[0]*4;Y++)w[Y]=J[Y];return this.width=g,this.height=b,this.data=w,this}(function(e){var a=function(){return typeof yf=="function"},r=function(b,g,w,_){var O=4,y=i;switch(_){case e.image_compression.FAST:O=1,y=o;break;case e.image_compression.MEDIUM:O=6,y=c;break;case e.image_compression.SLOW:O=9,y=d}b=s(b,g,w,y);var v=yf(b,{level:O});return e.__addimage__.arrayBufferToBinaryString(v)},s=function(b,g,w,_){for(var O,y,v,C=b.length/g,W=new Uint8Array(b.length+C),se=h(),J=0;J<C;J+=1){if(v=J*g,O=b.subarray(v,v+g),_)W.set(_(O,w,y),v+J);else{for(var Y,K=se.length,fe=[];Y<K;Y+=1)fe[Y]=se[Y](O,w,y);var me=x(fe.concat());W.set(fe[me],v+J)}y=O}return W},n=function(b){var g=Array.apply([],b);return g.unshift(0),g},o=function(b,g){var w,_=[],O=b.length;_[0]=1;for(var y=0;y<O;y+=1)w=b[y-g]||0,_[y+1]=b[y]-w+256&255;return _},i=function(b,g,w){var _,O=[],y=b.length;O[0]=2;for(var v=0;v<y;v+=1)_=w&&w[v]||0,O[v+1]=b[v]-_+256&255;return O},c=function(b,g,w){var _,O,y=[],v=b.length;y[0]=3;for(var C=0;C<v;C+=1)_=b[C-g]||0,O=w&&w[C]||0,y[C+1]=b[C]+256-(_+O>>>1)&255;return y},d=function(b,g,w){var _,O,y,v,C=[],W=b.length;C[0]=4;for(var se=0;se<W;se+=1)_=b[se-g]||0,O=w&&w[se]||0,y=w&&w[se-g]||0,v=p(_,O,y),C[se+1]=b[se]-v+256&255;return C},p=function(b,g,w){if(b===g&&g===w)return b;var _=Math.abs(g-w),O=Math.abs(b-w),y=Math.abs(b+g-w-w);return _<=O&&_<=y?b:O<=y?g:w},h=function(){return[n,o,i,c,d]},x=function(b){var g=b.map(function(w){return w.reduce(function(_,O){return _+Math.abs(O)},0)});return g.indexOf(Math.min.apply(null,g))};e.processPNG=function(b,g,w,_){var O,y,v,C,W,se,J,Y,K,fe,me,$,L,le,R,we=this.decode.FLATE_DECODE,ce="";if(this.__addimage__.isArrayBuffer(b)&&(b=new Uint8Array(b)),this.__addimage__.isArrayBufferView(b)){if(b=(v=new Z3(b)).imgData,y=v.bits,O=v.colorSpace,W=v.colors,[4,6].indexOf(v.colorType)!==-1){if(v.bits===8){K=(Y=v.pixelBitlength==32?new Uint32Array(v.decodePixels().buffer):v.pixelBitlength==16?new Uint16Array(v.decodePixels().buffer):new Uint8Array(v.decodePixels().buffer)).length,me=new Uint8Array(K*v.colors),fe=new Uint8Array(K);var Ce,Z=v.pixelBitlength-v.bits;for(le=0,R=0;le<K;le++){for(L=Y[le],Ce=0;Ce<Z;)me[R++]=L>>>Ce&255,Ce+=v.bits;fe[le]=L>>>Ce&255}}if(v.bits===16){K=(Y=new Uint32Array(v.decodePixels().buffer)).length,me=new Uint8Array(K*(32/v.pixelBitlength)*v.colors),fe=new Uint8Array(K*(32/v.pixelBitlength)),$=v.colors>1,le=0,R=0;for(var he=0;le<K;)L=Y[le++],me[R++]=L>>>0&255,$&&(me[R++]=L>>>16&255,L=Y[le++],me[R++]=L>>>0&255),fe[he++]=L>>>16&255;y=8}_!==e.image_compression.NONE&&a()?(b=r(me,v.width*v.colors,v.colors,_),J=r(fe,v.width,1,_)):(b=me,J=fe,we=void 0)}if(v.colorType===3&&(O=this.color_spaces.INDEXED,se=v.palette,v.transparency.indexed)){var ie=v.transparency.indexed,Ue=0;for(le=0,K=ie.length;le<K;++le)Ue+=ie[le];if((Ue/=255)===K-1&&ie.indexOf(0)!==-1)C=[ie.indexOf(0)];else if(Ue!==K){for(Y=v.decodePixels(),fe=new Uint8Array(Y.length),le=0,K=Y.length;le<K;le++)fe[le]=ie[Y[le]];J=r(fe,v.width,1)}}var S=function(G){var q;switch(G){case e.image_compression.FAST:q=11;break;case e.image_compression.MEDIUM:q=13;break;case e.image_compression.SLOW:q=14;break;default:q=12}return q}(_);return we===this.decode.FLATE_DECODE&&(ce="/Predictor "+S+" "),ce+="/Colors "+W+" /BitsPerComponent "+y+" /Columns "+v.width,(this.__addimage__.isArrayBuffer(b)||this.__addimage__.isArrayBufferView(b))&&(b=this.__addimage__.arrayBufferToBinaryString(b)),(J&&this.__addimage__.isArrayBuffer(J)||this.__addimage__.isArrayBufferView(J))&&(J=this.__addimage__.arrayBufferToBinaryString(J)),{alias:w,data:b,index:g,filter:we,decodeParameters:ce,transparency:C,palette:se,sMask:J,predictor:S,width:v.width,height:v.height,bitsPerComponent:y,colorSpace:O}}}})(Rt.API),function(e){e.processGIF89A=function(a,r,s,n){var o=new e6(a),i=o.width,c=o.height,d=[];o.decodeAndBlitFrameRGBA(0,d);var p={data:d,width:i,height:c},h=new np(100).encode(p,100);return e.processJPEG.call(this,h,r,s,n)},e.processGIF87A=e.processGIF89A}(Rt.API),Cs.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var e=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(e);for(var a=0;a<e;a++){var r=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0);this.palette[a]={red:n,green:s,blue:r,quad:o}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},Cs.prototype.parseBGR=function(){this.pos=this.offset;try{var e="bit"+this.bitPP,a=this.width*this.height*4;this.data=new Uint8Array(a),this[e]()}catch(r){ua.log("bit decode error:"+r)}},Cs.prototype.bit1=function(){var e,a=Math.ceil(this.width/8),r=a%4;for(e=this.height-1;e>=0;e--){for(var s=this.bottom_up?e:this.height-1-e,n=0;n<a;n++)for(var o=this.datav.getUint8(this.pos++,!0),i=s*this.width*4+8*n*4,c=0;c<8&&8*n+c<this.width;c++){var d=this.palette[o>>7-c&1];this.data[i+4*c]=d.blue,this.data[i+4*c+1]=d.green,this.data[i+4*c+2]=d.red,this.data[i+4*c+3]=255}r!==0&&(this.pos+=4-r)}},Cs.prototype.bit4=function(){for(var e=Math.ceil(this.width/2),a=e%4,r=this.height-1;r>=0;r--){for(var s=this.bottom_up?r:this.height-1-r,n=0;n<e;n++){var o=this.datav.getUint8(this.pos++,!0),i=s*this.width*4+2*n*4,c=o>>4,d=15&o,p=this.palette[c];if(this.data[i]=p.blue,this.data[i+1]=p.green,this.data[i+2]=p.red,this.data[i+3]=255,2*n+1>=this.width)break;p=this.palette[d],this.data[i+4]=p.blue,this.data[i+4+1]=p.green,this.data[i+4+2]=p.red,this.data[i+4+3]=255}a!==0&&(this.pos+=4-a)}},Cs.prototype.bit8=function(){for(var e=this.width%4,a=this.height-1;a>=0;a--){for(var r=this.bottom_up?a:this.height-1-a,s=0;s<this.width;s++){var n=this.datav.getUint8(this.pos++,!0),o=r*this.width*4+4*s;if(n<this.palette.length){var i=this.palette[n];this.data[o]=i.red,this.data[o+1]=i.green,this.data[o+2]=i.blue,this.data[o+3]=255}else this.data[o]=255,this.data[o+1]=255,this.data[o+2]=255,this.data[o+3]=255}e!==0&&(this.pos+=4-e)}},Cs.prototype.bit15=function(){for(var e=this.width%3,a=parseInt("11111",2),r=this.height-1;r>=0;r--){for(var s=this.bottom_up?r:this.height-1-r,n=0;n<this.width;n++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var i=(o&a)/a*255|0,c=(o>>5&a)/a*255|0,d=(o>>10&a)/a*255|0,p=o>>15?255:0,h=s*this.width*4+4*n;this.data[h]=d,this.data[h+1]=c,this.data[h+2]=i,this.data[h+3]=p}this.pos+=e}},Cs.prototype.bit16=function(){for(var e=this.width%3,a=parseInt("11111",2),r=parseInt("111111",2),s=this.height-1;s>=0;s--){for(var n=this.bottom_up?s:this.height-1-s,o=0;o<this.width;o++){var i=this.datav.getUint16(this.pos,!0);this.pos+=2;var c=(i&a)/a*255|0,d=(i>>5&r)/r*255|0,p=(i>>11)/a*255|0,h=n*this.width*4+4*o;this.data[h]=p,this.data[h+1]=d,this.data[h+2]=c,this.data[h+3]=255}this.pos+=e}},Cs.prototype.bit24=function(){for(var e=this.height-1;e>=0;e--){for(var a=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var s=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),i=a*this.width*4+4*r;this.data[i]=o,this.data[i+1]=n,this.data[i+2]=s,this.data[i+3]=255}this.pos+=this.width%4}},Cs.prototype.bit32=function(){for(var e=this.height-1;e>=0;e--)for(var a=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var s=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),c=a*this.width*4+4*r;this.data[c]=o,this.data[c+1]=n,this.data[c+2]=s,this.data[c+3]=i}},Cs.prototype.getData=function(){return this.data},function(e){e.processBMP=function(a,r,s,n){var o=new Cs(a,!1),i=o.width,c=o.height,d={data:o.getData(),width:i,height:c},p=new np(100).encode(d,100);return e.processJPEG.call(this,p,r,s,n)}}(Rt.API),tv.prototype.getData=function(){return this.data},function(e){e.processWEBP=function(a,r,s,n){var o=new tv(a),i=o.width,c=o.height,d={data:o.getData(),width:i,height:c},p=new np(100).encode(d,100);return e.processJPEG.call(this,p,r,s,n)}}(Rt.API),Rt.API.processRGBA=function(e,a,r){for(var s=e.data,n=s.length,o=new Uint8Array(n/4*3),i=new Uint8Array(n/4),c=0,d=0,p=0;p<n;p+=4){var h=s[p],x=s[p+1],b=s[p+2],g=s[p+3];o[c++]=h,o[c++]=x,o[c++]=b,i[d++]=g}var w=this.__addimage__.arrayBufferToBinaryString(o);return{alpha:this.__addimage__.arrayBufferToBinaryString(i),data:w,index:a,alias:r,colorSpace:"DeviceRGB",bitsPerComponent:8,width:e.width,height:e.height}},Rt.API.setLanguage=function(e){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[e]!==void 0&&(this.internal.languageSettings.languageCode=e,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Di=Rt.API,xu=Di.getCharWidthsArray=function(e,a){var r,s,n=(a=a||{}).font||this.internal.getFont(),o=a.fontSize||this.internal.getFontSize(),i=a.charSpace||this.internal.getCharSpace(),c=a.widths?a.widths:n.metadata.Unicode.widths,d=c.fof?c.fof:1,p=a.kerning?a.kerning:n.metadata.Unicode.kerning,h=p.fof?p.fof:1,x=a.doKerning!==!1,b=0,g=e.length,w=0,_=c[0]||d,O=[];for(r=0;r<g;r++)s=e.charCodeAt(r),typeof n.metadata.widthOfString=="function"?O.push((n.metadata.widthOfGlyph(n.metadata.characterToGlyph(s))+i*(1e3/o)||0)/1e3):(b=x&&ia(p[s])==="object"&&!isNaN(parseInt(p[s][w],10))?p[s][w]/h:0,O.push((c[s]||_)/d+b)),w=s;return O},Xg=Di.getStringUnitWidth=function(e,a){var r=(a=a||{}).fontSize||this.internal.getFontSize(),s=a.font||this.internal.getFont(),n=a.charSpace||this.internal.getCharSpace();return Di.processArabic&&(e=Di.processArabic(e)),typeof s.metadata.widthOfString=="function"?s.metadata.widthOfString(e,r,n)/r:xu.apply(this,arguments).reduce(function(o,i){return o+i},0)},Kg=function(e,a,r,s){for(var n=[],o=0,i=e.length,c=0;o!==i&&c+a[o]<r;)c+=a[o],o++;n.push(e.slice(0,o));var d=o;for(c=0;o!==i;)c+a[o]>s&&(n.push(e.slice(d,o)),c=0,d=o),c+=a[o],o++;return d!==o&&n.push(e.slice(d,o)),n},Zg=function(e,a,r){r||(r={});var s,n,o,i,c,d,p,h=[],x=[h],b=r.textIndent||0,g=0,w=0,_=e.split(" "),O=xu.apply(this,[" ",r])[0];if(d=r.lineIndent===-1?_[0].length+2:r.lineIndent||0){var y=Array(d).join(" "),v=[];_.map(function(W){(W=W.split(/\s*\n/)).length>1?v=v.concat(W.map(function(se,J){return(J&&se.length?`
`:"")+se})):v.push(W[0])}),_=v,d=Xg.apply(this,[y,r])}for(o=0,i=_.length;o<i;o++){var C=0;if(s=_[o],d&&s[0]==`
`&&(s=s.substr(1),C=1),b+g+(w=(n=xu.apply(this,[s,r])).reduce(function(W,se){return W+se},0))>a||C){if(w>a){for(c=Kg.apply(this,[s,n,a-(b+g),a]),h.push(c.shift()),h=[c.pop()];c.length;)x.push([c.shift()]);w=n.slice(s.length-(h[0]?h[0].length:0)).reduce(function(W,se){return W+se},0)}else h=[s];x.push(h),b=w+d,g=O}else h.push(s),b+=g+w,g=O}return p=d?function(W,se){return(se?y:"")+W.join(" ")}:function(W){return W.join(" ")},x.map(p)},Di.splitTextToSize=function(e,a,r){var s,n=(r=r||{}).fontSize||this.internal.getFontSize(),o=(function(h){if(h.widths&&h.kerning)return{widths:h.widths,kerning:h.kerning};var x=this.internal.getFont(h.fontName,h.fontStyle);return x.metadata.Unicode?{widths:x.metadata.Unicode.widths||{0:1},kerning:x.metadata.Unicode.kerning||{}}:{font:x.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,r);s=Array.isArray(e)?e:String(e).split(/\r?\n/);var i=1*this.internal.scaleFactor*a/n;o.textIndent=r.textIndent?1*r.textIndent*this.internal.scaleFactor/n:0,o.lineIndent=r.lineIndent;var c,d,p=[];for(c=0,d=s.length;c<d;c++)p=p.concat(Zg.apply(this,[s[c],i,o]));return p},function(e){e.__fontmetrics__=e.__fontmetrics__||{};for(var a="klmnopqrstuvwxyz",r={},s={},n=0;n<a.length;n++)r[a[n]]="0123456789abcdef"[n],s["0123456789abcdef"[n]]=a[n];var o=function(x){return"0x"+parseInt(x,10).toString(16)},i=e.__fontmetrics__.compress=function(x){var b,g,w,_,O=["{"];for(var y in x){if(b=x[y],isNaN(parseInt(y,10))?g="'"+y+"'":(y=parseInt(y,10),g=(g=o(y).slice(2)).slice(0,-1)+s[g.slice(-1)]),typeof b=="number")b<0?(w=o(b).slice(3),_="-"):(w=o(b).slice(2),_=""),w=_+w.slice(0,-1)+s[w.slice(-1)];else{if(ia(b)!=="object")throw new Error("Don't know what to do with value type "+ia(b)+".");w=i(b)}O.push(g+w)}return O.push("}"),O.join("")},c=e.__fontmetrics__.uncompress=function(x){if(typeof x!="string")throw new Error("Invalid argument passed to uncompress.");for(var b,g,w,_,O={},y=1,v=O,C=[],W="",se="",J=x.length-1,Y=1;Y<J;Y+=1)(_=x[Y])=="'"?b?(w=b.join(""),b=void 0):b=[]:b?b.push(_):_=="{"?(C.push([v,w]),v={},w=void 0):_=="}"?((g=C.pop())[0][g[1]]=v,w=void 0,v=g[0]):_=="-"?y=-1:w===void 0?r.hasOwnProperty(_)?(W+=r[_],w=parseInt(W,16)*y,y=1,W=""):W+=_:r.hasOwnProperty(_)?(se+=r[_],v[w]=parseInt(se,16)*y,y=1,w=void 0,se=""):se+=_;return O},d={codePages:["WinAnsiEncoding"],WinAnsiEncoding:c("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},p={Unicode:{Courier:d,"Courier-Bold":d,"Courier-BoldOblique":d,"Courier-Oblique":d,Helvetica:d,"Helvetica-Bold":d,"Helvetica-BoldOblique":d,"Helvetica-Oblique":d,"Times-Roman":d,"Times-Bold":d,"Times-BoldItalic":d,"Times-Italic":d}},h={Unicode:{"Courier-Oblique":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":c("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":c("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":c("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:c("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:c("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":c("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:c("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":c("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":c("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":c("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};e.events.push(["addFont",function(x){var b=x.font,g=h.Unicode[b.postScriptName];g&&(b.metadata.Unicode={},b.metadata.Unicode.widths=g.widths,b.metadata.Unicode.kerning=g.kerning);var w=p.Unicode[b.postScriptName];w&&(b.metadata.Unicode.encoding=w,b.encoding=w.codePages[0])}])}(Rt.API),function(e){var a=function(r){for(var s=r.length,n=new Uint8Array(s),o=0;o<s;o++)n[o]=r.charCodeAt(o);return n};e.API.events.push(["addFont",function(r){var s=void 0,n=r.font,o=r.instance;if(!n.isStandardFont){if(o===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+n.postScriptName+"').");if(typeof(s=o.existsFileInVFS(n.postScriptName)===!1?o.loadFile(n.postScriptName):o.getFileFromVFS(n.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+n.postScriptName+"').");(function(i,c){c=/^\x00\x01\x00\x00/.test(c)?a(c):a(_c(c)),i.metadata=e.API.TTFFont.open(c),i.metadata.Unicode=i.metadata.Unicode||{encoding:{},kerning:{},widths:[]},i.metadata.glyIdsUsed=[0]})(n,s)}}])}(Rt),function(e){function a(){return(zt.canvg?Promise.resolve(zt.canvg):ff(()=>import("./index.es-BazDUPb2.js"),[])).catch(function(r){return Promise.reject(new Error("Could not load canvg: "+r))}).then(function(r){return r.default?r.default:r})}Rt.API.addSvgAsImage=function(r,s,n,o,i,c,d,p){if(isNaN(s)||isNaN(n))throw ua.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(o)||isNaN(i))throw ua.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var h=document.createElement("canvas");h.width=o,h.height=i;var x=h.getContext("2d");x.fillStyle="#fff",x.fillRect(0,0,h.width,h.height);var b={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},g=this;return a().then(function(w){return w.fromString(x,r,b)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(w){return w.render(b)}).then(function(){g.addImage(h.toDataURL("image/jpeg",1),s,n,o,i,d,p)})}}(),Rt.API.putTotalPages=function(e){var a,r=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(a=new RegExp(e,"g"),r=this.internal.getNumberOfPages()):(a=new RegExp(this.pdfEscape16(e,this.internal.getFont()),"g"),r=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var s=1;s<=this.internal.getNumberOfPages();s++)for(var n=0;n<this.internal.pages[s].length;n++)this.internal.pages[s][n]=this.internal.pages[s][n].replace(a,r);return this},Rt.API.viewerPreferences=function(e,a){var r;e=e||{},a=a||!1;var s,n,o,i={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},c=Object.keys(i),d=[],p=0,h=0,x=0;function b(w,_){var O,y=!1;for(O=0;O<w.length;O+=1)w[O]===_&&(y=!0);return y}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(i)),this.internal.viewerpreferences.isSubscribed=!1),r=this.internal.viewerpreferences.configuration,e==="reset"||a===!0){var g=c.length;for(x=0;x<g;x+=1)r[c[x]].value=r[c[x]].defaultValue,r[c[x]].explicitSet=!1}if(ia(e)==="object"){for(n in e)if(o=e[n],b(c,n)&&o!==void 0){if(r[n].type==="boolean"&&typeof o=="boolean")r[n].value=o;else if(r[n].type==="name"&&b(r[n].valueSet,o))r[n].value=o;else if(r[n].type==="integer"&&Number.isInteger(o))r[n].value=o;else if(r[n].type==="array"){for(p=0;p<o.length;p+=1)if(s=!0,o[p].length===1&&typeof o[p][0]=="number")d.push(String(o[p]-1));else if(o[p].length>1){for(h=0;h<o[p].length;h+=1)typeof o[p][h]!="number"&&(s=!1);s===!0&&d.push([o[p][0]-1,o[p][1]-1].join(" "))}r[n].value="["+d.join(" ")+"]"}else r[n].value=r[n].defaultValue;r[n].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var w,_=[];for(w in r)r[w].explicitSet===!0&&(r[w].type==="name"?_.push("/"+w+" /"+r[w].value):_.push("/"+w+" "+r[w].value));_.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+_.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=r,this},function(e){var a=function(){var s='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',n=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),o=unescape(encodeURIComponent(s)),i=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),c=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),d=unescape(encodeURIComponent("</x:xmpmeta>")),p=o.length+i.length+c.length+n.length+d.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+p+" >>"),this.internal.write("stream"),this.internal.write(n+o+i+c+d),this.internal.write("endstream"),this.internal.write("endobj")},r=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};e.addMetadata=function(s,n){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:s,namespaceuri:n||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",r),this.internal.events.subscribe("postPutResources",a)),this}}(Rt.API),function(e){var a=e.API,r=a.pdfEscape16=function(o,i){for(var c,d=i.metadata.Unicode.widths,p=["","0","00","000","0000"],h=[""],x=0,b=o.length;x<b;++x){if(c=i.metadata.characterToGlyph(o.charCodeAt(x)),i.metadata.glyIdsUsed.push(c),i.metadata.toUnicode[c]=o.charCodeAt(x),d.indexOf(c)==-1&&(d.push(c),d.push([parseInt(i.metadata.widthOfGlyph(c),10)])),c=="0")return h.join("");c=c.toString(16),h.push(p[4-c.length],c)}return h.join("")},s=function(o){var i,c,d,p,h,x,b;for(h=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,d=[],x=0,b=(c=Object.keys(o).sort(function(g,w){return g-w})).length;x<b;x++)i=c[x],d.length>=100&&(h+=`
`+d.length+` beginbfchar
`+d.join(`
`)+`
endbfchar`,d=[]),o[i]!==void 0&&o[i]!==null&&typeof o[i].toString=="function"&&(p=("0000"+o[i].toString(16)).slice(-4),i=("0000"+(+i).toString(16)).slice(-4),d.push("<"+i+"><"+p+">"));return d.length&&(h+=`
`+d.length+` beginbfchar
`+d.join(`
`)+`
endbfchar
`),h+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};a.events.push(["putFont",function(o){(function(i){var c=i.font,d=i.out,p=i.newObject,h=i.putStream;if(c.metadata instanceof e.API.TTFFont&&c.encoding==="Identity-H"){for(var x=c.metadata.Unicode.widths,b=c.metadata.subset.encode(c.metadata.glyIdsUsed,1),g="",w=0;w<b.length;w++)g+=String.fromCharCode(b[w]);var _=p();h({data:g,addLength1:!0,objectId:_}),d("endobj");var O=p();h({data:s(c.metadata.toUnicode),addLength1:!0,objectId:O}),d("endobj");var y=p();d("<<"),d("/Type /FontDescriptor"),d("/FontName /"+Mi(c.fontName)),d("/FontFile2 "+_+" 0 R"),d("/FontBBox "+e.API.PDFObject.convert(c.metadata.bbox)),d("/Flags "+c.metadata.flags),d("/StemV "+c.metadata.stemV),d("/ItalicAngle "+c.metadata.italicAngle),d("/Ascent "+c.metadata.ascender),d("/Descent "+c.metadata.decender),d("/CapHeight "+c.metadata.capHeight),d(">>"),d("endobj");var v=p();d("<<"),d("/Type /Font"),d("/BaseFont /"+Mi(c.fontName)),d("/FontDescriptor "+y+" 0 R"),d("/W "+e.API.PDFObject.convert(x)),d("/CIDToGIDMap /Identity"),d("/DW 1000"),d("/Subtype /CIDFontType2"),d("/CIDSystemInfo"),d("<<"),d("/Supplement 0"),d("/Registry (Adobe)"),d("/Ordering ("+c.encoding+")"),d(">>"),d(">>"),d("endobj"),c.objectNumber=p(),d("<<"),d("/Type /Font"),d("/Subtype /Type0"),d("/ToUnicode "+O+" 0 R"),d("/BaseFont /"+Mi(c.fontName)),d("/Encoding /"+c.encoding),d("/DescendantFonts ["+v+" 0 R]"),d(">>"),d("endobj"),c.isAlreadyPutted=!0}})(o)}]),a.events.push(["putFont",function(o){(function(i){var c=i.font,d=i.out,p=i.newObject,h=i.putStream;if(c.metadata instanceof e.API.TTFFont&&c.encoding==="WinAnsiEncoding"){for(var x=c.metadata.rawData,b="",g=0;g<x.length;g++)b+=String.fromCharCode(x[g]);var w=p();h({data:b,addLength1:!0,objectId:w}),d("endobj");var _=p();h({data:s(c.metadata.toUnicode),addLength1:!0,objectId:_}),d("endobj");var O=p();d("<<"),d("/Descent "+c.metadata.decender),d("/CapHeight "+c.metadata.capHeight),d("/StemV "+c.metadata.stemV),d("/Type /FontDescriptor"),d("/FontFile2 "+w+" 0 R"),d("/Flags 96"),d("/FontBBox "+e.API.PDFObject.convert(c.metadata.bbox)),d("/FontName /"+Mi(c.fontName)),d("/ItalicAngle "+c.metadata.italicAngle),d("/Ascent "+c.metadata.ascender),d(">>"),d("endobj"),c.objectNumber=p();for(var y=0;y<c.metadata.hmtx.widths.length;y++)c.metadata.hmtx.widths[y]=parseInt(c.metadata.hmtx.widths[y]*(1e3/c.metadata.head.unitsPerEm));d("<</Subtype/TrueType/Type/Font/ToUnicode "+_+" 0 R/BaseFont/"+Mi(c.fontName)+"/FontDescriptor "+O+" 0 R/Encoding/"+c.encoding+" /FirstChar 29 /LastChar 255 /Widths "+e.API.PDFObject.convert(c.metadata.hmtx.widths)+">>"),d("endobj"),c.isAlreadyPutted=!0}})(o)}]);var n=function(o){var i,c=o.text||"",d=o.x,p=o.y,h=o.options||{},x=o.mutex||{},b=x.pdfEscape,g=x.activeFontKey,w=x.fonts,_=g,O="",y=0,v="",C=w[_].encoding;if(w[_].encoding!=="Identity-H")return{text:c,x:d,y:p,options:h,mutex:x};for(v=c,_=g,Array.isArray(c)&&(v=c[0]),y=0;y<v.length;y+=1)w[_].metadata.hasOwnProperty("cmap")&&(i=w[_].metadata.cmap.unicode.codeMap[v[y].charCodeAt(0)]),i||v[y].charCodeAt(0)<256&&w[_].metadata.hasOwnProperty("Unicode")?O+=v[y]:O+="";var W="";return parseInt(_.slice(1))<14||C==="WinAnsiEncoding"?W=b(O,_).split("").map(function(se){return se.charCodeAt(0).toString(16)}).join(""):C==="Identity-H"&&(W=r(O,w[_])),x.isHex=!0,{text:W,x:d,y:p,options:h,mutex:x}};a.events.push(["postProcessText",function(o){var i=o.text||"",c=[],d={text:i,x:o.x,y:o.y,options:o.options,mutex:o.mutex};if(Array.isArray(i)){var p=0;for(p=0;p<i.length;p+=1)Array.isArray(i[p])&&i[p].length===3?c.push([n(Object.assign({},d,{text:i[p][0]})).text,i[p][1],i[p][2]]):c.push(n(Object.assign({},d,{text:i[p]})).text);o.text=c}else o.text=n(Object.assign({},d,{text:i})).text}])}(Rt),function(e){var a=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};e.existsFileInVFS=function(r){return a.call(this),this.internal.vFS[r]!==void 0},e.addFileToVFS=function(r,s){return a.call(this),this.internal.vFS[r]=s,this},e.getFileFromVFS=function(r){return a.call(this),this.internal.vFS[r]!==void 0?this.internal.vFS[r]:null}}(Rt.API),function(e){e.__bidiEngine__=e.prototype.__bidiEngine__=function(s){var n,o,i,c,d,p,h,x=a,b=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],g=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],w={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},_={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},O=["(",")","(","<",">","<","[","]","[","{","}","{","«","»","«","‹","›","‹","⁅","⁆","⁅","⁽","⁾","⁽","₍","₎","₍","≤","≥","≤","〈","〉","〈","﹙","﹚","﹙","﹛","﹜","﹛","﹝","﹞","﹝","﹤","﹥","﹤"],y=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),v=!1,C=0;this.__bidiEngine__={};var W=function($){var L=$.charCodeAt(),le=L>>8,R=_[le];return R!==void 0?x[256*R+(255&L)]:le===252||le===253?"AL":y.test(le)?"L":le===8?"R":"N"},se=function($){for(var L,le=0;le<$.length;le++){if((L=W($.charAt(le)))==="L")return!1;if(L==="R")return!0}return!1},J=function($,L,le,R){var we,ce,Ce,Z,he=L[R];switch(he){case"L":case"R":v=!1;break;case"N":case"AN":break;case"EN":v&&(he="AN");break;case"AL":v=!0,he="R";break;case"WS":he="N";break;case"CS":R<1||R+1>=L.length||(we=le[R-1])!=="EN"&&we!=="AN"||(ce=L[R+1])!=="EN"&&ce!=="AN"?he="N":v&&(ce="AN"),he=ce===we?ce:"N";break;case"ES":he=(we=R>0?le[R-1]:"B")==="EN"&&R+1<L.length&&L[R+1]==="EN"?"EN":"N";break;case"ET":if(R>0&&le[R-1]==="EN"){he="EN";break}if(v){he="N";break}for(Ce=R+1,Z=L.length;Ce<Z&&L[Ce]==="ET";)Ce++;he=Ce<Z&&L[Ce]==="EN"?"EN":"N";break;case"NSM":if(i&&!c){for(Z=L.length,Ce=R+1;Ce<Z&&L[Ce]==="NSM";)Ce++;if(Ce<Z){var ie=$[R],Ue=ie>=1425&&ie<=2303||ie===64286;if(we=L[Ce],Ue&&(we==="R"||we==="AL")){he="R";break}}}he=R<1||(we=L[R-1])==="B"?"N":le[R-1];break;case"B":v=!1,n=!0,he=C;break;case"S":o=!0,he="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":v=!1;break;case"BN":he="N"}return he},Y=function($,L,le){var R=$.split("");return le&&K(R,le,{hiLevel:C}),R.reverse(),L&&L.reverse(),R.join("")},K=function($,L,le){var R,we,ce,Ce,Z,he=-1,ie=$.length,Ue=0,S=[],G=C?g:b,q=[];for(v=!1,n=!1,o=!1,we=0;we<ie;we++)q[we]=W($[we]);for(ce=0;ce<ie;ce++){if(Z=Ue,S[ce]=J($,q,S,ce),R=240&(Ue=G[Z][w[S[ce]]]),Ue&=15,L[ce]=Ce=G[Ue][5],R>0)if(R===16){for(we=he;we<ce;we++)L[we]=1;he=-1}else he=-1;if(G[Ue][6])he===-1&&(he=ce);else if(he>-1){for(we=he;we<ce;we++)L[we]=Ce;he=-1}q[ce]==="B"&&(L[ce]=0),le.hiLevel|=Ce}o&&function(N,U,T){for(var B=0;B<T;B++)if(N[B]==="S"){U[B]=C;for(var oe=B-1;oe>=0&&N[oe]==="WS";oe--)U[oe]=C}}(q,L,ie)},fe=function($,L,le,R,we){if(!(we.hiLevel<$)){if($===1&&C===1&&!n)return L.reverse(),void(le&&le.reverse());for(var ce,Ce,Z,he,ie=L.length,Ue=0;Ue<ie;){if(R[Ue]>=$){for(Z=Ue+1;Z<ie&&R[Z]>=$;)Z++;for(he=Ue,Ce=Z-1;he<Ce;he++,Ce--)ce=L[he],L[he]=L[Ce],L[Ce]=ce,le&&(ce=le[he],le[he]=le[Ce],le[Ce]=ce);Ue=Z}Ue++}}},me=function($,L,le){var R=$.split(""),we={hiLevel:C};return le||(le=[]),K(R,le,we),function(ce,Ce,Z){if(Z.hiLevel!==0&&h)for(var he,ie=0;ie<ce.length;ie++)Ce[ie]===1&&(he=O.indexOf(ce[ie]))>=0&&(ce[ie]=O[he+1])}(R,le,we),fe(2,R,L,le,we),fe(1,R,L,le,we),R.join("")};return this.__bidiEngine__.doBidiReorder=function($,L,le){if(function(we,ce){if(ce)for(var Ce=0;Ce<we.length;Ce++)ce[Ce]=Ce;c===void 0&&(c=se(we)),p===void 0&&(p=se(we))}($,L),i||!d||p)if(i&&d&&c^p)C=c?1:0,$=Y($,L,le);else if(!i&&d&&p)C=c?1:0,$=me($,L,le),$=Y($,L);else if(!i||c||d||p){if(i&&!d&&c^p)$=Y($,L),c?(C=0,$=me($,L,le)):(C=1,$=me($,L,le),$=Y($,L));else if(i&&c&&!d&&p)C=1,$=me($,L,le),$=Y($,L);else if(!i&&!d&&c^p){var R=h;c?(C=1,$=me($,L,le),C=0,h=!1,$=me($,L,le),h=R):(C=0,$=me($,L,le),$=Y($,L),C=1,h=!1,$=me($,L,le),h=R,$=Y($,L))}}else C=0,$=me($,L,le);else C=c?1:0,$=me($,L,le);return $},this.__bidiEngine__.setOptions=function($){$&&(i=$.isInputVisual,d=$.isOutputVisual,c=$.isInputRtl,p=$.isOutputRtl,h=$.isSymmetricSwapping)},this.__bidiEngine__.setOptions(s),this.__bidiEngine__};var a=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],r=new e.__bidiEngine__({isInputVisual:!0});e.API.events.push(["postProcessText",function(s){var n=s.text,o=(s.x,s.y,s.options||{}),i=(s.mutex,o.lang,[]);if(o.isInputVisual=typeof o.isInputVisual!="boolean"||o.isInputVisual,r.setOptions(o),Object.prototype.toString.call(n)==="[object Array]"){var c=0;for(i=[],c=0;c<n.length;c+=1)Object.prototype.toString.call(n[c])==="[object Array]"?i.push([r.doBidiReorder(n[c][0]),n[c][1],n[c][2]]):i.push([r.doBidiReorder(n[c])]);s.text=i}else s.text=r.doBidiReorder(n);r.setOptions({isInputVisual:!0})}])}(Rt),Rt.API.TTFFont=function(){function e(a){var r;if(this.rawData=a,r=this.contents=new No(a),this.contents.pos=4,r.readString(4)==="ttcf")throw new Error("TTCF not supported.");r.pos=0,this.parse(),this.subset=new f6(this),this.registerTTF()}return e.open=function(a){return new e(a)},e.prototype.parse=function(){return this.directory=new t6(this.contents),this.head=new r6(this),this.name=new l6(this),this.cmap=new wb(this),this.toUnicode={},this.hhea=new s6(this),this.maxp=new c6(this),this.hmtx=new d6(this),this.post=new o6(this),this.os2=new n6(this),this.loca=new p6(this),this.glyf=new u6(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},e.prototype.registerTTF=function(){var a,r,s,n,o;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var i,c,d,p;for(p=[],i=0,c=(d=this.bbox).length;i<c;i++)a=d[i],p.push(Math.round(a*this.scaleFactor));return p}).call(this),this.stemV=0,this.post.exists?(s=255&(n=this.post.italic_angle),32768&(r=n>>16)&&(r=-(1+(65535^r))),this.italicAngle=+(r+"."+s)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(o=this.familyClass)===1||o===2||o===3||o===4||o===5||o===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},e.prototype.characterToGlyph=function(a){var r;return((r=this.cmap.unicode)!=null?r.codeMap[a]:void 0)||0},e.prototype.widthOfGlyph=function(a){var r;return r=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(a).advance*r},e.prototype.widthOfString=function(a,r,s){var n,o,i,c;for(i=0,o=0,c=(a=""+a).length;0<=c?o<c:o>c;o=0<=c?++o:--o)n=a.charCodeAt(o),i+=this.widthOfGlyph(this.characterToGlyph(n))+s*(1e3/r)||0;return i*(r/1e3)},e.prototype.lineHeight=function(a,r){var s;return r==null&&(r=!1),s=r?this.lineGap:0,(this.ascender+s-this.decender)/1e3*a},e}();var Rs,No=function(){function e(a){this.data=a??[],this.pos=0,this.length=this.data.length}return e.prototype.readByte=function(){return this.data[this.pos++]},e.prototype.writeByte=function(a){return this.data[this.pos++]=a},e.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},e.prototype.writeUInt32=function(a){return this.writeByte(a>>>24&255),this.writeByte(a>>16&255),this.writeByte(a>>8&255),this.writeByte(255&a)},e.prototype.readInt32=function(){var a;return(a=this.readUInt32())>=2147483648?a-4294967296:a},e.prototype.writeInt32=function(a){return a<0&&(a+=4294967296),this.writeUInt32(a)},e.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},e.prototype.writeUInt16=function(a){return this.writeByte(a>>8&255),this.writeByte(255&a)},e.prototype.readInt16=function(){var a;return(a=this.readUInt16())>=32768?a-65536:a},e.prototype.writeInt16=function(a){return a<0&&(a+=65536),this.writeUInt16(a)},e.prototype.readString=function(a){var r,s;for(s=[],r=0;0<=a?r<a:r>a;r=0<=a?++r:--r)s[r]=String.fromCharCode(this.readByte());return s.join("")},e.prototype.writeString=function(a){var r,s,n;for(n=[],r=0,s=a.length;0<=s?r<s:r>s;r=0<=s?++r:--r)n.push(this.writeByte(a.charCodeAt(r)));return n},e.prototype.readShort=function(){return this.readInt16()},e.prototype.writeShort=function(a){return this.writeInt16(a)},e.prototype.readLongLong=function(){var a,r,s,n,o,i,c,d;return a=this.readByte(),r=this.readByte(),s=this.readByte(),n=this.readByte(),o=this.readByte(),i=this.readByte(),c=this.readByte(),d=this.readByte(),128&a?-1*(72057594037927940*(255^a)+281474976710656*(255^r)+1099511627776*(255^s)+4294967296*(255^n)+16777216*(255^o)+65536*(255^i)+256*(255^c)+(255^d)+1):72057594037927940*a+281474976710656*r+1099511627776*s+4294967296*n+16777216*o+65536*i+256*c+d},e.prototype.writeLongLong=function(a){var r,s;return r=Math.floor(a/4294967296),s=4294967295&a,this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r),this.writeByte(s>>24&255),this.writeByte(s>>16&255),this.writeByte(s>>8&255),this.writeByte(255&s)},e.prototype.readInt=function(){return this.readInt32()},e.prototype.writeInt=function(a){return this.writeInt32(a)},e.prototype.read=function(a){var r,s;for(r=[],s=0;0<=a?s<a:s>a;s=0<=a?++s:--s)r.push(this.readByte());return r},e.prototype.write=function(a){var r,s,n,o;for(o=[],s=0,n=a.length;s<n;s++)r=a[s],o.push(this.writeByte(r));return o},e}(),t6=function(){var e;function a(r){var s,n,o;for(this.scalarType=r.readInt(),this.tableCount=r.readShort(),this.searchRange=r.readShort(),this.entrySelector=r.readShort(),this.rangeShift=r.readShort(),this.tables={},n=0,o=this.tableCount;0<=o?n<o:n>o;n=0<=o?++n:--n)s={tag:r.readString(4),checksum:r.readInt(),offset:r.readInt(),length:r.readInt()},this.tables[s.tag]=s}return a.prototype.encode=function(r){var s,n,o,i,c,d,p,h,x,b,g,w,_;for(_ in g=Object.keys(r).length,d=Math.log(2),x=16*Math.floor(Math.log(g)/d),i=Math.floor(x/d),h=16*g-x,(n=new No).writeInt(this.scalarType),n.writeShort(g),n.writeShort(x),n.writeShort(i),n.writeShort(h),o=16*g,p=n.pos+o,c=null,w=[],r)for(b=r[_],n.writeString(_),n.writeInt(e(b)),n.writeInt(p),n.writeInt(b.length),w=w.concat(b),_==="head"&&(c=p),p+=b.length;p%4;)w.push(0),p++;return n.write(w),s=2981146554-e(n.data),n.pos=c+8,n.writeUInt32(s),n.data},e=function(r){var s,n,o,i;for(r=Sb.call(r);r.length%4;)r.push(0);for(o=new No(r),n=0,s=0,i=r.length;s<i;s=s+=4)n+=o.readUInt32();return 4294967295&n},a}(),a6={}.hasOwnProperty,Ks=function(e,a){for(var r in a)a6.call(a,r)&&(e[r]=a[r]);function s(){this.constructor=e}return s.prototype=a.prototype,e.prototype=new s,e.__super__=a.prototype,e};Rs=function(){function e(a){var r;this.file=a,r=this.file.directory.tables[this.tag],this.exists=!!r,r&&(this.offset=r.offset,this.length=r.length,this.parse(this.file.contents))}return e.prototype.parse=function(){},e.prototype.encode=function(){},e.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},e}();var r6=function(e){function a(){return a.__super__.constructor.apply(this,arguments)}return Ks(a,Rs),a.prototype.tag="head",a.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.revision=r.readInt(),this.checkSumAdjustment=r.readInt(),this.magicNumber=r.readInt(),this.flags=r.readShort(),this.unitsPerEm=r.readShort(),this.created=r.readLongLong(),this.modified=r.readLongLong(),this.xMin=r.readShort(),this.yMin=r.readShort(),this.xMax=r.readShort(),this.yMax=r.readShort(),this.macStyle=r.readShort(),this.lowestRecPPEM=r.readShort(),this.fontDirectionHint=r.readShort(),this.indexToLocFormat=r.readShort(),this.glyphDataFormat=r.readShort()},a.prototype.encode=function(r){var s;return(s=new No).writeInt(this.version),s.writeInt(this.revision),s.writeInt(this.checkSumAdjustment),s.writeInt(this.magicNumber),s.writeShort(this.flags),s.writeShort(this.unitsPerEm),s.writeLongLong(this.created),s.writeLongLong(this.modified),s.writeShort(this.xMin),s.writeShort(this.yMin),s.writeShort(this.xMax),s.writeShort(this.yMax),s.writeShort(this.macStyle),s.writeShort(this.lowestRecPPEM),s.writeShort(this.fontDirectionHint),s.writeShort(r),s.writeShort(this.glyphDataFormat),s.data},a}(),av=function(){function e(a,r){var s,n,o,i,c,d,p,h,x,b,g,w,_,O,y,v,C;switch(this.platformID=a.readUInt16(),this.encodingID=a.readShort(),this.offset=r+a.readInt(),x=a.pos,a.pos=this.offset,this.format=a.readUInt16(),this.length=a.readUInt16(),this.language=a.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(d=0;d<256;++d)this.codeMap[d]=a.readByte();break;case 4:for(g=a.readUInt16(),b=g/2,a.pos+=6,o=function(){var W,se;for(se=[],d=W=0;0<=b?W<b:W>b;d=0<=b?++W:--W)se.push(a.readUInt16());return se}(),a.pos+=2,_=function(){var W,se;for(se=[],d=W=0;0<=b?W<b:W>b;d=0<=b?++W:--W)se.push(a.readUInt16());return se}(),p=function(){var W,se;for(se=[],d=W=0;0<=b?W<b:W>b;d=0<=b?++W:--W)se.push(a.readUInt16());return se}(),h=function(){var W,se;for(se=[],d=W=0;0<=b?W<b:W>b;d=0<=b?++W:--W)se.push(a.readUInt16());return se}(),n=(this.length-a.pos+this.offset)/2,c=function(){var W,se;for(se=[],d=W=0;0<=n?W<n:W>n;d=0<=n?++W:--W)se.push(a.readUInt16());return se}(),d=y=0,C=o.length;y<C;d=++y)for(O=o[d],s=v=w=_[d];w<=O?v<=O:v>=O;s=w<=O?++v:--v)h[d]===0?i=s+p[d]:(i=c[h[d]/2+(s-w)-(b-d)]||0)!==0&&(i+=p[d]),this.codeMap[s]=65535&i}a.pos=x}return e.encode=function(a,r){var s,n,o,i,c,d,p,h,x,b,g,w,_,O,y,v,C,W,se,J,Y,K,fe,me,$,L,le,R,we,ce,Ce,Z,he,ie,Ue,S,G,q,N,U,T,B,oe,Ne,Be,Xe;switch(R=new No,i=Object.keys(a).sort(function(dt,ft){return dt-ft}),r){case"macroman":for(_=0,O=function(){var dt=[];for(w=0;w<256;++w)dt.push(0);return dt}(),v={0:0},o={},we=0,he=i.length;we<he;we++)v[oe=a[n=i[we]]]==null&&(v[oe]=++_),o[n]={old:a[n],new:v[a[n]]},O[n]=v[a[n]];return R.writeUInt16(1),R.writeUInt16(0),R.writeUInt32(12),R.writeUInt16(0),R.writeUInt16(262),R.writeUInt16(0),R.write(O),{charMap:o,subtable:R.data,maxGlyphID:_+1};case"unicode":for(L=[],x=[],C=0,v={},s={},y=p=null,ce=0,ie=i.length;ce<ie;ce++)v[se=a[n=i[ce]]]==null&&(v[se]=++C),s[n]={old:se,new:v[se]},c=v[se]-n,y!=null&&c===p||(y&&x.push(y),L.push(n),p=c),y=n;for(y&&x.push(y),x.push(65535),L.push(65535),me=2*(fe=L.length),K=2*Math.pow(Math.log(fe)/Math.LN2,2),b=Math.log(K/2)/Math.LN2,Y=2*fe-K,d=[],J=[],g=[],w=Ce=0,Ue=L.length;Ce<Ue;w=++Ce){if($=L[w],h=x[w],$===65535){d.push(0),J.push(0);break}if($-(le=s[$].new)>=32768)for(d.push(0),J.push(2*(g.length+fe-w)),n=Z=$;$<=h?Z<=h:Z>=h;n=$<=h?++Z:--Z)g.push(s[n].new);else d.push(le-$),J.push(0)}for(R.writeUInt16(3),R.writeUInt16(1),R.writeUInt32(12),R.writeUInt16(4),R.writeUInt16(16+8*fe+2*g.length),R.writeUInt16(0),R.writeUInt16(me),R.writeUInt16(K),R.writeUInt16(b),R.writeUInt16(Y),T=0,S=x.length;T<S;T++)n=x[T],R.writeUInt16(n);for(R.writeUInt16(0),B=0,G=L.length;B<G;B++)n=L[B],R.writeUInt16(n);for(Ne=0,q=d.length;Ne<q;Ne++)c=d[Ne],R.writeUInt16(c);for(Be=0,N=J.length;Be<N;Be++)W=J[Be],R.writeUInt16(W);for(Xe=0,U=g.length;Xe<U;Xe++)_=g[Xe],R.writeUInt16(_);return{charMap:s,subtable:R.data,maxGlyphID:C+1}}},e}(),wb=function(e){function a(){return a.__super__.constructor.apply(this,arguments)}return Ks(a,Rs),a.prototype.tag="cmap",a.prototype.parse=function(r){var s,n,o;for(r.pos=this.offset,this.version=r.readUInt16(),o=r.readUInt16(),this.tables=[],this.unicode=null,n=0;0<=o?n<o:n>o;n=0<=o?++n:--n)s=new av(r,this.offset),this.tables.push(s),s.isUnicode&&this.unicode==null&&(this.unicode=s);return!0},a.encode=function(r,s){var n,o;return s==null&&(s="macroman"),n=av.encode(r,s),(o=new No).writeUInt16(0),o.writeUInt16(1),n.table=o.data.concat(n.subtable),n},a}(),s6=function(e){function a(){return a.__super__.constructor.apply(this,arguments)}return Ks(a,Rs),a.prototype.tag="hhea",a.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.ascender=r.readShort(),this.decender=r.readShort(),this.lineGap=r.readShort(),this.advanceWidthMax=r.readShort(),this.minLeftSideBearing=r.readShort(),this.minRightSideBearing=r.readShort(),this.xMaxExtent=r.readShort(),this.caretSlopeRise=r.readShort(),this.caretSlopeRun=r.readShort(),this.caretOffset=r.readShort(),r.pos+=8,this.metricDataFormat=r.readShort(),this.numberOfMetrics=r.readUInt16()},a}(),n6=function(e){function a(){return a.__super__.constructor.apply(this,arguments)}return Ks(a,Rs),a.prototype.tag="OS/2",a.prototype.parse=function(r){if(r.pos=this.offset,this.version=r.readUInt16(),this.averageCharWidth=r.readShort(),this.weightClass=r.readUInt16(),this.widthClass=r.readUInt16(),this.type=r.readShort(),this.ySubscriptXSize=r.readShort(),this.ySubscriptYSize=r.readShort(),this.ySubscriptXOffset=r.readShort(),this.ySubscriptYOffset=r.readShort(),this.ySuperscriptXSize=r.readShort(),this.ySuperscriptYSize=r.readShort(),this.ySuperscriptXOffset=r.readShort(),this.ySuperscriptYOffset=r.readShort(),this.yStrikeoutSize=r.readShort(),this.yStrikeoutPosition=r.readShort(),this.familyClass=r.readShort(),this.panose=function(){var s,n;for(n=[],s=0;s<10;++s)n.push(r.readByte());return n}(),this.charRange=function(){var s,n;for(n=[],s=0;s<4;++s)n.push(r.readInt());return n}(),this.vendorID=r.readString(4),this.selection=r.readShort(),this.firstCharIndex=r.readShort(),this.lastCharIndex=r.readShort(),this.version>0&&(this.ascent=r.readShort(),this.descent=r.readShort(),this.lineGap=r.readShort(),this.winAscent=r.readShort(),this.winDescent=r.readShort(),this.codePageRange=function(){var s,n;for(n=[],s=0;s<2;s=++s)n.push(r.readInt());return n}(),this.version>1))return this.xHeight=r.readShort(),this.capHeight=r.readShort(),this.defaultChar=r.readShort(),this.breakChar=r.readShort(),this.maxContext=r.readShort()},a}(),o6=function(e){function a(){return a.__super__.constructor.apply(this,arguments)}return Ks(a,Rs),a.prototype.tag="post",a.prototype.parse=function(r){var s,n,o;switch(r.pos=this.offset,this.format=r.readInt(),this.italicAngle=r.readInt(),this.underlinePosition=r.readShort(),this.underlineThickness=r.readShort(),this.isFixedPitch=r.readInt(),this.minMemType42=r.readInt(),this.maxMemType42=r.readInt(),this.minMemType1=r.readInt(),this.maxMemType1=r.readInt(),this.format){case 65536:break;case 131072:var i;for(n=r.readUInt16(),this.glyphNameIndex=[],i=0;0<=n?i<n:i>n;i=0<=n?++i:--i)this.glyphNameIndex.push(r.readUInt16());for(this.names=[],o=[];r.pos<this.offset+this.length;)s=r.readByte(),o.push(this.names.push(r.readString(s)));return o;case 151552:return n=r.readUInt16(),this.offsets=r.read(n);case 196608:break;case 262144:return this.map=(function(){var c,d,p;for(p=[],i=c=0,d=this.file.maxp.numGlyphs;0<=d?c<d:c>d;i=0<=d?++c:--c)p.push(r.readUInt32());return p}).call(this)}},a}(),i6=function(e,a){this.raw=e,this.length=e.length,this.platformID=a.platformID,this.encodingID=a.encodingID,this.languageID=a.languageID},l6=function(e){function a(){return a.__super__.constructor.apply(this,arguments)}return Ks(a,Rs),a.prototype.tag="name",a.prototype.parse=function(r){var s,n,o,i,c,d,p,h,x,b,g;for(r.pos=this.offset,r.readShort(),s=r.readShort(),d=r.readShort(),n=[],i=0;0<=s?i<s:i>s;i=0<=s?++i:--i)n.push({platformID:r.readShort(),encodingID:r.readShort(),languageID:r.readShort(),nameID:r.readShort(),length:r.readShort(),offset:this.offset+d+r.readShort()});for(p={},i=x=0,b=n.length;x<b;i=++x)o=n[i],r.pos=o.offset,h=r.readString(o.length),c=new i6(h,o),p[g=o.nameID]==null&&(p[g]=[]),p[o.nameID].push(c);this.strings=p,this.copyright=p[0],this.fontFamily=p[1],this.fontSubfamily=p[2],this.uniqueSubfamily=p[3],this.fontName=p[4],this.version=p[5];try{this.postscriptName=p[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=p[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=p[7],this.manufacturer=p[8],this.designer=p[9],this.description=p[10],this.vendorUrl=p[11],this.designerUrl=p[12],this.license=p[13],this.licenseUrl=p[14],this.preferredFamily=p[15],this.preferredSubfamily=p[17],this.compatibleFull=p[18],this.sampleText=p[19]},a}(),c6=function(e){function a(){return a.__super__.constructor.apply(this,arguments)}return Ks(a,Rs),a.prototype.tag="maxp",a.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.numGlyphs=r.readUInt16(),this.maxPoints=r.readUInt16(),this.maxContours=r.readUInt16(),this.maxCompositePoints=r.readUInt16(),this.maxComponentContours=r.readUInt16(),this.maxZones=r.readUInt16(),this.maxTwilightPoints=r.readUInt16(),this.maxStorage=r.readUInt16(),this.maxFunctionDefs=r.readUInt16(),this.maxInstructionDefs=r.readUInt16(),this.maxStackElements=r.readUInt16(),this.maxSizeOfInstructions=r.readUInt16(),this.maxComponentElements=r.readUInt16(),this.maxComponentDepth=r.readUInt16()},a}(),d6=function(e){function a(){return a.__super__.constructor.apply(this,arguments)}return Ks(a,Rs),a.prototype.tag="hmtx",a.prototype.parse=function(r){var s,n,o,i,c,d,p;for(r.pos=this.offset,this.metrics=[],s=0,d=this.file.hhea.numberOfMetrics;0<=d?s<d:s>d;s=0<=d?++s:--s)this.metrics.push({advance:r.readUInt16(),lsb:r.readInt16()});for(o=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var h,x;for(x=[],s=h=0;0<=o?h<o:h>o;s=0<=o?++h:--h)x.push(r.readInt16());return x}(),this.widths=(function(){var h,x,b,g;for(g=[],h=0,x=(b=this.metrics).length;h<x;h++)i=b[h],g.push(i.advance);return g}).call(this),n=this.widths[this.widths.length-1],p=[],s=c=0;0<=o?c<o:c>o;s=0<=o?++c:--c)p.push(this.widths.push(n));return p},a.prototype.forGlyph=function(r){return r in this.metrics?this.metrics[r]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[r-this.metrics.length]}},a}(),Sb=[].slice,u6=function(e){function a(){return a.__super__.constructor.apply(this,arguments)}return Ks(a,Rs),a.prototype.tag="glyf",a.prototype.parse=function(){return this.cache={}},a.prototype.glyphFor=function(r){var s,n,o,i,c,d,p,h,x,b;return r in this.cache?this.cache[r]:(i=this.file.loca,s=this.file.contents,n=i.indexOf(r),(o=i.lengthOf(r))===0?this.cache[r]=null:(s.pos=this.offset+n,c=(d=new No(s.read(o))).readShort(),h=d.readShort(),b=d.readShort(),p=d.readShort(),x=d.readShort(),this.cache[r]=c===-1?new h6(d,h,b,p,x):new m6(d,c,h,b,p,x),this.cache[r]))},a.prototype.encode=function(r,s,n){var o,i,c,d,p;for(c=[],i=[],d=0,p=s.length;d<p;d++)o=r[s[d]],i.push(c.length),o&&(c=c.concat(o.encode(n)));return i.push(c.length),{table:c,offsets:i}},a}(),m6=function(){function e(a,r,s,n,o,i){this.raw=a,this.numberOfContours=r,this.xMin=s,this.yMin=n,this.xMax=o,this.yMax=i,this.compound=!1}return e.prototype.encode=function(){return this.raw.data},e}(),h6=function(){function e(a,r,s,n,o){var i,c;for(this.raw=a,this.xMin=r,this.yMin=s,this.xMax=n,this.yMax=o,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],i=this.raw;c=i.readShort(),this.glyphOffsets.push(i.pos),this.glyphIDs.push(i.readUInt16()),32&c;)i.pos+=1&c?4:2,128&c?i.pos+=8:64&c?i.pos+=4:8&c&&(i.pos+=2)}return e.prototype.encode=function(){var a,r,s;for(r=new No(Sb.call(this.raw.data)),a=0,s=this.glyphIDs.length;a<s;++a)r.pos=this.glyphOffsets[a];return r.data},e}(),p6=function(e){function a(){return a.__super__.constructor.apply(this,arguments)}return Ks(a,Rs),a.prototype.tag="loca",a.prototype.parse=function(r){var s,n;return r.pos=this.offset,s=this.file.head.indexToLocFormat,this.offsets=s===0?(function(){var o,i;for(i=[],n=0,o=this.length;n<o;n+=2)i.push(2*r.readUInt16());return i}).call(this):(function(){var o,i;for(i=[],n=0,o=this.length;n<o;n+=4)i.push(r.readUInt32());return i}).call(this)},a.prototype.indexOf=function(r){return this.offsets[r]},a.prototype.lengthOf=function(r){return this.offsets[r+1]-this.offsets[r]},a.prototype.encode=function(r,s){for(var n=new Uint32Array(this.offsets.length),o=0,i=0,c=0;c<n.length;++c)if(n[c]=o,i<s.length&&s[i]==c){++i,n[c]=o;var d=this.offsets[c],p=this.offsets[c+1]-d;p>0&&(o+=p)}for(var h=new Array(4*n.length),x=0;x<n.length;++x)h[4*x+3]=255&n[x],h[4*x+2]=(65280&n[x])>>8,h[4*x+1]=(16711680&n[x])>>16,h[4*x]=(4278190080&n[x])>>24;return h},a}(),f6=function(){function e(a){this.font=a,this.subset={},this.unicodes={},this.next=33}return e.prototype.generateCmap=function(){var a,r,s,n,o;for(r in n=this.font.cmap.tables[0].codeMap,a={},o=this.subset)s=o[r],a[r]=n[s];return a},e.prototype.glyphsFor=function(a){var r,s,n,o,i,c,d;for(n={},i=0,c=a.length;i<c;i++)n[o=a[i]]=this.font.glyf.glyphFor(o);for(o in r=[],n)(s=n[o])!=null&&s.compound&&r.push.apply(r,s.glyphIDs);if(r.length>0)for(o in d=this.glyphsFor(r))s=d[o],n[o]=s;return n},e.prototype.encode=function(a,r){var s,n,o,i,c,d,p,h,x,b,g,w,_,O,y;for(n in s=wb.encode(this.generateCmap(),"unicode"),i=this.glyphsFor(a),g={0:0},y=s.charMap)g[(d=y[n]).old]=d.new;for(w in b=s.maxGlyphID,i)w in g||(g[w]=b++);return h=function(v){var C,W;for(C in W={},v)W[v[C]]=C;return W}(g),x=Object.keys(h).sort(function(v,C){return v-C}),_=function(){var v,C,W;for(W=[],v=0,C=x.length;v<C;v++)c=x[v],W.push(h[c]);return W}(),o=this.font.glyf.encode(i,_,g),p=this.font.loca.encode(o.offsets,_),O={cmap:this.font.cmap.raw(),glyf:o.table,loca:p,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(r)},this.font.os2.exists&&(O["OS/2"]=this.font.os2.raw()),this.font.directory.encode(O)},e}();Rt.API.PDFObject=function(){var e;function a(){}return e=function(r,s){return(Array(s+1).join("0")+r).slice(-s)},a.convert=function(r){var s,n,o,i;if(Array.isArray(r))return"["+function(){var c,d,p;for(p=[],c=0,d=r.length;c<d;c++)s=r[c],p.push(a.convert(s));return p}().join(" ")+"]";if(typeof r=="string")return"/"+r;if(r!=null&&r.isString)return"("+r+")";if(r instanceof Date)return"(D:"+e(r.getUTCFullYear(),4)+e(r.getUTCMonth(),2)+e(r.getUTCDate(),2)+e(r.getUTCHours(),2)+e(r.getUTCMinutes(),2)+e(r.getUTCSeconds(),2)+"Z)";if({}.toString.call(r)==="[object Object]"){for(n in o=["<<"],r)i=r[n],o.push("/"+n+" "+a.convert(i));return o.push(">>"),o.join(`
`)}return""+r},a}();const ja=e=>e==null||isNaN(Number(e))?"R$ 0,00":`R$ ${Number(e).toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2})}`,Na=e=>e==null||isNaN(Number(e))?0:Number(e),mn=e=>{if(!e)return"-";try{return new Date(e).toLocaleDateString("pt-BR")}catch{return"-"}},x6={pendente:"bg-gray-100 text-gray-800",enviado:"bg-blue-100 text-blue-800",em_cotacao:"bg-yellow-100 text-yellow-800",aprovado:"bg-green-100 text-green-800",comprado:"bg-purple-100 text-purple-800",entregue:"bg-indigo-100 text-indigo-800",negado:"bg-red-100 text-red-800"},g6={pendente:"Pendente",enviado:"Enviado",em_cotacao:"Em Cotação",aprovado:"Aprovado",comprado:"Comprado",entregue:"Entregue",negado:"Negado"};function v6(){var Jt,ma,F,Ge,Re,bt,Ot,Pt,pt,xa,Pr;const[e,a]=I.useState([]),[r,s]=I.useState([]),[n,o]=I.useState([]),[i,c]=I.useState([]),[d,p]=I.useState([]),[h,x]=I.useState([]),[b,g]=I.useState([]),[w,_]=I.useState(!0),[O,y]=I.useState(""),[v,C]=I.useState(null),[W,se]=I.useState(!1),[J,Y]=I.useState(!1),[K,fe]=I.useState(!1),[me,$]=I.useState(!1),[L,le]=I.useState(!1),[R,we]=I.useState(!1),[ce,Ce]=I.useState(!1),[Z,he]=I.useState(!1),[ie,Ue]=I.useState(!1),[S,G]=I.useState(!1),[q,N]=I.useState(!1),[U,T]=I.useState(!1),[B,oe]=I.useState(!1),[Ne,Be]=I.useState(!1),[Xe,dt]=I.useState(null),[ft,Me]=I.useState(""),[te,Ct]=I.useState(""),[ae,xe]=I.useState({nome:"",dataInicioPrevisao:"",dataTerminoPrevisao:"",dataInicioReal:"",dataTerminoReal:"",dependencias:[]}),[be,Te]=I.useState({etapaId:"",nome:"",dataInicioPrevisao:"",dataTerminoPrevisao:""}),[Ae,tt]=I.useState({etapaId:"",subetapaId:"",insumoId:"",quantidade:1}),[rt,gt]=I.useState({etapaId:"",subetapaId:"",funcionarioId:"",quantidade:1,horasPrevisao:8}),[st,Tt]=I.useState({tipo:"etapa",etapaId:"",subetapaId:"",nome:"",descricao:"",responsavel:"",dataInicio:"",dataTermino:""}),[ne,Pe]=I.useState({tipo:"material",descricao:"",quantidade:1,valorEstimado:0,etapaId:"",subetapaId:"",observacoes:""});I.useEffect(()=>{at()},[]),I.useEffect(()=>{if(O){const Q=e.find(_e=>_e._id===O);C(Q||null)}},[O,e]);const at=async()=>{try{_(!0);const[Q,_e,Le,Je,Ye,Lt,Xt]=await Promise.all([Ie.entities.planejamentos.list(),Ie.entities.contratos.list(),Ie.entities.funcionarios.list(),Ie.entities.insumos.list(),Ie.entities.diarios.list(),Ie.entities.financeiro.list(),Ie.entities.compras.list()]);a(Q.list||[]);const sa=(_e.list||[]).filter(Lr=>(Lr==null?void 0:Lr.status)==="assinado");s(sa),o((Le.list||[]).filter(Lr=>Lr==null?void 0:Lr.ativo)),c(Je.list||[]),p(Ye.list||[]),x(Lt.list||[]),g(Xt.list||[]),(Q.list||[]).length>0&&!O&&y(Q.list[0]._id)}catch(Q){console.error("Erro ao buscar dados:",Q),X.error("Erro ao carregar dados")}finally{_(!1)}},k=async()=>{if(!v||!ne.descricao||!ne.etapaId){X.error("Preencha todos os campos obrigatórios");return}try{const Q={id:`sol_${Date.now()}`,tipo:ne.tipo,descricao:ne.descricao,quantidade:ne.quantidade,valorEstimado:ne.valorEstimado,etapaId:ne.etapaId,subetapaId:ne.subetapaId,status:"pendente",observacoes:ne.observacoes,criadoEm:new Date().toISOString(),atualizadoEm:new Date().toISOString()},_e={...v,solicitacoes:[...v.solicitacoes||[],Q],atualizadoEm:new Date().toISOString()};await Ie.entities.planejamentos.update(v._id,_e),ne.tipo==="material"&&await Qe(Q),X.success("Solicitação criada com sucesso"),await at(),Pe({tipo:"material",descricao:"",quantidade:1,valorEstimado:0,etapaId:"",subetapaId:"",observacoes:""}),oe(!1)}catch(Q){console.error("Erro ao criar solicitação:",Q),X.error("Erro ao criar solicitação")}},Qe=async Q=>{try{const _e={planejamentoId:v._id,materialId:"",nomeMaterial:Q.descricao,quantidade:Q.quantidade,status:"enviado",valorEstimado:Q.valorEstimado,solicitacaoOrigemId:Q.id,etapaVinculada:Q.etapaId,subetapaVinculada:Q.subetapaId,cotacoes:[],criadoEm:new Date().toISOString()};await Ie.entities.compras.create(_e),await Fe(Q.id,"enviado")}catch(_e){console.error("Erro ao criar solicitação de compra:",_e)}},Fe=async(Q,_e)=>{if(v)try{const Le={...v,solicitacoes:(v.solicitacoes||[]).map(Je=>Je.id===Q?{...Je,status:_e,atualizadoEm:new Date().toISOString()}:Je),atualizadoEm:new Date().toISOString()};await Ie.entities.planejamentos.update(v._id,Le),await at()}catch(Le){console.error("Erro ao atualizar status da solicitação:",Le)}},ut=async()=>{var Q;if(v)try{let _e=0;const Le=[...v.solicitacoes||[]];for(const Je of Le)if(Je.tipo==="material"){const Ye=b.find(Lt=>Lt.planejamentoId===v._id&&Lt.nomeMaterial===Je.descricao);if(Ye&&Ye.status!==Je.status){let Lt=Ye.status;Ye.status==="em_estoque"&&(Lt="entregue"),Ye.status==="na_obra"&&(Lt="entregue");const Xt=Le.findIndex(sa=>sa.id===Je.id);Xt!==-1&&(Le[Xt]={...Je,status:Lt,compraId:Ye._id,fornecedor:(Q=Ye.fornecedorEscolhido)==null?void 0:Q.nomeFornecedor,valorFinal:Ye.valorTotal,dataEntrega:Ye.dataEntrega,atualizadoEm:new Date().toISOString()},_e++)}}if(_e>0){const Je={...v,solicitacoes:Le,atualizadoEm:new Date().toISOString()};await Ie.entities.planejamentos.update(v._id,Je),X.success(`${_e} solicitações sincronizadas com compras`),await at()}else X.info("Todas as solicitações já estão sincronizadas")}catch(_e){console.error("Erro ao sincronizar com compras:",_e),X.error("Erro ao sincronizar com compras")}},je=async(Q,_e)=>{if(v)try{const Le=[...v.etapas||[]],Je=Le.findIndex(Xt=>Xt.id===Q);if(Je===-1)return;const Ye=_e==="up"?Je-1:Je+1;if(Ye<0||Ye>=Le.length)return;[Le[Je],Le[Ye]]=[Le[Ye],Le[Je]],Le.forEach((Xt,sa)=>{Xt.ordem=sa+1,Xt.numero=(sa+1).toString()});const Lt={...v,etapas:Le,atualizadoEm:new Date().toISOString()};await Ie.entities.planejamentos.update(v._id,Lt),X.success("Etapa reorganizada com sucesso"),await at()}catch(Le){console.error("Erro ao reorganizar etapa:",Le),X.error("Erro ao reorganizar etapa")}},ht=async()=>{if(!v||!st.nome||!st.etapaId){X.error("Preencha todos os campos obrigatórios");return}try{const Q={id:`atividade_${Date.now()}`,nome:st.nome,descricao:st.descricao,responsavel:st.responsavel,dataInicio:st.dataInicio,dataTermino:st.dataTermino,status:"pendente",progresso:0,observacoes:""},_e={...v},Le=(_e.etapas||[]).findIndex(Je=>Je.id===st.etapaId);if(Le===-1){X.error("Etapa não encontrada");return}if(st.tipo==="etapa")_e.etapas[Le].atividades||(_e.etapas[Le].atividades=[]),_e.etapas[Le].atividades.push(Q);else{if(!st.subetapaId){X.error("Selecione uma subetapa");return}const Je=(_e.etapas[Le].subetapas||[]).findIndex(Ye=>Ye.id===st.subetapaId);if(Je===-1){X.error("Subetapa não encontrada");return}_e.etapas[Le].subetapas[Je].atividades||(_e.etapas[Le].subetapas[Je].atividades=[]),_e.etapas[Le].subetapas[Je].atividades.push(Q)}await Ie.entities.planejamentos.update(v._id,_e),X.success("Atividade adicionada com sucesso"),await at(),Tt({tipo:"etapa",etapaId:"",subetapaId:"",nome:"",descricao:"",responsavel:"",dataInicio:"",dataTermino:""}),N(!1)}catch(Q){console.error("Erro ao adicionar atividade:",Q),X.error("Erro ao adicionar atividade")}},qe=async()=>{var Q,_e;if(!v||!ae.nome){X.error("Preencha o nome da etapa");return}try{const Le={id:`etapa_${Date.now()}`,numero:((((Q=v.etapas)==null?void 0:Q.length)||0)+1).toString(),nome:ae.nome,ordem:(((_e=v.etapas)==null?void 0:_e.length)||0)+1,status:"pendente",dataInicioPrevisao:ae.dataInicioPrevisao,dataTerminoPrevisao:ae.dataTerminoPrevisao,dataInicioReal:ae.dataInicioReal,dataTerminoReal:ae.dataTerminoReal,progresso:0,valorOrcado:0,valorRealizado:0,dependencias:ae.dependencias,subetapas:[],atividades:[]},Je={...v,etapas:[...v.etapas||[],Le],atualizadoEm:new Date().toISOString()};await Ie.entities.planejamentos.update(v._id,Je),X.success("Etapa adicionada com sucesso"),await at(),xe({nome:"",dataInicioPrevisao:"",dataTerminoPrevisao:"",dataInicioReal:"",dataTerminoReal:"",dependencias:[]}),se(!1)}catch(Le){console.error("Erro ao adicionar etapa:",Le),X.error("Erro ao adicionar etapa")}},lt=async()=>{var Q;if(!v||!be.nome||!be.etapaId){X.error("Preencha todos os campos obrigatórios");return}try{const _e={...v},Le=(_e.etapas||[]).findIndex(Lt=>Lt.id===be.etapaId);if(Le===-1){X.error("Etapa não encontrada");return}const Je=_e.etapas[Le],Ye={id:`subetapa_${Date.now()}`,numero:`${Je.numero}.${(((Q=Je.subetapas)==null?void 0:Q.length)||0)+1}`,nome:be.nome,status:"pendente",dataInicioPrevisao:be.dataInicioPrevisao,dataTerminoPrevisao:be.dataTerminoPrevisao,progresso:0,valorOrcado:0,valorRealizado:0,materiais:[],maoDeObra:[],atividades:[]};_e.etapas[Le].subetapas||(_e.etapas[Le].subetapas=[]),_e.etapas[Le].subetapas.push(Ye),await Ie.entities.planejamentos.update(v._id,_e),X.success("Subetapa adicionada com sucesso"),await at(),Te({etapaId:"",nome:"",dataInicioPrevisao:"",dataTerminoPrevisao:""}),Y(!1)}catch(_e){console.error("Erro ao adicionar subetapa:",_e),X.error("Erro ao adicionar subetapa")}},de=async()=>{var Q,_e;if(!v||!Ae.insumoId||!Ae.etapaId||!Ae.subetapaId){X.error("Preencha todos os campos obrigatórios");return}try{const Le=i.find(sa=>sa._id===Ae.insumoId);if(!Le){X.error("Insumo não encontrado");return}const Je={...v},Ye=(Je.etapas||[]).findIndex(sa=>sa.id===Ae.etapaId);if(Ye===-1){X.error("Etapa não encontrada");return}const Lt=(((_e=(Q=Je.etapas)==null?void 0:Q[Ye])==null?void 0:_e.subetapas)||[]).findIndex(sa=>sa.id===Ae.subetapaId);if(Lt===-1){X.error("Subetapa não encontrada");return}const Xt={insumoId:Le._id,nome:Le.nome,unidadeMedida:Le.unidadeMedida,quantidadeNecessaria:Ae.quantidade,quantidadeDisponivel:Na(Le.estoque),quantidadeSolicitada:0,valorUnitario:Na(Le.precoUnitario),valorTotal:Ae.quantidade*Na(Le.precoUnitario),statusCompra:Le.estoque&&Le.estoque>=Ae.quantidade?"disponivel":"enviado",solicitacaoCompraId:""};Je.etapas[Ye].subetapas[Lt].materiais||(Je.etapas[Ye].subetapas[Lt].materiais=[]),Je.etapas[Ye].subetapas[Lt].materiais.push(Xt),await Ie.entities.planejamentos.update(v._id,Je),X.success("Material adicionado com sucesso"),await at(),tt({etapaId:"",subetapaId:"",insumoId:"",quantidade:1}),fe(!1)}catch(Le){console.error("Erro ao adicionar material:",Le),X.error("Erro ao adicionar material")}},nt=async()=>{var Q,_e;if(!v||!rt.funcionarioId||!rt.etapaId||!rt.subetapaId){X.error("Preencha todos os campos obrigatórios");return}try{const Le=n.find(sa=>sa._id===rt.funcionarioId);if(!Le){X.error("Funcionário não encontrado");return}const Je={...v},Ye=(Je.etapas||[]).findIndex(sa=>sa.id===rt.etapaId);if(Ye===-1){X.error("Etapa não encontrada");return}const Lt=(((_e=(Q=Je.etapas)==null?void 0:Q[Ye])==null?void 0:_e.subetapas)||[]).findIndex(sa=>sa.id===rt.subetapaId);if(Lt===-1){X.error("Subetapa não encontrada");return}const Xt={funcionarioId:Le._id,nome:Le.nome,funcao:Le.funcao,quantidade:rt.quantidade,valorHora:Na(Le.valorHora),horasPrevisao:rt.horasPrevisao,horasRealizadas:0,valorTotal:rt.quantidade*Na(Le.valorHora)*rt.horasPrevisao};Je.etapas[Ye].subetapas[Lt].maoDeObra||(Je.etapas[Ye].subetapas[Lt].maoDeObra=[]),Je.etapas[Ye].subetapas[Lt].maoDeObra.push(Xt),await Ie.entities.planejamentos.update(v._id,Je),X.success("Mão de obra adicionada com sucesso"),await at(),gt({etapaId:"",subetapaId:"",funcionarioId:"",quantidade:1,horasPrevisao:8}),$(!1)}catch(Le){console.error("Erro ao adicionar mão de obra:",Le),X.error("Erro ao adicionar mão de obra")}},Nt=async(Q,_e)=>{if(v)try{const Le={...v},Je=(Le.etapas||[]).findIndex(Ye=>Ye.id===Q);if(Je===-1)return;Le.etapas[Je].status=_e,_e==="em_andamento"?Le.etapas[Je].dataInicioReal=new Date().toISOString():_e==="concluida"&&(Le.etapas[Je].dataTerminoReal=new Date().toISOString(),Le.etapas[Je].progresso=100),await Ie.entities.planejamentos.update(v._id,Le),X.success("Status da etapa atualizado"),await at()}catch(Le){console.error("Erro ao atualizar status:",Le),X.error("Erro ao atualizar status")}},A=Q=>{var _e,Le,Je,Ye;dt(Q),xe({nome:Q.nome,dataInicioPrevisao:((_e=Q.dataInicioPrevisao)==null?void 0:_e.split("T")[0])||"",dataTerminoPrevisao:((Le=Q.dataTerminoPrevisao)==null?void 0:Le.split("T")[0])||"",dataInicioReal:((Je=Q.dataInicioReal)==null?void 0:Je.split("T")[0])||"",dataTerminoReal:((Ye=Q.dataTerminoReal)==null?void 0:Ye.split("T")[0])||"",dependencias:Q.dependencias||[]}),Ce(!0)},ue=Q=>{var Le;const _e=(Le=v==null?void 0:v.etapas)==null?void 0:Le.find(Je=>Je.id===Q);_e?(Me(Q),xe({...ae,dependencias:_e.dependencias||[]}),he(!0)):X.error("Etapa não encontrada")},ke=()=>{var Q;if(!v){X.error("Selecione uma obra para gerar o relatório");return}try{X.loading("Gerando relatório PDF...",{id:"pdf-gen"});const _e=new Rt,Le=_e.internal.pageSize.width,Je=20;let Ye=Je;_e.setFontSize(20),_e.setFont("helvetica","bold"),_e.text("RELATÓRIO DETALHADO DE OBRA",Le/2,Ye,{align:"center"}),Ye+=20,_e.setFontSize(14),_e.setFont("helvetica","bold"),_e.text("INFORMAÇÕES GERAIS",Je,Ye),Ye+=10,_e.setFontSize(12),_e.setFont("helvetica","normal"),_e.text(`Projeto: ${v.nomeProjeto}`,Je,Ye),Ye+=8,_e.text(`Cliente: ${v.cliente}`,Je,Ye),Ye+=8,_e.text(`Status: ${v.status.replace("_"," ")}`,Je,Ye),Ye+=8,_e.text(`Progresso: ${v.progresso}%`,Je,Ye),Ye+=8,_e.text(`Valor Orçado: ${ja(v.valorOrcado)}`,Je,Ye),Ye+=8,_e.text(`Valor Realizado: ${ja(v.valorRealizado)}`,Je,Ye),Ye+=8,_e.text(`Data Início: ${mn(v.dataInicio)}`,Je,Ye),Ye+=8,_e.text(`Previsão Término: ${mn(v.dataPrevisaoTermino)}`,Je,Ye),Ye+=15;const Lt=d.filter(Zt=>Zt.planejamentoId===v._id),Xt=Lt.length>0?Lt.reduce((Zt,li)=>{var Eo;return Zt+(((Eo=li.medicao)==null?void 0:Eo.percentualConcluido)||0)},0)/Lt.length:0;_e.setFontSize(14),_e.setFont("helvetica","bold"),_e.text("ANÁLISE DIÁRIO DE OBRA",Je,Ye),Ye+=10,_e.setFontSize(12),_e.setFont("helvetica","normal"),_e.text(`Diários Registrados: ${Lt.length}`,Je,Ye),Ye+=8,_e.text(`Progresso Médio (Diários): ${Math.round(Xt)}%`,Je,Ye),Ye+=15,_e.setFontSize(14),_e.setFont("helvetica","bold"),_e.text("RESUMO DE ETAPAS",Je,Ye),Ye+=10;const sa=v.etapas||[],Lr=sa.filter(Zt=>Zt.status==="concluida").length,Zs=sa.filter(Zt=>Zt.status==="em_andamento").length,vs=sa.filter(Zt=>Zt.status==="atrasada").length;_e.setFontSize(12),_e.setFont("helvetica","normal"),_e.text(`Total de Etapas: ${sa.length}`,Je,Ye),Ye+=8,_e.text(`Etapas Concluídas: ${Lr}`,Je,Ye),Ye+=8,_e.text(`Etapas em Andamento: ${Zs}`,Je,Ye),Ye+=8,_e.text(`Etapas Atrasadas: ${vs}`,Je,Ye),Ye+=15;const _o=((Q=v.alertas)==null?void 0:Q.filter(Zt=>!Zt.lido))||[];_o.length>0&&(_e.setFontSize(14),_e.setFont("helvetica","bold"),_e.text("ALERTAS PENDENTES",Je,Ye),Ye+=10,_e.setFontSize(12),_e.setFont("helvetica","normal"),_e.text(`Total de Alertas: ${_o.length}`,Je,Ye),Ye+=15),_e.setFontSize(14),_e.setFont("helvetica","bold"),_e.text("ANÁLISE FINANCEIRA",Je,Ye),Ye+=10;const Cl=Na(v.valorRealizado)-Na(v.valorOrcado),An=Na(v.progresso);_e.setFontSize(12),_e.setFont("helvetica","normal"),_e.text(`Variação Orçamentária: ${ja(Cl)}`,Je,Ye),Ye+=8,_e.text(`Percentual Executado: ${An}%`,Je,Ye),Ye+=8,_e.setFontSize(10),_e.setFont("helvetica","italic"),_e.text(`Relatório gerado em: ${new Date().toLocaleString("pt-BR")}`,Je,_e.internal.pageSize.height-20);const Al=`relatorio_${v.nomeProjeto.replace(/\s+/g,"_")}_${new Date().toISOString().split("T")[0]}.pdf`;_e.save(Al),X.success("Relatório PDF gerado e baixado com sucesso!",{id:"pdf-gen"})}catch(_e){console.error("Erro ao gerar relatório PDF:",_e),X.error("Erro ao gerar relatório PDF",{id:"pdf-gen"})}},Ve=()=>{var Q,_e;if(!v){X.error("Selecione uma obra para gerar o relatório executivo");return}try{X.loading("Gerando relatório executivo...",{id:"exec-report"});const Le=new Rt,Je=Le.internal.pageSize.width,Ye=20;let Lt=Ye;Le.setFontSize(18),Le.setFont("helvetica","bold"),Le.text("RELATÓRIO EXECUTIVO",Je/2,Lt,{align:"center"}),Lt+=15,Le.setFontSize(14),Le.setFont("helvetica","bold"),Le.text("RESUMO EXECUTIVO",Ye,Lt),Lt+=10,Le.setFontSize(11),Le.setFont("helvetica","normal");const Xt=`O projeto "${v.nomeProjeto}" encontra-se ${v.progresso}% concluído.`;Le.text(Xt,Ye,Lt,{maxWidth:Je-2*Ye}),Lt+=15,Le.setFontSize(14),Le.setFont("helvetica","bold"),Le.text("INDICADORES PRINCIPAIS",Ye,Lt),Lt+=10,Le.setFontSize(11),Le.setFont("helvetica","normal"),[`• Progresso Geral: ${v.progresso}%`,`• Orçamento: ${ja(v.valorOrcado)}`,`• Realizado: ${ja(v.valorRealizado)}`,`• Etapas: ${((Q=v.etapas)==null?void 0:Q.length)||0} total`,`• Concluídas: ${((_e=v.etapas)==null?void 0:_e.filter(vs=>vs.status==="concluida").length)||0}`,`• Status: ${v.status.replace("_"," ")}`].forEach(vs=>{Le.text(vs,Ye,Lt),Lt+=8}),Lt+=10,Le.setFontSize(14),Le.setFont("helvetica","bold"),Le.text("PRÓXIMOS PASSOS",Ye,Lt),Lt+=10,Le.setFontSize(11),Le.setFont("helvetica","normal"),["• Monitorar progresso das etapas em andamento","• Acompanhar entregas de materiais","• Revisar cronograma conforme necessário","• Manter comunicação com fornecedores"].forEach(vs=>{Le.text(vs,Ye,Lt),Lt+=8}),Le.setFontSize(10),Le.setFont("helvetica","italic"),Le.text(`Relatório executivo gerado em: ${new Date().toLocaleString("pt-BR")}`,Ye,Le.internal.pageSize.height-20);const Zs=`relatorio_executivo_${v.nomeProjeto.replace(/\s+/g,"_")}_${new Date().toISOString().split("T")[0]}.pdf`;Le.save(Zs),X.success("Relatório executivo gerado e baixado com sucesso!",{id:"exec-report"})}catch(Le){console.error("Erro ao gerar relatório executivo:",Le),X.error("Erro ao gerar relatório executivo",{id:"exec-report"})}},St=async Q=>{try{const _e=r.find(Je=>Je._id===Q);if(!_e){X.error("Contrato não encontrado");return}const Le={contratoId:_e._id,orcamentoId:_e.orcamentoOrigemId||"",nomeProjeto:_e.nomeProjeto,cliente:_e.cliente,status:"planejamento",dataInicio:new Date().toISOString(),dataPrevisaoTermino:new Date(Date.now()+90*24*60*60*1e3).toISOString(),valorOrcado:_e.valorTotal,valorRealizado:0,progresso:0,etapas:[],alertas:[],solicitacoes:[],observacoes:`Planejamento criado automaticamente a partir do contrato ${_e._id}`,criadoEm:new Date().toISOString(),atualizadoEm:new Date().toISOString()};await Ie.entities.planejamentos.create(Le),X.success("Planejamento criado com sucesso a partir do contrato!"),await at(),G(!1)}catch(_e){console.error("Erro ao criar planejamento:",_e),X.error("Erro ao criar planejamento")}},ot=()=>v?h.filter(_e=>{var Le;return _e.planejamentoId===v._id&&_e.tipo==="despesa"&&((Le=_e.categoria)==null?void 0:Le.toLowerCase().includes("administrativo"))}).reduce((_e,Le)=>_e+Na(Le.valor),0):0,yt=()=>v?(v.etapas||[]).reduce((Q,_e)=>Q+(_e.subetapas||[]).reduce((Le,Je)=>Le+(Je.maoDeObra||[]).reduce((Ye,Lt)=>Ye+Na(Lt.valorTotal),0),0),0):0,Dt=()=>v?(v.etapas||[]).reduce((Q,_e)=>Q+(_e.subetapas||[]).reduce((Le,Je)=>Le+(Je.materiais||[]).reduce((Ye,Lt)=>Ye+Na(Lt.valorTotal),0),0),0):0,V=()=>{if(!v)return 0;const Q=Na(v.valorOrcado),_e=yt(),Le=Dt(),Je=ot();return Q-_e-Le-Je},He={obrasAndamento:e.filter(Q=>(Q==null?void 0:Q.status)==="em_andamento").length,progressoGeral:e.length>0?Math.round(e.reduce((Q,_e)=>Q+Na(_e==null?void 0:_e.progresso),0)/e.length):0,saldoTotal:e.reduce((Q,_e)=>Q+Na(_e==null?void 0:_e.valorOrcado),0),saldoComprometido:e.reduce((Q,_e)=>Q+Na(_e==null?void 0:_e.valorRealizado),0),saldoReceber:e.reduce((Q,_e)=>Q+(Na(_e==null?void 0:_e.valorOrcado)-Na(_e==null?void 0:_e.valorRealizado)),0)},ze=v?{progressoObra:Na(v.progresso),valorOrcadoObra:Na(v.valorOrcado),valorRealizadoObra:Na(v.valorRealizado),etapasTotal:((Jt=v.etapas)==null?void 0:Jt.length)||0,etapasConcluidas:((ma=v.etapas)==null?void 0:ma.filter(Q=>Q.status==="concluida").length)||0,custoMaoDeObra:yt(),custoMateriais:Dt(),custosAdministrativos:ot(),lucroLiquido:V(),solicitacoesPendentes:((F=v.solicitacoes)==null?void 0:F.filter(Q=>Q.status==="pendente").length)||0,solicitacoesAprovadas:((Ge=v.solicitacoes)==null?void 0:Ge.filter(Q=>Q.status==="aprovado"||Q.status==="entregue").length)||0}:null,vt=((Re=v==null?void 0:v.alertas)==null?void 0:Re.filter(Q=>!(Q!=null&&Q.lido)))||[],xt=((bt=v==null?void 0:v.etapas)==null?void 0:bt.filter(Q=>(Q==null?void 0:Q.status)==="concluida"||!(Q!=null&&Q.dataTerminoPrevisao)?!1:new Date(Q.dataTerminoPrevisao)<new Date))||[],qt=()=>{var Le;if(!((Le=v==null?void 0:v.etapas)!=null&&Le.length))return null;const Q=new Date,_e=v.etapas;return t.jsx("div",{className:"space-y-2",children:_e.map(Je=>{const Ye=Je.dataInicioPrevisao?new Date(Je.dataInicioPrevisao):Q,Lt=Je.dataTerminoPrevisao?new Date(Je.dataTerminoPrevisao):Q,Xt=Math.max(1,Math.ceil((Lt.getTime()-Ye.getTime())/(1e3*60*60*24)));return t.jsxs("div",{className:"flex items-center space-x-4 p-2 bg-gray-50 rounded",children:[t.jsx("div",{className:"w-32 text-sm font-medium truncate",children:Je.nome}),t.jsx("div",{className:"flex-1 bg-gray-200 rounded-full h-6 relative",children:t.jsx("div",{className:`h-full rounded-full ${Je.status==="concluida"?"bg-green-500":Je.status==="em_andamento"?"bg-blue-500":Je.status==="atrasada"?"bg-red-500":"bg-gray-400"}`,style:{width:`${Math.min(100,Math.max(10,Xt*2))}%`},children:t.jsxs("span",{className:"absolute inset-0 flex items-center justify-center text-xs text-white font-medium",children:[Je.progresso,"%"]})})}),t.jsxs("div",{className:"text-xs text-gray-500",children:[mn(Je.dataInicioPrevisao)," - ",mn(Je.dataTerminoPrevisao)]})]},Je.id)})})};return w?t.jsx("div",{className:"flex items-center justify-center h-64",children:t.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Planejamento de Obra"}),t.jsx("p",{className:"text-gray-600",children:"Gerencie cronogramas, materiais, mão de obra e solicitações de compra"})]}),t.jsxs("div",{className:"flex space-x-3",children:[vt.length>0&&t.jsxs("button",{onClick:()=>Ue(!0),className:"bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 flex items-center space-x-2 relative",children:[t.jsx(fo,{className:"h-4 w-4"}),t.jsx("span",{children:"Alertas"}),t.jsx("span",{className:"absolute -top-2 -right-2 bg-yellow-500 text-xs rounded-full h-5 w-5 flex items-center justify-center",children:vt.length})]}),t.jsxs("button",{onClick:()=>Be(!0),className:"bg-orange-600 text-white px-4 py-2 rounded-lg hover:bg-orange-700 flex items-center space-x-2",children:[t.jsx(rl,{className:"h-4 w-4"}),t.jsx("span",{children:"Solicitações"}),(ze==null?void 0:ze.solicitacoesPendentes)>0&&t.jsx("span",{className:"bg-red-500 text-xs rounded-full h-5 w-5 flex items-center justify-center",children:ze.solicitacoesPendentes})]}),t.jsxs("button",{onClick:ut,className:"bg-purple-600 text-white px-4 py-2 rounded-lg hover:bg-purple-700 flex items-center space-x-2",children:[t.jsx(vl,{className:"h-4 w-4"}),t.jsx("span",{children:"Sincronizar"})]}),t.jsxs("button",{onClick:()=>G(!0),className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 flex items-center space-x-2",children:[t.jsx(qa,{className:"h-4 w-4"}),t.jsx("span",{children:"Contratos Aprovados"})]}),t.jsxs("button",{onClick:()=>le(!0),className:"bg-purple-600 text-white px-4 py-2 rounded-lg hover:bg-purple-700 flex items-center space-x-2",children:[t.jsx(Ga,{className:"h-4 w-4"}),t.jsx("span",{children:"Cronograma"})]}),t.jsxs("button",{onClick:()=>we(!0),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 flex items-center space-x-2",children:[t.jsx(xl,{className:"h-4 w-4"}),t.jsx("span",{children:"Relatórios"})]})]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-6 gap-6",children:[t.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx(xo,{className:"h-8 w-8 text-blue-600"}),t.jsxs("div",{className:"ml-4",children:[t.jsx("p",{className:"text-sm font-medium text-gray-600",children:v?"Progresso da Obra":"Obras em Andamento"}),t.jsx("p",{className:"text-2xl font-bold text-gray-900",children:v?`${ze==null?void 0:ze.progressoObra}%`:He.obrasAndamento})]})]})}),t.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx(Jc,{className:"h-8 w-8 text-green-600"}),t.jsxs("div",{className:"ml-4",children:[t.jsx("p",{className:"text-sm font-medium text-gray-600",children:v?"Etapas Concluídas":"Progresso Geral"}),t.jsx("p",{className:"text-2xl font-bold text-gray-900",children:v?`${ze==null?void 0:ze.etapasConcluidas}/${ze==null?void 0:ze.etapasTotal}`:`${He.progressoGeral}%`})]})]})}),t.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx(Ts,{className:"h-8 w-8 text-purple-600"}),t.jsxs("div",{className:"ml-4",children:[t.jsx("p",{className:"text-sm font-medium text-gray-600",children:v?"Valor Orçado":"Saldo Total"}),t.jsx("p",{className:"text-2xl font-bold text-gray-900",children:ja(v?ze==null?void 0:ze.valorOrcadoObra:He.saldoTotal)})]})]})}),t.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx(ro,{className:"h-8 w-8 text-orange-600"}),t.jsxs("div",{className:"ml-4",children:[t.jsx("p",{className:"text-sm font-medium text-gray-600",children:v?"Custos Administrativos":"Saldo Comprometido"}),t.jsx("p",{className:"text-2xl font-bold text-gray-900",children:ja(v?ze==null?void 0:ze.custosAdministrativos:He.saldoComprometido)})]})]})}),t.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx(k0,{className:"h-8 w-8 text-green-600"}),t.jsxs("div",{className:"ml-4",children:[t.jsx("p",{className:"text-sm font-medium text-gray-600",children:v?"Lucro Líquido":"Saldo a Receber"}),t.jsx("p",{className:`text-2xl font-bold ${v?((ze==null?void 0:ze.lucroLiquido)||0)>=0?"text-green-600":"text-red-600":"text-gray-900"}`,children:ja(v?ze==null?void 0:ze.lucroLiquido:He.saldoReceber)})]})]})}),t.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx(rl,{className:"h-8 w-8 text-blue-600"}),t.jsxs("div",{className:"ml-4",children:[t.jsx("p",{className:"text-sm font-medium text-gray-600",children:v?"Solicitações":"Saldo Restante"}),t.jsx("p",{className:"text-2xl font-bold text-gray-900",children:v?`${ze==null?void 0:ze.solicitacoesPendentes}/${((Ot=v.solicitacoes)==null?void 0:Ot.length)||0}`:ja(He.saldoReceber)}),v&&t.jsxs("p",{className:"text-xs text-gray-500",children:[ze==null?void 0:ze.solicitacoesAprovadas," aprovadas"]})]})]})})]}),t.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:t.jsxs("div",{className:"flex items-center space-x-4",children:[t.jsx(K2,{className:"h-5 w-5 text-gray-500"}),t.jsxs("select",{value:O,onChange:Q=>y(Q.target.value),className:"flex-1 border border-gray-300 rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500",children:[t.jsx("option",{value:"",children:"Selecione uma obra"}),e.map(Q=>t.jsxs("option",{value:Q._id,children:[Q.nomeProjeto," - ",Q.cliente]},Q._id))]})]})}),v&&t.jsxs(t.Fragment,{children:[(vt.length>0||xt.length>0)&&t.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:[t.jsxs("div",{className:"flex items-center",children:[t.jsx(po,{className:"h-5 w-5 text-yellow-600 mr-2"}),t.jsx("h3",{className:"text-sm font-medium text-yellow-800",children:"Alertas Importantes"})]}),t.jsxs("div",{className:"mt-2 text-sm text-yellow-700",children:[vt.length>0&&t.jsxs("div",{children:["• ",vt.length," alertas não lidos"]}),xt.length>0&&t.jsxs("div",{children:["• ",xt.length," etapas atrasadas"]})]})]}),t.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:v.nomeProjeto}),t.jsx("p",{className:"text-gray-600",children:v.cliente}),t.jsxs("p",{className:"text-sm text-gray-500",children:["Status: ",t.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${v.status==="em_andamento"?"bg-green-100 text-green-800":v.status==="planejamento"?"bg-blue-100 text-blue-800":v.status==="pausado"?"bg-yellow-100 text-yellow-800":v.status==="concluido"?"bg-purple-100 text-purple-800":"bg-red-100 text-red-800"}`,children:v.status.replace("_"," ")})]})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-600",children:"Progresso"}),t.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 mt-1",children:t.jsx("div",{className:"bg-blue-600 h-2 rounded-full",style:{width:`${Na(v.progresso)}%`}})}),t.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:[Na(v.progresso),"%"]})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-600",children:"Valor Orçado"}),t.jsx("p",{className:"text-lg font-semibold text-gray-900",children:ja(v.valorOrcado)})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-600",children:"Valor Realizado"}),t.jsx("p",{className:"text-lg font-semibold text-gray-900",children:ja(v.valorRealizado)})]})]})}),ze&&t.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[t.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Análise Financeira Detalhada"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-6",children:[t.jsxs("div",{className:"text-center",children:[t.jsx("p",{className:"text-sm text-gray-600",children:"Custo Mão de Obra"}),t.jsx("p",{className:"text-xl font-bold text-blue-600",children:ja(ze.custoMaoDeObra)})]}),t.jsxs("div",{className:"text-center",children:[t.jsx("p",{className:"text-sm text-gray-600",children:"Custo Materiais"}),t.jsx("p",{className:"text-xl font-bold text-purple-600",children:ja(ze.custoMateriais)})]}),t.jsxs("div",{className:"text-center",children:[t.jsx("p",{className:"text-sm text-gray-600",children:"Custos Administrativos"}),t.jsx("p",{className:"text-xl font-bold text-orange-600",children:ja(ze.custosAdministrativos)})]}),t.jsxs("div",{className:"text-center",children:[t.jsx("p",{className:"text-sm text-gray-600",children:"Custo Total"}),t.jsx("p",{className:"text-xl font-bold text-red-600",children:ja(ze.custoMaoDeObra+ze.custoMateriais+ze.custosAdministrativos)})]}),t.jsxs("div",{className:"text-center",children:[t.jsx("p",{className:"text-sm text-gray-600",children:"Lucro Líquido"}),t.jsx("p",{className:`text-xl font-bold ${ze.lucroLiquido>=0?"text-green-600":"text-red-600"}`,children:ja(ze.lucroLiquido)})]})]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-6 gap-6",children:[t.jsx("button",{onClick:()=>oe(!0),className:"bg-white rounded-lg shadow p-6 hover:shadow-md transition-shadow text-left",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx(rl,{className:"h-8 w-8 text-orange-600"}),t.jsxs("div",{className:"ml-4",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Solicitar Compra"}),t.jsx("p",{className:"text-gray-600",children:"Material/Mão de obra"})]})]})}),t.jsx("button",{onClick:()=>se(!0),className:"bg-white rounded-lg shadow p-6 hover:shadow-md transition-shadow text-left",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx(Ga,{className:"h-8 w-8 text-blue-600"}),t.jsxs("div",{className:"ml-4",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Gerenciar Etapas"}),t.jsx("p",{className:"text-gray-600",children:"Adicionar etapas"})]})]})}),t.jsx("button",{onClick:()=>Y(!0),className:"bg-white rounded-lg shadow p-6 hover:shadow-md transition-shadow text-left",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx(Qi,{className:"h-8 w-8 text-indigo-600"}),t.jsxs("div",{className:"ml-4",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Subetapas"}),t.jsx("p",{className:"text-gray-600",children:"Gerenciar subetapas"})]})]})}),t.jsx("button",{onClick:()=>N(!0),className:"bg-white rounded-lg shadow p-6 hover:shadow-md transition-shadow text-left",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx(cf,{className:"h-8 w-8 text-emerald-600"}),t.jsxs("div",{className:"ml-4",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Atividades"}),t.jsx("p",{className:"text-gray-600",children:"Adicionar atividades"})]})]})}),t.jsx("button",{onClick:()=>fe(!0),className:"bg-white rounded-lg shadow p-6 hover:shadow-md transition-shadow text-left",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx(Qr,{className:"h-8 w-8 text-green-600"}),t.jsxs("div",{className:"ml-4",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Materiais"}),t.jsx("p",{className:"text-gray-600",children:"Gerenciar materiais"})]})]})}),t.jsx("button",{onClick:()=>$(!0),className:"bg-white rounded-lg shadow p-6 hover:shadow-md transition-shadow text-left",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx(qr,{className:"h-8 w-8 text-purple-600"}),t.jsxs("div",{className:"ml-4",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Mão de Obra"}),t.jsx("p",{className:"text-gray-600",children:"Alocar funcionários"})]})]})})]}),t.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[t.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 flex justify-between items-center",children:[t.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Etapas do Projeto"}),t.jsxs("button",{onClick:()=>T(!0),className:"bg-gray-600 text-white px-4 py-2 rounded-lg hover:bg-gray-700 flex items-center space-x-2",children:[t.jsx(Dm,{className:"h-4 w-4"}),t.jsx("span",{children:"Reorganizar"})]})]}),t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[t.jsx("thead",{className:"bg-gray-50",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Etapa"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Progresso"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Previsão"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Real"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Atividades"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Dependências"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Ações"})]})}),t.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:(v.etapas||[]).map(Q=>{var _e,Le,Je;return t.jsxs("tr",{className:"hover:bg-gray-50",children:[t.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[t.jsxs("div",{className:"text-sm font-medium text-gray-900",children:[Q.numero,". ",Q.nome]}),t.jsxs("div",{className:"text-xs text-gray-500",children:[((_e=Q.subetapas)==null?void 0:_e.length)||0," subetapas"]})]}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.jsxs("select",{value:Q.status||"pendente",onChange:Ye=>Nt(Q.id,Ye.target.value),className:`text-sm rounded-full px-3 py-1 font-medium border-0 focus:ring-2 focus:ring-offset-2 ${Q.status==="concluida"?"bg-green-100 text-green-800 focus:ring-green-500":Q.status==="em_andamento"?"bg-blue-100 text-blue-800 focus:ring-blue-500":Q.status==="atrasada"?"bg-red-100 text-red-800 focus:ring-red-500":"bg-gray-100 text-gray-800 focus:ring-gray-500"}`,children:[t.jsx("option",{value:"pendente",children:"Pendente"}),t.jsx("option",{value:"em_andamento",children:"Em Andamento"}),t.jsx("option",{value:"concluida",children:"Concluída"}),t.jsx("option",{value:"atrasada",children:"Atrasada"})]})}),t.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[t.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:t.jsx("div",{className:"bg-blue-600 h-2 rounded-full",style:{width:`${Na(Q.progresso)}%`}})}),t.jsxs("span",{className:"text-xs text-gray-500",children:[Na(Q.progresso),"%"]})]}),t.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[Q.dataInicioPrevisao&&t.jsx("div",{children:mn(Q.dataInicioPrevisao)}),Q.dataTerminoPrevisao&&t.jsxs("div",{className:"text-xs text-gray-500",children:["até ",mn(Q.dataTerminoPrevisao)]})]}),t.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[Q.dataInicioReal&&t.jsx("div",{children:mn(Q.dataInicioReal)}),Q.dataTerminoReal&&t.jsxs("div",{className:"text-xs text-gray-500",children:["até ",mn(Q.dataTerminoReal)]})]}),t.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:[((Le=Q.atividades)==null?void 0:Le.length)||0," atividades",(Q.subetapas||[]).reduce((Ye,Lt)=>{var Xt;return Ye+(((Xt=Lt.atividades)==null?void 0:Xt.length)||0)},0)>0&&t.jsxs("div",{className:"text-xs",children:["+",(Q.subetapas||[]).reduce((Ye,Lt)=>{var Xt;return Ye+(((Xt=Lt.atividades)==null?void 0:Xt.length)||0)},0)," em subetapas"]})]}),t.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:[((Je=Q.dependencias)==null?void 0:Je.length)||0," dependências"]}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:t.jsxs("div",{className:"flex space-x-2",children:[t.jsx("button",{onClick:()=>A(Q),className:"text-blue-600 hover:text-blue-900",title:"Editar",children:t.jsx(gs,{className:"h-4 w-4"})}),t.jsx("button",{className:"text-purple-600 hover:text-purple-900",title:"Dependências",onClick:()=>ue(Q.id),children:t.jsx(G4,{className:"h-4 w-4"})}),t.jsx("button",{onClick:()=>je(Q.id,"up"),className:"text-green-600 hover:text-green-900",title:"Mover para cima",children:t.jsx(F4,{className:"h-4 w-4"})}),t.jsx("button",{onClick:()=>je(Q.id,"down"),className:"text-orange-600 hover:text-orange-900",title:"Mover para baixo",children:t.jsx(M4,{className:"h-4 w-4"})})]})})]},Q.id)})})]})})]})]}),B&&t.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:t.jsx("div",{className:"relative top-20 mx-auto p-5 border w-full max-w-2xl shadow-lg rounded-md bg-white",children:t.jsxs("div",{className:"mt-3",children:[t.jsxs("div",{className:"flex justify-between items-center mb-4",children:[t.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Nova Solicitação de Compra/Contratação"}),t.jsx("button",{onClick:()=>oe(!1),className:"text-gray-400 hover:text-gray-600",children:t.jsx($t,{className:"h-5 w-5"})})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Tipo"}),t.jsxs("select",{value:ne.tipo,onChange:Q=>Pe({...ne,tipo:Q.target.value}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500",children:[t.jsx("option",{value:"material",children:"Material"}),t.jsx("option",{value:"mao_obra",children:"Mão de Obra"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Descrição"}),t.jsx("input",{type:"text",value:ne.descricao,onChange:Q=>Pe({...ne,descricao:Q.target.value}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Descreva o item ou serviço",required:!0})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Quantidade"}),t.jsx("input",{type:"number",value:ne.quantidade,onChange:Q=>Pe({...ne,quantidade:Number(Q.target.value)}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500",min:"1",required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Valor Estimado"}),t.jsx("input",{type:"number",step:"0.01",value:ne.valorEstimado,onChange:Q=>Pe({...ne,valorEstimado:Number(Q.target.value)}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"R$ 0,00"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Etapa"}),t.jsxs("select",{value:ne.etapaId,onChange:Q=>Pe({...ne,etapaId:Q.target.value,subetapaId:""}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500",required:!0,children:[t.jsx("option",{value:"",children:"Selecione uma etapa"}),((v==null?void 0:v.etapas)||[]).map(Q=>t.jsxs("option",{value:Q.id,children:[Q.numero,". ",Q.nome]},Q.id))]})]}),ne.etapaId&&t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Subetapa (Opcional)"}),t.jsxs("select",{value:ne.subetapaId,onChange:Q=>Pe({...ne,subetapaId:Q.target.value}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500",children:[t.jsx("option",{value:"",children:"Nenhuma subetapa"}),(((Pt=v==null?void 0:v.etapas.find(Q=>Q.id===ne.etapaId))==null?void 0:Pt.subetapas)||[]).map(Q=>t.jsxs("option",{value:Q.id,children:[Q.numero,". ",Q.nome]},Q.id))]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Observações"}),t.jsx("textarea",{value:ne.observacoes,onChange:Q=>Pe({...ne,observacoes:Q.target.value}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500",rows:3,placeholder:"Informações adicionais..."})]}),t.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[t.jsx("button",{onClick:()=>oe(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 border border-gray-300 rounded-md hover:bg-gray-200",children:"Cancelar"}),t.jsxs("button",{onClick:k,className:"px-4 py-2 text-sm font-medium text-white bg-orange-600 border border-transparent rounded-md hover:bg-orange-700 flex items-center space-x-2",children:[t.jsx(dm,{className:"h-4 w-4"}),t.jsx("span",{children:"Enviar Solicitação"})]})]})]})]})})}),Ne&&t.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:t.jsx("div",{className:"relative top-10 mx-auto p-5 border w-full max-w-6xl shadow-lg rounded-md bg-white",children:t.jsxs("div",{className:"mt-3",children:[t.jsxs("div",{className:"flex justify-between items-center mb-4",children:[t.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Solicitações de Compra/Contratação"}),t.jsxs("div",{className:"flex space-x-2",children:[t.jsxs("button",{onClick:ut,className:"bg-purple-600 text-white px-3 py-1 rounded hover:bg-purple-700 flex items-center space-x-1",children:[t.jsx(vl,{className:"h-4 w-4"}),t.jsx("span",{children:"Sincronizar"})]}),t.jsx("button",{onClick:()=>Be(!1),className:"text-gray-400 hover:text-gray-600",children:t.jsx($t,{className:"h-5 w-5"})})]})]}),t.jsxs("div",{className:"overflow-x-auto",children:[t.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[t.jsx("thead",{className:"bg-gray-50",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tipo"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Descrição"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Quantidade"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Valor Estimado"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Etapa"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Fornecedor"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Valor Final"})]})}),t.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:((v==null?void 0:v.solicitacoes)||[]).map(Q=>{var Le;const _e=(Le=v==null?void 0:v.etapas)==null?void 0:Le.find(Je=>Je.id===Q.etapaId);return t.jsxs("tr",{className:"hover:bg-gray-50",children:[t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${Q.tipo==="material"?"bg-blue-100 text-blue-800":"bg-green-100 text-green-800"}`,children:Q.tipo==="material"?"Material":"Mão de Obra"})}),t.jsxs("td",{className:"px-6 py-4",children:[t.jsx("div",{className:"text-sm font-medium text-gray-900",children:Q.descricao}),Q.observacoes&&t.jsx("div",{className:"text-xs text-gray-500",children:Q.observacoes})]}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:Q.quantidade}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:ja(Q.valorEstimado)}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:(_e==null?void 0:_e.nome)||"Etapa não encontrada"}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${x6[Q.status]}`,children:g6[Q.status]})}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:Q.fornecedor||"-"}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:Q.valorFinal?ja(Q.valorFinal):"-"})]},Q.id)})})]}),(!(v!=null&&v.solicitacoes)||v.solicitacoes.length===0)&&t.jsx("div",{className:"text-center py-8 text-gray-500",children:"Nenhuma solicitação encontrada"})]})]})})}),S&&t.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:t.jsx("div",{className:"relative top-20 mx-auto p-5 border w-full max-w-4xl shadow-lg rounded-md bg-white",children:t.jsxs("div",{className:"mt-3",children:[t.jsxs("div",{className:"flex justify-between items-center mb-4",children:[t.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Contratos Aprovados"}),t.jsx("button",{onClick:()=>G(!1),className:"text-gray-400 hover:text-gray-600",children:t.jsx($t,{className:"h-5 w-5"})})]}),t.jsxs("div",{className:"overflow-x-auto",children:[t.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[t.jsx("thead",{className:"bg-gray-50",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Projeto"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Cliente"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Valor Total"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Data Assinatura"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Ações"})]})}),t.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:r.map(Q=>t.jsxs("tr",{className:"hover:bg-gray-50",children:[t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.jsx("div",{className:"text-sm font-medium text-gray-900",children:Q.nomeProjeto})}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:Q.cliente}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:ja(Q.valorTotal)}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:mn(Q.dataAssinatura)}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:t.jsx("button",{onClick:()=>St(Q._id),className:"bg-green-600 text-white px-3 py-1 rounded hover:bg-green-700",children:"Criar Planejamento"})})]},Q._id))})]}),r.length===0&&t.jsx("div",{className:"text-center py-8 text-gray-500",children:"Nenhum contrato aprovado encontrado"})]})]})})}),R&&t.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:t.jsx("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:t.jsxs("div",{className:"mt-3",children:[t.jsxs("div",{className:"flex justify-between items-center mb-4",children:[t.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Relatórios"}),t.jsx("button",{onClick:()=>we(!1),className:"text-gray-400 hover:text-gray-600",children:t.jsx($t,{className:"h-5 w-5"})})]}),t.jsxs("div",{className:"space-y-3",children:[t.jsxs("button",{onClick:ke,className:"w-full bg-blue-600 text-white px-4 py-3 rounded-lg hover:bg-blue-700 flex items-center justify-center space-x-2",children:[t.jsx(qa,{className:"h-5 w-5"}),t.jsx("span",{children:"Relatório Detalhado PDF"})]}),t.jsxs("button",{onClick:Ve,className:"w-full bg-green-600 text-white px-4 py-3 rounded-lg hover:bg-green-700 flex items-center justify-center space-x-2",children:[t.jsx(xl,{className:"h-5 w-5"}),t.jsx("span",{children:"Relatório Executivo PDF"})]}),t.jsxs("button",{onClick:()=>X.info("Relatório de cronograma será implementado"),className:"w-full bg-purple-600 text-white px-4 py-3 rounded-lg hover:bg-purple-700 flex items-center justify-center space-x-2",children:[t.jsx(Ga,{className:"h-5 w-5"}),t.jsx("span",{children:"Cronograma Gantt PDF"})]})]})]})})}),L&&t.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:t.jsx("div",{className:"relative top-10 mx-auto p-5 border w-full max-w-6xl shadow-lg rounded-md bg-white",children:t.jsxs("div",{className:"mt-3",children:[t.jsxs("div",{className:"flex justify-between items-center mb-4",children:[t.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Cronograma da Obra"}),t.jsx("button",{onClick:()=>le(!1),className:"text-gray-400 hover:text-gray-600",children:t.jsx($t,{className:"h-5 w-5"})})]}),t.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[t.jsx("h4",{className:"font-medium text-gray-900 mb-4",children:"Cronograma Gantt Simplificado"}),qt()]})]})})}),W&&t.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:t.jsx("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:t.jsxs("div",{className:"mt-3",children:[t.jsxs("div",{className:"flex justify-between items-center mb-4",children:[t.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Nova Etapa"}),t.jsx("button",{onClick:()=>se(!1),className:"text-gray-400 hover:text-gray-600",children:t.jsx($t,{className:"h-5 w-5"})})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Nome da Etapa"}),t.jsx("input",{type:"text",value:ae.nome,onChange:Q=>xe({...ae,nome:Q.target.value}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500",required:!0})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Data Início Previsão"}),t.jsx("input",{type:"date",value:ae.dataInicioPrevisao,onChange:Q=>xe({...ae,dataInicioPrevisao:Q.target.value}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Data Término Previsão"}),t.jsx("input",{type:"date",value:ae.dataTerminoPrevisao,onChange:Q=>xe({...ae,dataTerminoPrevisao:Q.target.value}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500"})]})]}),t.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[t.jsx("button",{onClick:()=>se(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 border border-gray-300 rounded-md hover:bg-gray-200",children:"Cancelar"}),t.jsx("button",{onClick:qe,className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-md hover:bg-blue-700",children:"Adicionar Etapa"})]})]})]})})}),J&&t.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:t.jsx("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:t.jsxs("div",{className:"mt-3",children:[t.jsxs("div",{className:"flex justify-between items-center mb-4",children:[t.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Nova Subetapa"}),t.jsx("button",{onClick:()=>Y(!1),className:"text-gray-400 hover:text-gray-600",children:t.jsx($t,{className:"h-5 w-5"})})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Etapa"}),t.jsxs("select",{value:be.etapaId,onChange:Q=>Te({...be,etapaId:Q.target.value}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500",required:!0,children:[t.jsx("option",{value:"",children:"Selecione uma etapa"}),((v==null?void 0:v.etapas)||[]).map(Q=>t.jsxs("option",{value:Q.id,children:[Q.numero,". ",Q.nome]},Q.id))]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Nome da Subetapa"}),t.jsx("input",{type:"text",value:be.nome,onChange:Q=>Te({...be,nome:Q.target.value}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500",required:!0})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Data Início"}),t.jsx("input",{type:"date",value:be.dataInicioPrevisao,onChange:Q=>Te({...be,dataInicioPrevisao:Q.target.value}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Data Término"}),t.jsx("input",{type:"date",value:be.dataTerminoPrevisao,onChange:Q=>Te({...be,dataTerminoPrevisao:Q.target.value}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500"})]})]}),t.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[t.jsx("button",{onClick:()=>Y(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 border border-gray-300 rounded-md hover:bg-gray-200",children:"Cancelar"}),t.jsx("button",{onClick:lt,className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-md hover:bg-blue-700",children:"Adicionar Subetapa"})]})]})]})})}),q&&t.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:t.jsx("div",{className:"relative top-20 mx-auto p-5 border w-full max-w-2xl shadow-lg rounded-md bg-white",children:t.jsxs("div",{className:"mt-3",children:[t.jsxs("div",{className:"flex justify-between items-center mb-4",children:[t.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Nova Atividade"}),t.jsx("button",{onClick:()=>N(!1),className:"text-gray-400 hover:text-gray-600",children:t.jsx($t,{className:"h-5 w-5"})})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Tipo"}),t.jsxs("select",{value:st.tipo,onChange:Q=>Tt({...st,tipo:Q.target.value,subetapaId:""}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500",children:[t.jsx("option",{value:"etapa",children:"Atividade da Etapa"}),t.jsx("option",{value:"subetapa",children:"Atividade da Subetapa"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Etapa"}),t.jsxs("select",{value:st.etapaId,onChange:Q=>Tt({...st,etapaId:Q.target.value,subetapaId:""}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500",required:!0,children:[t.jsx("option",{value:"",children:"Selecione uma etapa"}),((v==null?void 0:v.etapas)||[]).map(Q=>t.jsxs("option",{value:Q.id,children:[Q.numero,". ",Q.nome]},Q.id))]})]}),st.tipo==="subetapa"&&st.etapaId&&t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Subetapa"}),t.jsxs("select",{value:st.subetapaId,onChange:Q=>Tt({...st,subetapaId:Q.target.value}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500",required:!0,children:[t.jsx("option",{value:"",children:"Selecione uma subetapa"}),(((pt=v==null?void 0:v.etapas.find(Q=>Q.id===st.etapaId))==null?void 0:pt.subetapas)||[]).map(Q=>t.jsxs("option",{value:Q.id,children:[Q.numero,". ",Q.nome]},Q.id))]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Nome da Atividade"}),t.jsx("input",{type:"text",value:st.nome,onChange:Q=>Tt({...st,nome:Q.target.value}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500",required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Descrição"}),t.jsx("textarea",{value:st.descricao,onChange:Q=>Tt({...st,descricao:Q.target.value}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500",rows:3})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Responsável"}),t.jsx("input",{type:"text",value:st.responsavel,onChange:Q=>Tt({...st,responsavel:Q.target.value}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Data Início"}),t.jsx("input",{type:"date",value:st.dataInicio,onChange:Q=>Tt({...st,dataInicio:Q.target.value}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Data Término"}),t.jsx("input",{type:"date",value:st.dataTermino,onChange:Q=>Tt({...st,dataTermino:Q.target.value}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500"})]})]}),t.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[t.jsx("button",{onClick:()=>N(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 border border-gray-300 rounded-md hover:bg-gray-200",children:"Cancelar"}),t.jsx("button",{onClick:ht,className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-md hover:bg-blue-700",children:"Adicionar Atividade"})]})]})]})})}),K&&t.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:t.jsx("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:t.jsxs("div",{className:"mt-3",children:[t.jsxs("div",{className:"flex justify-between items-center mb-4",children:[t.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Adicionar Material"}),t.jsx("button",{onClick:()=>fe(!1),className:"text-gray-400 hover:text-gray-600",children:t.jsx($t,{className:"h-5 w-5"})})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Etapa"}),t.jsxs("select",{value:Ae.etapaId,onChange:Q=>tt({...Ae,etapaId:Q.target.value,subetapaId:""}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500",required:!0,children:[t.jsx("option",{value:"",children:"Selecione uma etapa"}),((v==null?void 0:v.etapas)||[]).map(Q=>t.jsxs("option",{value:Q.id,children:[Q.numero,". ",Q.nome]},Q.id))]})]}),Ae.etapaId&&t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Subetapa"}),t.jsxs("select",{value:Ae.subetapaId,onChange:Q=>tt({...Ae,subetapaId:Q.target.value}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500",required:!0,children:[t.jsx("option",{value:"",children:"Selecione uma subetapa"}),(((xa=v==null?void 0:v.etapas.find(Q=>Q.id===Ae.etapaId))==null?void 0:xa.subetapas)||[]).map(Q=>t.jsxs("option",{value:Q.id,children:[Q.numero,". ",Q.nome]},Q.id))]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Insumo"}),t.jsxs("select",{value:Ae.insumoId,onChange:Q=>tt({...Ae,insumoId:Q.target.value}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500",required:!0,children:[t.jsx("option",{value:"",children:"Selecione um insumo"}),i.map(Q=>t.jsxs("option",{value:Q._id,children:[Q.nome," - ",ja(Q.precoUnitario)]},Q._id))]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Quantidade"}),t.jsx("input",{type:"number",value:Ae.quantidade,onChange:Q=>tt({...Ae,quantidade:Number(Q.target.value)}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500",min:"1",required:!0})]}),t.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[t.jsx("button",{onClick:()=>fe(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 border border-gray-300 rounded-md hover:bg-gray-200",children:"Cancelar"}),t.jsx("button",{onClick:de,className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-md hover:bg-blue-700",children:"Adicionar Material"})]})]})]})})}),me&&t.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:t.jsx("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:t.jsxs("div",{className:"mt-3",children:[t.jsxs("div",{className:"flex justify-between items-center mb-4",children:[t.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Adicionar Mão de Obra"}),t.jsx("button",{onClick:()=>$(!1),className:"text-gray-400 hover:text-gray-600",children:t.jsx($t,{className:"h-5 w-5"})})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Etapa"}),t.jsxs("select",{value:rt.etapaId,onChange:Q=>gt({...rt,etapaId:Q.target.value,subetapaId:""}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500",required:!0,children:[t.jsx("option",{value:"",children:"Selecione uma etapa"}),((v==null?void 0:v.etapas)||[]).map(Q=>t.jsxs("option",{value:Q.id,children:[Q.numero,". ",Q.nome]},Q.id))]})]}),rt.etapaId&&t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Subetapa"}),t.jsxs("select",{value:rt.subetapaId,onChange:Q=>gt({...rt,subetapaId:Q.target.value}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500",required:!0,children:[t.jsx("option",{value:"",children:"Selecione uma subetapa"}),(((Pr=v==null?void 0:v.etapas.find(Q=>Q.id===rt.etapaId))==null?void 0:Pr.subetapas)||[]).map(Q=>t.jsxs("option",{value:Q.id,children:[Q.numero,". ",Q.nome]},Q.id))]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Funcionário"}),t.jsxs("select",{value:rt.funcionarioId,onChange:Q=>gt({...rt,funcionarioId:Q.target.value}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500",required:!0,children:[t.jsx("option",{value:"",children:"Selecione um funcionário"}),n.map(Q=>t.jsxs("option",{value:Q._id,children:[Q.nome," - ",Q.funcao," - ",ja(Q.valorHora),"/h"]},Q._id))]})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Quantidade"}),t.jsx("input",{type:"number",value:rt.quantidade,onChange:Q=>gt({...rt,quantidade:Number(Q.target.value)}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500",min:"1",required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Horas Previsão"}),t.jsx("input",{type:"number",value:rt.horasPrevisao,onChange:Q=>gt({...rt,horasPrevisao:Number(Q.target.value)}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500",min:"1",required:!0})]})]}),t.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[t.jsx("button",{onClick:()=>$(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 border border-gray-300 rounded-md hover:bg-gray-200",children:"Cancelar"}),t.jsx("button",{onClick:nt,className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-md hover:bg-blue-700",children:"Adicionar Mão de Obra"})]})]})]})})})]})}const b6={pendente:"bg-gray-100 text-gray-800",em_andamento:"bg-blue-100 text-blue-800",concluido:"bg-green-100 text-green-800",cancelado:"bg-red-100 text-red-800"},rv={pendente:"Pendente",em_andamento:"Em Andamento",concluido:"Concluído",cancelado:"Cancelado"},y6={baixa:"bg-green-100 text-green-800",media:"bg-yellow-100 text-yellow-800",alta:"bg-red-100 text-red-800"},sv={baixa:"Baixa",media:"Média",alta:"Alta"},Oi=e=>e==null||isNaN(Number(e))?"R$ 0,00":`R$ ${Number(e).toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2})}`,hc=e=>e==null||isNaN(Number(e))?0:Number(e);function j6(){const[e,a]=I.useState([]),[r,s]=I.useState([]),[n,o]=I.useState([]),[i,c]=I.useState([]),[d,p]=I.useState(!0),[h,x]=I.useState(""),[b,g]=I.useState(""),[w,_]=I.useState(""),[O,y]=I.useState(""),[v,C]=I.useState(""),[W,se]=I.useState(!1),[J,Y]=I.useState(!1),[K,fe]=I.useState(!1),[me,$]=I.useState(!1),[L,le]=I.useState(!1),[R,we]=I.useState(null),[ce,Ce]=I.useState(null),[Z,he]=I.useState(null),[ie,Ue]=I.useState({descricao:"",funcionarioId:"",prazo:"",prioridade:"media",etapaVinculada:"",observacoes:"",tipo:"manual"}),[S,G]=I.useState({destinatarioId:"",conteudo:"",anexos:[]}),[q,N]=I.useState({nome:"",tipo:"documento",arquivo:null}),[U,T]=I.useState([]),[B,oe]=I.useState([]),[Ne,Be]=I.useState([]),[Xe,dt]=I.useState([]),[ft,Me]=I.useState([]),[te,Ct]=I.useState([]);I.useEffect(()=>{ae(),g(Te())},[]),I.useEffect(()=>{h&&b&&xe()},[h,b]);const ae=async()=>{try{p(!0);const[de,nt,Nt]=await Promise.all([Ie.entities.planejamentos.list(),Ie.entities.funcionarios.list(),Ie.entities.financeiro.list()]);s(de.list||[]),o((nt.list||[]).filter(A=>A==null?void 0:A.ativo)),c(Nt.list||[]),(de.list||[]).length>0&&!h&&x(de.list[0]._id)}catch(de){console.error("Erro ao buscar dados:",de),X.error("Erro ao carregar dados")}finally{p(!1)}},xe=async()=>{try{const{list:de}=await Ie.entities.planejamento_semanal.list(),nt=(de||[]).filter(Nt=>Nt.planejamentoId===h&&Nt.semana===b);a(nt)}catch(de){console.error("Erro ao buscar planejamento semanal:",de),X.error("Erro ao carregar planejamento semanal")}},be=async()=>{var de;if(!h){X.error("Selecione um planejamento");return}try{const nt=r.find(ue=>ue._id===h);if(!nt)return;const Nt=[];nt.etapas&&nt.etapas.forEach(ue=>{(ue.status==="em_andamento"||ue.status==="pendente")&&Nt.push({id:`auto_etapa_${ue.id}_${Date.now()}`,descricao:`Executar etapa: ${ue.nome}`,funcionarioResponsavel:"A definir",funcionarioId:"",prazo:ue.dataTerminoPrevisao||"",status:ue.status==="em_andamento"?"em_andamento":"pendente",observacoes:"Etapa sincronizada do planejamento principal",progresso:ue.progresso||0,prioridade:"media",etapaVinculada:ue.nome,tipo:"automatica",anexos:[],criadoEm:new Date().toISOString(),atualizadoEm:new Date().toISOString()}),ue.atividades&&ue.atividades.forEach(ke=>{ke.status!=="concluida"&&Nt.push({id:`auto_atividade_${ke.id}_${Date.now()}`,descricao:`${ke.nome}: ${ke.descricao}`,funcionarioResponsavel:ke.responsavel||"A definir",funcionarioId:"",prazo:ke.dataTermino||ue.dataTerminoPrevisao||"",status:ke.status||"pendente",observacoes:`Atividade sincronizada: ${ke.observacoes||""}`,progresso:ke.progresso||0,prioridade:"media",etapaVinculada:ue.nome,tipo:"automatica",anexos:[],criadoEm:new Date().toISOString(),atualizadoEm:new Date().toISOString()})}),ue.subetapas&&ue.subetapas.forEach(ke=>{ke.status!=="concluida"&&(Nt.push({id:`auto_subetapa_${ke.id}_${Date.now()}`,descricao:`Executar subetapa: ${ke.nome}`,funcionarioResponsavel:"A definir",funcionarioId:"",prazo:ke.dataTerminoPrevisao||ue.dataTerminoPrevisao||"",status:ke.status==="em_andamento"?"em_andamento":"pendente",observacoes:"Subetapa sincronizada do planejamento principal",progresso:ke.progresso||0,prioridade:"media",etapaVinculada:`${ue.nome} > ${ke.nome}`,tipo:"automatica",anexos:[],criadoEm:new Date().toISOString(),atualizadoEm:new Date().toISOString()}),ke.atividades&&ke.atividades.forEach(Ve=>{Ve.status!=="concluida"&&Nt.push({id:`auto_sub_atividade_${Ve.id}_${Date.now()}`,descricao:`${Ve.nome}: ${Ve.descricao}`,funcionarioResponsavel:Ve.responsavel||"A definir",funcionarioId:"",prazo:Ve.dataTermino||ke.dataTerminoPrevisao||"",status:Ve.status||"pendente",observacoes:`Atividade de subetapa sincronizada: ${Ve.observacoes||""}`,progresso:Ve.progresso||0,prioridade:"media",etapaVinculada:`${ue.nome} > ${ke.nome}`,tipo:"automatica",anexos:[],criadoEm:new Date().toISOString(),atualizadoEm:new Date().toISOString()})}))})});let A=e.find(ue=>ue.planejamentoId===h&&ue.semana===b);if(A){const ke=[...((de=A.tarefas)==null?void 0:de.filter(St=>St.tipo==="manual"))||[],...Nt],Ve={...A,tarefas:ke,atualizadoEm:new Date().toISOString()};await Ie.entities.planejamento_semanal.update(A._id,Ve)}else{const ue={planejamentoId:h,semana:b,tarefas:Nt,mensagens:[],criadoEm:new Date().toISOString(),atualizadoEm:new Date().toISOString()};await Ie.entities.planejamento_semanal.create(ue)}X.success(`${Nt.length} tarefas sincronizadas com sucesso`),await xe(),le(!1)}catch(nt){console.error("Erro ao sincronizar:",nt),X.error("Erro ao sincronizar com planejamento")}},Te=()=>{const de=new Date;return new Date(de.setDate(de.getDate()-de.getDay())).toISOString().split("T")[0]},Ae=de=>{const nt=new Date(b),Nt=new Date(nt);Nt.setDate(nt.getDate()+(de==="next"?7:-7)),g(Nt.toISOString().split("T")[0])},tt=async()=>{if(!h||!ie.descricao||!ie.funcionarioId){X.error("Preencha todos os campos obrigatórios");return}try{const de=n.find(A=>A._id===ie.funcionarioId);if(!de)return;const nt={id:`tarefa_${Date.now()}`,descricao:ie.descricao,funcionarioResponsavel:de.nome,funcionarioId:de._id,prazo:ie.prazo,status:"pendente",observacoes:ie.observacoes,progresso:0,prioridade:ie.prioridade,etapaVinculada:ie.etapaVinculada,tipo:ie.tipo,anexos:[],criadoEm:new Date().toISOString(),atualizadoEm:new Date().toISOString()};let Nt=e.find(A=>A.planejamentoId===h&&A.semana===b);if(Nt){const A={...Nt,tarefas:[...Nt.tarefas||[],nt],atualizadoEm:new Date().toISOString()};await Ie.entities.planejamento_semanal.update(Nt._id,A)}else{const A={planejamentoId:h,semana:b,tarefas:[nt],mensagens:[],criadoEm:new Date().toISOString(),atualizadoEm:new Date().toISOString()};await Ie.entities.planejamento_semanal.create(A)}X.success("Tarefa criada com sucesso"),await xe(),at()}catch(de){console.error("Erro ao criar tarefa:",de),X.error("Erro ao criar tarefa")}},rt=async()=>{if(!(!R||!h))try{const de=e.find(ue=>ue.planejamentoId===h&&ue.semana===b);if(!de)return;const nt=n.find(ue=>ue._id===ie.funcionarioId);if(!nt)return;const Nt={...R,descricao:ie.descricao,funcionarioResponsavel:nt.nome,funcionarioId:nt._id,prazo:ie.prazo,prioridade:ie.prioridade,etapaVinculada:ie.etapaVinculada,observacoes:ie.observacoes,atualizadoEm:new Date().toISOString()},A={...de,tarefas:de.tarefas.map(ue=>ue.id===R.id?Nt:ue),atualizadoEm:new Date().toISOString()};await Ie.entities.planejamento_semanal.update(de._id,A),X.success("Tarefa atualizada com sucesso"),await xe(),at()}catch(de){console.error("Erro ao atualizar tarefa:",de),X.error("Erro ao atualizar tarefa")}},gt=async(de,nt)=>{try{const Nt=e.find(ue=>ue.planejamentoId===h&&ue.semana===b);if(!Nt)return;const A={...Nt,tarefas:Nt.tarefas.map(ue=>ue.id===de?{...ue,status:nt,progresso:nt==="concluido"?100:nt==="em_andamento"?50:0,atualizadoEm:new Date().toISOString()}:ue),atualizadoEm:new Date().toISOString()};await Ie.entities.planejamento_semanal.update(Nt._id,A),X.success("Status atualizado com sucesso"),await xe()}catch(Nt){console.error("Erro ao atualizar status:",Nt),X.error("Erro ao atualizar status")}},st=async()=>{if(!S.destinatarioId||!S.conteudo.trim()){X.error("Preencha o destinatário e a mensagem");return}try{const de=n.find(A=>A._id===S.destinatarioId);if(!de)return;const nt={id:`msg_${Date.now()}`,remetente:"Gestor",remetenteId:"gestor_id",tipoRemetente:"gestor",destinatario:de.nome,destinatarioId:de._id,conteudo:S.conteudo,anexos:S.anexos,lida:!1,dataEnvio:new Date().toISOString()},Nt=e.find(A=>A.planejamentoId===h&&A.semana===b);if(Nt){const A={...Nt,mensagens:[...Nt.mensagens||[],nt],atualizadoEm:new Date().toISOString()};await Ie.entities.planejamento_semanal.update(Nt._id,A)}else{const A={planejamentoId:h,semana:b,tarefas:[],mensagens:[nt],criadoEm:new Date().toISOString(),atualizadoEm:new Date().toISOString()};await Ie.entities.planejamento_semanal.create(A)}X.success("Mensagem enviada com sucesso"),await xe(),G({destinatarioId:"",conteudo:"",anexos:[]}),fe(!1)}catch(de){console.error("Erro ao enviar mensagem:",de),X.error("Erro ao enviar mensagem")}},Tt=async()=>{if(!q.nome||!q.arquivo){X.error("Selecione um arquivo");return}try{const de={id:`anexo_${Date.now()}`,nome:q.nome,tipo:q.tipo,url:`https://exemplo.com/uploads/${q.arquivo.name}`,tamanho:q.arquivo.size,dataUpload:new Date().toISOString()};G({...S,anexos:[...S.anexos,de]}),X.success("Anexo adicionado com sucesso"),N({nome:"",tipo:"documento",arquivo:null}),$(!1)}catch(de){console.error("Erro ao adicionar anexo:",de),X.error("Erro ao adicionar anexo")}},ne=async de=>{if(!(!ce||!de.trim()))try{const nt=e.find(A=>A.planejamentoId===h&&A.semana===b);if(!nt)return;const Nt={...nt,tarefas:nt.tarefas.map(A=>A.id===ce.id?{...A,observacoes:de,atualizadoEm:new Date().toISOString()}:A),atualizadoEm:new Date().toISOString()};await Ie.entities.planejamento_semanal.update(nt._id,Nt),X.success("Observação adicionada com sucesso"),await xe(),Y(!1)}catch(nt){console.error("Erro ao adicionar observação:",nt),X.error("Erro ao adicionar observação")}},Pe=de=>{var nt;de?(we(de),Ue({descricao:de.descricao,funcionarioId:de.funcionarioId,prazo:((nt=de.prazo)==null?void 0:nt.split("T")[0])||"",prioridade:de.prioridade,etapaVinculada:de.etapaVinculada||"",observacoes:de.observacoes,tipo:de.tipo})):(we(null),Ue({descricao:"",funcionarioId:"",prazo:"",prioridade:"media",etapaVinculada:"",observacoes:"",tipo:"manual"})),se(!0)},at=()=>{se(!1),we(null)},k=de=>{Ce(de),Y(!0)},Qe=de=>{de&&(he(de),G({...S,destinatarioId:de._id})),fe(!0)},Fe=()=>h?i.filter(nt=>{var Nt;return nt.planejamentoId===h&&nt.tipo==="despesa"&&((Nt=nt.categoria)==null?void 0:Nt.toLowerCase().includes("administrativo"))}).reduce((nt,Nt)=>nt+hc(Nt.valor),0):0,ut=()=>{const de=r.find(ue=>ue._id===h);if(!de)return 0;const nt=hc(de.valorOrcado),Nt=Fe(),A=e.reduce((ue,ke)=>ue+(ke.tarefas||[]).reduce((Ve,St)=>{const ot=n.find(yt=>yt._id===St.funcionarioId);return Ve+(ot?100:0)},0),0);return nt-A-Nt},je=e.reduce((de,nt)=>{var A;const Nt=((A=nt.tarefas)==null?void 0:A.filter(ue=>{var ot,yt;const ke=w===""||((ot=ue.descricao)==null?void 0:ot.toLowerCase().includes(w.toLowerCase()))||((yt=ue.funcionarioResponsavel)==null?void 0:yt.toLowerCase().includes(w.toLowerCase())),Ve=O===""||ue.status===O,St=v===""||ue.funcionarioId===v;return ke&&Ve&&St}))||[];return[...de,...Nt]},[]),ht={total:je.length,pendentes:je.filter(de=>de.status==="pendente").length,emAndamento:je.filter(de=>de.status==="em_andamento").length,concluidas:je.filter(de=>de.status==="concluido").length,manuais:je.filter(de=>de.tipo==="manual").length,automaticas:je.filter(de=>de.tipo==="automatica").length,atrasadas:je.filter(de=>!de.prazo||de.status==="concluido"?!1:new Date(de.prazo)<new Date).length},qe=()=>{const de=r.find(nt=>nt._id===h);return de?{valorOrcado:hc(de.valorOrcado),valorRealizado:hc(de.valorRealizado),progresso:hc(de.progresso),custosAdministrativos:Fe(),lucroLiquido:ut()}:null},lt=de=>{const nt=new Date(de),Nt=new Date(nt);return Nt.setDate(nt.getDate()+6),`${nt.toLocaleDateString("pt-BR")} - ${Nt.toLocaleDateString("pt-BR")}`};return d?t.jsx("div",{className:"flex items-center justify-center h-64",children:t.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Planejamento Semanal"}),t.jsx("p",{className:"text-gray-600",children:"Gerencie tarefas e delegações por semana - Sincronizado com Planejamento"})]}),t.jsxs("div",{className:"flex space-x-3",children:[t.jsxs("button",{onClick:()=>le(!0),className:"bg-purple-600 text-white px-4 py-2 rounded-lg hover:bg-purple-700 flex items-center space-x-2",children:[t.jsx(cf,{className:"h-4 w-4"}),t.jsx("span",{children:"Sincronizar"})]}),t.jsxs("button",{onClick:()=>Qe(),className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 flex items-center space-x-2",children:[t.jsx(Dg,{className:"h-4 w-4"}),t.jsx("span",{children:"Mensagem"})]}),t.jsxs("button",{onClick:()=>Pe(),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 flex items-center space-x-2",children:[t.jsx(wa,{className:"h-4 w-4"}),t.jsx("span",{children:"Nova Tarefa"})]})]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-6 gap-6",children:[t.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx(gl,{className:"h-8 w-8 text-blue-600"}),t.jsxs("div",{className:"ml-4",children:[t.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total de Tarefas"}),t.jsx("p",{className:"text-2xl font-bold text-gray-900",children:ht.total}),t.jsxs("p",{className:"text-xs text-gray-500",children:[ht.automaticas," auto + ",ht.manuais," manual"]})]})]})}),t.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx(si,{className:"h-8 w-8 text-gray-600"}),t.jsxs("div",{className:"ml-4",children:[t.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Pendentes"}),t.jsx("p",{className:"text-2xl font-bold text-gray-900",children:ht.pendentes})]})]})}),t.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx(cf,{className:"h-8 w-8 text-blue-600"}),t.jsxs("div",{className:"ml-4",children:[t.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Em Andamento"}),t.jsx("p",{className:"text-2xl font-bold text-gray-900",children:ht.emAndamento})]})]})}),t.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx(ps,{className:"h-8 w-8 text-green-600"}),t.jsxs("div",{className:"ml-4",children:[t.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Concluídas"}),t.jsx("p",{className:"text-2xl font-bold text-gray-900",children:ht.concluidas})]})]})}),t.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx(ro,{className:"h-8 w-8 text-orange-600"}),t.jsxs("div",{className:"ml-4",children:[t.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Custos Admin."}),t.jsx("p",{className:"text-2xl font-bold text-gray-900",children:Oi(Fe())})]})]})}),t.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx(k0,{className:"h-8 w-8 text-green-600"}),t.jsxs("div",{className:"ml-4",children:[t.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Lucro Líquido"}),t.jsx("p",{className:`text-2xl font-bold ${ut()>=0?"text-green-600":"text-red-600"}`,children:Oi(ut())})]})]})})]}),qe()&&t.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[t.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Informações do Planejamento Principal"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-6",children:[t.jsxs("div",{className:"text-center",children:[t.jsx("p",{className:"text-sm text-gray-600",children:"Valor Orçado"}),t.jsx("p",{className:"text-xl font-bold text-blue-600",children:Oi(qe().valorOrcado)})]}),t.jsxs("div",{className:"text-center",children:[t.jsx("p",{className:"text-sm text-gray-600",children:"Valor Realizado"}),t.jsx("p",{className:"text-xl font-bold text-purple-600",children:Oi(qe().valorRealizado)})]}),t.jsxs("div",{className:"text-center",children:[t.jsx("p",{className:"text-sm text-gray-600",children:"Progresso Geral"}),t.jsxs("p",{className:"text-xl font-bold text-green-600",children:[qe().progresso,"%"]})]}),t.jsxs("div",{className:"text-center",children:[t.jsx("p",{className:"text-sm text-gray-600",children:"Custos Admin."}),t.jsx("p",{className:"text-xl font-bold text-orange-600",children:Oi(qe().custosAdministrativos)})]}),t.jsxs("div",{className:"text-center",children:[t.jsx("p",{className:"text-sm text-gray-600",children:"Lucro Líquido"}),t.jsx("p",{className:`text-xl font-bold ${qe().lucroLiquido>=0?"text-green-600":"text-red-600"}`,children:Oi(qe().lucroLiquido)})]})]})]}),t.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Projeto"}),t.jsxs("select",{value:h,onChange:de=>x(de.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500",children:[t.jsx("option",{value:"",children:"Selecione um projeto"}),r.map(de=>t.jsxs("option",{value:de._id,children:[de.nomeProjeto," - ",de.cliente]},de._id))]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Semana"}),t.jsxs("div",{className:"flex items-center space-x-4",children:[t.jsx("button",{onClick:()=>Ae("prev"),className:"p-2 text-gray-600 hover:text-gray-900",children:t.jsx(J2,{className:"h-5 w-5"})}),t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"font-medium text-gray-900",children:lt(b)}),t.jsx("div",{className:"text-sm text-gray-500",children:"Semana selecionada"})]}),t.jsx("button",{onClick:()=>Ae("next"),className:"p-2 text-gray-600 hover:text-gray-900",children:t.jsx(Q2,{className:"h-5 w-5"})})]})]})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Buscar"}),t.jsxs("div",{className:"relative",children:[t.jsx(Sl,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),t.jsx("input",{type:"text",placeholder:"Buscar tarefas ou funcionários...",value:w,onChange:de=>_(de.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),t.jsxs("select",{value:O,onChange:de=>y(de.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500",children:[t.jsx("option",{value:"",children:"Todos os status"}),Object.entries(rv).map(([de,nt])=>t.jsx("option",{value:de,children:nt},de))]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Funcionário"}),t.jsxs("select",{value:v,onChange:de=>C(de.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500",children:[t.jsx("option",{value:"",children:"Todos os funcionários"}),n.map(de=>t.jsxs("option",{value:de._id,children:[de.nome," - ",de.funcao]},de._id))]})]})]})]})]})}),t.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[t.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:t.jsxs("h3",{className:"text-lg font-medium text-gray-900",children:["Tarefas da Semana - ",lt(b)]})}),t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[t.jsx("thead",{className:"bg-gray-50",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tarefa"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Responsável"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tipo"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Prioridade"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Prazo"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Progresso"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Ações"})]})}),t.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:je.map(de=>{var Nt,A;const nt=de.prazo&&new Date(de.prazo)<new Date&&de.status!=="concluido";return t.jsxs("tr",{className:"hover:bg-gray-50",children:[t.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[t.jsx("div",{className:"text-sm font-medium text-gray-900",children:de.descricao}),de.etapaVinculada&&t.jsxs("div",{className:"text-xs text-gray-500",children:["Etapa: ",de.etapaVinculada]}),((Nt=de.anexos)==null?void 0:Nt.length)>0&&t.jsxs("div",{className:"text-xs text-blue-500 flex items-center mt-1",children:[t.jsx(hf,{className:"h-3 w-3 mr-1"}),de.anexos.length," anexo(s)"]})]}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx(kl,{className:"h-4 w-4 text-gray-400 mr-2"}),t.jsxs("div",{children:[t.jsx("div",{className:"text-sm font-medium text-gray-900",children:de.funcionarioResponsavel}),t.jsx("div",{className:"text-xs text-gray-500",children:(A=n.find(ue=>ue._id===de.funcionarioId))==null?void 0:A.funcao})]})]})}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.jsx("select",{value:de.status,onChange:ue=>gt(de.id,ue.target.value),className:`text-sm rounded-full px-3 py-1 font-medium border-0 focus:ring-2 focus:ring-offset-2 ${b6[de.status]}`,disabled:de.tipo==="automatica",children:Object.entries(rv).map(([ue,ke])=>t.jsx("option",{value:ue,children:ke},ue))})}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${de.tipo==="automatica"?"bg-purple-100 text-purple-800":"bg-blue-100 text-blue-800"}`,children:de.tipo==="automatica"?"Automática":"Manual"})}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${y6[de.prioridade]}`,children:sv[de.prioridade]})}),t.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[t.jsx("div",{className:`text-sm ${nt?"text-red-600 font-medium":"text-gray-900"}`,children:de.prazo?new Date(de.prazo).toLocaleDateString("pt-BR"):"-"}),nt&&t.jsx("div",{className:"text-xs text-red-500",children:"Atrasado"})]}),t.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[t.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:t.jsx("div",{className:`h-2 rounded-full ${de.status==="concluido"?"bg-green-600":de.status==="em_andamento"?"bg-blue-600":"bg-gray-400"}`,style:{width:`${de.progresso}%`}})}),t.jsxs("span",{className:"text-xs text-gray-500",children:[de.progresso,"%"]})]}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:t.jsxs("div",{className:"flex space-x-2",children:[de.tipo==="manual"&&t.jsx("button",{onClick:()=>Pe(de),className:"text-blue-600 hover:text-blue-900",title:"Editar",children:t.jsx(gs,{className:"h-4 w-4"})}),t.jsx("button",{onClick:()=>k(de),className:"text-green-600 hover:text-green-900",title:"Adicionar Observação",children:t.jsx(Dg,{className:"h-4 w-4"})}),t.jsx("button",{onClick:()=>Qe(n.find(ue=>ue._id===de.funcionarioId)),className:"text-purple-600 hover:text-purple-900",title:"Enviar Mensagem",children:t.jsx(dm,{className:"h-4 w-4"})})]})})]},de.id)})})]})})]}),L&&t.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:t.jsx("div",{className:"relative top-20 mx-auto p-5 border w-full max-w-2xl shadow-lg rounded-md bg-white",children:t.jsxs("div",{className:"mt-3",children:[t.jsxs("div",{className:"flex justify-between items-center mb-4",children:[t.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Sincronizar com Planejamento Principal"}),t.jsx("button",{onClick:()=>le(!1),className:"text-gray-400 hover:text-gray-600",children:t.jsx($t,{className:"h-5 w-5"})})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[t.jsx("h4",{className:"font-medium text-blue-900 mb-2",children:"O que será sincronizado:"}),t.jsxs("ul",{className:"text-sm text-blue-800 space-y-1",children:[t.jsx("li",{children:"• Etapas em andamento ou pendentes"}),t.jsx("li",{children:"• Atividades de etapas não concluídas"}),t.jsx("li",{children:"• Subetapas e suas atividades"}),t.jsx("li",{children:"• Informações financeiras (custos e lucro)"}),t.jsx("li",{children:"• Tarefas manuais existentes serão preservadas"})]})]}),t.jsxs("div",{className:"bg-yellow-50 p-4 rounded-lg",children:[t.jsx("h4",{className:"font-medium text-yellow-900 mb-2",children:"Importante:"}),t.jsxs("ul",{className:"text-sm text-yellow-800 space-y-1",children:[t.jsx("li",{children:"• Tarefas automáticas serão atualizadas com dados mais recentes"}),t.jsx("li",{children:"• Tarefas manuais não serão afetadas"}),t.jsx("li",{children:"• Status de tarefas automáticas seguirão o planejamento principal"})]})]}),t.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[t.jsx("button",{onClick:()=>le(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 border border-gray-300 rounded-md hover:bg-gray-200",children:"Cancelar"}),t.jsx("button",{onClick:be,className:"px-4 py-2 text-sm font-medium text-white bg-purple-600 border border-transparent rounded-md hover:bg-purple-700",children:"Sincronizar Agora"})]})]})]})})}),W&&t.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:t.jsx("div",{className:"relative top-20 mx-auto p-5 border w-full max-w-2xl shadow-lg rounded-md bg-white",children:t.jsxs("div",{className:"mt-3",children:[t.jsxs("div",{className:"flex justify-between items-center mb-4",children:[t.jsx("h3",{className:"text-lg font-medium text-gray-900",children:R?"Editar Tarefa":"Nova Tarefa Manual"}),t.jsx("button",{onClick:at,className:"text-gray-400 hover:text-gray-600",children:t.jsx($t,{className:"h-5 w-5"})})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Descrição da Tarefa"}),t.jsx("textarea",{value:ie.descricao,onChange:de=>Ue({...ie,descricao:de.target.value}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500",rows:3,required:!0})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Funcionário Responsável"}),t.jsxs("select",{value:ie.funcionarioId,onChange:de=>Ue({...ie,funcionarioId:de.target.value}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500",required:!0,children:[t.jsx("option",{value:"",children:"Selecione um funcionário"}),n.map(de=>t.jsxs("option",{value:de._id,children:[de.nome," - ",de.funcao]},de._id))]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Prazo"}),t.jsx("input",{type:"date",value:ie.prazo,onChange:de=>Ue({...ie,prazo:de.target.value}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500"})]})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Prioridade"}),t.jsx("select",{value:ie.prioridade,onChange:de=>Ue({...ie,prioridade:de.target.value}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500",children:Object.entries(sv).map(([de,nt])=>t.jsx("option",{value:de,children:nt},de))})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Etapa Vinculada (Opcional)"}),t.jsx("input",{type:"text",value:ie.etapaVinculada,onChange:de=>Ue({...ie,etapaVinculada:de.target.value}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Nome da etapa"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Observações"}),t.jsx("textarea",{value:ie.observacoes,onChange:de=>Ue({...ie,observacoes:de.target.value}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500",rows:2,placeholder:"Observações adicionais..."})]}),t.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[t.jsx("button",{onClick:at,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 border border-gray-300 rounded-md hover:bg-gray-200",children:"Cancelar"}),t.jsxs("button",{onClick:R?rt:tt,className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-md hover:bg-blue-700",children:[R?"Atualizar":"Criar"," Tarefa"]})]})]})]})})}),K&&t.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:t.jsx("div",{className:"relative top-20 mx-auto p-5 border w-full max-w-2xl shadow-lg rounded-md bg-white",children:t.jsxs("div",{className:"mt-3",children:[t.jsxs("div",{className:"flex justify-between items-center mb-4",children:[t.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Enviar Mensagem"}),t.jsx("button",{onClick:()=>fe(!1),className:"text-gray-400 hover:text-gray-600",children:t.jsx($t,{className:"h-5 w-5"})})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Destinatário"}),t.jsxs("select",{value:S.destinatarioId,onChange:de=>G({...S,destinatarioId:de.target.value}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500",required:!0,children:[t.jsx("option",{value:"",children:"Selecione um funcionário"}),n.map(de=>t.jsxs("option",{value:de._id,children:[de.nome," - ",de.funcao]},de._id))]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Mensagem"}),t.jsx("textarea",{value:S.conteudo,onChange:de=>G({...S,conteudo:de.target.value}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500",rows:4,placeholder:"Digite sua mensagem...",required:!0})]}),t.jsxs("div",{children:[t.jsxs("div",{className:"flex justify-between items-center mb-2",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Anexos"}),t.jsxs("button",{onClick:()=>$(!0),className:"text-blue-600 hover:text-blue-800 text-sm flex items-center",children:[t.jsx(hf,{className:"h-4 w-4 mr-1"}),"Adicionar Anexo"]})]}),S.anexos.length>0&&t.jsx("div",{className:"space-y-2",children:S.anexos.map(de=>t.jsxs("div",{className:"flex items-center justify-between bg-gray-50 p-2 rounded",children:[t.jsxs("div",{className:"flex items-center",children:[de.tipo==="imagem"?t.jsx(V4,{className:"h-4 w-4 mr-2"}):t.jsx(qa,{className:"h-4 w-4 mr-2"}),t.jsx("span",{className:"text-sm",children:de.nome})]}),t.jsx("button",{onClick:()=>G({...S,anexos:S.anexos.filter(nt=>nt.id!==de.id)}),className:"text-red-600 hover:text-red-800",children:t.jsx($t,{className:"h-4 w-4"})})]},de.id))})]}),t.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[t.jsx("button",{onClick:()=>fe(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 border border-gray-300 rounded-md hover:bg-gray-200",children:"Cancelar"}),t.jsxs("button",{onClick:st,className:"px-4 py-2 text-sm font-medium text-white bg-green-600 border border-transparent rounded-md hover:bg-green-700 flex items-center",children:[t.jsx(dm,{className:"h-4 w-4 mr-2"}),"Enviar Mensagem"]})]})]})]})})}),me&&t.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:t.jsx("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:t.jsxs("div",{className:"mt-3",children:[t.jsxs("div",{className:"flex justify-between items-center mb-4",children:[t.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Adicionar Anexo"}),t.jsx("button",{onClick:()=>$(!1),className:"text-gray-400 hover:text-gray-600",children:t.jsx($t,{className:"h-5 w-5"})})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Tipo de Arquivo"}),t.jsxs("select",{value:q.tipo,onChange:de=>N({...q,tipo:de.target.value}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500",children:[t.jsx("option",{value:"documento",children:"Documento"}),t.jsx("option",{value:"pdf",children:"PDF"}),t.jsx("option",{value:"imagem",children:"Imagem"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Nome do Arquivo"}),t.jsx("input",{type:"text",value:q.nome,onChange:de=>N({...q,nome:de.target.value}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Nome do arquivo",required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Selecionar Arquivo"}),t.jsx("input",{type:"file",onChange:de=>{var Nt;const nt=(Nt=de.target.files)==null?void 0:Nt[0];nt&&N({...q,arquivo:nt,nome:q.nome||nt.name})},className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500",accept:q.tipo==="imagem"?"image/*":q.tipo==="pdf"?".pdf":"*",required:!0})]}),t.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[t.jsx("button",{onClick:()=>$(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 border border-gray-300 rounded-md hover:bg-gray-200",children:"Cancelar"}),t.jsx("button",{onClick:Tt,className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-md hover:bg-blue-700",children:"Adicionar Anexo"})]})]})]})})}),J&&ce&&t.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:t.jsx("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:t.jsxs("div",{className:"mt-3",children:[t.jsxs("div",{className:"flex justify-between items-center mb-4",children:[t.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Adicionar Observação"}),t.jsx("button",{onClick:()=>Y(!1),className:"text-gray-400 hover:text-gray-600",children:t.jsx($t,{className:"h-5 w-5"})})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:[t.jsx("strong",{children:"Tarefa:"})," ",ce.descricao]}),t.jsxs("p",{className:"text-sm text-gray-600 mb-4",children:[t.jsx("strong",{children:"Responsável:"})," ",ce.funcionarioResponsavel]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Observação Atual"}),t.jsx("div",{className:"mt-1 p-3 bg-gray-50 border border-gray-200 rounded-md",children:t.jsx("p",{className:"text-sm text-gray-900",children:ce.observacoes||"Nenhuma observação ainda"})})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Nova Observação"}),t.jsx("textarea",{id:"nova-observacao",className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500",rows:4,placeholder:"Digite sua observação..."})]}),t.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[t.jsx("button",{onClick:()=>Y(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 border border-gray-300 rounded-md hover:bg-gray-200",children:"Cancelar"}),t.jsx("button",{onClick:()=>{const de=document.getElementById("nova-observacao");ne(de.value)},className:"px-4 py-2 text-sm font-medium text-white bg-green-600 border border-transparent rounded-md hover:bg-green-700",children:"Salvar Observação"})]})]})]})})})]})}const N6={enviado:"bg-blue-100 text-blue-800",em_cotacao:"bg-yellow-100 text-yellow-800",negado:"bg-red-100 text-red-800",aprovado:"bg-green-100 text-green-800",comprado:"bg-purple-100 text-purple-800",em_estoque:"bg-indigo-100 text-indigo-800",na_obra:"bg-gray-100 text-gray-800"},gu={enviado:"Enviado",em_cotacao:"Em Cotação",negado:"Negado",aprovado:"Aprovado",comprado:"Comprado",em_estoque:"Em Estoque",na_obra:"Na Obra"};function w6(){var lt,de,nt,Nt;const[e,a]=I.useState([]),[r,s]=I.useState([]),[n,o]=I.useState([]),[i,c]=I.useState([]),[d,p]=I.useState([]),[h,x]=I.useState(!0),[b,g]=I.useState("compras"),[w,_]=I.useState(""),[O,y]=I.useState([]),[v,C]=I.useState(!1),[W,se]=I.useState(!1),[J,Y]=I.useState(!1),[K,fe]=I.useState(!1),[me,$]=I.useState(!1),[L,le]=I.useState(!1),[R,we]=I.useState(null),[ce,Ce]=I.useState(null),[Z,he]=I.useState({nome:"",segmento:"",grauConfiabilidade:3,telefone:"",email:"",endereco:""}),[ie,Ue]=I.useState({fornecedorId:"",preco:0,prazoEntrega:0,condicoesPagamento:""}),[S,G]=I.useState({fornecedorId:"",formaPagamento:"",dataPagamento:""}),[q,N]=I.useState({planejamentoId:"",materialId:"",nomeMaterial:"",quantidade:0,fornecedorId:"",preco:0,formaPagamento:"",dataPagamento:"",observacoes:""});I.useEffect(()=>{U(),T()},[]),I.useEffect(()=>{oe()},[n,e]);const U=async()=>{try{x(!0);const[A,ue,ke,Ve,St]=await Promise.all([Ie.entities.compras.list(),Ie.entities.fornecedores.list(),Ie.entities.estoque.list(),Ie.entities.insumos.list(),Ie.entities.planejamentos.list()]);a(A.list||[]),s(ue.list||[]),o(ke.list||[]),c(Ve.list||[]),p(St.list||[])}catch(A){console.error("Erro ao buscar dados:",A),X.error("Erro ao carregar dados")}finally{x(!1)}},T=()=>{const A=localStorage.getItem("notificacoes_compras");if(A)try{y(JSON.parse(A))}catch(ue){console.error("Erro ao carregar notificações de compras:",ue)}},B=A=>{localStorage.setItem("notificacoes_compras",JSON.stringify(A)),y(A)},oe=()=>{const A=[...O];let ue=!1;const ke=n.filter(ot=>ot.quantidade<=ot.quantidadeMinima);if(ke.length>0){const ot="estoque_baixo";A.find(Dt=>Dt.id===ot)||(A.push({id:ot,tipo:"estoque_baixo",titulo:"Itens com Estoque Baixo",descricao:`${ke.length} itens precisam ser repostos`,data:new Date().toISOString(),lida:!1,prioridade:"alta",itens:ke.map(Dt=>Dt.nomeInsumo)}),ue=!0)}const Ve=n.filter(ot=>{if(!ot.dataVencimento)return!1;const yt=new Date(ot.dataVencimento),Dt=new Date,V=Math.ceil((yt.getTime()-Dt.getTime())/(1e3*60*60*24));return V<=30&&V>0});if(Ve.length>0){const ot="prazo_vencimento";A.find(Dt=>Dt.id===ot)||(A.push({id:ot,tipo:"prazo_vencimento",titulo:"Materiais Próximos ao Vencimento",descricao:`${Ve.length} materiais vencem em 30 dias`,data:new Date().toISOString(),lida:!1,prioridade:"media",itens:Ve.map(Dt=>Dt.nomeInsumo)}),ue=!0)}const St=e.filter(ot=>ot.status!=="em_cotacao"?!1:Math.floor((new Date().getTime()-new Date(ot.criadoEm).getTime())/(1e3*60*60*24))>3);if(St.length>0){const ot="cotacao_pendente";A.find(Dt=>Dt.id===ot)||(A.push({id:ot,tipo:"cotacao_pendente",titulo:"Cotações Pendentes",descricao:`${St.length} cotações pendentes há mais de 3 dias`,data:new Date().toISOString(),lida:!1,prioridade:"media",itens:St.map(Dt=>Dt.nomeMaterial)}),ue=!0)}ue&&B(A)},Ne=A=>{const ue=O.map(ke=>ke.id===A?{...ke,lida:!0}:ke);B(ue)},Be=async()=>{try{x(!0),X.loading("Sincronizando estoque com Base de Insumos...",{id:"sync"});const A=[],ue=[];for(const Ve of n){const St=i.find(ot=>{var yt,Dt,V;return ot.estoqueId===Ve._id||((yt=ot.nome)==null?void 0:yt.toLowerCase())===((Dt=Ve.nomeInsumo)==null?void 0:Dt.toLowerCase())&&((V=ot.estoque)==null?void 0:V.temEstoque)});if(St){if(St&&!St.estoqueId){const ot={...St,estoqueId:Ve._id,origemEstoque:!0,estoque:{temEstoque:!0,quantidade:Ve.quantidade||0},precoUnitario:Ve.valorUnitario||St.precoUnitario,atualizadoEm:new Date().toISOString()};ue.push({id:St._id,data:ot})}}else{const ot={nome:Ve.nomeInsumo||"Material do Estoque",tipo:"material",unidadeMedida:"un",precoUnitario:Ve.valorUnitario||0,estoque:{temEstoque:!0,quantidade:Ve.quantidade||0},origemEstoque:!0,estoqueId:Ve._id,criadoEm:new Date().toISOString(),atualizadoEm:new Date().toISOString()};A.push(ot)}}for(const Ve of A)await Ie.entities.insumos.create(Ve);for(const Ve of ue)await Ie.entities.insumos.update(Ve.id,Ve.data);const ke=A.length+ue.length;ke>0?X.success(`${ke} produtos sincronizados com Base de Insumos`,{id:"sync"}):X.success("Todos os produtos já estão sincronizados",{id:"sync"}),await U()}catch(A){console.error("Erro ao sincronizar com insumos:",A),X.error("Erro ao sincronizar com Base de Insumos",{id:"sync"})}finally{x(!1)}},Xe=async A=>{var ue;try{const ke=i.find(Ve=>Ve._id===A.materialId);if(ke&&((ue=ke.estoque)!=null&&ue.temEstoque)){const Ve={...ke,estoque:{...ke.estoque,quantidade:(ke.estoque.quantidade||0)+A.quantidade},atualizadoEm:new Date().toISOString()};await Ie.entities.insumos.update(ke._id,Ve),X.success("Estoque sincronizado com Base de Insumos")}}catch(ke){console.error("Erro ao sincronizar com insumos:",ke)}},dt=async(A,ue)=>{var ke;try{const Ve=n.find(Dt=>Dt._id===A);if(!Ve)return;const St=i.find(Dt=>Dt._id===Ve.insumoId||Dt.estoqueId===A);if(St&&((ke=St.estoque)!=null&&ke.temEstoque)){const Dt=Math.max(0,(St.estoque.quantidade||0)-ue),V={...St,estoque:{...St.estoque,quantidade:Dt},atualizadoEm:new Date().toISOString()};await Ie.entities.insumos.update(St._id,V)}const ot=Math.max(0,Ve.quantidade-ue),yt={...Ve,quantidade:ot,valorTotal:ot*Ve.valorUnitario,dataUltimaSaida:new Date().toISOString(),movimentacoes:[...Ve.movimentacoes||[],{id:`mov_${Date.now()}`,tipo:"saida",quantidade:ue,motivo:"Baixa manual - Sincronizada com Base de Insumos",data:new Date().toISOString(),responsavel:"Sistema"}],atualizadoEm:new Date().toISOString()};await Ie.entities.estoque.update(A,yt),await U(),X.success("Baixa sincronizada entre estoque e insumos")}catch(Ve){console.error("Erro ao sincronizar baixa:",Ve),X.error("Erro ao sincronizar baixa")}},ft=async A=>{const ue=prompt("Digite a quantidade para baixa:");if(!ue||isNaN(Number(ue)))return;const ke=Number(ue);if(ke<=0){X.error("Quantidade deve ser maior que zero");return}const Ve=n.find(St=>St._id===A);if(!Ve){X.error("Item de estoque não encontrado");return}if(ke>Ve.quantidade){X.error("Quantidade insuficiente em estoque");return}await dt(A,ke)},Me=async A=>{A.preventDefault();try{const ue={nome:Z.nome,segmento:Z.segmento,grauConfiabilidade:Z.grauConfiabilidade,contato:{telefone:Z.telefone,email:Z.email,endereco:Z.endereco},ativo:!0,tempoMedioEntrega:0,precoMedio:0,avaliacoes:[],criadoEm:(ce==null?void 0:ce.criadoEm)||new Date().toISOString(),atualizadoEm:new Date().toISOString()};ce?(await Ie.entities.fornecedores.update(ce._id,ue),X.success("Fornecedor atualizado com sucesso")):(await Ie.entities.fornecedores.create(ue),X.success("Fornecedor criado com sucesso")),await U(),st()}catch(ue){console.error("Erro ao salvar fornecedor:",ue),X.error("Erro ao salvar fornecedor")}},te=async()=>{var A,ue;if(!(!R||!ie.fornecedorId)){if(R.cotacoes&&R.cotacoes.length>=3){X.error("Máximo de 3 fornecedores por cotação atingido");return}if((A=R.cotacoes)!=null&&A.find(ke=>ke.fornecedorId===ie.fornecedorId)){X.error("Este fornecedor já foi cotado para este item");return}try{const ke=r.find(ot=>ot._id===ie.fornecedorId);if(!ke)return;const Ve={fornecedorId:ke._id,nomeFornecedor:ke.nome,preco:ie.preco,prazoEntrega:ie.prazoEntrega,condicoesPagamento:ie.condicoesPagamento,selecionado:!1},St={...R,cotacoes:[...R.cotacoes||[],Ve],status:"em_cotacao",atualizadoEm:new Date().toISOString()};await Ie.entities.compras.update(R._id,St),X.success(`Cotação adicionada (${(((ue=R.cotacoes)==null?void 0:ue.length)||0)+1}/3)`),await U(),Ue({fornecedorId:"",preco:0,prazoEntrega:0,condicoesPagamento:""})}catch(ke){console.error("Erro ao adicionar cotação:",ke),X.error("Erro ao adicionar cotação")}}},Ct=async A=>{A.preventDefault();try{const ue=r.find(Ve=>Ve._id===q.fornecedorId);if(!ue){X.error("Fornecedor não encontrado");return}const ke={planejamentoId:q.planejamentoId,materialId:q.materialId,nomeMaterial:q.nomeMaterial,quantidade:q.quantidade,status:"aprovado",cotacoes:[],compraDirecta:!0,fornecedorEscolhido:{fornecedorId:ue._id,nomeFornecedor:ue.nome,preco:q.preco,formaPagamento:q.formaPagamento,dataPagamento:q.dataPagamento},valorTotal:q.preco*q.quantidade,dataCompra:new Date().toISOString(),observacoes:q.observacoes,criadoEm:new Date().toISOString(),atualizadoEm:new Date().toISOString()};await Ie.entities.compras.create(ke),await xe(ke),X.success("Compra direta realizada com sucesso"),await U(),$(!1),N({planejamentoId:"",materialId:"",nomeMaterial:"",quantidade:0,fornecedorId:"",preco:0,formaPagamento:"",dataPagamento:"",observacoes:""})}catch(ue){console.error("Erro ao realizar compra direta:",ue),X.error("Erro ao realizar compra direta")}},ae=async()=>{if(!(!R||!S.fornecedorId))try{const A=R.cotacoes.find(ke=>ke.fornecedorId===S.fornecedorId);if(!A)return;const ue={...R,status:"aprovado",fornecedorEscolhido:{fornecedorId:A.fornecedorId,nomeFornecedor:A.nomeFornecedor,preco:A.preco,formaPagamento:S.formaPagamento,dataPagamento:S.dataPagamento},valorTotal:A.preco*R.quantidade,dataCompra:new Date().toISOString(),atualizadoEm:new Date().toISOString()};ue.cotacoes=ue.cotacoes.map(ke=>({...ke,selecionado:ke.fornecedorId===S.fornecedorId})),await Ie.entities.compras.update(R._id,ue),await xe(ue),X.success("Compra aprovada com sucesso"),await U(),C(!1)}catch(A){console.error("Erro ao aprovar compra:",A),X.error("Erro ao aprovar compra")}},xe=async A=>{try{const ue={tipo:"despesa",categoria:"material",descricao:`Compra de ${A.nomeMaterial} - ${A.quantidade} unidades${A.compraDirecta?" (Compra Direta)":""}`,valor:A.valorTotal,data:A.dataCompra||new Date().toISOString(),dataVencimento:A.fornecedorEscolhido.dataPagamento,status:"pendente",fornecedor:A.fornecedorEscolhido.nomeFornecedor,formaPagamento:A.fornecedorEscolhido.formaPagamento,compraId:A._id,planejamentoId:A.planejamentoId,numeroPedido:A.numeroPedido,observacoes:`Pagamento referente à ${A.compraDirecta?"compra direta":"cotação aprovada"} de ${A.nomeMaterial}`,criadoEm:new Date().toISOString(),atualizadoEm:new Date().toISOString()};await Ie.entities.financeiro.create(ue),X.success("Conta a pagar criada no financeiro")}catch(ue){console.error("Erro ao criar conta a pagar:",ue),X.error("Erro ao criar conta a pagar")}},be=async A=>{if(!A.fornecedorEscolhido){X.error("Compra deve estar aprovada para gerar pedido");return}try{const ue=`PED-${Date.now().toString().slice(-8)}`,ke={...A,numeroPedido:ue,status:"comprado",atualizadoEm:new Date().toISOString()};await Ie.entities.compras.update(A._id,ke),Te(ke),X.success(`Pedido ${ue} gerado com sucesso`),await U()}catch(ue){console.error("Erro ao gerar pedido:",ue),X.error("Erro ao gerar pedido")}},Te=A=>{var ot,yt,Dt,V,He;const ue=`
      <!DOCTYPE html>
      <html>
      <head>
        <meta charset="utf-8">
        <title>Pedido de Compra - ${A.numeroPedido}</title>
        <style>
          body { font-family: Arial, sans-serif; margin: 20px; }
          .header { text-align: center; margin-bottom: 30px; border-bottom: 2px solid #333; padding-bottom: 20px; }
          .info-section { margin-bottom: 20px; }
          .info-section h3 { background-color: #f0f0f0; padding: 10px; margin: 0; }
          .info-content { padding: 15px; border: 1px solid #ddd; }
          table { width: 100%; border-collapse: collapse; margin: 20px 0; }
          th, td { border: 1px solid #ddd; padding: 12px; text-align: left; }
          th { background-color: #f0f0f0; }
          .total { font-weight: bold; background-color: #f9f9f9; }
          .footer { margin-top: 30px; text-align: center; font-size: 12px; color: #666; }
        </style>
      </head>
      <body>
        <div class="header">
          <h1>PEDIDO DE COMPRA</h1>
          <h2>Nº ${A.numeroPedido}</h2>
          <p>Data: ${new Date().toLocaleDateString("pt-BR")}</p>
        </div>

        <div class="info-section">
          <h3>DADOS DO FORNECEDOR</h3>
          <div class="info-content">
            <p><strong>Nome:</strong> ${(ot=A.fornecedorEscolhido)==null?void 0:ot.nomeFornecedor}</p>
            <p><strong>ID:</strong> ${(yt=A.fornecedorEscolhido)==null?void 0:yt.fornecedorId}</p>
          </div>
        </div>

        <div class="info-section">
          <h3>DADOS DA COMPRA</h3>
          <div class="info-content">
            <p><strong>Planejamento:</strong> ${A.planejamentoId}</p>
            <p><strong>Data da Compra:</strong> ${A.dataCompra?new Date(A.dataCompra).toLocaleDateString("pt-BR"):"N/A"}</p>
            <p><strong>Forma de Pagamento:</strong> ${(Dt=A.fornecedorEscolhido)==null?void 0:Dt.formaPagamento}</p>
            <p><strong>Data de Pagamento:</strong> ${(V=A.fornecedorEscolhido)!=null&&V.dataPagamento?new Date(A.fornecedorEscolhido.dataPagamento).toLocaleDateString("pt-BR"):"N/A"}</p>
            ${A.compraDirecta?"<p><strong>Tipo:</strong> Compra Direta (sem cotação)</p>":"<p><strong>Tipo:</strong> Compra com cotação</p>"}
          </div>
        </div>

        <table>
          <thead>
            <tr>
              <th>Item</th>
              <th>Quantidade</th>
              <th>Valor Unitário</th>
              <th>Valor Total</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>${A.nomeMaterial}</td>
              <td>${A.quantidade}</td>
              <td>R$ ${(((He=A.fornecedorEscolhido)==null?void 0:He.preco)||0).toFixed(2)}</td>
              <td>R$ ${(A.valorTotal||0).toFixed(2)}</td>
            </tr>
            <tr class="total">
              <td colspan="3"><strong>TOTAL GERAL</strong></td>
              <td><strong>R$ ${(A.valorTotal||0).toFixed(2)}</strong></td>
            </tr>
          </tbody>
        </table>

        ${!A.compraDirecta&&A.cotacoes&&A.cotacoes.length>0?`
          <div class="info-section">
            <h3>COTAÇÕES RECEBIDAS</h3>
            <div class="info-content">
              <table>
                <thead>
                  <tr>
                    <th>Fornecedor</th>
                    <th>Preço</th>
                    <th>Prazo Entrega</th>
                    <th>Condições</th>
                    <th>Selecionado</th>
                  </tr>
                </thead>
                <tbody>
                  ${A.cotacoes.map(ze=>`
                    <tr${ze.selecionado?' style="background-color: #e6ffe6;"':""}>
                      <td>${ze.nomeFornecedor}</td>
                      <td>R$ ${ze.preco.toFixed(2)}</td>
                      <td>${ze.prazoEntrega} dias</td>
                      <td>${ze.condicoesPagamento}</td>
                      <td>${ze.selecionado?"✓ SIM":"Não"}</td>
                    </tr>
                  `).join("")}
                </tbody>
              </table>
            </div>
          </div>
        `:""}

        <div class="footer">
          <p>Documento gerado automaticamente em ${new Date().toLocaleString("pt-BR")}</p>
          <p>Status: ${gu[A.status]||A.status}</p>
        </div>
      </body>
      </html>
    `,ke=new Blob([ue],{type:"text/html"}),Ve=URL.createObjectURL(ke),St=document.createElement("a");St.href=Ve,St.download=`pedido-${A.numeroPedido}.html`,document.body.appendChild(St),St.click(),document.body.removeChild(St),URL.revokeObjectURL(Ve)},Ae=async(A,ue)=>{try{const ke=e.find(St=>St._id===A);if(!ke)return;const Ve={...ke,status:ue,atualizadoEm:new Date().toISOString()};ue==="em_estoque"&&(await tt(ke),await Xe(ke)),await Ie.entities.compras.update(A,Ve),X.success("Status atualizado com sucesso"),await U()}catch(ke){console.error("Erro ao atualizar status:",ke),X.error("Erro ao atualizar status")}},tt=async A=>{var ue,ke,Ve;try{const St=n.find(ot=>ot.insumoId===A.materialId);if(St){const ot={...St,quantidade:St.quantidade+A.quantidade,valorTotal:(St.quantidade+A.quantidade)*St.valorUnitario,dataUltimaEntrada:new Date().toISOString(),atualizadoEm:new Date().toISOString()};await Ie.entities.estoque.update(St._id,ot)}else{const ot={insumoId:A.materialId,nomeInsumo:A.nomeMaterial,quantidade:A.quantidade,quantidadeMinima:10,valorUnitario:((ue=A.fornecedorEscolhido)==null?void 0:ue.preco)||0,valorTotal:(((ke=A.fornecedorEscolhido)==null?void 0:ke.preco)||0)*A.quantidade,localizacao:"A definir",fornecedorId:((Ve=A.fornecedorEscolhido)==null?void 0:Ve.fornecedorId)||"",dataUltimaEntrada:new Date().toISOString(),movimentacoes:[{id:`mov_${Date.now()}`,tipo:"entrada",quantidade:A.quantidade,motivo:`Compra - Pedido ${A.numeroPedido||A._id}`,compraId:A._id,data:new Date().toISOString(),responsavel:"Sistema"}],criadoEm:new Date().toISOString(),atualizadoEm:new Date().toISOString()};await Ie.entities.estoque.create(ot)}}catch(St){console.error("Erro ao atualizar estoque:",St)}},rt=async A=>{if(confirm("Tem certeza que deseja excluir este fornecedor?"))try{await Ie.entities.fornecedores.delete(A),X.success("Fornecedor excluído com sucesso"),await U()}catch(ue){console.error("Erro ao excluir fornecedor:",ue),X.error("Erro ao excluir fornecedor")}},gt=A=>{var ue,ke,Ve;A?(Ce(A),he({nome:A.nome,segmento:A.segmento,grauConfiabilidade:A.grauConfiabilidade,telefone:((ue=A.contato)==null?void 0:ue.telefone)||"",email:((ke=A.contato)==null?void 0:ke.email)||"",endereco:((Ve=A.contato)==null?void 0:Ve.endereco)||""})):(Ce(null),he({nome:"",segmento:"",grauConfiabilidade:3,telefone:"",email:"",endereco:""})),se(!0)},st=()=>{se(!1),Ce(null)},Tt=A=>{we(A),C(!0)},ne=()=>{const A={};e.forEach(ot=>{var V;const yt=d.find(He=>He._id===ot.planejamentoId),Dt=(yt==null?void 0:yt.nomeProjeto)||`Obra ${ot.planejamentoId}`;A[Dt]||(A[Dt]={nomeProjeto:Dt,cliente:(yt==null?void 0:yt.cliente)||"N/A",materiais:[],valorTotal:0,quantidadeItens:0}),A[Dt].materiais.push({nome:ot.nomeMaterial,quantidade:ot.quantidade,status:ot.status,fornecedor:((V=ot.fornecedorEscolhido)==null?void 0:V.nomeFornecedor)||"N/A",valor:ot.valorTotal||0,numeroPedido:ot.numeroPedido||"N/A",dataCompra:ot.dataCompra?new Date(ot.dataCompra).toLocaleDateString("pt-BR"):"N/A"}),A[Dt].valorTotal+=ot.valorTotal||0,A[Dt].quantidadeItens+=1});const ue=`
      <!DOCTYPE html>
      <html>
      <head>
        <meta charset="utf-8">
        <title>Relatório de Materiais por Obra</title>
        <style>
          body { font-family: Arial, sans-serif; margin: 20px; }
          .header { text-align: center; margin-bottom: 30px; border-bottom: 2px solid #333; padding-bottom: 20px; }
          .obra-section { margin-bottom: 40px; page-break-inside: avoid; }
          .obra-header { background-color: #f0f0f0; padding: 15px; margin-bottom: 15px; border-radius: 5px; }
          .obra-title { margin: 0; color: #333; }
          .obra-info { margin: 5px 0; color: #666; font-size: 14px; }
          table { width: 100%; border-collapse: collapse; margin: 15px 0; }
          th, td { border: 1px solid #ddd; padding: 10px; text-align: left; font-size: 12px; }
          th { background-color: #f9f9f9; font-weight: bold; }
          .status-enviado { background-color: #e3f2fd; }
          .status-aprovado { background-color: #e8f5e8; }
          .status-comprado { background-color: #fff3e0; }
          .status-em_estoque { background-color: #f3e5f5; }
          .resumo { background-color: #f0f8ff; padding: 10px; border-radius: 5px; margin-top: 15px; }
          .total-geral { background-color: #e6f3ff; padding: 20px; border-radius: 5px; margin-top: 30px; text-align: center; }
          .footer { margin-top: 30px; text-align: center; font-size: 12px; color: #666; }
        </style>
      </head>
      <body>
        <div class="header">
          <h1>RELATÓRIO DE MATERIAIS POR OBRA</h1>
          <p>Gerado em: ${new Date().toLocaleString("pt-BR")}</p>
          <p>Total de Obras: ${Object.keys(A).length}</p>
        </div>

        ${Object.values(A).map(ot=>`
          <div class="obra-section">
            <div class="obra-header">
              <h2 class="obra-title">${ot.nomeProjeto}</h2>
              <div class="obra-info">Cliente: ${ot.cliente}</div>
              <div class="obra-info">Total de Itens: ${ot.quantidadeItens} | Valor Total: R$ ${ot.valorTotal.toFixed(2)}</div>
            </div>

            <table>
              <thead>
                <tr>
                  <th>Material</th>
                  <th>Quantidade</th>
                  <th>Status</th>
                  <th>Fornecedor</th>
                  <th>Valor</th>
                  <th>Nº Pedido</th>
                  <th>Data Compra</th>
                </tr>
              </thead>
              <tbody>
                ${ot.materiais.map(yt=>`
                  <tr class="status-${yt.status.replace(" ","_")}">
                    <td>${yt.nome}</td>
                    <td>${yt.quantidade}</td>
                    <td>${gu[yt.status]||yt.status}</td>
                    <td>${yt.fornecedor}</td>
                    <td>R$ ${yt.valor.toFixed(2)}</td>
                    <td>${yt.numeroPedido}</td>
                    <td>${yt.dataCompra}</td>
                  </tr>
                `).join("")}
              </tbody>
            </table>

            <div class="resumo">
              <strong>Resumo da Obra:</strong>
              <br>• Materiais em estoque: ${ot.materiais.filter(yt=>yt.status==="em_estoque").length}
              <br>• Materiais comprados: ${ot.materiais.filter(yt=>yt.status==="comprado").length}
              <br>• Materiais aprovados: ${ot.materiais.filter(yt=>yt.status==="aprovado").length}
              <br>• Pendentes: ${ot.materiais.filter(yt=>["enviado","em_cotacao"].includes(yt.status)).length}
            </div>
          </div>
        `).join("")}

        <div class="total-geral">
          <h3>RESUMO GERAL</h3>
          <p><strong>Total de Obras:</strong> ${Object.keys(A).length}</p>
          <p><strong>Total de Materiais:</strong> ${Object.values(A).reduce((ot,yt)=>ot+yt.quantidadeItens,0)}</p>
          <p><strong>Valor Total Geral:</strong> R$ ${Object.values(A).reduce((ot,yt)=>ot+yt.valorTotal,0).toFixed(2)}</p>
        </div>

        <div class="footer">
          <p>Relatório gerado automaticamente pelo Sistema de Compras e Estoque</p>
        </div>
      </body>
      </html>
    `,ke=new Blob([ue],{type:"text/html"}),Ve=URL.createObjectURL(ke),St=document.createElement("a");St.href=Ve,St.download=`relatorio-materiais-obras-${new Date().toISOString().slice(0,10)}.html`,document.body.appendChild(St),St.click(),document.body.removeChild(St),URL.revokeObjectURL(Ve),X.success("Relatório de materiais por obra gerado com sucesso!")},Pe=e.filter(A=>{var ue;return w===""||((ue=A.nomeMaterial)==null?void 0:ue.toLowerCase().includes(w.toLowerCase()))}),at=r.filter(A=>{var ue,ke;return w===""||((ue=A.nome)==null?void 0:ue.toLowerCase().includes(w.toLowerCase()))||((ke=A.segmento)==null?void 0:ke.toLowerCase().includes(w.toLowerCase()))}),k=n.filter(A=>{var ue;return w===""||((ue=A.nomeInsumo)==null?void 0:ue.toLowerCase().includes(w.toLowerCase()))}),Qe=e.filter(A=>A.status==="enviado").length,Fe=n.filter(A=>A.quantidade<=A.quantidadeMinima).length,ut=n.filter(A=>{if(!A.dataVencimento)return!1;const ue=new Date(A.dataVencimento),ke=new Date,Ve=Math.ceil((ue.getTime()-ke.getTime())/(1e3*60*60*24));return Ve<=30&&Ve>0}).length,je=O.filter(A=>!A.lida).length,ht={emEstoque:e.filter(A=>A.status==="em_estoque").length,emCotacao:e.filter(A=>A.status==="em_cotacao").length,comprados:e.filter(A=>A.status==="comprado").length,valorTotal:e.filter(A=>A.valorTotal).reduce((A,ue)=>A+(ue.valorTotal||0),0)},qe={totalItens:n.length,valorTotal:n.reduce((A,ue)=>A+(ue.valorTotal||0),0),itensVinculados:n.filter(A=>i.find(ue=>ue.estoqueId===A._id||ue._id===A.insumoId)).length};return h?t.jsx("div",{className:"flex items-center justify-center h-64",children:t.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Compras & Estoque"}),t.jsx("p",{className:"text-gray-600",children:"Gerencie compras, fornecedores e controle de estoque - Integrado com Base de Insumos"})]}),t.jsxs("div",{className:"flex space-x-3",children:[t.jsxs("button",{onClick:Be,className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 flex items-center space-x-2",children:[t.jsx(vl,{className:"h-4 w-4"}),t.jsx("span",{children:"Sincronizar com Insumos"})]}),t.jsxs("button",{onClick:()=>$(!0),className:"bg-purple-600 text-white px-4 py-2 rounded-lg hover:bg-purple-700 flex items-center space-x-2",children:[t.jsx(rl,{className:"h-4 w-4"}),t.jsx("span",{children:"Compra Direta"})]}),t.jsx("div",{className:"relative",children:t.jsxs("button",{onClick:()=>fe(!0),className:"bg-orange-600 text-white px-4 py-2 rounded-lg hover:bg-orange-700 flex items-center space-x-2 relative",children:[t.jsx(fo,{className:"h-4 w-4"}),t.jsx("span",{children:"Notificações"}),je>0&&t.jsx("span",{className:"absolute -top-2 -right-2 bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center",children:je})]})}),(Qe>0||Fe>0)&&t.jsxs("button",{onClick:()=>fe(!0),className:"bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 flex items-center space-x-2 relative",children:[t.jsx(po,{className:"h-4 w-4"}),t.jsx("span",{children:"Alertas"}),t.jsx("span",{className:"absolute -top-2 -right-2 bg-yellow-500 text-xs rounded-full h-5 w-5 flex items-center justify-center",children:Qe+Fe})]}),t.jsxs("button",{onClick:()=>gt(),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 flex items-center space-x-2",children:[t.jsx(wa,{className:"h-4 w-4"}),t.jsx("span",{children:"Novo Fornecedor"})]})]})]}),(Fe>0||ut>0)&&t.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:[t.jsxs("div",{className:"flex items-center",children:[t.jsx(po,{className:"h-5 w-5 text-yellow-600 mr-2"}),t.jsx("h3",{className:"text-sm font-medium text-yellow-800",children:"Alertas Importantes"})]}),t.jsxs("div",{className:"mt-2 text-sm text-yellow-700",children:[Fe>0&&t.jsxs("div",{children:["• ",Fe," itens com estoque crítico"]}),ut>0&&t.jsxs("div",{children:["• ",ut," materiais vencendo em 30 dias"]}),t.jsx("div",{className:"text-xs text-yellow-600 mt-1",children:"* Sincronizado automaticamente com Base de Insumos"})]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[t.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx(Qr,{className:"h-8 w-8 text-blue-600"}),t.jsxs("div",{className:"ml-4",children:[t.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Em Estoque"}),t.jsx("p",{className:"text-2xl font-bold text-gray-900",children:ht.emEstoque})]})]})}),t.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx(si,{className:"h-8 w-8 text-yellow-600"}),t.jsxs("div",{className:"ml-4",children:[t.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Em Cotação"}),t.jsx("p",{className:"text-2xl font-bold text-gray-900",children:ht.emCotacao})]})]})}),t.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx(ps,{className:"h-8 w-8 text-green-600"}),t.jsxs("div",{className:"ml-4",children:[t.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Comprados"}),t.jsx("p",{className:"text-2xl font-bold text-gray-900",children:ht.comprados})]})]})}),t.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx(Ts,{className:"h-8 w-8 text-purple-600"}),t.jsxs("div",{className:"ml-4",children:[t.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Valor Total"}),t.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:["R$ ",ht.valorTotal.toLocaleString("pt-BR",{minimumFractionDigits:2})]})]})]})})]}),t.jsxs("div",{className:"bg-white rounded-lg shadow",children:[t.jsx("div",{className:"border-b border-gray-200",children:t.jsx("nav",{className:"flex space-x-8 px-6",children:[{id:"compras",label:"Compras",icon:rl},{id:"estoque",label:"Estoque",icon:Qr},{id:"fornecedores",label:"Fornecedores",icon:xo},{id:"notificacoes",label:"Notificações",icon:fo},{id:"relatorios",label:"Relatórios",icon:xl}].map(A=>{const ue=A.icon;return t.jsxs("button",{onClick:()=>g(A.id),className:`${b===A.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm flex items-center space-x-2 relative`,children:[t.jsx(ue,{className:"h-4 w-4"}),t.jsx("span",{children:A.label}),A.id==="notificacoes"&&je>0&&t.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full h-4 w-4 flex items-center justify-center",children:je})]},A.id)})})}),t.jsx("div",{className:"p-6 border-b border-gray-200",children:t.jsxs("div",{className:"relative",children:[t.jsx(Sl,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),t.jsx("input",{type:"text",placeholder:"Buscar...",value:w,onChange:A=>_(A.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})}),t.jsxs("div",{className:"p-6",children:[b==="compras"&&t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[t.jsx("thead",{className:"bg-gray-50",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Material"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Quantidade"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Valor Total"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Fornecedor"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tipo/Pedido"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Integração"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Ações"})]})}),t.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:Pe.map(A=>{var ke,Ve,St;const ue=i.find(ot=>ot._id===A.materialId);return t.jsxs("tr",{className:"hover:bg-gray-50",children:[t.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[t.jsx("div",{className:"text-sm font-medium text-gray-900",children:A.nomeMaterial}),t.jsxs("div",{className:"text-xs text-gray-500",children:["ID: ",A.planejamentoId]})]}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:A.quantidade}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.jsx("select",{value:A.status,onChange:ot=>Ae(A._id,ot.target.value),className:`text-sm rounded-full px-3 py-1 font-medium border-0 focus:ring-2 focus:ring-offset-2 ${N6[A.status]}`,children:Object.entries(gu).map(([ot,yt])=>t.jsx("option",{value:ot,children:yt},ot))})}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:A.valorTotal?`R$ ${A.valorTotal.toLocaleString("pt-BR",{minimumFractionDigits:2})}`:"-"}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:((ke=A.fornecedorEscolhido)==null?void 0:ke.nomeFornecedor)||"-"}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:t.jsxs("div",{children:[A.compraDirecta?t.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs bg-purple-100 text-purple-800",children:"Compra Direta"}):t.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs bg-blue-100 text-blue-800",children:["Com Cotação (",((Ve=A.cotacoes)==null?void 0:Ve.length)||0,"/3)"]}),A.numeroPedido&&t.jsxs("div",{className:"text-xs text-gray-600 mt-1",children:["Pedido: ",A.numeroPedido]})]})}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:(St=ue==null?void 0:ue.estoque)!=null&&St.temEstoque?t.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs bg-green-100 text-green-800",children:"✓ Sincronizado"}):t.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs bg-gray-100 text-gray-800",children:"- Não aplicável"})}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:t.jsxs("div",{className:"flex space-x-2",children:[t.jsx("button",{onClick:()=>Tt(A),className:"text-blue-600 hover:text-blue-900",title:"Gerenciar Cotações",children:t.jsx(Ts,{className:"h-4 w-4"})}),A.status==="aprovado"&&!A.numeroPedido&&t.jsx("button",{onClick:()=>be(A),className:"text-green-600 hover:text-green-900",title:"Gerar Pedido",children:t.jsx(K4,{className:"h-4 w-4"})})]})})]},A._id)})})]})}),b==="estoque"&&t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[t.jsx("thead",{className:"bg-gray-50",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Item"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Quantidade"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Valor Unitário"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Valor Total"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Localização"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Integração"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Ações"})]})}),t.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:k.map(A=>{const ue=i.find(ke=>ke._id===A.insumoId||ke.estoqueId===A._id);return t.jsxs("tr",{className:"hover:bg-gray-50",children:[t.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[t.jsx("div",{className:"text-sm font-medium text-gray-900",children:A.nomeInsumo}),A.dataVencimento&&t.jsxs("div",{className:"text-xs text-gray-500",children:["Vence: ",new Date(A.dataVencimento).toLocaleDateString("pt-BR")]})]}),t.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[t.jsx("div",{className:"text-sm text-gray-900",children:A.quantidade}),t.jsxs("div",{className:"text-xs text-gray-500",children:["Mín: ",A.quantidadeMinima]})]}),t.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:["R$ ",A.valorUnitario.toLocaleString("pt-BR",{minimumFractionDigits:2})]}),t.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:["R$ ",A.valorTotal.toLocaleString("pt-BR",{minimumFractionDigits:2})]}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:A.localizacao}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:A.quantidade<=A.quantidadeMinima?t.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800",children:[t.jsx(po,{className:"h-3 w-3 mr-1"}),"Crítico"]}):t.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[t.jsx(ps,{className:"h-3 w-3 mr-1"}),"Normal"]})}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:ue?t.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs bg-green-100 text-green-800",children:"✓ Vinculado aos Insumos"}):t.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs bg-orange-100 text-orange-800",children:"⚠️ Não vinculado"})}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:t.jsx("button",{onClick:()=>ft(A._id),className:"text-orange-600 hover:text-orange-900",title:"Dar Baixa (sincroniza com Insumos)",children:t.jsx(Qr,{className:"h-4 w-4"})})})]},A._id)})})]})}),b==="fornecedores"&&t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[t.jsx("thead",{className:"bg-gray-50",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Nome"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Segmento"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Confiabilidade"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tempo Entrega"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Preço Médio"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Ações"})]})}),t.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:at.map(A=>{var ue;return t.jsxs("tr",{className:"hover:bg-gray-50",children:[t.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[t.jsx("div",{className:"text-sm font-medium text-gray-900",children:A.nome}),t.jsx("div",{className:"text-xs text-gray-500",children:(ue=A.contato)==null?void 0:ue.email})]}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:A.segmento}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.jsxs("div",{className:"flex items-center",children:[[...Array(5)].map((ke,Ve)=>t.jsx(Og,{className:`h-4 w-4 ${Ve<A.grauConfiabilidade?"text-yellow-400 fill-current":"text-gray-300"}`},Ve)),t.jsxs("span",{className:"ml-2 text-sm text-gray-600",children:["(",A.grauConfiabilidade,"/5)"]})]})}),t.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[A.tempoMedioEntrega," dias"]}),t.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:["R$ ",A.precoMedio.toLocaleString("pt-BR",{minimumFractionDigits:2})]}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:t.jsxs("div",{className:"flex space-x-2",children:[t.jsx("button",{onClick:()=>gt(A),className:"text-blue-600 hover:text-blue-900",title:"Editar",children:t.jsx(gs,{className:"h-4 w-4"})}),t.jsx("button",{onClick:()=>rt(A._id),className:"text-red-600 hover:text-red-900",title:"Excluir",children:t.jsx(Ms,{className:"h-4 w-4"})})]})})]},A._id)})})]})}),b==="notificacoes"&&t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Central de Notificações"}),t.jsx("button",{onClick:()=>{const A=O.map(ue=>({...ue,lida:!0}));B(A)},className:"text-sm text-blue-600 hover:text-blue-800",children:"Marcar todas como lidas"})]}),O.length===0?t.jsxs("div",{className:"text-center py-12 text-gray-500",children:[t.jsx(fo,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),t.jsx("p",{children:"Nenhuma notificação no momento"})]}):t.jsx("div",{className:"space-y-3",children:O.map(A=>t.jsx("div",{className:`border rounded-lg p-4 ${A.lida?"bg-white border-gray-200":"bg-blue-50 border-blue-200"}`,children:t.jsxs("div",{className:"flex items-start justify-between",children:[t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("div",{className:`w-3 h-3 rounded-full ${A.prioridade==="alta"?"bg-red-500":A.prioridade==="media"?"bg-yellow-500":"bg-green-500"}`}),t.jsx("h4",{className:"font-medium text-gray-900",children:A.titulo}),!A.lida&&t.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs bg-blue-100 text-blue-800",children:"Nova"})]}),t.jsx("p",{className:"text-sm text-gray-600 mt-1",children:A.descricao}),A.itens&&A.itens.length>0&&t.jsxs("div",{className:"mt-2",children:[t.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Itens afetados:"}),t.jsxs("div",{className:"flex flex-wrap gap-1",children:[A.itens.slice(0,3).map((ue,ke)=>t.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded text-xs bg-gray-100 text-gray-800",children:ue},ke)),A.itens.length>3&&t.jsxs("span",{className:"text-xs text-gray-500",children:["+",A.itens.length-3," mais"]})]})]}),t.jsx("p",{className:"text-xs text-gray-400 mt-2",children:new Date(A.data).toLocaleString("pt-BR")})]}),!A.lida&&t.jsx("button",{onClick:()=>Ne(A.id),className:"text-sm text-blue-600 hover:text-blue-800",children:"Marcar como lida"})]})},A.id))})]}),b==="relatorios"&&t.jsx("div",{className:"space-y-6",children:t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[t.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Resumo Geral"}),t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-sm text-gray-600",children:"Total de Compras:"}),t.jsx("span",{className:"text-sm font-medium",children:e.length})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-sm text-gray-600",children:"Valor Total Comprado:"}),t.jsxs("span",{className:"text-sm font-medium",children:["R$ ",ht.valorTotal.toLocaleString("pt-BR",{minimumFractionDigits:2})]})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-sm text-gray-600",children:"Itens em Estoque:"}),t.jsx("span",{className:"text-sm font-medium",children:qe.totalItens})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-sm text-gray-600",children:"Valor do Estoque:"}),t.jsxs("span",{className:"text-sm font-medium",children:["R$ ",qe.valorTotal.toLocaleString("pt-BR",{minimumFractionDigits:2})]})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-sm text-gray-600",children:"Compras Diretas:"}),t.jsx("span",{className:"text-sm font-medium text-purple-600",children:e.filter(A=>A.compraDirecta).length})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-sm text-gray-600",children:"Integração com Insumos:"}),t.jsx("span",{className:"text-sm font-medium text-green-600",children:"✓ Ativa"})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-sm text-gray-600",children:"Itens Vinculados:"}),t.jsx("span",{className:"text-sm font-medium text-blue-600",children:qe.itensVinculados})]})]})]}),t.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[t.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Top Fornecedores"}),t.jsx("div",{className:"space-y-3",children:r.sort((A,ue)=>ue.grauConfiabilidade-A.grauConfiabilidade).slice(0,5).map(A=>t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-gray-900",children:A.nome}),t.jsx("p",{className:"text-xs text-gray-500",children:A.segmento})]}),t.jsxs("div",{className:"text-right",children:[t.jsx("div",{className:"flex items-center",children:[...Array(5)].map((ue,ke)=>t.jsx(Og,{className:`h-3 w-3 ${ke<A.grauConfiabilidade?"text-yellow-400 fill-current":"text-gray-300"}`},ke))}),t.jsxs("p",{className:"text-xs text-gray-500",children:[A.tempoMedioEntrega," dias"]})]})]},A._id))})]}),t.jsxs("div",{className:"bg-white rounded-lg shadow p-6 col-span-full",children:[t.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Status das Compras"}),t.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:Object.entries(gu).map(([A,ue])=>{const ke=e.filter(St=>St.status===A).length,Ve=e.length>0?ke/e.length*100:0;return t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"text-2xl font-bold text-gray-900",children:ke}),t.jsx("div",{className:"text-sm text-gray-600",children:ue}),t.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 mt-2",children:t.jsx("div",{className:"bg-blue-600 h-2 rounded-full",style:{width:`${Ve}%`}})}),t.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[Ve.toFixed(1),"%"]})]},A)})})]}),t.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6 col-span-full",children:[t.jsx("h3",{className:"text-lg font-medium text-blue-900 mb-4",children:"Sistema de Cotações (Máximo 3 Fornecedores)"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"text-2xl font-bold text-blue-600",children:e.filter(A=>A.cotacoes&&A.cotacoes.length===3).length}),t.jsx("div",{className:"text-sm text-blue-800",children:"Cotações Completas (3/3)"})]}),t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"text-2xl font-bold text-blue-600",children:e.filter(A=>A.cotacoes&&A.cotacoes.length===2).length}),t.jsx("div",{className:"text-sm text-blue-800",children:"Cotações Parciais (2/3)"})]}),t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"text-2xl font-bold text-blue-600",children:e.filter(A=>A.cotacoes&&A.cotacoes.length===1).length}),t.jsx("div",{className:"text-sm text-blue-800",children:"Cotações Iniciadas (1/3)"})]}),t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"text-2xl font-bold text-blue-600",children:e.filter(A=>A.compraDirecta).length}),t.jsx("div",{className:"text-sm text-blue-800",children:"Compras Diretas"})]})]})]}),t.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-6 col-span-full",children:[t.jsx("h3",{className:"text-lg font-medium text-green-900 mb-4",children:"Integração com Base de Insumos"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"text-2xl font-bold text-green-600",children:i.filter(A=>{var ue;return(ue=A.estoque)==null?void 0:ue.temEstoque}).length}),t.jsx("div",{className:"text-sm text-green-800",children:"Insumos Sincronizados"})]}),t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"text-2xl font-bold text-green-600",children:n.filter(A=>i.find(ue=>ue._id===A.insumoId||ue.estoqueId===A._id)).length}),t.jsx("div",{className:"text-sm text-green-800",children:"Itens Estoque Vinculados"})]}),t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"text-2xl font-bold text-green-600",children:e.filter(A=>{var ue,ke;return(ke=(ue=i.find(Ve=>Ve._id===A.materialId))==null?void 0:ue.estoque)==null?void 0:ke.temEstoque}).length}),t.jsx("div",{className:"text-sm text-green-800",children:"Compras Integradas"})]})]}),t.jsxs("div",{className:"text-xs text-green-700 mt-4",children:["✓ Baixas sincronizadas automaticamente entre estoque e insumos",t.jsx("br",{}),"✓ Compras aprovadas atualizam estoque e base de insumos",t.jsx("br",{}),"✓ Alertas de estoque baixo geram solicitações automáticas",t.jsx("br",{}),"✓ Produtos do estoque são automaticamente importados para insumos",t.jsx("br",{}),"✓ Sistema de cotação com máximo 3 fornecedores por item",t.jsx("br",{}),"✓ Compras diretas sem necessidade de cotação",t.jsx("br",{}),"✓ Geração automática de pedidos e integração com financeiro"]})]}),t.jsxs("div",{className:"col-span-full flex space-x-3",children:[t.jsxs("button",{className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 flex items-center space-x-2",children:[t.jsx(bo,{className:"h-4 w-4"}),t.jsx("span",{children:"Exportar Relatório"})]}),t.jsxs("button",{className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 flex items-center space-x-2",children:[t.jsx(qa,{className:"h-4 w-4"}),t.jsx("span",{children:"Relatório Detalhado"})]}),t.jsxs("button",{onClick:ne,className:"bg-purple-600 text-white px-4 py-2 rounded-lg hover:bg-purple-700 flex items-center space-x-2",children:[t.jsx($4,{className:"h-4 w-4"}),t.jsx("span",{children:"Relatório por Obras"})]})]})]})})]})]}),K&&t.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:t.jsx("div",{className:"relative top-10 mx-auto p-5 border w-full max-w-2xl shadow-lg rounded-md bg-white",children:t.jsxs("div",{className:"mt-3",children:[t.jsxs("div",{className:"flex justify-between items-center mb-4",children:[t.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Notificações de Compras e Estoque"}),t.jsx("button",{onClick:()=>fe(!1),className:"text-gray-400 hover:text-gray-600",children:t.jsx(sl,{className:"h-5 w-5"})})]}),t.jsxs("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:[e.filter(A=>A.status==="enviado").map(A=>t.jsx("div",{className:"border-l-4 border-blue-500 pl-4 py-3 bg-blue-50",children:t.jsxs("div",{className:"flex justify-between items-start",children:[t.jsxs("div",{children:[t.jsx("p",{className:"font-medium text-gray-900",children:"Nova solicitação de compra"}),t.jsxs("p",{className:"text-sm text-gray-600",children:[A.nomeMaterial," - Quantidade: ",A.quantidade]}),t.jsx("p",{className:"text-xs text-gray-500 mt-1",children:new Date(A.criadoEm).toLocaleString("pt-BR")})]}),t.jsx("button",{onClick:()=>{Tt(A),fe(!1)},className:"text-sm text-blue-600 hover:text-blue-800",children:"Gerenciar"})]})},A._id)),O.map(A=>t.jsx("div",{className:`border-l-4 pl-4 py-3 ${A.tipo==="estoque_baixo"?"border-red-500 bg-red-50":A.tipo==="prazo_vencimento"?"border-yellow-500 bg-yellow-50":A.tipo==="cotacao_pendente"?"border-blue-500 bg-blue-50":"border-gray-500 bg-gray-50"}`,children:t.jsxs("div",{className:"flex justify-between items-start",children:[t.jsxs("div",{children:[t.jsx("p",{className:"font-medium text-gray-900",children:A.titulo}),t.jsx("p",{className:"text-sm text-gray-600",children:A.descricao}),t.jsx("p",{className:"text-xs text-gray-500 mt-1",children:new Date(A.data).toLocaleString("pt-BR")})]}),!A.lida&&t.jsx("button",{onClick:()=>Ne(A.id),className:"text-sm text-blue-600 hover:text-blue-800",children:"Marcar como lida"})]})},A.id)),e.filter(A=>A.status==="enviado").length===0&&O.length===0&&t.jsx("div",{className:"text-center py-8 text-gray-500",children:"Nenhuma notificação pendente"})]})]})})}),v&&R&&t.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:t.jsx("div",{className:"relative top-10 mx-auto p-5 border w-full max-w-4xl shadow-lg rounded-md bg-white",children:t.jsxs("div",{className:"mt-3",children:[t.jsxs("div",{className:"flex justify-between items-center mb-4",children:[t.jsxs("h3",{className:"text-lg font-medium text-gray-900",children:["Gerenciar Cotações - ",R.nomeMaterial]}),t.jsx("button",{onClick:()=>C(!1),className:"text-gray-400 hover:text-gray-600",children:t.jsx(sl,{className:"h-5 w-5"})})]}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[t.jsxs("div",{children:[t.jsxs("h4",{className:"text-md font-medium text-gray-900 mb-3",children:["Adicionar Cotação (",((lt=R.cotacoes)==null?void 0:lt.length)||0,"/3)"]}),(((de=R.cotacoes)==null?void 0:de.length)||0)<3&&t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Fornecedor"}),t.jsxs("select",{value:ie.fornecedorId,onChange:A=>Ue({...ie,fornecedorId:A.target.value}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500",children:[t.jsx("option",{value:"",children:"Selecione um fornecedor"}),r.filter(A=>{var ue;return A.ativo&&!((ue=R.cotacoes)!=null&&ue.find(ke=>ke.fornecedorId===A._id))}).map(A=>t.jsxs("option",{value:A._id,children:[A.nome," - ",A.segmento]},A._id))]})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Preço Unitário"}),t.jsx("input",{type:"number",step:"0.01",value:ie.preco,onChange:A=>Ue({...ie,preco:Number(A.target.value)}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Prazo Entrega (dias)"}),t.jsx("input",{type:"number",value:ie.prazoEntrega,onChange:A=>Ue({...ie,prazoEntrega:Number(A.target.value)}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Condições de Pagamento"}),t.jsx("input",{type:"text",value:ie.condicoesPagamento,onChange:A=>Ue({...ie,condicoesPagamento:A.target.value}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"ex: 30 dias, À vista"})]}),t.jsx("button",{onClick:te,className:"w-full bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700",children:"Adicionar Cotação"})]}),(((nt=R.cotacoes)==null?void 0:nt.length)||0)>=3&&t.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:t.jsx("p",{className:"text-sm text-yellow-800",children:"Máximo de 3 fornecedores atingido. Selecione a melhor opção abaixo."})})]}),t.jsxs("div",{children:[t.jsx("h4",{className:"text-md font-medium text-gray-900 mb-3",children:"Cotações Recebidas"}),t.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:(Nt=R.cotacoes)==null?void 0:Nt.map((A,ue)=>t.jsx("div",{className:`border rounded-lg p-4 ${A.selecionado?"border-green-500 bg-green-50":"border-gray-200"}`,children:t.jsxs("div",{className:"flex justify-between items-start",children:[t.jsxs("div",{children:[t.jsx("p",{className:"font-medium text-gray-900",children:A.nomeFornecedor}),t.jsxs("p",{className:"text-sm text-gray-600",children:["Preço: R$ ",A.preco.toFixed(2)," | Prazo: ",A.prazoEntrega," dias"]}),t.jsxs("p",{className:"text-sm text-gray-600",children:["Pagamento: ",A.condicoesPagamento]}),t.jsxs("p",{className:"text-sm font-medium text-gray-900 mt-1",children:["Total: R$ ",(A.preco*R.quantidade).toFixed(2)]})]}),!R.fornecedorEscolhido&&t.jsx("button",{onClick:()=>{G({fornecedorId:A.fornecedorId,formaPagamento:"",dataPagamento:""})},className:"text-green-600 hover:text-green-800 text-sm",children:"Selecionar"})]})},ue))}),S.fornecedorId&&!R.fornecedorEscolhido&&t.jsxs("div",{className:"mt-4 p-4 border border-green-200 rounded-lg bg-green-50",children:[t.jsx("h5",{className:"font-medium text-gray-900 mb-3",children:"Finalizar Compra"}),t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Forma de Pagamento"}),t.jsxs("select",{value:S.formaPagamento,onChange:A=>G({...S,formaPagamento:A.target.value}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500",children:[t.jsx("option",{value:"",children:"Selecione"}),t.jsx("option",{value:"Boleto bancário",children:"Boleto bancário"}),t.jsx("option",{value:"Transferência",children:"Transferência"}),t.jsx("option",{value:"Cartão de crédito",children:"Cartão de crédito"}),t.jsx("option",{value:"Dinheiro",children:"Dinheiro"}),t.jsx("option",{value:"Cheque",children:"Cheque"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Data de Pagamento"}),t.jsx("input",{type:"date",value:S.dataPagamento,onChange:A=>G({...S,dataPagamento:A.target.value}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500"})]}),t.jsx("button",{onClick:ae,className:"w-full bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700",children:"Aprovar Compra (cria conta a pagar)"})]})]})]})]})]})})}),me&&t.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:t.jsx("div",{className:"relative top-10 mx-auto p-5 border w-full max-w-2xl shadow-lg rounded-md bg-white",children:t.jsxs("div",{className:"mt-3",children:[t.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Compra Direta (sem cotação)"}),t.jsxs("form",{onSubmit:Ct,className:"space-y-4",children:[t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Planejamento"}),t.jsxs("select",{value:q.planejamentoId,onChange:A=>N({...q,planejamentoId:A.target.value}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500",required:!0,children:[t.jsx("option",{value:"",children:"Selecione um planejamento"}),d.map(A=>t.jsx("option",{value:A._id,children:A.nomeProjeto},A._id))]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Material/Insumo"}),t.jsxs("select",{value:q.materialId,onChange:A=>{const ue=i.find(ke=>ke._id===A.target.value);N({...q,materialId:A.target.value,nomeMaterial:(ue==null?void 0:ue.nome)||""})},className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500",required:!0,children:[t.jsx("option",{value:"",children:"Selecione um material"}),i.map(A=>t.jsxs("option",{value:A._id,children:[A.nome," - ",A.unidadeMedida]},A._id))]})]})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Quantidade"}),t.jsx("input",{type:"number",value:q.quantidade,onChange:A=>N({...q,quantidade:Number(A.target.value)}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500",required:!0,min:"1"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Preço Unitário"}),t.jsx("input",{type:"number",step:"0.01",value:q.preco,onChange:A=>N({...q,preco:Number(A.target.value)}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500",required:!0,min:"0"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Fornecedor"}),t.jsxs("select",{value:q.fornecedorId,onChange:A=>N({...q,fornecedorId:A.target.value}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500",required:!0,children:[t.jsx("option",{value:"",children:"Selecione um fornecedor"}),r.filter(A=>A.ativo).map(A=>t.jsxs("option",{value:A._id,children:[A.nome," - ",A.segmento]},A._id))]})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Forma de Pagamento"}),t.jsxs("select",{value:q.formaPagamento,onChange:A=>N({...q,formaPagamento:A.target.value}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500",required:!0,children:[t.jsx("option",{value:"",children:"Selecione"}),t.jsx("option",{value:"Boleto bancário",children:"Boleto bancário"}),t.jsx("option",{value:"Transferência",children:"Transferência"}),t.jsx("option",{value:"Cartão de crédito",children:"Cartão de crédito"}),t.jsx("option",{value:"Dinheiro",children:"Dinheiro"}),t.jsx("option",{value:"Cheque",children:"Cheque"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Data de Pagamento"}),t.jsx("input",{type:"date",value:q.dataPagamento,onChange:A=>N({...q,dataPagamento:A.target.value}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500",required:!0})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Observações"}),t.jsx("textarea",{value:q.observacoes,onChange:A=>N({...q,observacoes:A.target.value}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500",rows:3,placeholder:"Motivo da compra direta, urgência, etc."})]}),q.quantidade>0&&q.preco>0&&t.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[t.jsx("p",{className:"text-sm text-blue-800",children:t.jsxs("strong",{children:["Valor Total: R$ ",(q.quantidade*q.preco).toFixed(2)]})}),t.jsx("p",{className:"text-xs text-blue-600 mt-1",children:"Esta compra será aprovada automaticamente e criará uma conta a pagar no financeiro."})]}),t.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[t.jsx("button",{type:"button",onClick:()=>$(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 border border-gray-300 rounded-md hover:bg-gray-200",children:"Cancelar"}),t.jsx("button",{type:"submit",className:"px-4 py-2 text-sm font-medium text-white bg-purple-600 border border-transparent rounded-md hover:bg-purple-700",children:"Realizar Compra Direta"})]})]})]})})}),W&&t.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:t.jsx("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:t.jsxs("div",{className:"mt-3",children:[t.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:ce?"Editar Fornecedor":"Novo Fornecedor"}),t.jsxs("form",{onSubmit:Me,className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Nome"}),t.jsx("input",{type:"text",value:Z.nome,onChange:A=>he({...Z,nome:A.target.value}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500",required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Segmento"}),t.jsx("input",{type:"text",value:Z.segmento,onChange:A=>he({...Z,segmento:A.target.value}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"ex: Materiais de Construção",required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Grau de Confiabilidade (1-5)"}),t.jsxs("select",{value:Z.grauConfiabilidade,onChange:A=>he({...Z,grauConfiabilidade:Number(A.target.value)}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500",children:[t.jsx("option",{value:1,children:"1 - Muito Baixo"}),t.jsx("option",{value:2,children:"2 - Baixo"}),t.jsx("option",{value:3,children:"3 - Médio"}),t.jsx("option",{value:4,children:"4 - Alto"}),t.jsx("option",{value:5,children:"5 - Muito Alto"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Telefone"}),t.jsx("input",{type:"text",value:Z.telefone,onChange:A=>he({...Z,telefone:A.target.value}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"(11) 99999-9999"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Email"}),t.jsx("input",{type:"email",value:Z.email,onChange:A=>he({...Z,email:A.target.value}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"contato@fornecedor.com"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Endereço"}),t.jsx("textarea",{value:Z.endereco,onChange:A=>he({...Z,endereco:A.target.value}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500",rows:3,placeholder:"Endereço completo"})]}),t.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[t.jsx("button",{type:"button",onClick:st,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 border border-gray-300 rounded-md hover:bg-gray-200",children:"Cancelar"}),t.jsx("button",{type:"submit",className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-md hover:bg-blue-700",children:ce?"Atualizar":"Criar"})]})]})]})})})]})}const $o={sol:{label:"Sol",emoji:"☀️",icon:rb},chuva:{label:"Chuva",emoji:"🌧️",icon:Y2},nublado:{label:"Nublado",emoji:"☁️",icon:X2}},op={sol:rb,chuva:Y2,nublado:X2},ip={diario:"Diário",semanal:"Semanal"},S6={baixa:"bg-green-100 text-green-800",media:"bg-yellow-100 text-yellow-800",alta:"bg-red-100 text-red-800"},nv={baixa:"Baixa",media:"Média",alta:"Alta"},ov={ocorrencia:"Ocorrência",acidente:"Acidente",inspecao:"Inspeção"},lp={segunda:"Segunda-feira",terca:"Terça-feira",quarta:"Quarta-feira",quinta:"Quinta-feira",sexta:"Sexta-feira"},Wn=e=>e==null||isNaN(Number(e))?"R$ 0,00":`R$ ${Number(e).toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2})}`,Wa=e=>e==null||isNaN(Number(e))?0:Number(e),Gn=e=>{if(!e)return"-";try{return new Date(e).toLocaleDateString("pt-BR")}catch{return"-"}},k6=e=>{if(!e)return"-";try{return new Date(e).toLocaleString("pt-BR")}catch{return"-"}};function C6(){var He,ze,vt,xt,qt,Jt,ma;const[e,a]=I.useState([]),[r,s]=I.useState([]),[n,o]=I.useState([]),[i,c]=I.useState([]),[d,p]=I.useState([]),[h,x]=I.useState(!0),[b,g]=I.useState(""),[w,_]=I.useState(""),[O,y]=I.useState(""),[v,C]=I.useState(""),[W,se]=I.useState(!1),[J,Y]=I.useState(!1),[K,fe]=I.useState(!1),[me,$]=I.useState(null),[L,le]=I.useState(null),[R,we]=I.useState({planejamentoId:"",tipo:"diario",data:new Date().toISOString().split("T")[0],responsavel:"",local:"",clima:{manha:"sol",tarde:"sol",noite:"sol"},climaSemanal:{segunda:"sol",terca:"sol",quarta:"sol",quinta:"sol",sexta:"sol"},medicao:{percentualConcluido:0,valorMedicao:0,observacoes:""}}),[ce,Ce]=I.useState({funcionarioId:"",horasTrabalhadas:8}),[Z,he]=I.useState({nome:"",horasUso:8,observacoes:""}),[ie,Ue]=I.useState({descricao:"",responsavel:"",progresso:0}),[S,G]=I.useState({tipo:"ocorrencia",descricao:"",gravidade:"media",acaoCorretiva:""}),[q,N]=I.useState({epiUtilizado:!1,areaIsolada:!1,equipamentosFuncionando:!1,observacoes:""}),[U,T]=I.useState([]),[B,oe]=I.useState([]),[Ne,Be]=I.useState([]),[Xe,dt]=I.useState([]),[ft,Me]=I.useState([]),[te,Ct]=I.useState([]),[ae,xe]=I.useState([]),[be,Te]=I.useState([]),[Ae,tt]=I.useState([]);I.useEffect(()=>{rt(),C(Pe())},[]),I.useEffect(()=>{b&&(gt(),st(),Tt())},[b]),I.useEffect(()=>{b&&ne()},[b,Xe,ft,Ne,Ae]);const rt=async()=>{try{x(!0);const[F,Ge,Re,bt,Ot]=await Promise.all([Ie.entities.diarios.list(),Ie.entities.planejamentos.list(),Ie.entities.planejamento_semanal.list(),Ie.entities.funcionarios.list(),Ie.entities.propostas.list()]);a(F.list||[]),s(Ge.list||[]),o(Re.list||[]),c((bt.list||[]).filter(Pt=>Pt==null?void 0:Pt.ativo)),p(Ot.list||[]),(Ge.list||[]).length>0&&!b&&g(Ge.list[0]._id)}catch(F){console.error("Erro ao buscar dados:",F),X.error("Erro ao carregar dados")}finally{x(!1)}},gt=async()=>{try{const{list:F}=await Ie.entities.diarios.list(),Ge=(F||[]).filter(Re=>Re.planejamentoId===b);a(Ge)}catch(F){console.error("Erro ao buscar diários:",F),X.error("Erro ao carregar diários")}},st=async()=>{try{if(!b)return;const F=r.find(Ot=>Ot._id===b),Ge=[];F!=null&&F.etapas&&F.etapas.forEach(Ot=>{Ot.atividades&&Ot.atividades.forEach(Pt=>{Ge.push({id:Pt.id,nome:Pt.nome,etapa:Ot.nome,responsavel:Pt.responsavel,progresso:Pt.progresso,status:Pt.status,origem:"planejamento"})}),Ot.subetapas&&Ot.subetapas.forEach(Pt=>{Pt.atividades&&Pt.atividades.forEach(pt=>{Ge.push({id:pt.id,nome:pt.nome,etapa:Ot.nome,subetapa:Pt.nome,responsavel:pt.responsavel,progresso:pt.progresso,status:pt.status,origem:"planejamento"})})})});const Re=n.find(Ot=>Ot.planejamentoId===b),bt=[];Re!=null&&Re.atividades&&Re.atividades.forEach(Ot=>{bt.push({id:Ot.id,nome:Ot.nome,responsavel:Ot.responsavel,progresso:Ot.progresso,status:Ot.status,origem:"planejamento_semanal"})}),dt(Ge),Me(bt)}catch(F){console.error("Erro ao carregar atividades do planejamento:",F),X.error("Erro ao carregar atividades do planejamento")}},Tt=async()=>{try{if(!b)return;const F=r.find(bt=>bt._id===b);if(!F)return;const Ge=d.find(bt=>bt.nomeProjeto===F.nomeProjeto&&bt.cliente===F.cliente);if(!Ge){console.log("Proposta não encontrada para carregar etapas/subetapas"),tt([]);return}const Re=[];Ge.etapas.forEach(bt=>{Re.push({id:`etapa_${bt.id}`,tipo:"etapa",etapaId:bt.id,nome:`${bt.numero}. ${bt.nome}`,responsavel:"",progresso:0,realizada:!1,origem:"proposta"}),bt.subetapas.forEach(Ot=>{Re.push({id:`subetapa_${Ot.id}`,tipo:"subetapa",etapaId:bt.id,subetapaId:Ot.id,nome:`${Ot.numero}. ${Ot.nome}`,responsavel:"",progresso:0,realizada:!1,origem:"proposta"})})}),tt(Re)}catch(F){console.error("Erro ao carregar etapas/subetapas da proposta:",F),X.error("Erro ao carregar etapas/subetapas da proposta")}},ne=async()=>{try{if(!b)return;const F=r.find(pt=>pt._id===b);if(!F)return;const Ge=d.find(pt=>pt.nomeProjeto===F.nomeProjeto&&pt.cliente===F.cliente);if(!Ge){console.log("Proposta não encontrada para calcular valor da medição");return}const Re=[...Xe,...ft,...Ne,...Ae.filter(pt=>pt.realizada)];let bt=0;Re.length>0&&(bt=Re.reduce((xa,Pr)=>xa+Wa(Pr.progresso),0)/Re.length);const Pt=Wa(Ge.valorTotal)*bt/100;we(pt=>({...pt,medicao:{...pt.medicao,percentualConcluido:Math.round(bt),valorMedicao:Pt}}))}catch(F){console.error("Erro ao calcular valor da medição:",F)}},Pe=()=>{const F=new Date;return new Date(F.setDate(F.getDate()-F.getDay())).toISOString().split("T")[0]},at=F=>{const Ge=new Date(v),Re=new Date(Ge);Re.setDate(Ge.getDate()+(F==="next"?7:-7)),C(Re.toISOString().split("T")[0])},k=async F=>{try{if(!F.maoDeObra||F.maoDeObra.length===0)return;const Ge=F.maoDeObra.reduce((bt,Ot)=>bt+Wa(Ot.valorTotal),0),Re={tipo:"provisao_despesa",categoria:"Mão de Obra",descricao:`Projeção de custo - Mão de obra do diário ${F.tipo} de ${Gn(F.data)}`,valor:Ge,planejamentoId:F.planejamentoId,diarioOrigemId:F._id,status:"pendente",dataVencimento:F.data,observacoes:`Gerado automaticamente do diário de obra. Funcionários: ${F.maoDeObra.map(bt=>bt.nome).join(", ")}`,criadoEm:new Date().toISOString(),atualizadoEm:new Date().toISOString()};await Ie.entities.financeiro.create(Re),X.success("Projeção de custo de mão de obra criada no financeiro")}catch(Ge){console.error("Erro ao criar projeção de custo:",Ge),X.error("Erro ao criar projeção de custo no financeiro")}},Qe=async F=>{try{if(!F.medicao||Wa(F.medicao.valorMedicao)<=0)return;const Ge={tipo:"provisao_receita",categoria:"Medição de Obra",descricao:`Projeção de recebimento - Medição do diário ${F.tipo} de ${Gn(F.data)}`,valor:Wa(F.medicao.valorMedicao),planejamentoId:F.planejamentoId,diarioOrigemId:F._id,status:"pendente",dataVencimento:F.data,observacoes:`Gerado automaticamente do diário de obra. Percentual concluído: ${Wa(F.medicao.percentualConcluido)}%. ${F.medicao.observacoes||""}`,criadoEm:new Date().toISOString(),atualizadoEm:new Date().toISOString()};await Ie.entities.financeiro.create(Ge),X.success("Projeção de recebimento de medição criada no financeiro")}catch(Ge){console.error("Erro ao criar projeção de recebimento:",Ge),X.error("Erro ao criar projeção de recebimento no financeiro")}},Fe=(F,Ge,Re)=>{tt(bt=>bt.map(Ot=>Ot.id===F?{...Ot,[Ge]:Re}:Ot)),setTimeout(()=>ne(),100)},ut=async()=>{if(!R.planejamentoId||!R.responsavel){X.error("Preencha todos os campos obrigatórios");return}try{const F={planejamentoId:R.planejamentoId,tipo:R.tipo,data:R.data,responsavel:R.responsavel,local:R.local,clima:R.clima,climaSemanal:R.tipo==="semanal"?R.climaSemanal:void 0,maoDeObra:U,equipamentos:B,atividades:Ne,atividadesPlanejamento:Xe,atividadesPlanejamentoSemanal:ft,fotos:te,naoConformidades:ae,checklistSeguranca:q,documentos:be,medicao:R.medicao,atividadesEtapaSubetapa:Ae,criadoEm:(me==null?void 0:me.criadoEm)||new Date().toISOString(),atualizadoEm:new Date().toISOString()};let Ge;me?(await Ie.entities.diarios.update(me._id,F),Ge={...F,_id:me._id},X.success("Diário atualizado com sucesso")):(Ge=await Ie.entities.diarios.create(F),X.success("Diário criado com sucesso")),await k(Ge),await Qe(Ge),await gt(),Ve()}catch(F){console.error("Erro ao salvar diário:",F),X.error("Erro ao salvar diário")}},je=async F=>{if(confirm("Tem certeza que deseja excluir este diário?"))try{await Ie.entities.diarios.delete(F),X.success("Diário excluído com sucesso"),await gt()}catch(Ge){console.error("Erro ao excluir diário:",Ge),X.error("Erro ao excluir diário")}},ht=()=>{if(!ce.funcionarioId)return;const F=i.find(bt=>bt._id===ce.funcionarioId);if(!F)return;const Ge=ce.horasTrabalhadas*Wa(F.valorHora),Re={funcionarioId:F._id,nome:F.nome,funcao:F.funcao,horasTrabalhadas:ce.horasTrabalhadas,valorHora:Wa(F.valorHora),valorTotal:Ge};T([...U,Re]),Ce({funcionarioId:"",horasTrabalhadas:8})},qe=()=>{if(!Z.nome)return;const F={nome:Z.nome,horasUso:Z.horasUso,observacoes:Z.observacoes};oe([...B,F]),he({nome:"",horasUso:8,observacoes:""})},lt=()=>{if(!ie.descricao||!ie.responsavel)return;const F={descricao:ie.descricao,responsavel:ie.responsavel,progresso:ie.progresso};Be([...Ne,F]),Ue({descricao:"",responsavel:"",progresso:0}),setTimeout(()=>ne(),100)},de=()=>{if(!S.descricao)return;const F={tipo:S.tipo,descricao:S.descricao,gravidade:S.gravidade,acaoCorretiva:S.acaoCorretiva};xe([...ae,F]),G({tipo:"ocorrencia",descricao:"",gravidade:"media",acaoCorretiva:""})},nt=F=>{const Ge=F.target.files;Ge&&(Array.from(Ge).forEach((Re,bt)=>{if(Re.type.startsWith("image/")){const Ot=new FileReader;Ot.onload=Pt=>{var xa;const pt={id:`foto_${Date.now()}_${bt}`,url:(xa=Pt.target)==null?void 0:xa.result,descricao:`Foto da obra - ${Re.name}`,timestamp:new Date().toISOString(),arquivo:Re};Ct(Pr=>[...Pr,pt])},Ot.readAsDataURL(Re)}else X.error(`Arquivo ${Re.name} não é uma imagem válida`)}),F.target.value="")},Nt=F=>{const Ge=F.target.files;Ge&&(Array.from(Ge).forEach((Re,bt)=>{const Ot={id:`doc_${Date.now()}_${bt}`,nome:Re.name,url:URL.createObjectURL(Re),tipo:Re.type||"application/octet-stream",arquivo:Re};Te(Pt=>[...Pt,Ot])}),F.target.value="")},A=F=>{var Ge;try{X.loading("Gerando PDF com campos de assinatura...",{id:"pdf-signature"});const Re=new Rt,bt=Re.internal.pageSize.width,Ot=Re.internal.pageSize.height,Pt=20;let pt=Pt;Re.setFontSize(18),Re.setFont("helvetica","bold"),Re.text("DIÁRIO DE OBRA",bt/2,pt,{align:"center"}),pt+=20,Re.setFontSize(12),Re.setFont("helvetica","normal");const xa=r.find(Le=>Le._id===F.planejamentoId);[`Obra: ${(xa==null?void 0:xa.nomeProjeto)||"N/A"}`,`Cliente: ${(xa==null?void 0:xa.cliente)||"N/A"}`,`Data: ${Gn(F.data)}`,`Tipo: ${ip[F.tipo]}`,`Responsável: ${F.responsavel}`,`Local: ${F.local||"N/A"}`].forEach(Le=>{Re.text(Le,Pt,pt),pt+=8}),pt+=10,Re.setFont("helvetica","bold"),Re.text("CONDIÇÕES CLIMÁTICAS:",Pt,pt),pt+=10,Re.setFont("helvetica","normal"),F.tipo==="semanal"&&F.climaSemanal?Object.entries(F.climaSemanal).forEach(([Le,Je])=>{const Ye=$o[Je];Re.text(`${lp[Le]}: ${Ye.emoji} ${Ye.label}`,Pt,pt),pt+=6}):["manha","tarde","noite"].forEach(Je=>{var Xt;const Ye=((Xt=F.clima)==null?void 0:Xt[Je])||"sol",Lt=$o[Ye];Re.text(`${Je.charAt(0).toUpperCase()+Je.slice(1)}: ${Lt.emoji} ${Lt.label}`,Pt,pt),pt+=6}),pt+=10,F.maoDeObra&&F.maoDeObra.length>0&&(Re.setFont("helvetica","bold"),Re.text("MÃO DE OBRA:",Pt,pt),pt+=10,Re.setFont("helvetica","normal"),F.maoDeObra.forEach(Le=>{Re.text(`• ${Le.nome} (${Le.funcao}) - ${Le.horasTrabalhadas}h - ${Wn(Le.valorTotal)}`,Pt,pt),pt+=6}),pt+=10);const Q=[...F.atividades||[],...F.atividadesPlanejamento||[],...F.atividadesPlanejamentoSemanal||[],...((Ge=F.atividadesEtapaSubetapa)==null?void 0:Ge.filter(Le=>Le.realizada))||[]];Q.length>0&&(Re.setFont("helvetica","bold"),Re.text("ATIVIDADES REALIZADAS:",Pt,pt),pt+=10,Re.setFont("helvetica","normal"),Q.forEach(Le=>{let Je="",Ye="",Lt=0;"descricao"in Le?(Je=Le.descricao,Ye=Le.responsavel,Lt=Wa(Le.progresso)):"nome"in Le&&(Je=Le.nome,Ye=Le.responsavel,Lt=Wa(Le.progresso)),Re.text(`• ${Je} - ${Ye} (${Lt}%)`,Pt,pt),pt+=6}),pt+=10),F.medicao&&(Re.setFont("helvetica","bold"),Re.text("MEDIÇÃO:",Pt,pt),pt+=10,Re.setFont("helvetica","normal"),Re.text(`Percentual Concluído: ${Wa(F.medicao.percentualConcluido)}%`,Pt,pt),pt+=6,Re.text(`Valor da Medição: ${Wn(F.medicao.valorMedicao)}`,Pt,pt),pt+=6,F.medicao.observacoes&&(Re.text(`Observações: ${F.medicao.observacoes}`,Pt,pt),pt+=6),pt+=15),pt>Ot-100&&(Re.addPage(),pt=Pt),Re.setFont("helvetica","bold"),Re.text("ASSINATURAS:",Pt,pt),pt+=20,Re.setFont("helvetica","normal"),Re.text("GESTOR DA OBRA:",Pt,pt),pt+=10,Re.line(Pt,pt,bt-Pt,pt),pt+=10,Re.text("Nome: ___________________________________",Pt,pt),pt+=10,Re.text("Data: ___/___/______",Pt,pt),pt+=20,Re.text("CLIENTE/RESPONSÁVEL:",Pt,pt),pt+=10,Re.line(Pt,pt,bt-Pt,pt),pt+=10,Re.text("Nome: ___________________________________",Pt,pt),pt+=10,Re.text("Data: ___/___/______",Pt,pt),Re.setFontSize(10),Re.setFont("helvetica","italic"),Re.text(`Documento gerado em: ${k6(new Date().toISOString())}`,Pt,Ot-20);const _e=`diario_obra_${F.tipo}_${new Date(F.data).toISOString().split("T")[0]}.pdf`;Re.save(_e),X.success("PDF com campos de assinatura gerado com sucesso!",{id:"pdf-signature"})}catch(Re){console.error("Erro ao gerar PDF:",Re),X.error("Erro ao gerar PDF",{id:"pdf-signature"})}},ue=F=>{A(F)},ke=F=>{var Ge;F?($(F),we({planejamentoId:F.planejamentoId,tipo:F.tipo,data:((Ge=F.data)==null?void 0:Ge.split("T")[0])||"",responsavel:F.responsavel,local:F.local,clima:F.clima,climaSemanal:F.climaSemanal||{segunda:"sol",terca:"sol",quarta:"sol",quinta:"sol",sexta:"sol"},medicao:F.medicao}),T(F.maoDeObra||[]),oe(F.equipamentos||[]),Be(F.atividades||[]),dt(F.atividadesPlanejamento||[]),Me(F.atividadesPlanejamentoSemanal||[]),Ct(F.fotos||[]),xe(F.naoConformidades||[]),Te(F.documentos||[]),tt(F.atividadesEtapaSubetapa||[]),N(F.checklistSeguranca||{epiUtilizado:!1,areaIsolada:!1,equipamentosFuncionando:!1,observacoes:""})):($(null),we({planejamentoId:b,tipo:"diario",data:new Date().toISOString().split("T")[0],responsavel:"",local:"",clima:{manha:"sol",tarde:"sol",noite:"sol"},climaSemanal:{segunda:"sol",terca:"sol",quarta:"sol",quinta:"sol",sexta:"sol"},medicao:{percentualConcluido:0,valorMedicao:0,observacoes:""}}),T([]),oe([]),Be([]),dt([]),Me([]),Ct([]),xe([]),Te([]),tt([]),N({epiUtilizado:!1,areaIsolada:!1,equipamentosFuncionando:!1,observacoes:""}),st(),Tt()),se(!0)},Ve=()=>{se(!1),$(null)},St=F=>{le(F),Y(!0)},ot=()=>{fe(!0)},yt=e.filter(F=>{var bt,Ot;const Ge=w===""||((bt=F.responsavel)==null?void 0:bt.toLowerCase().includes(w.toLowerCase()))||((Ot=F.local)==null?void 0:Ot.toLowerCase().includes(w.toLowerCase())),Re=O===""||F.tipo===O;return Ge&&Re}),Dt={totalDiarios:yt.length,diariosDiarios:yt.filter(F=>F.tipo==="diario").length,diariosSemanais:yt.filter(F=>F.tipo==="semanal").length,progressoMedio:yt.length>0?Math.round(yt.reduce((F,Ge)=>{var Re;return F+Wa((Re=Ge.medicao)==null?void 0:Re.percentualConcluido)},0)/yt.length):0},V=F=>{const Ge=new Date(F),Re=new Date(Ge);return Re.setDate(Ge.getDate()+6),`${Gn(Ge.toISOString())} - ${Gn(Re.toISOString())}`};return h?t.jsx("div",{className:"flex items-center justify-center h-64",children:t.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Diário de Obra"}),t.jsx("p",{className:"text-gray-600",children:"Registre atividades diárias e semanais da obra"})]}),t.jsxs("div",{className:"flex space-x-3",children:[t.jsxs("button",{onClick:ot,className:"bg-purple-600 text-white px-4 py-2 rounded-lg hover:bg-purple-700 flex items-center space-x-2",children:[t.jsx(xl,{className:"h-4 w-4"}),t.jsx("span",{children:"Resumo"})]}),t.jsxs("button",{onClick:()=>ke(),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 flex items-center space-x-2",children:[t.jsx(wa,{className:"h-4 w-4"}),t.jsx("span",{children:"Novo Diário"})]})]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[t.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx(qa,{className:"h-8 w-8 text-blue-600"}),t.jsxs("div",{className:"ml-4",children:[t.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total de Diários"}),t.jsx("p",{className:"text-2xl font-bold text-gray-900",children:Dt.totalDiarios})]})]})}),t.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx(Ga,{className:"h-8 w-8 text-green-600"}),t.jsxs("div",{className:"ml-4",children:[t.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Diários"}),t.jsx("p",{className:"text-2xl font-bold text-gray-900",children:Dt.diariosDiarios})]})]})}),t.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx(Ga,{className:"h-8 w-8 text-purple-600"}),t.jsxs("div",{className:"ml-4",children:[t.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Semanais"}),t.jsx("p",{className:"text-2xl font-bold text-gray-900",children:Dt.diariosSemanais})]})]})}),t.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx(Jc,{className:"h-8 w-8 text-orange-600"}),t.jsxs("div",{className:"ml-4",children:[t.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Progresso Médio"}),t.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[Dt.progressoMedio,"%"]})]})]})})]}),t.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Projeto"}),t.jsxs("select",{value:b,onChange:F=>g(F.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500",children:[t.jsx("option",{value:"",children:"Selecione um projeto"}),r.map(F=>t.jsxs("option",{value:F._id,children:[F.nomeProjeto," - ",F.cliente]},F._id))]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Buscar"}),t.jsxs("div",{className:"relative",children:[t.jsx(Sl,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),t.jsx("input",{type:"text",placeholder:"Buscar por responsável ou local...",value:w,onChange:F=>_(F.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tipo"}),t.jsxs("select",{value:O,onChange:F=>y(F.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500",children:[t.jsx("option",{value:"",children:"Todos os tipos"}),t.jsx("option",{value:"diario",children:"Diário"}),t.jsx("option",{value:"semanal",children:"Semanal"})]})]})]})}),t.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[t.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:t.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Diários de Obra"})}),t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[t.jsx("thead",{className:"bg-gray-50",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Data/Tipo"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Responsável"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Local"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Clima"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Progresso"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Valor Medição"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Ações"})]})}),t.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:yt.map(F=>{var bt,Ot,Pt,pt,xa;const Ge=op[((bt=F.clima)==null?void 0:bt.manha)||"sol"],Re=$o[((Ot=F.clima)==null?void 0:Ot.manha)||"sol"];return t.jsxs("tr",{className:"hover:bg-gray-50",children:[t.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[t.jsx("div",{className:"text-sm font-medium text-gray-900",children:Gn(F.data)}),t.jsx("div",{className:"text-xs text-gray-500",children:ip[F.tipo]})]}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx(kl,{className:"h-4 w-4 text-gray-400 mr-2"}),t.jsx("div",{className:"text-sm font-medium text-gray-900",children:F.responsavel})]})}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx(Q4,{className:"h-4 w-4 text-gray-400 mr-2"}),t.jsx("div",{className:"text-sm text-gray-900",children:F.local||"-"})]})}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.jsxs("div",{className:"flex items-center space-x-1",children:[t.jsx(Ge,{className:"h-4 w-4 text-gray-600"}),t.jsxs("span",{className:"text-sm text-gray-600",children:[Re.emoji," ",Re.label]})]})}),t.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[t.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:t.jsx("div",{className:"bg-blue-600 h-2 rounded-full",style:{width:`${Wa((Pt=F.medicao)==null?void 0:Pt.percentualConcluido)}%`}})}),t.jsxs("span",{className:"text-xs text-gray-500",children:[Wa((pt=F.medicao)==null?void 0:pt.percentualConcluido),"%"]})]}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.jsx("div",{className:"text-sm font-medium text-gray-900",children:Wn((xa=F.medicao)==null?void 0:xa.valorMedicao)})}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:t.jsxs("div",{className:"flex space-x-2",children:[t.jsx("button",{onClick:()=>St(F),className:"text-blue-600 hover:text-blue-900",title:"Visualizar",children:t.jsx(yo,{className:"h-4 w-4"})}),t.jsx("button",{onClick:()=>ke(F),className:"text-green-600 hover:text-green-900",title:"Editar",children:t.jsx(gs,{className:"h-4 w-4"})}),t.jsx("button",{onClick:()=>ue(F),className:"text-purple-600 hover:text-purple-900",title:"Exportar PDF com Assinatura",children:t.jsx(tb,{className:"h-4 w-4"})}),t.jsx("button",{onClick:()=>je(F._id),className:"text-red-600 hover:text-red-900",title:"Excluir",children:t.jsx(Ms,{className:"h-4 w-4"})})]})})]},F._id)})})]})})]}),K&&t.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:t.jsx("div",{className:"relative top-10 mx-auto p-5 border w-full max-w-4xl shadow-lg rounded-md bg-white",children:t.jsxs("div",{className:"mt-3",children:[t.jsxs("div",{className:"flex justify-between items-center mb-4",children:[t.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Resumo das Obras"}),t.jsx("button",{onClick:()=>fe(!1),className:"text-gray-400 hover:text-gray-600",children:t.jsx($t,{className:"h-5 w-5"})})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[t.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:"Atividades da Semana"}),t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsx("button",{onClick:()=>at("prev"),className:"p-1 text-gray-600 hover:text-gray-900",children:t.jsx(J2,{className:"h-4 w-4"})}),t.jsx("div",{className:"text-center",children:t.jsx("div",{className:"font-medium text-gray-900",children:V(v)})}),t.jsx("button",{onClick:()=>at("next"),className:"p-1 text-gray-600 hover:text-gray-900",children:t.jsx(Q2,{className:"h-4 w-4"})})]}),t.jsx("div",{className:"space-y-2",children:e.filter(F=>{const Ge=new Date(F.data),Re=new Date(v),bt=new Date(Re);return bt.setDate(Re.getDate()+6),Ge>=Re&&Ge<=bt}).slice(0,5).map(F=>t.jsxs("div",{className:"text-sm",children:[t.jsx("span",{className:"font-medium",children:Gn(F.data)}),t.jsxs("span",{className:"text-gray-600",children:[" - ",F.responsavel]})]},F._id))})]}),t.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[t.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:"Avanço Geral"}),t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{children:[t.jsxs("div",{className:"flex justify-between text-sm",children:[t.jsx("span",{children:"Progresso Médio"}),t.jsxs("span",{children:[Dt.progressoMedio,"%"]})]}),t.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:t.jsx("div",{className:"bg-blue-600 h-2 rounded-full",style:{width:`${Dt.progressoMedio}%`}})})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[t.jsxs("div",{children:[t.jsx("span",{className:"text-gray-600",children:"Diários:"}),t.jsx("span",{className:"font-medium ml-2",children:Dt.diariosDiarios})]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-gray-600",children:"Semanais:"}),t.jsx("span",{className:"font-medium ml-2",children:Dt.diariosSemanais})]})]})]})]})]})]})})}),J&&L&&t.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:t.jsx("div",{className:"relative top-10 mx-auto p-5 border w-full max-w-6xl shadow-lg rounded-md bg-white",children:t.jsxs("div",{className:"mt-3",children:[t.jsxs("div",{className:"flex justify-between items-center mb-4",children:[t.jsxs("h3",{className:"text-lg font-medium text-gray-900",children:["Diário de Obra - ",Gn(L.data)]}),t.jsx("button",{onClick:()=>Y(!1),className:"text-gray-400 hover:text-gray-600",children:t.jsx($t,{className:"h-5 w-5"})})]}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[t.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:"Informações Gerais"}),t.jsxs("div",{className:"space-y-2 text-sm",children:[t.jsxs("div",{children:[t.jsx("strong",{children:"Responsável:"})," ",L.responsavel]}),t.jsxs("div",{children:[t.jsx("strong",{children:"Local:"})," ",L.local]}),t.jsxs("div",{children:[t.jsx("strong",{children:"Tipo:"})," ",ip[L.tipo]]}),t.jsxs("div",{children:[t.jsx("strong",{children:"Progresso:"})," ",Wa((He=L.medicao)==null?void 0:He.percentualConcluido),"%"]}),t.jsxs("div",{children:[t.jsx("strong",{children:"Valor Medição:"})," ",Wn((ze=L.medicao)==null?void 0:ze.valorMedicao)]})]})]}),t.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[t.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:"Clima"}),L.tipo==="semanal"&&L.climaSemanal?t.jsx("div",{className:"grid grid-cols-1 gap-2 text-sm",children:Object.entries(L.climaSemanal).map(([F,Ge])=>{const Re=op[Ge],bt=$o[Ge];return t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"capitalize",children:lp[F]}),t.jsxs("div",{className:"flex items-center",children:[t.jsx(Re,{className:"h-4 w-4 text-gray-600 mr-1"}),t.jsxs("span",{children:[bt.emoji," ",bt.label]})]})]},F)})}):t.jsx("div",{className:"grid grid-cols-3 gap-4 text-sm",children:["manha","tarde","noite"].map(F=>{var Ot;const Ge=((Ot=L.clima)==null?void 0:Ot[F])||"sol",Re=op[Ge],bt=$o[Ge];return t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"capitalize font-medium",children:F}),t.jsxs("div",{className:"flex items-center justify-center mt-1",children:[t.jsx(Re,{className:"h-5 w-5 text-gray-600"}),t.jsxs("span",{className:"ml-1",children:[bt.emoji," ",bt.label]})]})]},F)})})]}),t.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[t.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:"Checklist de Segurança"}),t.jsxs("div",{className:"space-y-2 text-sm",children:[t.jsxs("div",{className:"flex items-center",children:[(vt=L.checklistSeguranca)!=null&&vt.epiUtilizado?t.jsx(ps,{className:"h-4 w-4 text-green-600 mr-2"}):t.jsx(sl,{className:"h-4 w-4 text-red-600 mr-2"}),t.jsx("span",{children:"EPI utilizado"})]}),t.jsxs("div",{className:"flex items-center",children:[(xt=L.checklistSeguranca)!=null&&xt.areaIsolada?t.jsx(ps,{className:"h-4 w-4 text-green-600 mr-2"}):t.jsx(sl,{className:"h-4 w-4 text-red-600 mr-2"}),t.jsx("span",{children:"Área isolada"})]}),t.jsxs("div",{className:"flex items-center",children:[(qt=L.checklistSeguranca)!=null&&qt.equipamentosFuncionando?t.jsx(ps,{className:"h-4 w-4 text-green-600 mr-2"}):t.jsx(sl,{className:"h-4 w-4 text-red-600 mr-2"}),t.jsx("span",{children:"Equipamentos funcionando"})]}),((Jt=L.checklistSeguranca)==null?void 0:Jt.observacoes)&&t.jsxs("div",{className:"mt-2",children:[t.jsx("strong",{children:"Observações:"})," ",L.checklistSeguranca.observacoes]})]})]})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[t.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:"Mão de Obra"}),t.jsx("div",{className:"space-y-2",children:(L.maoDeObra||[]).map((F,Ge)=>t.jsxs("div",{className:"text-sm",children:[t.jsx("strong",{children:F.nome})," - ",F.funcao," (",F.horasTrabalhadas,"h)",t.jsxs("div",{className:"text-gray-600",children:[Wn(F.valorHora),"/h = ",Wn(F.valorTotal)]})]},Ge))})]}),t.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[t.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:"Equipamentos"}),t.jsx("div",{className:"space-y-2",children:(L.equipamentos||[]).map((F,Ge)=>t.jsxs("div",{className:"text-sm",children:[t.jsx("strong",{children:F.nome})," - ",F.horasUso,"h",F.observacoes&&t.jsx("div",{className:"text-gray-600",children:F.observacoes})]},Ge))})]}),t.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[t.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:"Atividades Realizadas"}),t.jsxs("div",{className:"space-y-3",children:[(L.atividades||[]).length>0&&t.jsxs("div",{children:[t.jsx("h5",{className:"font-medium text-sm text-gray-700 mb-2",children:"Atividades Manuais:"}),L.atividades.map((F,Ge)=>t.jsxs("div",{className:"text-sm pl-4 border-l-2 border-blue-300",children:[t.jsx("strong",{children:F.descricao})," - ",F.responsavel," (",Wa(F.progresso),"%)"]},Ge))]}),(L.atividadesPlanejamento||[]).length>0&&t.jsxs("div",{children:[t.jsx("h5",{className:"font-medium text-sm text-gray-700 mb-2",children:"Do Planejamento:"}),L.atividadesPlanejamento.map((F,Ge)=>t.jsxs("div",{className:"text-sm pl-4 border-l-2 border-green-300",children:[t.jsx("strong",{children:F.nome})," - ",F.responsavel," (",Wa(F.progresso),"%)",t.jsxs("div",{className:"text-gray-600",children:[F.etapa,F.subetapa?` > ${F.subetapa}`:""]})]},Ge))]}),(L.atividadesPlanejamentoSemanal||[]).length>0&&t.jsxs("div",{children:[t.jsx("h5",{className:"font-medium text-sm text-gray-700 mb-2",children:"Do Planejamento Semanal:"}),L.atividadesPlanejamentoSemanal.map((F,Ge)=>t.jsxs("div",{className:"text-sm pl-4 border-l-2 border-purple-300",children:[t.jsx("strong",{children:F.nome})," - ",F.responsavel," (",Wa(F.progresso),"%)"]},Ge))]}),(((ma=L.atividadesEtapaSubetapa)==null?void 0:ma.filter(F=>F.realizada))||[]).length>0&&t.jsxs("div",{children:[t.jsx("h5",{className:"font-medium text-sm text-gray-700 mb-2",children:"Da Proposta (Etapas/Subetapas):"}),L.atividadesEtapaSubetapa.filter(F=>F.realizada).map((F,Ge)=>t.jsxs("div",{className:"text-sm pl-4 border-l-2 border-orange-300",children:[t.jsx("strong",{children:F.nome})," - ",F.responsavel," (",Wa(F.progresso),"%)",t.jsxs("div",{className:"text-gray-600",children:[F.tipo==="etapa"?"Etapa":"Subetapa"," da Proposta"]})]},Ge))]})]})]}),(L.naoConformidades||[]).length>0&&t.jsxs("div",{className:"bg-red-50 p-4 rounded-lg",children:[t.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:"Não Conformidades"}),t.jsx("div",{className:"space-y-2",children:L.naoConformidades.map((F,Ge)=>t.jsxs("div",{className:"text-sm",children:[t.jsxs("div",{className:"flex items-center mb-1",children:[t.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${S6[F.gravidade]}`,children:nv[F.gravidade]}),t.jsx("span",{className:"ml-2 font-medium",children:ov[F.tipo]})]}),t.jsx("div",{children:F.descricao}),F.acaoCorretiva&&t.jsxs("div",{className:"text-gray-600 mt-1",children:[t.jsx("strong",{children:"Ação Corretiva:"})," ",F.acaoCorretiva]})]},Ge))})]}),(L.fotos||[]).length>0&&t.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[t.jsxs("h4",{className:"font-medium text-gray-900 mb-3",children:["Fotos (",L.fotos.length,")"]}),t.jsx("div",{className:"grid grid-cols-2 gap-2",children:L.fotos.slice(0,4).map((F,Ge)=>t.jsxs("div",{className:"relative",children:[t.jsx("img",{src:F.url,alt:F.descricao,className:"w-full h-20 object-cover rounded"}),t.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-black bg-opacity-50 text-white text-xs p-1 rounded-b",children:F.descricao})]},F.id))}),L.fotos.length>4&&t.jsxs("div",{className:"text-sm text-gray-500 mt-2",children:["+",L.fotos.length-4," fotos adicionais"]})]}),(L.documentos||[]).length>0&&t.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[t.jsxs("h4",{className:"font-medium text-gray-900 mb-3",children:["Documentos (",L.documentos.length,")"]}),t.jsx("div",{className:"space-y-2",children:L.documentos.map((F,Ge)=>t.jsxs("div",{className:"flex items-center text-sm",children:[t.jsx(Lg,{className:"h-4 w-4 text-gray-500 mr-2"}),t.jsx("span",{children:F.nome})]},F.id))})]})]})]})]})})}),W&&t.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:t.jsx("div",{className:"relative top-10 mx-auto p-5 border w-full max-w-7xl shadow-lg rounded-md bg-white",children:t.jsxs("div",{className:"mt-3",children:[t.jsxs("div",{className:"flex justify-between items-center mb-4",children:[t.jsx("h3",{className:"text-lg font-medium text-gray-900",children:me?"Editar Diário de Obra":"Novo Diário de Obra"}),t.jsx("button",{onClick:Ve,className:"text-gray-400 hover:text-gray-600",children:t.jsx($t,{className:"h-5 w-5"})})]}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Projeto"}),t.jsxs("select",{value:R.planejamentoId,onChange:F=>we({...R,planejamentoId:F.target.value}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500",required:!0,children:[t.jsx("option",{value:"",children:"Selecione um projeto"}),r.map(F=>t.jsx("option",{value:F._id,children:F.nomeProjeto},F._id))]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Tipo"}),t.jsxs("select",{value:R.tipo,onChange:F=>we({...R,tipo:F.target.value}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500",children:[t.jsx("option",{value:"diario",children:"Diário"}),t.jsx("option",{value:"semanal",children:"Semanal"})]})]})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Data"}),t.jsx("input",{type:"date",value:R.data,onChange:F=>we({...R,data:F.target.value}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500",required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Responsável"}),t.jsx("input",{type:"text",value:R.responsavel,onChange:F=>we({...R,responsavel:F.target.value}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Nome do responsável",required:!0})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Local"}),t.jsx("input",{type:"text",value:R.local,onChange:F=>we({...R,local:F.target.value}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Local da obra"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Clima"}),R.tipo==="semanal"?t.jsx("div",{className:"space-y-3",children:Object.entries(lp).map(([F,Ge])=>t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("label",{className:"text-sm font-medium text-gray-600",children:Ge}),t.jsx("select",{value:R.climaSemanal[F],onChange:Re=>we({...R,climaSemanal:{...R.climaSemanal,[F]:Re.target.value}}),className:"border border-gray-300 rounded-md px-3 py-1 focus:ring-blue-500 focus:border-blue-500",children:Object.entries($o).map(([Re,bt])=>t.jsxs("option",{value:Re,children:[bt.emoji," ",bt.label]},Re))})]},F))}):t.jsx("div",{className:"grid grid-cols-3 gap-4",children:["manha","tarde","noite"].map(F=>t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-medium text-gray-600 capitalize",children:F}),t.jsx("select",{value:R.clima[F],onChange:Ge=>we({...R,clima:{...R.clima,[F]:Ge.target.value}}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500",children:Object.entries($o).map(([Ge,Re])=>t.jsxs("option",{value:Ge,children:[Re.emoji," ",Re.label]},Ge))})]},F))})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Medição (Calculada Automaticamente)"}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-medium text-gray-600",children:"% Concluído"}),t.jsx("input",{type:"number",min:"0",max:"100",value:R.medicao.percentualConcluido,onChange:F=>we({...R,medicao:{...R.medicao,percentualConcluido:Number(F.target.value)}}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500 bg-gray-50",readOnly:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-medium text-gray-600",children:"Valor Medição"}),t.jsx("input",{type:"text",value:Wn(R.medicao.valorMedicao),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500 bg-gray-50",readOnly:!0})]})]}),t.jsxs("div",{className:"mt-2",children:[t.jsx("label",{className:"block text-xs font-medium text-gray-600",children:"Observações"}),t.jsx("textarea",{value:R.medicao.observacoes,onChange:F=>we({...R,medicao:{...R.medicao,observacoes:F.target.value}}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500",rows:2,placeholder:"Observações da medição"})]}),t.jsx("div",{className:"text-xs text-blue-600 mt-1",children:"* Valor calculado automaticamente baseado no progresso das atividades e valor da proposta"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Checklist de Segurança"}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("label",{className:"flex items-center",children:[t.jsx("input",{type:"checkbox",checked:q.epiUtilizado,onChange:F=>N({...q,epiUtilizado:F.target.checked}),className:"mr-2"}),t.jsx("span",{className:"text-sm",children:"EPI utilizado"})]}),t.jsxs("label",{className:"flex items-center",children:[t.jsx("input",{type:"checkbox",checked:q.areaIsolada,onChange:F=>N({...q,areaIsolada:F.target.checked}),className:"mr-2"}),t.jsx("span",{className:"text-sm",children:"Área isolada"})]}),t.jsxs("label",{className:"flex items-center",children:[t.jsx("input",{type:"checkbox",checked:q.equipamentosFuncionando,onChange:F=>N({...q,equipamentosFuncionando:F.target.checked}),className:"mr-2"}),t.jsx("span",{className:"text-sm",children:"Equipamentos funcionando"})]}),t.jsx("div",{children:t.jsx("textarea",{value:q.observacoes,onChange:F=>N({...q,observacoes:F.target.value}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500",rows:2,placeholder:"Observações de segurança"})})]})]})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Mão de Obra"}),t.jsxs("div",{className:"border border-gray-300 rounded-md p-3",children:[t.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-3",children:[t.jsxs("select",{value:ce.funcionarioId,onChange:F=>Ce({...ce,funcionarioId:F.target.value}),className:"block w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500",children:[t.jsx("option",{value:"",children:"Selecione funcionário"}),i.map(F=>t.jsxs("option",{value:F._id,children:[F.nome," - ",F.funcao]},F._id))]}),t.jsx("input",{type:"number",value:ce.horasTrabalhadas,onChange:F=>Ce({...ce,horasTrabalhadas:Number(F.target.value)}),className:"block w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Horas trabalhadas"})]}),t.jsx("button",{type:"button",onClick:ht,className:"bg-blue-600 text-white px-3 py-1 rounded text-sm hover:bg-blue-700",children:"Adicionar"}),t.jsx("div",{className:"mt-3 space-y-1 max-h-32 overflow-y-auto",children:U.map((F,Ge)=>t.jsxs("div",{className:"flex justify-between items-center bg-gray-50 p-2 rounded text-sm",children:[t.jsxs("span",{children:[F.nome," - ",F.funcao," (",F.horasTrabalhadas,"h) - ",Wn(F.valorTotal)]}),t.jsx("button",{onClick:()=>T(U.filter((Re,bt)=>bt!==Ge)),className:"text-red-600 hover:text-red-800",children:t.jsx($t,{className:"h-4 w-4"})})]},Ge))})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Equipamentos"}),t.jsxs("div",{className:"border border-gray-300 rounded-md p-3",children:[t.jsxs("div",{className:"space-y-2 mb-3",children:[t.jsx("input",{type:"text",value:Z.nome,onChange:F=>he({...Z,nome:F.target.value}),className:"block w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Nome do equipamento"}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsx("input",{type:"number",value:Z.horasUso,onChange:F=>he({...Z,horasUso:Number(F.target.value)}),className:"block w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Horas de uso"}),t.jsx("input",{type:"text",value:Z.observacoes,onChange:F=>he({...Z,observacoes:F.target.value}),className:"block w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Observações"})]})]}),t.jsx("button",{type:"button",onClick:qe,className:"bg-green-600 text-white px-3 py-1 rounded text-sm hover:bg-green-700",children:"Adicionar"}),t.jsx("div",{className:"mt-3 space-y-1 max-h-32 overflow-y-auto",children:B.map((F,Ge)=>t.jsxs("div",{className:"flex justify-between items-center bg-gray-50 p-2 rounded text-sm",children:[t.jsxs("span",{children:[F.nome," - ",F.horasUso,"h ",F.observacoes&&`(${F.observacoes})`]}),t.jsx("button",{onClick:()=>oe(B.filter((Re,bt)=>bt!==Ge)),className:"text-red-600 hover:text-red-800",children:t.jsx($t,{className:"h-4 w-4"})})]},Ge))})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Atividades Manuais"}),t.jsxs("div",{className:"border border-gray-300 rounded-md p-3",children:[t.jsxs("div",{className:"space-y-2 mb-3",children:[t.jsx("input",{type:"text",value:ie.descricao,onChange:F=>Ue({...ie,descricao:F.target.value}),className:"block w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Descrição da atividade"}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsx("input",{type:"text",value:ie.responsavel,onChange:F=>Ue({...ie,responsavel:F.target.value}),className:"block w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Responsável"}),t.jsx("input",{type:"number",min:"0",max:"100",value:ie.progresso,onChange:F=>Ue({...ie,progresso:Number(F.target.value)}),className:"block w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Progresso %"})]})]}),t.jsx("button",{type:"button",onClick:lt,className:"bg-purple-600 text-white px-3 py-1 rounded text-sm hover:bg-purple-700",children:"Adicionar"}),t.jsx("div",{className:"mt-3 space-y-1 max-h-32 overflow-y-auto",children:Ne.map((F,Ge)=>t.jsxs("div",{className:"flex justify-between items-center bg-gray-50 p-2 rounded text-sm",children:[t.jsxs("span",{children:[F.descricao," - ",F.responsavel," (",F.progresso,"%)"]}),t.jsx("button",{onClick:()=>Be(Ne.filter((Re,bt)=>bt!==Ge)),className:"text-red-600 hover:text-red-800",children:t.jsx($t,{className:"h-4 w-4"})})]},Ge))})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Não Conformidades"}),t.jsxs("div",{className:"border border-gray-300 rounded-md p-3",children:[t.jsxs("div",{className:"space-y-2 mb-3",children:[t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("select",{value:S.tipo,onChange:F=>G({...S,tipo:F.target.value}),className:"block w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500",children:[t.jsx("option",{value:"ocorrencia",children:"Ocorrência"}),t.jsx("option",{value:"acidente",children:"Acidente"}),t.jsx("option",{value:"inspecao",children:"Inspeção"})]}),t.jsxs("select",{value:S.gravidade,onChange:F=>G({...S,gravidade:F.target.value}),className:"block w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500",children:[t.jsx("option",{value:"baixa",children:"Baixa"}),t.jsx("option",{value:"media",children:"Média"}),t.jsx("option",{value:"alta",children:"Alta"})]})]}),t.jsx("textarea",{value:S.descricao,onChange:F=>G({...S,descricao:F.target.value}),className:"block w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500",rows:2,placeholder:"Descrição da não conformidade"}),t.jsx("textarea",{value:S.acaoCorretiva,onChange:F=>G({...S,acaoCorretiva:F.target.value}),className:"block w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500",rows:2,placeholder:"Ação corretiva"})]}),t.jsx("button",{type:"button",onClick:de,className:"bg-red-600 text-white px-3 py-1 rounded text-sm hover:bg-red-700",children:"Adicionar"}),t.jsx("div",{className:"mt-3 space-y-1 max-h-32 overflow-y-auto",children:ae.map((F,Ge)=>t.jsxs("div",{className:"flex justify-between items-start bg-red-50 p-2 rounded text-sm",children:[t.jsxs("div",{children:[t.jsxs("div",{className:"font-medium",children:[ov[F.tipo]," - ",nv[F.gravidade]]}),t.jsx("div",{children:F.descricao}),F.acaoCorretiva&&t.jsxs("div",{className:"text-gray-600",children:["Ação: ",F.acaoCorretiva]})]}),t.jsx("button",{onClick:()=>xe(ae.filter((Re,bt)=>bt!==Ge)),className:"text-red-600 hover:text-red-800",children:t.jsx($t,{className:"h-4 w-4"})})]},Ge))})]})]})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Atividades do Planejamento (",Xe.length,")"]}),t.jsx("div",{className:"border border-gray-300 rounded-md p-3 max-h-48 overflow-y-auto",children:Xe.length>0?t.jsx("div",{className:"space-y-2",children:Xe.map((F,Ge)=>t.jsxs("div",{className:"bg-green-50 p-2 rounded text-sm",children:[t.jsx("div",{className:"font-medium",children:F.nome}),t.jsxs("div",{className:"text-gray-600",children:[F.etapa,F.subetapa?` > ${F.subetapa}`:""]}),t.jsxs("div",{className:"text-gray-600",children:[F.responsavel," - ",F.progresso,"% (",F.status,")"]})]},F.id))}):t.jsx("div",{className:"text-gray-500 text-sm text-center py-4",children:"Nenhuma atividade encontrada no planejamento"})})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Atividades do Planejamento Semanal (",ft.length,")"]}),t.jsx("div",{className:"border border-gray-300 rounded-md p-3 max-h-48 overflow-y-auto",children:ft.length>0?t.jsx("div",{className:"space-y-2",children:ft.map((F,Ge)=>t.jsxs("div",{className:"bg-purple-50 p-2 rounded text-sm",children:[t.jsx("div",{className:"font-medium",children:F.nome}),t.jsxs("div",{className:"text-gray-600",children:[F.responsavel," - ",F.progresso,"% (",F.status,")"]})]},F.id))}):t.jsx("div",{className:"text-gray-500 text-sm text-center py-4",children:"Nenhuma atividade encontrada no planejamento semanal"})})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Etapas/Subetapas da Proposta (",Ae.length,")"]}),t.jsx("div",{className:"border border-gray-300 rounded-md p-3 max-h-64 overflow-y-auto",children:Ae.length>0?t.jsx("div",{className:"space-y-3",children:Ae.map((F,Ge)=>t.jsxs("div",{className:"bg-orange-50 p-3 rounded border",children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsxs("div",{className:"flex items-center",children:[t.jsx("input",{type:"checkbox",checked:F.realizada,onChange:Re=>Fe(F.id,"realizada",Re.target.checked),className:"mr-2"}),t.jsx("span",{className:"font-medium text-sm",children:F.nome})]}),t.jsx("span",{className:`px-2 py-1 rounded text-xs ${F.tipo==="etapa"?"bg-blue-100 text-blue-800":"bg-green-100 text-green-800"}`,children:F.tipo==="etapa"?"Etapa":"Subetapa"})]}),F.realizada&&t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-medium text-gray-600",children:"Responsável"}),t.jsx("input",{type:"text",value:F.responsavel,onChange:Re=>Fe(F.id,"responsavel",Re.target.value),className:"w-full border border-gray-300 rounded px-2 py-1 text-sm",placeholder:"Nome do responsável"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-medium text-gray-600",children:"Percentual Realizado (%)"}),t.jsx("input",{type:"number",min:"0",max:"100",value:F.progresso,onChange:Re=>Fe(F.id,"progresso",Number(Re.target.value)),className:"w-full border border-gray-300 rounded px-2 py-1 text-sm",placeholder:"0-100"})]})]})]},F.id))}):t.jsx("div",{className:"text-gray-500 text-sm text-center py-4",children:"Nenhuma etapa/subetapa encontrada na proposta"})}),t.jsx("div",{className:"text-xs text-orange-600 mt-1",children:"* Marque as etapas/subetapas que foram realizadas, informe o responsável e percentual"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Fotos"}),t.jsxs("div",{className:"border border-gray-300 rounded-md p-3",children:[t.jsxs("div",{className:"mb-3",children:[t.jsx("input",{type:"file",accept:"image/*",multiple:!0,onChange:nt,className:"hidden",id:"foto-upload"}),t.jsxs("label",{htmlFor:"foto-upload",className:"bg-gray-600 text-white px-3 py-2 rounded text-sm hover:bg-gray-700 cursor-pointer flex items-center justify-center",children:[t.jsx(z4,{className:"h-4 w-4 mr-2"}),"Selecionar Fotos"]})]}),t.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto",children:te.map((F,Ge)=>t.jsxs("div",{className:"flex items-center justify-between bg-gray-50 p-2 rounded text-sm",children:[t.jsxs("div",{className:"flex items-center",children:[t.jsx("img",{src:F.url,alt:F.descricao,className:"w-10 h-10 object-cover rounded mr-2"}),t.jsx("span",{children:F.descricao})]}),t.jsx("button",{onClick:()=>Ct(te.filter((Re,bt)=>bt!==Ge)),className:"text-red-600 hover:text-red-800",children:t.jsx($t,{className:"h-4 w-4"})})]},F.id))})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Documentos"}),t.jsxs("div",{className:"border border-gray-300 rounded-md p-3",children:[t.jsxs("div",{className:"mb-3",children:[t.jsx("input",{type:"file",accept:".pdf,.doc,.docx,.xls,.xlsx,.txt",multiple:!0,onChange:Nt,className:"hidden",id:"documento-upload"}),t.jsxs("label",{htmlFor:"documento-upload",className:"bg-gray-600 text-white px-3 py-2 rounded text-sm hover:bg-gray-700 cursor-pointer flex items-center justify-center",children:[t.jsx(hf,{className:"h-4 w-4 mr-2"}),"Anexar Documentos"]})]}),t.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto",children:be.map((F,Ge)=>t.jsxs("div",{className:"flex items-center justify-between bg-gray-50 p-2 rounded text-sm",children:[t.jsxs("div",{className:"flex items-center",children:[t.jsx(Lg,{className:"h-4 w-4 text-gray-500 mr-2"}),t.jsx("span",{children:F.nome})]}),t.jsx("button",{onClick:()=>Te(be.filter((Re,bt)=>bt!==Ge)),className:"text-red-600 hover:text-red-800",children:t.jsx($t,{className:"h-4 w-4"})})]},F.id))})]})]})]})]}),t.jsxs("div",{className:"flex justify-end space-x-3 pt-6 mt-6 border-t border-gray-200",children:[t.jsx("button",{onClick:Ve,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 border border-gray-300 rounded-md hover:bg-gray-200",children:"Cancelar"}),t.jsxs("button",{onClick:ut,className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-md hover:bg-blue-700",children:[me?"Atualizar":"Salvar"," Diário"]})]})]})})})]})}const Vt=e=>e==null||isNaN(Number(e))?"R$ 0,00":`R$ ${Number(e).toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2})}`,ra=e=>e==null||isNaN(Number(e))?0:Number(e),pc=e=>{try{return e?new Date(e).toLocaleDateString("pt-BR"):"Data inválida"}catch{return"Data inválida"}},A6=e=>{try{return e?new Date(e).toLocaleString("pt-BR"):"Data inválida"}catch{return"Data inválida"}},cp=({data:e,type:a,title:r})=>{const s=e.reduce((n,o)=>n+o.value,0);if(a==="pie")return t.jsxs("div",{className:"bg-white p-4 rounded-lg shadow",children:[t.jsx("h4",{className:"font-medium text-gray-900 mb-4",children:r}),t.jsx("div",{className:"space-y-3",children:e.map((n,o)=>{const i=s>0?n.value/s*100:0;return t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("div",{className:"w-4 h-4 rounded-full",style:{backgroundColor:n.color}}),t.jsx("span",{className:"text-sm text-gray-700",children:n.label})]}),t.jsxs("div",{className:"text-right",children:[t.jsx("div",{className:"text-sm font-medium",children:Vt(n.value)}),t.jsxs("div",{className:"text-xs text-gray-500",children:[i.toFixed(1),"%"]})]})]},o)})}),t.jsx("div",{className:"mt-4 pt-3 border-t",children:t.jsxs("div",{className:"flex justify-between font-medium",children:[t.jsx("span",{children:"Total:"}),t.jsx("span",{children:Vt(s)})]})})]});if(a==="bar"){const n=Math.max(...e.map(o=>o.value));return t.jsxs("div",{className:"bg-white p-4 rounded-lg shadow",children:[t.jsx("h4",{className:"font-medium text-gray-900 mb-4",children:r}),t.jsx("div",{className:"space-y-3",children:e.map((o,i)=>{const c=n>0?o.value/n*100:0;return t.jsxs("div",{children:[t.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[t.jsx("span",{className:"text-gray-700",children:o.label}),t.jsx("span",{className:"font-medium",children:Vt(o.value)})]}),t.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:t.jsx("div",{className:"h-2 rounded-full transition-all duration-300",style:{width:`${c}%`,backgroundColor:o.color}})})]},i)})})]})}return null};function _6(){const[e,a]=I.useState("dashboard"),[r,s]=I.useState([]),[n,o]=I.useState({categoriasAdministrativas:["Administrativo","Marketing","Jurídico","Contabilidade"],impostos:{pis:.65,cofins:3,irrf:1.5,inss:11,iss:5,icms:18,ipi:10,csll:9,irpj:15},retencoes:{inss:11,irrf:1.5,iss:5,pis:.65,cofins:3,csll:1}}),[i,c]=I.useState([]),[d,p]=I.useState([]),[h,x]=I.useState(!0),[b,g]=I.useState({tipo:"",categoria:"",status:"",dataInicio:"",dataFim:"",obra:"",isAdministrativo:""}),[w,_]=I.useState(!1),[O,y]=I.useState(!1),[v,C]=I.useState(!1),[W,se]=I.useState(!1),[J,Y]=I.useState(!1),[K,fe]=I.useState(!1),[me,$]=I.useState("movimentacao"),[L,le]=I.useState(null),[R,we]=I.useState(null),[ce,Ce]=I.useState([]),[Z,he]=I.useState([]),[ie,Ue]=I.useState([]),[S,G]=I.useState([]),[q,N]=I.useState([]),[U,T]=I.useState([]),[B,oe]=I.useState({tipo:"receita",categoria:"",descricao:"",valor:0,data:new Date().toISOString().split("T")[0],dataVencimento:"",status:"pendente",formaPagamento:"",observacoes:"",isAdministrativo:!1,impostos:{pis:0,cofins:0,irrf:0,inss:0,iss:0,icms:0,ipi:0,csll:0,irpj:0},retencoes:{inss:0,irrf:0,iss:0,pis:0,cofins:0,csll:0}}),[Ne,Be]=I.useState({receitas:0,despesas:0,saldo:0,provisaoReceitas:0,provisaoDespesas:0,saldoProjetado:0,contasVencer:0,contasAtrasadas:0,custosAdministrativos:0,lucroLiquido:0});I.useEffect(()=>{Xe(),ft()},[]),I.useEffect(()=>{r.length>0&&ae()},[r]);const Xe=async()=>{try{x(!0);const[ne,Pe,at,k,Qe,Fe,ut]=await Promise.all([Ie.entities.financeiro.list().catch(()=>({list:[]})),Ie.entities.planejamentos.list().catch(()=>({list:[]})),Ie.entities.contratos.list().catch(()=>({list:[]})),Ie.entities.compras.list().catch(()=>({list:[]})),Ie.entities.diarios.list().catch(()=>({list:[]})),Ie.entities.funcionarios.list().catch(()=>({list:[]})),Ie.entities.orcamentos.list().catch(()=>({list:[]}))]);s(ne.list||[]),Ce(Pe.list||[]),he(at.list||[]),Ue(k.list||[]),G(Qe.list||[]),N(Fe.list||[]),T(ut.list||[]),await dt(Pe.list||[],at.list||[],k.list||[],Qe.list||[],Fe.list||[],ut.list||[])}catch(ne){console.error("Erro ao buscar dados financeiros:",ne),X.error("Erro ao carregar dados financeiros")}finally{x(!1)}},dt=async(ne,Pe,at,k,Qe,Fe)=>{try{const ut=[];Fe.forEach(je=>{(je==null?void 0:je.status)==="aprovado"&&ra(je==null?void 0:je.valorTotal)>0&&(r.find(qe=>{var lt;return qe.tipo==="provisao_receita"&&((lt=qe.descricao)==null?void 0:lt.includes(`Orçamento ${je.numero||je._id}`))})||ut.push({tipo:"provisao_receita",categoria:"Vendas",descricao:`Provisão receita - Orçamento ${je.numero||je._id} - ${je.cliente}`,valor:ra(je.valorTotal),data:je.dataAprovacao||je.criadoEm||new Date().toISOString(),status:"pendente",observacoes:"Integração automática do orçamento aprovado",criadoEm:new Date().toISOString()}))}),Pe.forEach(je=>{(je==null?void 0:je.status)==="assinado"&&ra(je==null?void 0:je.valorTotal)>0&&(r.find(qe=>{var lt;return qe.tipo==="receita"&&((lt=qe.descricao)==null?void 0:lt.includes(`Contrato ${je.numero||je._id}`))})||ut.push({tipo:"receita",categoria:"Contratos",descricao:`Receita contrato - ${je.numero||je._id} - ${je.cliente}`,valor:ra(je.valorTotal),data:je.dataAssinatura||je.criadoEm||new Date().toISOString(),status:"recebido",planejamentoId:je.planejamentoId,observacoes:"Integração automática do contrato assinado",criadoEm:new Date().toISOString()}))}),at.forEach(je=>{var ht,qe,lt;(je==null?void 0:je.status)==="comprado"&&ra(je==null?void 0:je.valorTotal)>0&&(r.find(nt=>nt.tipo==="despesa"&&nt.compraId===je._id)||ut.push({tipo:"despesa",categoria:"Materiais",descricao:`Compra - ${je.nomeMaterial} - ${((ht=je.fornecedorEscolhido)==null?void 0:ht.nomeFornecedor)||"Fornecedor"}`,valor:ra(je.valorTotal),data:je.dataCompra||je.criadoEm||new Date().toISOString(),dataVencimento:(qe=je.fornecedorEscolhido)==null?void 0:qe.dataPagamento,status:"pendente",compraId:je._id,planejamentoId:je.planejamentoId,formaPagamento:(lt=je.fornecedorEscolhido)==null?void 0:lt.formaPagamento,observacoes:"Integração automática da compra aprovada",criadoEm:new Date().toISOString()}))}),k.forEach(je=>{if(je!=null&&je.medicao&&ra(je.medicao.valorMedicao)>0&&(r.find(qe=>qe.tipo==="receita"&&qe.diarioId===je._id)||ut.push({tipo:"receita",categoria:"Medição de Obra",descricao:`Medição ${je.tipo} - ${pc(je.data)} - ${je.responsavel}`,valor:ra(je.medicao.valorMedicao),data:je.data||new Date().toISOString(),status:"recebido",diarioId:je._id,planejamentoId:je.planejamentoId,observacoes:`Integração automática da medição do diário de obra. ${je.medicao.observacoes||""}`,criadoEm:new Date().toISOString()})),je!=null&&je.maoDeObra&&Array.isArray(je.maoDeObra)&&je.maoDeObra.length>0){const ht=je.maoDeObra.reduce((qe,lt)=>qe+ra(lt==null?void 0:lt.valorTotal),0);ht>0&&(r.find(lt=>lt.tipo==="despesa"&&lt.categoria==="Mão de Obra"&&lt.diarioId===je._id)||ut.push({tipo:"despesa",categoria:"Mão de Obra",descricao:`Mão de obra - ${je.tipo} ${pc(je.data)} - ${je.maoDeObra.map(lt=>lt.nome).join(", ")}`,valor:ht,data:je.data||new Date().toISOString(),status:"pendente",diarioId:je._id,planejamentoId:je.planejamentoId,observacoes:"Integração automática da mão de obra do diário",criadoEm:new Date().toISOString()}))}});for(const je of ut)try{await Ie.entities.financeiro.create(je)}catch(ht){console.error("Erro ao criar movimentação:",ht)}if(ut.length>0){X.success(`${ut.length} movimentações integradas automaticamente`);const je=await Ie.entities.financeiro.list();s(je.list||[])}}catch(ut){console.error("Erro na integração de dados:",ut),X.error("Erro na integração automática de dados")}},ft=async()=>{try{const ne=localStorage.getItem("configuracao_financeira");ne&&o(JSON.parse(ne))}catch(ne){console.error("Erro ao carregar configuração:",ne)}},Me=async()=>{try{localStorage.setItem("configuracao_financeira",JSON.stringify(n)),X.success("Configuração salva com sucesso"),y(!1)}catch(ne){console.error("Erro ao salvar configuração:",ne),X.error("Erro ao salvar configuração")}},te=async()=>{console.log("🔧 INICIANDO calcularRateio...");try{const ne=new Date().getMonth()+1,Pe=new Date().getFullYear();console.log("📅 Calculando para:",{mes:ne,ano:Pe});const at=ce.filter(je=>(je==null?void 0:je.status)==="em_andamento");if(console.log("🏗️ Obras ativas encontradas:",at.length),at.length===0){X.info("Nenhuma obra ativa encontrada para rateio");return}const k={};let Qe=0;at.forEach(je=>{const qe=r.filter(lt=>{const de=new Date(lt.data);return lt.planejamentoId===je._id&&lt.categoria==="Medição de Obra"&&lt.status==="recebido"&&de.getMonth()+1===ne&&de.getFullYear()===Pe}).reduce((lt,de)=>lt+ra(de.valor),0);k[je._id]=qe,Qe+=qe,console.log(`💰 Obra ${je.nomeProjeto}: ${Vt(qe)}`)}),console.log("💰 Faturamento total:",Vt(Qe));const Fe=r.filter(je=>{const ht=new Date(je.data);return je.isAdministrativo===!0&&je.tipo==="despesa"&&ht.getMonth()+1===ne&&ht.getFullYear()===Pe}),ut=Fe.reduce((je,ht)=>je+ra(ht.valor),0);if(console.log("🏢 Custos administrativos:",Vt(ut)),Qe>0&&ut>0){const je=[];at.forEach(qe=>{const de=(k[qe._id]||0)/Qe*100,nt=ut*de/100;je.push({obraId:qe._id,nomeObra:qe.nomeProjeto||`Obra ${qe._id}`,percentual:de,valor:nt}),console.log(`📊 Rateio ${qe.nomeProjeto}: ${de.toFixed(2)}% = ${Vt(nt)}`)});let ht=0;for(const qe of Fe)if(!qe.rateioObras||qe.rateioObras.length===0)try{await Ie.entities.financeiro.update(qe._id,{...qe,rateioObras:je,atualizadoEm:new Date().toISOString()}),ht++}catch(lt){console.error("Erro ao atualizar rateio:",lt)}console.log("✅ Rateio concluído:",ht,"movimentações atualizadas"),X.success(`Rateio calculado! ${ht} movimentações atualizadas`),await Xe(),C(!0)}else console.log("⚠️ Dados insuficientes para rateio"),X.info("Não há dados suficientes para calcular o rateio")}catch(ne){console.error("❌ Erro ao calcular rateio:",ne),X.error("Erro ao calcular rateio")}},Ct=async()=>{try{const ne=new Date().getMonth()+1,Pe=new Date().getFullYear(),at=S.filter(Fe=>{const ut=new Date(Fe.data);return ut.getMonth()+1===ne&&ut.getFullYear()===Pe&&Fe.maoDeObra&&Array.isArray(Fe.maoDeObra)&&Fe.maoDeObra.length>0});if(at.length===0){X.info("Nenhum diário de obra encontrado para o mês atual");return}const k={};at.forEach(Fe=>{Fe.maoDeObra&&Array.isArray(Fe.maoDeObra)&&Fe.maoDeObra.forEach(ut=>{const je=ut.funcionarioId||ut.nome;k[je]||(k[je]={funcionarioId:je,nome:ut.nome||"Funcionário",funcao:ut.funcao||"Não informado",diasTrabalhados:0,valorDiaria:ra(ut.valorHora)*8,valorTotal:0}),k[je].diasTrabalhados+=1,k[je].valorTotal+=ra(ut.valorTotal)})});const Qe=Object.values(k).map(Fe=>{const ut=Fe.valorTotal,je={inss:ut*(n.impostos.inss/100),irrf:ut*(n.impostos.irrf/100),fgts:ut*.08},ht=ut-je.inss-je.irrf;return{funcionarioId:Fe.funcionarioId,nomeFuncionario:Fe.nome,funcao:Fe.funcao,diasTrabalhados:Fe.diasTrabalhados,valorDiaria:Fe.valorDiaria,valorTotal:ut,impostos:je,valorLiquido:ht,mes:ne.toString().padStart(2,"0"),ano:Pe}});c(Qe);for(const Fe of Qe)if(!r.find(je=>{var ht;return je.tipo==="despesa"&&je.categoria==="Folha de Pagamento"&&je.funcionarioId===Fe.funcionarioId&&((ht=je.descricao)==null?void 0:ht.includes(`${Fe.mes}/${Fe.ano}`))}))try{await Ie.entities.financeiro.create({tipo:"despesa",categoria:"Folha de Pagamento",descricao:`Folha ${Fe.mes}/${Fe.ano} - ${Fe.nomeFuncionario} (${Fe.diasTrabalhados} dias)`,valor:Fe.valorTotal,data:new Date().toISOString(),status:"pendente",funcionarioId:Fe.funcionarioId,observacoes:"Gerado automaticamente baseado no diário de obra",impostos:{inss:Fe.impostos.inss,irrf:Fe.impostos.irrf,pis:0,cofins:0,iss:0,icms:0,ipi:0,csll:0,irpj:0},criadoEm:new Date().toISOString()})}catch(je){console.error("Erro ao criar movimentação de folha:",je)}X.success("Folha de pagamento gerada com sucesso")}catch(ne){console.error("Erro ao gerar folha de pagamento:",ne),X.error("Erro ao gerar folha de pagamento")}},ae=()=>{const ne=new Date,Pe=r.filter(qe=>(qe==null?void 0:qe.tipo)==="receita"&&(qe==null?void 0:qe.status)==="recebido").reduce((qe,lt)=>qe+ra(lt==null?void 0:lt.valor),0),at=r.filter(qe=>(qe==null?void 0:qe.tipo)==="despesa"&&(qe==null?void 0:qe.status)==="pago").reduce((qe,lt)=>qe+ra(lt==null?void 0:lt.valor),0),k=r.filter(qe=>(qe==null?void 0:qe.tipo)==="provisao_receita"&&(qe==null?void 0:qe.status)==="pendente").reduce((qe,lt)=>qe+ra(lt==null?void 0:lt.valor),0),Qe=r.filter(qe=>(qe==null?void 0:qe.tipo)==="provisao_despesa"&&(qe==null?void 0:qe.status)==="pendente").reduce((qe,lt)=>qe+ra(lt==null?void 0:lt.valor),0),Fe=r.filter(qe=>(qe==null?void 0:qe.isAdministrativo)===!0&&(qe==null?void 0:qe.tipo)==="despesa").reduce((qe,lt)=>qe+ra(lt==null?void 0:lt.valor),0),ut=r.filter(qe=>{if(!(qe!=null&&qe.dataVencimento)||(qe==null?void 0:qe.status)!=="pendente")return!1;const lt=new Date(qe.dataVencimento),de=Math.ceil((lt.getTime()-ne.getTime())/(1e3*60*60*24));return de<=7&&de>=0}).length,je=r.filter(qe=>!(qe!=null&&qe.dataVencimento)||(qe==null?void 0:qe.status)!=="pendente"?!1:new Date(qe.dataVencimento)<ne).length,ht=Pe-at-Fe;Be({receitas:Pe,despesas:at,saldo:Pe-at,provisaoReceitas:k,provisaoDespesas:Qe,saldoProjetado:Pe+k-(at+Qe),contasVencer:ut,contasAtrasadas:je,custosAdministrativos:Fe,lucroLiquido:ht})},xe=ne=>{try{const Pe=new Date,at=new Date(Pe.getFullYear(),Pe.getMonth(),1),k=new Date(Pe.getFullYear(),Pe.getMonth()+1,0);let Qe={},Fe="",ut="";switch(ne){case"fluxo_caixa":Fe="Fluxo de Caixa",ut="Entradas e saídas do período";const ht=r.filter(He=>["receita","provisao_receita"].includes(He.tipo)&&new Date(He.data)>=at&&new Date(He.data)<=k),qe=r.filter(He=>["despesa","provisao_despesa"].includes(He.tipo)&&new Date(He.data)>=at&&new Date(He.data)<=k);Qe={entradas:ht,saidas:qe,resumo:Ne,graficoData:[{label:"Receitas",value:ht.reduce((He,ze)=>He+ra(ze.valor),0),color:"#10b981"},{label:"Despesas",value:qe.reduce((He,ze)=>He+ra(ze.valor),0),color:"#ef4444"}]};break;case"dre":Fe="DRE - Demonstrativo de Resultado",ut="Receitas, custos e resultado do período";const lt=r.filter(He=>He.tipo==="receita"&&He.status==="recebido"&&new Date(He.data)>=at&&new Date(He.data)<=k),de=r.filter(He=>He.tipo==="despesa"&&!He.isAdministrativo&&new Date(He.data)>=at&&new Date(He.data)<=k),nt=r.filter(He=>He.tipo==="despesa"&&He.isAdministrativo&&new Date(He.data)>=at&&new Date(He.data)<=k),Nt=lt.reduce((He,ze)=>He+ra(ze.valor),0),A=de.reduce((He,ze)=>He+ra(ze.valor),0),ue=nt.reduce((He,ze)=>He+ra(ze.valor),0),ke=r.filter(He=>He.categoria==="Impostos").reduce((He,ze)=>He+ra(ze.valor),0);Qe={receitaBruta:Nt,custosOperacionais:A,custosAdministrativos:ue,impostos:ke,detalhes:{receitasBrutas:lt,custosOperacionais:de,custosAdministrativosData:nt},graficoData:[{label:"Receita Bruta",value:Nt,color:"#10b981"},{label:"Custos Operacionais",value:A,color:"#f59e0b"},{label:"Custos Administrativos",value:ue,color:"#ef4444"},{label:"Impostos",value:ke,color:"#8b5cf6"}]};break;case"rateio":Fe="Relatório de Rateio",ut="Distribuição de custos administrativos por obra";const Ve=r.filter(He=>He.isAdministrativo&&He.rateioObras),St=Ve.reduce((He,ze)=>He+ra(ze.valor),0),ot={};Ve.forEach(He=>{He.rateioObras&&He.rateioObras.forEach(ze=>{ot[ze.nomeObra]=(ot[ze.nomeObra]||0)+ze.valor})}),Qe={custosAdministrativos:Ve,obras:ce.filter(He=>He.status==="em_andamento"),totalRateado:St,graficoData:Object.entries(ot).map(([He,ze],vt)=>({label:He,value:ze,color:`hsl(${vt*60}, 70%, 50%)`}))};break;case"impostos":Fe="Relatório de Impostos",ut="Impostos e retenções do período";const yt=r.filter(He=>He.impostos&&new Date(He.data)>=at&&new Date(He.data)<=k),Dt=yt.reduce((He,ze)=>{const vt=ze.impostos||{};return He+Object.values(vt).reduce((xt,qt)=>xt+ra(qt),0)},0),V={};yt.forEach(He=>{He.impostos&&Object.entries(He.impostos).forEach(([ze,vt])=>{V[ze.toUpperCase()]=(V[ze.toUpperCase()]||0)+ra(vt)})}),Qe={movimentacoes:yt,configuracao:n,totalImpostos:Dt,graficoData:Object.entries(V).map(([He,ze],vt)=>({label:He,value:ze,color:`hsl(${vt*45}, 70%, 50%)`}))};break;case"folha":Fe="Folha de Pagamento",ut="Folha de pagamento baseada no diário de obra",Qe={funcionarios:i,totalBruto:i.reduce((He,ze)=>He+ze.valorTotal,0),totalLiquido:i.reduce((He,ze)=>He+ze.valorLiquido,0),totalImpostos:i.reduce((He,ze)=>He+ze.impostos.inss+ze.impostos.irrf+ze.impostos.fgts,0),graficoData:i.map((He,ze)=>({label:He.nomeFuncionario,value:He.valorLiquido,color:`hsl(${ze*40}, 70%, 50%)`}))};break;default:Fe="Relatório Padrão",ut="Relatório básico",Qe={movimentacoes:r.slice(0,10),graficoData:[]}}const je={id:`${ne}_${Date.now()}`,nome:Fe,descricao:ut,dados:Qe,tipo:ne,periodo:{inicio:at.toISOString(),fim:k.toISOString()},geradoEm:new Date().toISOString()};p(ht=>[je,...ht]),we(je),se(!0),X.success(`Relatório ${Fe} gerado com sucesso`)}catch(Pe){console.error("Erro ao gerar relatório:",Pe),X.error("Erro ao gerar relatório")}},be=async ne=>{ne.preventDefault();try{const Pe=B.valor,at={pis:Pe*(n.impostos.pis/100),cofins:Pe*(n.impostos.cofins/100),irrf:Pe*(n.impostos.irrf/100),inss:Pe*(n.impostos.inss/100),iss:Pe*(n.impostos.iss/100),icms:Pe*(n.impostos.icms/100),ipi:Pe*(n.impostos.ipi/100),csll:Pe*(n.impostos.csll/100),irpj:Pe*(n.impostos.irpj/100)},k={inss:Pe*(n.retencoes.inss/100),irrf:Pe*(n.retencoes.irrf/100),iss:Pe*(n.retencoes.iss/100),pis:Pe*(n.retencoes.pis/100),cofins:Pe*(n.retencoes.cofins/100),csll:Pe*(n.retencoes.csll/100)},Qe={...B,valor:Number(B.valor),impostos:at,retencoes:k,criadoEm:(L==null?void 0:L.criadoEm)||new Date().toISOString(),atualizadoEm:new Date().toISOString()};L?(await Ie.entities.financeiro.update(L._id,Qe),X.success("Movimentação atualizada com sucesso")):(await Ie.entities.financeiro.create(Qe),X.success("Movimentação criada com sucesso")),await Xe(),rt()}catch(Pe){console.error("Erro ao salvar movimentação:",Pe),X.error("Erro ao salvar movimentação")}},Te=async ne=>{if(confirm("Tem certeza que deseja excluir este item?"))try{await Ie.entities.financeiro.delete(ne),X.success("Item excluído com sucesso"),await Xe()}catch(Pe){console.error("Erro ao excluir item:",Pe),X.error("Erro ao excluir item")}},Ae=async(ne,Pe)=>{try{const at=r.find(k=>k._id===ne);if(!at)return;await Ie.entities.financeiro.update(ne,{...at,status:Pe,atualizadoEm:new Date().toISOString()}),await Xe(),X.success("Status atualizado com sucesso")}catch(at){console.error("Erro ao atualizar status:",at),X.error("Erro ao atualizar status")}},tt=(ne,Pe)=>{var at,k;$(ne),le(Pe),oe(Pe?{tipo:Pe.tipo,categoria:Pe.categoria,descricao:Pe.descricao,valor:ra(Pe.valor),data:((at=Pe.data)==null?void 0:at.split("T")[0])||"",dataVencimento:((k=Pe.dataVencimento)==null?void 0:k.split("T")[0])||"",status:Pe.status,formaPagamento:Pe.formaPagamento||"",observacoes:Pe.observacoes||"",isAdministrativo:Pe.isAdministrativo||!1,impostos:Pe.impostos||{pis:0,cofins:0,irrf:0,inss:0,iss:0,icms:0,ipi:0,csll:0,irpj:0},retencoes:Pe.retencoes||{inss:0,irrf:0,iss:0,pis:0,cofins:0,csll:0}}:{tipo:"receita",categoria:"",descricao:"",valor:0,data:new Date().toISOString().split("T")[0],dataVencimento:"",status:"pendente",formaPagamento:"",observacoes:"",isAdministrativo:!1,impostos:{pis:0,cofins:0,irrf:0,inss:0,iss:0,icms:0,ipi:0,csll:0,irpj:0},retencoes:{inss:0,irrf:0,iss:0,pis:0,cofins:0,csll:0}}),_(!0)},rt=()=>{_(!1),le(null)},gt=()=>{X.success("Funcionalidade de exportação PDF será implementada")},st=ne=>{switch(ne){case"pago":case"recebido":return"text-green-600 bg-green-100";case"pendente":return"text-yellow-600 bg-yellow-100";case"atrasado":return"text-red-600 bg-red-100";case"cancelado":return"text-gray-600 bg-gray-100";default:return"text-gray-600 bg-gray-100"}},Tt=r.filter(ne=>!(b.tipo&&ne.tipo!==b.tipo||b.categoria&&ne.categoria!==b.categoria||b.status&&ne.status!==b.status||b.dataInicio&&ne.data<b.dataInicio||b.dataFim&&ne.data>b.dataFim||b.isAdministrativo&&String(ne.isAdministrativo)!==b.isAdministrativo));return h?t.jsx("div",{className:"flex items-center justify-center h-64",children:t.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Financeiro"}),t.jsx("p",{className:"text-gray-600",children:"Gestão financeira completa com integração automática"})]}),t.jsxs("div",{className:"flex space-x-2",children:[t.jsxs("button",{onClick:()=>y(!0),className:"bg-gray-600 text-white px-4 py-2 rounded-lg hover:bg-gray-700 flex items-center space-x-2",children:[t.jsx(Dm,{className:"h-4 w-4"}),t.jsx("span",{children:"Configurações"})]}),t.jsxs("button",{onClick:()=>{console.log("🔧 CLIQUE NO BOTÃO RATEIO!"),te()},className:"bg-purple-600 text-white px-4 py-2 rounded-lg hover:bg-purple-700 flex items-center space-x-2",children:[t.jsx(Y4,{className:"h-4 w-4"}),t.jsx("span",{children:"Rateio"})]}),t.jsxs("button",{onClick:()=>Y(!0),className:"bg-orange-600 text-white px-4 py-2 rounded-lg hover:bg-orange-700 flex items-center space-x-2",children:[t.jsx(ro,{className:"h-4 w-4"}),t.jsx("span",{children:"Impostos"})]}),t.jsxs("button",{onClick:()=>fe(!0),className:"bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700 flex items-center space-x-2",children:[t.jsx(qr,{className:"h-4 w-4"}),t.jsx("span",{children:"Folha"})]}),t.jsxs("button",{onClick:()=>tt("movimentacao"),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 flex items-center space-x-2",children:[t.jsx(wa,{className:"h-4 w-4"}),t.jsx("span",{children:"Nova Movimentação"})]})]})]}),(Ne.contasVencer>0||Ne.contasAtrasadas>0)&&t.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 p-4",children:t.jsxs("div",{className:"flex",children:[t.jsx(fo,{className:"h-5 w-5 text-yellow-400 mr-2"}),t.jsx("div",{children:t.jsxs("p",{className:"text-sm text-yellow-700",children:[Ne.contasAtrasadas>0&&t.jsxs("span",{className:"font-medium text-red-600",children:[Ne.contasAtrasadas," conta(s) atrasada(s)"]}),Ne.contasAtrasadas>0&&Ne.contasVencer>0&&" • ",Ne.contasVencer>0&&t.jsxs("span",{className:"font-medium",children:[Ne.contasVencer," conta(s) vencendo em 7 dias"]})]})})]})}),t.jsx("div",{className:"border-b border-gray-200",children:t.jsx("nav",{className:"-mb-px flex space-x-8",children:[{id:"dashboard",label:"Dashboard",icon:X4},{id:"movimentacoes",label:"Movimentações",icon:fn},{id:"relatorios",label:"Relatórios",icon:xl},{id:"impostos",label:"Impostos & Retenções",icon:ro},{id:"folha",label:"Folha de Pagamento",icon:qr},{id:"rateio",label:"Rateio Administrativo",icon:Qi}].map(ne=>t.jsxs("button",{onClick:()=>a(ne.id),className:`${e===ne.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"} whitespace-nowrap py-2 px-1 border-b-2 font-medium text-sm flex items-center space-x-2`,children:[t.jsx(ne.icon,{className:"h-4 w-4"}),t.jsx("span",{children:ne.label})]},ne.id))})}),e==="dashboard"&&t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[t.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx(Jc,{className:"h-8 w-8 text-green-600"}),t.jsxs("div",{className:"ml-4",children:[t.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Receitas"}),t.jsx("p",{className:"text-2xl font-bold text-gray-900",children:Vt(Ne.receitas)})]})]})}),t.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx(e3,{className:"h-8 w-8 text-red-600"}),t.jsxs("div",{className:"ml-4",children:[t.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Despesas"}),t.jsx("p",{className:"text-2xl font-bold text-gray-900",children:Vt(Ne.despesas)})]})]})}),t.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx(k0,{className:"h-8 w-8 text-blue-600"}),t.jsxs("div",{className:"ml-4",children:[t.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Saldo Atual"}),t.jsx("p",{className:`text-2xl font-bold ${Ne.saldo>=0?"text-green-600":"text-red-600"}`,children:Vt(Ne.saldo)})]})]})}),t.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx(Qi,{className:"h-8 w-8 text-purple-600"}),t.jsxs("div",{className:"ml-4",children:[t.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Lucro Líquido"}),t.jsx("p",{className:`text-2xl font-bold ${Ne.lucroLiquido>=0?"text-green-600":"text-red-600"}`,children:Vt(Ne.lucroLiquido)})]})]})})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[t.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[t.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Custos Administrativos"}),t.jsx("div",{className:"text-3xl font-bold text-orange-600",children:Vt(Ne.custosAdministrativos)}),t.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Custos rateados por obra"})]}),t.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[t.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Provisões de Receitas"}),t.jsx("div",{className:"text-3xl font-bold text-green-600",children:Vt(Ne.provisaoReceitas)}),t.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Valores a receber previstos"})]}),t.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[t.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Provisões de Despesas"}),t.jsx("div",{className:"text-3xl font-bold text-red-600",children:Vt(Ne.provisaoDespesas)}),t.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Valores a pagar previstos"})]})]}),t.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[t.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Relatórios Rápidos"}),t.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4",children:[{tipo:"fluxo_caixa",label:"Fluxo de Caixa",icon:Jc,color:"bg-blue-600"},{tipo:"dre",label:"DRE",icon:xl,color:"bg-green-600"},{tipo:"rateio",label:"Rateio",icon:Qi,color:"bg-purple-600"},{tipo:"impostos",label:"Impostos",icon:ro,color:"bg-orange-600"},{tipo:"folha",label:"Folha",icon:qr,color:"bg-indigo-600"},{tipo:"balancete",label:"Balancete",icon:mf,color:"bg-gray-600"}].map(ne=>t.jsxs("button",{onClick:()=>xe(ne.tipo),className:`${ne.color} text-white p-4 rounded-lg hover:opacity-90 flex flex-col items-center space-y-2`,children:[t.jsx(ne.icon,{className:"h-6 w-6"}),t.jsx("span",{className:"text-sm font-medium",children:ne.label})]},ne.tipo))})]})]}),e==="movimentacoes"&&t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[t.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Filtros"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-6 gap-4",children:[t.jsxs("select",{value:b.tipo,onChange:ne=>g({...b,tipo:ne.target.value}),className:"border border-gray-300 rounded-md px-3 py-2",children:[t.jsx("option",{value:"",children:"Todos os tipos"}),t.jsx("option",{value:"receita",children:"Receita"}),t.jsx("option",{value:"despesa",children:"Despesa"}),t.jsx("option",{value:"provisao_receita",children:"Provisão Receita"}),t.jsx("option",{value:"provisao_despesa",children:"Provisão Despesa"})]}),t.jsxs("select",{value:b.status,onChange:ne=>g({...b,status:ne.target.value}),className:"border border-gray-300 rounded-md px-3 py-2",children:[t.jsx("option",{value:"",children:"Todos os status"}),t.jsx("option",{value:"pendente",children:"Pendente"}),t.jsx("option",{value:"pago",children:"Pago"}),t.jsx("option",{value:"recebido",children:"Recebido"}),t.jsx("option",{value:"atrasado",children:"Atrasado"}),t.jsx("option",{value:"cancelado",children:"Cancelado"})]}),t.jsxs("select",{value:b.isAdministrativo,onChange:ne=>g({...b,isAdministrativo:ne.target.value}),className:"border border-gray-300 rounded-md px-3 py-2",children:[t.jsx("option",{value:"",children:"Todos"}),t.jsx("option",{value:"true",children:"Administrativo"}),t.jsx("option",{value:"false",children:"Operacional"})]}),t.jsx("input",{type:"date",value:b.dataInicio,onChange:ne=>g({...b,dataInicio:ne.target.value}),className:"border border-gray-300 rounded-md px-3 py-2",placeholder:"Data início"}),t.jsx("input",{type:"date",value:b.dataFim,onChange:ne=>g({...b,dataFim:ne.target.value}),className:"border border-gray-300 rounded-md px-3 py-2",placeholder:"Data fim"}),t.jsx("button",{onClick:()=>g({tipo:"",categoria:"",status:"",dataInicio:"",dataFim:"",obra:"",isAdministrativo:""}),className:"bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600",children:"Limpar"})]})]}),t.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[t.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 flex justify-between items-center",children:[t.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Movimentações Financeiras"}),t.jsxs("div",{className:"flex space-x-2",children:[t.jsxs("button",{onClick:()=>Xe(),className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 flex items-center space-x-2",children:[t.jsx(vl,{className:"h-4 w-4"}),t.jsx("span",{children:"Atualizar"})]}),t.jsxs("button",{onClick:gt,className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 flex items-center space-x-2",children:[t.jsx(bo,{className:"h-4 w-4"}),t.jsx("span",{children:"Exportar"})]})]})]}),t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[t.jsx("thead",{className:"bg-gray-50",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Data"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tipo"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Categoria"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Descrição"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Valor"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Administrativo"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Ações"})]})}),t.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:Tt.map(ne=>t.jsxs("tr",{className:"hover:bg-gray-50",children:[t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:pc(ne.data)}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${ne.tipo.includes("receita")?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:ne.tipo.replace("_"," ").toUpperCase()})}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:ne.categoria}),t.jsx("td",{className:"px-6 py-4 text-sm text-gray-900 max-w-xs truncate",children:ne.descricao}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:Vt(ne.valor)}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.jsxs("select",{value:ne.status,onChange:Pe=>Ae(ne._id,Pe.target.value),className:`text-xs rounded-full px-2 py-1 border-0 ${st(ne.status)}`,children:[t.jsx("option",{value:"pendente",children:"Pendente"}),t.jsx("option",{value:"pago",children:"Pago"}),t.jsx("option",{value:"recebido",children:"Recebido"}),t.jsx("option",{value:"atrasado",children:"Atrasado"}),t.jsx("option",{value:"cancelado",children:"Cancelado"})]})}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:ne.isAdministrativo?t.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs bg-purple-100 text-purple-800",children:[t.jsx(Qi,{className:"h-3 w-3 mr-1"}),"Admin"]}):t.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs bg-gray-100 text-gray-800",children:"Operacional"})}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:t.jsxs("div",{className:"flex space-x-2",children:[t.jsx("button",{onClick:()=>tt("movimentacao",ne),className:"text-blue-600 hover:text-blue-900",title:"Editar",children:t.jsx(gs,{className:"h-4 w-4"})}),t.jsx("button",{onClick:()=>Te(ne._id),className:"text-red-600 hover:text-red-900",title:"Excluir",children:t.jsx(Ms,{className:"h-4 w-4"})})]})})]},ne._id))})]})})]})]}),e==="relatorios"&&t.jsx("div",{className:"space-y-6",children:t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:d.map(ne=>t.jsxs("div",{className:"bg-white rounded-lg shadow p-6 hover:shadow-md transition-shadow cursor-pointer",children:[t.jsxs("div",{className:"flex items-center mb-4",children:[t.jsx(qa,{className:"h-8 w-8 text-blue-600"}),t.jsx("h3",{className:"ml-3 text-lg font-medium text-gray-900",children:ne.nome})]}),t.jsx("p",{className:"text-gray-600 text-sm mb-4",children:ne.descricao}),t.jsxs("p",{className:"text-xs text-gray-500 mb-4",children:["Período: ",pc(ne.periodo.inicio)," - ",pc(ne.periodo.fim)]}),t.jsxs("p",{className:"text-xs text-gray-500 mb-4",children:["Gerado em: ",A6(ne.geradoEm)]}),ne.dados.graficoData&&ne.dados.graficoData.length>0&&t.jsx("div",{className:"mb-4",children:t.jsx(cp,{data:ne.dados.graficoData.slice(0,3),type:"pie",title:"Preview"})}),t.jsx("button",{onClick:()=>{we(ne),se(!0)},className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 text-sm",children:"Visualizar Completo"})]},ne.id))})}),e==="impostos"&&t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[t.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Impostos Configurados"}),t.jsx("div",{className:"space-y-3",children:Object.entries(n.impostos).map(([ne,Pe])=>t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("span",{className:"text-sm font-medium text-gray-700 uppercase",children:ne}),t.jsxs("span",{className:"text-sm text-gray-900",children:[Pe,"%"]})]},ne))})]}),t.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[t.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Retenções Configuradas"}),t.jsx("div",{className:"space-y-3",children:Object.entries(n.retencoes).map(([ne,Pe])=>t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("span",{className:"text-sm font-medium text-gray-700 uppercase",children:ne}),t.jsxs("span",{className:"text-sm text-gray-900",children:[Pe,"%"]})]},ne))})]})]}),t.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[t.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Resumo de Impostos - Mês Atual"}),t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[t.jsx("thead",{className:"bg-gray-50",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Imposto"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Alíquota"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Base de Cálculo"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Valor"})]})}),t.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:Object.entries(n.impostos).map(([ne,Pe])=>{const at=r.filter(Qe=>Qe.tipo==="receita"&&Qe.status==="recebido").reduce((Qe,Fe)=>Qe+ra(Fe.valor),0),k=at*(Pe/100);return t.jsxs("tr",{children:[t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 uppercase",children:ne}),t.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[Pe,"%"]}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:Vt(at)}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:Vt(k)})]},ne)})})]})})]})]}),e==="folha"&&t.jsx("div",{className:"space-y-6",children:t.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[t.jsxs("div",{className:"flex justify-between items-center mb-4",children:[t.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Folha de Pagamento - Baseada no Diário de Obra"}),t.jsxs("button",{onClick:Ct,className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 flex items-center space-x-2",children:[t.jsx(vl,{className:"h-4 w-4"}),t.jsx("span",{children:"Atualizar Folha"})]})]}),i.length===0?t.jsxs("div",{className:"text-center py-8",children:[t.jsx(qr,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),t.jsx("p",{className:"text-gray-500",children:"Nenhum funcionário encontrado no diário de obra do mês atual"})]}):t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[t.jsx("thead",{className:"bg-gray-50",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Funcionário"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Função"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Dias Trabalhados"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Valor Diária"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Valor Bruto"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Descontos"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Valor Líquido"})]})}),t.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:i.map(ne=>t.jsxs("tr",{children:[t.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[t.jsx("div",{className:"text-sm font-medium text-gray-900",children:ne.nomeFuncionario}),t.jsxs("div",{className:"text-sm text-gray-500",children:[ne.mes,"/",ne.ano]})]}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:ne.funcao}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:ne.diasTrabalhados}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:Vt(ne.valorDiaria)}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:Vt(ne.valorTotal)}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:t.jsxs("div",{className:"text-xs",children:[t.jsxs("div",{children:["INSS: ",Vt(ne.impostos.inss)]}),t.jsxs("div",{children:["IRRF: ",Vt(ne.impostos.irrf)]}),t.jsxs("div",{children:["FGTS: ",Vt(ne.impostos.fgts)]})]})}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:Vt(ne.valorLiquido)})]},ne.funcionarioId))})]})})]})}),e==="rateio"&&t.jsx("div",{className:"space-y-6",children:t.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[t.jsxs("div",{className:"flex justify-between items-center mb-4",children:[t.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Rateio de Custos Administrativos"}),t.jsxs("button",{onClick:()=>{console.log("🔧 CLIQUE NO BOTÃO RATEIO (TAB)!"),te()},className:"bg-purple-600 text-white px-4 py-2 rounded-lg hover:bg-purple-700 flex items-center space-x-2",children:[t.jsx(ro,{className:"h-4 w-4"}),t.jsx("span",{children:"Recalcular Rateio"})]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6",children:[t.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[t.jsx("h4",{className:"font-medium text-blue-900",children:"Total Custos Administrativos"}),t.jsx("p",{className:"text-2xl font-bold text-blue-600",children:Vt(Ne.custosAdministrativos)})]}),t.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[t.jsx("h4",{className:"font-medium text-green-900",children:"Faturamento Total"}),t.jsx("p",{className:"text-2xl font-bold text-green-600",children:Vt(Ne.receitas)})]}),t.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg",children:[t.jsx("h4",{className:"font-medium text-purple-900",children:"Obras Ativas"}),t.jsx("p",{className:"text-2xl font-bold text-purple-600",children:ce.filter(ne=>ne.status==="em_andamento").length})]})]}),t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[t.jsx("thead",{className:"bg-gray-50",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Obra"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Faturamento"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"% do Total"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Rateio Administrativo"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Lucro após Rateio"})]})}),t.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:ce.filter(ne=>ne.status==="em_andamento").map(ne=>{const Pe=r.filter(Fe=>Fe.planejamentoId===ne._id&&Fe.categoria==="Medição de Obra"&&Fe.status==="recebido").reduce((Fe,ut)=>Fe+ra(ut.valor),0),at=Ne.receitas>0?Pe/Ne.receitas*100:0,k=Ne.custosAdministrativos*at/100,Qe=Pe-k;return t.jsxs("tr",{children:[t.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[t.jsx("div",{className:"text-sm font-medium text-gray-900",children:ne.nomeProjeto}),t.jsx("div",{className:"text-sm text-gray-500",children:ne.cliente})]}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:Vt(Pe)}),t.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[at.toFixed(2),"%"]}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:Vt(k)}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:t.jsx("span",{className:Qe>=0?"text-green-600":"text-red-600",children:Vt(Qe)})})]},ne._id)})})]})})]})}),w&&t.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:t.jsx("div",{className:"relative top-20 mx-auto p-5 border w-full max-w-2xl shadow-lg rounded-md bg-white",children:t.jsxs("div",{className:"mt-3",children:[t.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:L?"Editar Movimentação":"Nova Movimentação"}),t.jsxs("form",{onSubmit:be,className:"space-y-4",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Tipo"}),t.jsxs("select",{value:B.tipo,onChange:ne=>oe({...B,tipo:ne.target.value}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2",required:!0,children:[t.jsx("option",{value:"receita",children:"Receita"}),t.jsx("option",{value:"despesa",children:"Despesa"}),t.jsx("option",{value:"provisao_receita",children:"Provisão Receita"}),t.jsx("option",{value:"provisao_despesa",children:"Provisão Despesa"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Categoria"}),t.jsx("input",{type:"text",value:B.categoria,onChange:ne=>oe({...B,categoria:ne.target.value}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2",required:!0})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Descrição"}),t.jsx("input",{type:"text",value:B.descricao,onChange:ne=>oe({...B,descricao:ne.target.value}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2",required:!0})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Valor"}),t.jsx("input",{type:"number",step:"0.01",value:B.valor,onChange:ne=>oe({...B,valor:Number(ne.target.value)}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2",required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Data"}),t.jsx("input",{type:"date",value:B.data,onChange:ne=>oe({...B,data:ne.target.value}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2",required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Data Vencimento"}),t.jsx("input",{type:"date",value:B.dataVencimento,onChange:ne=>oe({...B,dataVencimento:ne.target.value}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2"})]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Status"}),t.jsxs("select",{value:B.status,onChange:ne=>oe({...B,status:ne.target.value}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2",children:[t.jsx("option",{value:"pendente",children:"Pendente"}),t.jsx("option",{value:"pago",children:"Pago"}),t.jsx("option",{value:"recebido",children:"Recebido"}),t.jsx("option",{value:"atrasado",children:"Atrasado"}),t.jsx("option",{value:"cancelado",children:"Cancelado"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Forma de Pagamento"}),t.jsx("input",{type:"text",value:B.formaPagamento,onChange:ne=>oe({...B,formaPagamento:ne.target.value}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2",placeholder:"Ex: Dinheiro, PIX, Boleto"})]})]}),t.jsxs("div",{className:"flex items-center",children:[t.jsx("input",{type:"checkbox",checked:B.isAdministrativo,onChange:ne=>oe({...B,isAdministrativo:ne.target.checked}),className:"mr-2"}),t.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Marcar como custo administrativo (será rateado entre as obras)"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Observações"}),t.jsx("textarea",{value:B.observacoes,onChange:ne=>oe({...B,observacoes:ne.target.value}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2",rows:3})]}),t.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[t.jsx("button",{type:"button",onClick:rt,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 border border-gray-300 rounded-md hover:bg-gray-200",children:"Cancelar"}),t.jsx("button",{type:"submit",className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-md hover:bg-blue-700",children:L?"Atualizar":"Criar"})]})]})]})})}),O&&t.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:t.jsx("div",{className:"relative top-20 mx-auto p-5 border w-full max-w-4xl shadow-lg rounded-md bg-white",children:t.jsxs("div",{className:"mt-3",children:[t.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Configurações Financeiras"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t.jsxs("div",{children:[t.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:"Categorias Administrativas"}),t.jsxs("div",{className:"space-y-2",children:[n.categoriasAdministrativas.map((ne,Pe)=>t.jsxs("div",{className:"flex items-center justify-between bg-gray-50 p-2 rounded",children:[t.jsx("span",{children:ne}),t.jsx("button",{onClick:()=>{const at=n.categoriasAdministrativas.filter((k,Qe)=>Qe!==Pe);o({...n,categoriasAdministrativas:at})},className:"text-red-600 hover:text-red-800",children:t.jsx($t,{className:"h-4 w-4"})})]},Pe)),t.jsxs("div",{className:"flex space-x-2",children:[t.jsx("input",{type:"text",placeholder:"Nova categoria",className:"flex-1 border border-gray-300 rounded-md px-3 py-2",onKeyPress:ne=>{if(ne.key==="Enter"){const Pe=ne.target;Pe.value.trim()&&(o({...n,categoriasAdministrativas:[...n.categoriasAdministrativas,Pe.value.trim()]}),Pe.value="")}}}),t.jsx("button",{onClick:ne=>{const Pe=ne.currentTarget.previousElementSibling;Pe.value.trim()&&(o({...n,categoriasAdministrativas:[...n.categoriasAdministrativas,Pe.value.trim()]}),Pe.value="")},className:"bg-blue-600 text-white px-3 py-2 rounded-md hover:bg-blue-700",children:t.jsx(wa,{className:"h-4 w-4"})})]})]})]}),t.jsxs("div",{children:[t.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:"Alíquotas de Impostos (%)"}),t.jsx("div",{className:"space-y-3",children:Object.entries(n.impostos).map(([ne,Pe])=>t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("label",{className:"text-sm font-medium text-gray-700 uppercase",children:ne}),t.jsx("input",{type:"number",step:"0.01",value:Pe,onChange:at=>o({...n,impostos:{...n.impostos,[ne]:Number(at.target.value)}}),className:"w-20 border border-gray-300 rounded-md px-2 py-1 text-sm"})]},ne))})]})]}),t.jsxs("div",{className:"flex justify-end space-x-3 pt-6",children:[t.jsx("button",{onClick:()=>y(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 border border-gray-300 rounded-md hover:bg-gray-200",children:"Cancelar"}),t.jsx("button",{onClick:Me,className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-md hover:bg-blue-700",children:"Salvar Configurações"})]})]})})}),W&&R&&t.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:t.jsx("div",{className:"relative top-10 mx-auto p-5 border w-full max-w-6xl shadow-lg rounded-md bg-white",children:t.jsxs("div",{className:"mt-3",children:[t.jsxs("div",{className:"flex justify-between items-center mb-4",children:[t.jsx("h3",{className:"text-lg font-medium text-gray-900",children:R.nome}),t.jsx("button",{onClick:()=>se(!1),className:"text-gray-400 hover:text-gray-600",children:t.jsx($t,{className:"h-5 w-5"})})]}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[t.jsx("div",{children:R.dados.graficoData&&R.dados.graficoData.length>0&&t.jsxs(t.Fragment,{children:[t.jsx(cp,{data:R.dados.graficoData,type:"pie",title:`${R.nome} - Distribuição`}),t.jsx("div",{className:"mt-4",children:t.jsx(cp,{data:R.dados.graficoData,type:"bar",title:`${R.nome} - Comparativo`})})]})}),t.jsxs("div",{className:"max-h-96 overflow-y-auto",children:[R.tipo==="fluxo_caixa"&&t.jsx("div",{className:"space-y-4",children:t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("h4",{className:"font-medium text-green-900 mb-2",children:"Entradas"}),t.jsx("div",{className:"space-y-1",children:R.dados.entradas.map((ne,Pe)=>t.jsxs("div",{className:"flex justify-between text-sm",children:[t.jsx("span",{children:ne.descricao}),t.jsx("span",{className:"text-green-600",children:Vt(ne.valor)})]},Pe))})]}),t.jsxs("div",{children:[t.jsx("h4",{className:"font-medium text-red-900 mb-2",children:"Saídas"}),t.jsx("div",{className:"space-y-1",children:R.dados.saidas.map((ne,Pe)=>t.jsxs("div",{className:"flex justify-between text-sm",children:[t.jsx("span",{children:ne.descricao}),t.jsx("span",{className:"text-red-600",children:Vt(ne.valor)})]},Pe))})]})]})}),R.tipo==="dre"&&t.jsx("div",{className:"space-y-4",children:t.jsxs("div",{className:"bg-gray-50 p-4 rounded",children:[t.jsx("h4",{className:"font-medium mb-2",children:"Demonstrativo de Resultado"}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{children:"Receita Bruta"}),t.jsx("span",{className:"text-green-600",children:Vt(R.dados.receitaBruta)})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{children:"(-) Custos Operacionais"}),t.jsx("span",{className:"text-red-600",children:Vt(R.dados.custosOperacionais)})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{children:"(-) Custos Administrativos"}),t.jsx("span",{className:"text-red-600",children:Vt(R.dados.custosAdministrativos)})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{children:"(-) Impostos"}),t.jsx("span",{className:"text-red-600",children:Vt(R.dados.impostos)})]}),t.jsx("hr",{}),t.jsxs("div",{className:"flex justify-between font-bold",children:[t.jsx("span",{children:"Resultado Líquido"}),t.jsx("span",{className:R.dados.receitaBruta-R.dados.custosOperacionais-R.dados.custosAdministrativos-R.dados.impostos>=0?"text-green-600":"text-red-600",children:Vt(R.dados.receitaBruta-R.dados.custosOperacionais-R.dados.custosAdministrativos-R.dados.impostos)})]})]})]})}),R.tipo==="folha"&&t.jsxs("div",{className:"space-y-4",children:[t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[t.jsx("thead",{className:"bg-gray-50",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Funcionário"}),t.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Dias"}),t.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Bruto"}),t.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Líquido"})]})}),t.jsx("tbody",{className:"divide-y divide-gray-200",children:R.dados.funcionarios.map((ne,Pe)=>t.jsxs("tr",{children:[t.jsx("td",{className:"px-4 py-2 text-sm",children:ne.nomeFuncionario}),t.jsx("td",{className:"px-4 py-2 text-sm",children:ne.diasTrabalhados}),t.jsx("td",{className:"px-4 py-2 text-sm",children:Vt(ne.valorTotal)}),t.jsx("td",{className:"px-4 py-2 text-sm",children:Vt(ne.valorLiquido)})]},Pe))})]})}),t.jsx("div",{className:"bg-gray-50 p-4 rounded",children:t.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center",children:[t.jsxs("div",{children:[t.jsx("div",{className:"text-lg font-bold",children:Vt(R.dados.totalBruto)}),t.jsx("div",{className:"text-sm text-gray-600",children:"Total Bruto"})]}),t.jsxs("div",{children:[t.jsx("div",{className:"text-lg font-bold",children:Vt(R.dados.totalImpostos)}),t.jsx("div",{className:"text-sm text-gray-600",children:"Total Impostos"})]}),t.jsxs("div",{children:[t.jsx("div",{className:"text-lg font-bold",children:Vt(R.dados.totalLiquido)}),t.jsx("div",{className:"text-sm text-gray-600",children:"Total Líquido"})]})]})})]}),R.tipo==="rateio"&&t.jsx("div",{className:"space-y-4",children:t.jsxs("div",{className:"bg-gray-50 p-4 rounded",children:[t.jsx("h4",{className:"font-medium mb-2",children:"Resumo do Rateio"}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{children:"Total Rateado:"}),t.jsx("span",{className:"font-bold",children:Vt(R.dados.totalRateado)})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{children:"Obras Ativas:"}),t.jsx("span",{children:R.dados.obras.length})]})]})]})}),R.tipo==="impostos"&&t.jsx("div",{className:"space-y-4",children:t.jsxs("div",{className:"bg-gray-50 p-4 rounded",children:[t.jsx("h4",{className:"font-medium mb-2",children:"Resumo de Impostos"}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{children:"Total de Impostos:"}),t.jsx("span",{className:"font-bold text-red-600",children:Vt(R.dados.totalImpostos)})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{children:"Movimentações com Impostos:"}),t.jsx("span",{children:R.dados.movimentacoes.length})]})]})]})})]})]})]})})}),v&&t.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:t.jsx("div",{className:"relative top-20 mx-auto p-5 border w-full max-w-4xl shadow-lg rounded-md bg-white",children:t.jsxs("div",{className:"mt-3",children:[t.jsxs("div",{className:"flex justify-between items-center mb-4",children:[t.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"✅ Rateio Calculado com Sucesso!"}),t.jsx("button",{onClick:()=>C(!1),className:"text-gray-400 hover:text-gray-600",children:t.jsx($t,{className:"h-5 w-5"})})]}),t.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 mb-6",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx(ps,{className:"h-5 w-5 text-green-600 mr-2"}),t.jsx("p",{className:"text-green-800",children:"O rateio de custos administrativos foi calculado e aplicado às movimentações financeiras."})]})}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[t.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg text-center",children:[t.jsx("div",{className:"text-2xl font-bold text-blue-600",children:Vt(Ne.custosAdministrativos)}),t.jsx("div",{className:"text-sm text-blue-800",children:"Custos Administrativos"})]}),t.jsxs("div",{className:"bg-green-50 p-4 rounded-lg text-center",children:[t.jsx("div",{className:"text-2xl font-bold text-green-600",children:Vt(Ne.receitas)}),t.jsx("div",{className:"text-sm text-green-800",children:"Faturamento Base"})]}),t.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg text-center",children:[t.jsx("div",{className:"text-2xl font-bold text-purple-600",children:ce.filter(ne=>ne.status==="em_andamento").length}),t.jsx("div",{className:"text-sm text-purple-800",children:"Obras Rateadas"})]})]}),t.jsx("div",{className:"text-center",children:t.jsx("button",{onClick:()=>C(!1),className:"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700",children:"Fechar"})})]})})})]})}const As={administrador:{label:"Administrador",descricao:"Acesso completo a todos os módulos",modulos:["Dashboard","CRM","Insumos","Orçamento","Contratos","Funcionários","Planejamento","Compras","Diário","Financeiro","Usuários"],cor:"bg-red-100 text-red-800"},juridico:{label:"Jurídico",descricao:"Acesso apenas ao módulo de contratos",modulos:["Contratos"],cor:"bg-purple-100 text-purple-800"},financeiro:{label:"Financeiro",descricao:"Acesso apenas ao módulo financeiro",modulos:["Financeiro","Dashboard"],cor:"bg-green-100 text-green-800"},compras:{label:"Compras",descricao:"Acesso aos módulos de compras e insumos",modulos:["Compras","Insumos"],cor:"bg-blue-100 text-blue-800"},engenheiro:{label:"Engenheiro",descricao:"Acesso ao planejamento e diário de obras",modulos:["Planejamento","Diário"],cor:"bg-orange-100 text-orange-800"},gestor:{label:"Gestor",descricao:"Acesso a orçamento, planejamento e diário de obras",modulos:["Orçamento","Planejamento","Diário","Dashboard","Financeiro"],cor:"bg-indigo-100 text-indigo-800"}},vu=e=>{if(!e)return"-";try{return new Date(e).toLocaleString("pt-BR")}catch{return"-"}};function E6(){const[e,a]=I.useState([]),[r,s]=I.useState(!0),[n,o]=I.useState(""),[i,c]=I.useState(""),[d,p]=I.useState(""),[h,x]=I.useState(!1),[b,g]=I.useState(!1),[w,_]=I.useState(!1),[O,y]=I.useState(null),[v,C]=I.useState(null),[W,se]=I.useState({email:"",senha:"",confirmarSenha:"",nome:"",nivelAcesso:"gestor",ativo:!0}),[J,Y]=I.useState({novaSenha:"",confirmarNovaSenha:""}),[K,fe]=I.useState(!1),[me,$]=I.useState(!1);I.useEffect(()=>{L()},[]);const L=async()=>{try{s(!0);const{list:N}=await Ie.entities.usuarios.list().catch(()=>({list:[]}));a(N||[])}catch(N){console.error("Erro ao buscar usuários:",N),X.error("Erro ao carregar usuários")}finally{s(!1)}},le=async()=>{if(!W.email||!W.senha||!W.nome){X.error("Preencha todos os campos obrigatórios");return}if(W.senha!==W.confirmarSenha){X.error("As senhas não coincidem");return}if(W.senha.length<6){X.error("A senha deve ter pelo menos 6 caracteres");return}if(e.some(U=>U.email.toLowerCase()===W.email.toLowerCase())){X.error("Este email já está cadastrado");return}try{const U={email:W.email.toLowerCase(),senha:W.senha,nome:W.nome,nivelAcesso:W.nivelAcesso,ativo:W.ativo,criadoEm:new Date().toISOString(),atualizadoEm:new Date().toISOString(),tentativasLogin:0,bloqueado:!1};await Ie.entities.usuarios.create(U),X.success("Usuário criado com sucesso"),await L(),ie()}catch(U){console.error("Erro ao criar usuário:",U),X.error("Erro ao criar usuário")}},R=async()=>{if(!O||!W.email||!W.nome){X.error("Preencha todos os campos obrigatórios");return}if(e.some(U=>U.email.toLowerCase()===W.email.toLowerCase()&&U._id!==O._id)){X.error("Este email já está cadastrado");return}try{const U={...O,email:W.email.toLowerCase(),nome:W.nome,nivelAcesso:W.nivelAcesso,ativo:W.ativo,atualizadoEm:new Date().toISOString()};await Ie.entities.usuarios.update(O._id,U),X.success("Usuário atualizado com sucesso"),await L(),ie()}catch(U){console.error("Erro ao atualizar usuário:",U),X.error("Erro ao atualizar usuário")}},we=async()=>{if(v){if(!J.novaSenha||!J.confirmarNovaSenha){X.error("Preencha todos os campos de senha");return}if(J.novaSenha!==J.confirmarNovaSenha){X.error("As senhas não coincidem");return}if(J.novaSenha.length<6){X.error("A senha deve ter pelo menos 6 caracteres");return}try{const N={...v,senha:J.novaSenha,atualizadoEm:new Date().toISOString()};await Ie.entities.usuarios.update(v._id,N),X.success("Senha alterada com sucesso"),await L(),_(!1),Y({novaSenha:"",confirmarNovaSenha:""})}catch(N){console.error("Erro ao alterar senha:",N),X.error("Erro ao alterar senha")}}},ce=async N=>{try{const U={...N,ativo:!N.ativo,atualizadoEm:new Date().toISOString()};await Ie.entities.usuarios.update(N._id,U),X.success(`Usuário ${N.ativo?"desativado":"ativado"} com sucesso`),await L()}catch(U){console.error("Erro ao alterar status:",U),X.error("Erro ao alterar status do usuário")}},Ce=async N=>{try{const U={...N,bloqueado:!1,tentativasLogin:0,atualizadoEm:new Date().toISOString()};await Ie.entities.usuarios.update(N._id,U),X.success("Usuário desbloqueado com sucesso"),await L()}catch(U){console.error("Erro ao desbloquear usuário:",U),X.error("Erro ao desbloquear usuário")}},Z=async N=>{if(window.confirm(`Tem certeza que deseja excluir o usuário "${N.nome}"?`))try{await Ie.entities.usuarios.delete(N._id),X.success("Usuário excluído com sucesso"),await L()}catch(U){console.error("Erro ao excluir usuário:",U),X.error("Erro ao excluir usuário")}},he=N=>{N?(y(N),se({email:N.email,senha:"",confirmarSenha:"",nome:N.nome,nivelAcesso:N.nivelAcesso,ativo:N.ativo})):(y(null),se({email:"",senha:"",confirmarSenha:"",nome:"",nivelAcesso:"gestor",ativo:!0})),x(!0)},ie=()=>{x(!1),y(null),se({email:"",senha:"",confirmarSenha:"",nome:"",nivelAcesso:"gestor",ativo:!0})},Ue=N=>{C(N),Y({novaSenha:"",confirmarNovaSenha:""}),_(!0)},S=N=>{C(N),g(!0)},G=e.filter(N=>{const U=n===""||N.nome.toLowerCase().includes(n.toLowerCase())||N.email.toLowerCase().includes(n.toLowerCase()),T=i===""||N.nivelAcesso===i,B=d===""||d==="ativo"&&N.ativo||d==="inativo"&&!N.ativo||d==="bloqueado"&&N.bloqueado;return U&&T&&B}),q={total:e.length,ativos:e.filter(N=>N.ativo).length,inativos:e.filter(N=>!N.ativo).length,bloqueados:e.filter(N=>N.bloqueado).length,administradores:e.filter(N=>N.nivelAcesso==="administrador").length};return r?t.jsx("div",{className:"flex items-center justify-center h-64",children:t.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Gestão de Usuários"}),t.jsx("p",{className:"text-gray-600",children:"Cadastre usuários e gerencie permissões por nível de acesso"})]}),t.jsxs("button",{onClick:()=>he(),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 flex items-center space-x-2",children:[t.jsx(pf,{className:"h-4 w-4"}),t.jsx("span",{children:"Novo Usuário"})]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-6",children:[t.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx(qr,{className:"h-8 w-8 text-blue-600"}),t.jsxs("div",{className:"ml-4",children:[t.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total de Usuários"}),t.jsx("p",{className:"text-2xl font-bold text-gray-900",children:q.total})]})]})}),t.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx(Qc,{className:"h-8 w-8 text-green-600"}),t.jsxs("div",{className:"ml-4",children:[t.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Usuários Ativos"}),t.jsx("p",{className:"text-2xl font-bold text-gray-900",children:q.ativos})]})]})}),t.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx(Tg,{className:"h-8 w-8 text-red-600"}),t.jsxs("div",{className:"ml-4",children:[t.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Usuários Inativos"}),t.jsx("p",{className:"text-2xl font-bold text-gray-900",children:q.inativos})]})]})}),t.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx(Z2,{className:"h-8 w-8 text-orange-600"}),t.jsxs("div",{className:"ml-4",children:[t.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Usuários Bloqueados"}),t.jsx("p",{className:"text-2xl font-bold text-gray-900",children:q.bloqueados})]})]})}),t.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx(Jh,{className:"h-8 w-8 text-purple-600"}),t.jsxs("div",{className:"ml-4",children:[t.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Administradores"}),t.jsx("p",{className:"text-2xl font-bold text-gray-900",children:q.administradores})]})]})})]}),t.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Buscar"}),t.jsxs("div",{className:"relative",children:[t.jsx(Sl,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),t.jsx("input",{type:"text",placeholder:"Buscar por nome ou email...",value:n,onChange:N=>o(N.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nível de Acesso"}),t.jsxs("select",{value:i,onChange:N=>c(N.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500",children:[t.jsx("option",{value:"",children:"Todos os níveis"}),Object.entries(As).map(([N,U])=>t.jsx("option",{value:N,children:U.label},N))]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),t.jsxs("select",{value:d,onChange:N=>p(N.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500",children:[t.jsx("option",{value:"",children:"Todos os status"}),t.jsx("option",{value:"ativo",children:"Ativos"}),t.jsx("option",{value:"inativo",children:"Inativos"}),t.jsx("option",{value:"bloqueado",children:"Bloqueados"})]})]})]})}),t.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[t.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:t.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Usuários Cadastrados"})}),t.jsxs("div",{className:"overflow-x-auto",children:[t.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[t.jsx("thead",{className:"bg-gray-50",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Usuário"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Nível de Acesso"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Último Login"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Criado em"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Ações"})]})}),t.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:G.map(N=>t.jsxs("tr",{className:"hover:bg-gray-50",children:[t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"flex-shrink-0 h-10 w-10",children:t.jsx("div",{className:"h-10 w-10 rounded-full bg-blue-100 flex items-center justify-center",children:t.jsx(qr,{className:"h-5 w-5 text-blue-600"})})}),t.jsxs("div",{className:"ml-4",children:[t.jsx("div",{className:"text-sm font-medium text-gray-900",children:N.nome}),t.jsx("div",{className:"text-sm text-gray-500",children:N.email})]})]})}),t.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[t.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${As[N.nivelAcesso].cor}`,children:As[N.nivelAcesso].label}),t.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[As[N.nivelAcesso].modulos.length," módulos"]})]}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.jsxs("div",{className:"flex flex-col space-y-1",children:[t.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${N.ativo?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:N.ativo?"Ativo":"Inativo"}),N.bloqueado&&t.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-orange-100 text-orange-800",children:"Bloqueado"})]})}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:vu(N.ultimoLogin||"")}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:vu(N.criadoEm)}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:t.jsxs("div",{className:"flex space-x-2",children:[t.jsx("button",{onClick:()=>S(N),className:"text-blue-600 hover:text-blue-900",title:"Ver Permissões",children:t.jsx(Jh,{className:"h-4 w-4"})}),t.jsx("button",{onClick:()=>he(N),className:"text-green-600 hover:text-green-900",title:"Editar",children:t.jsx(gs,{className:"h-4 w-4"})}),t.jsx("button",{onClick:()=>Ue(N),className:"text-purple-600 hover:text-purple-900",title:"Alterar Senha",children:t.jsx(Ig,{className:"h-4 w-4"})}),t.jsx("button",{onClick:()=>ce(N),className:`${N.ativo?"text-red-600 hover:text-red-900":"text-green-600 hover:text-green-900"}`,title:N.ativo?"Desativar":"Ativar",children:N.ativo?t.jsx(Tg,{className:"h-4 w-4"}):t.jsx(Qc,{className:"h-4 w-4"})}),N.bloqueado&&t.jsx("button",{onClick:()=>Ce(N),className:"text-orange-600 hover:text-orange-900",title:"Desbloquear",children:t.jsx(t3,{className:"h-4 w-4"})}),t.jsx("button",{onClick:()=>Z(N),className:"text-red-600 hover:text-red-900",title:"Excluir",children:t.jsx(Ms,{className:"h-4 w-4"})})]})})]},N._id))})]}),G.length===0&&t.jsx("div",{className:"text-center py-8 text-gray-500",children:"Nenhum usuário encontrado"})]})]}),h&&t.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:t.jsx("div",{className:"relative top-20 mx-auto p-5 border w-full max-w-2xl shadow-lg rounded-md bg-white",children:t.jsxs("div",{className:"mt-3",children:[t.jsxs("div",{className:"flex justify-between items-center mb-4",children:[t.jsx("h3",{className:"text-lg font-medium text-gray-900",children:O?"Editar Usuário":"Novo Usuário"}),t.jsx("button",{onClick:ie,className:"text-gray-400 hover:text-gray-600",children:t.jsx($t,{className:"h-5 w-5"})})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Nome Completo"}),t.jsx("input",{type:"text",value:W.nome,onChange:N=>se({...W,nome:N.target.value}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500",required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Email"}),t.jsx("input",{type:"email",value:W.email,onChange:N=>se({...W,email:N.target.value}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500",required:!0})]})]}),!O&&t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Senha"}),t.jsxs("div",{className:"relative",children:[t.jsx("input",{type:K?"text":"password",value:W.senha,onChange:N=>se({...W,senha:N.target.value}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 pr-10 focus:ring-blue-500 focus:border-blue-500",required:!0,minLength:6}),t.jsx("button",{type:"button",onClick:()=>fe(!K),className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:K?t.jsx(Eg,{className:"h-4 w-4"}):t.jsx(yo,{className:"h-4 w-4"})})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Confirmar Senha"}),t.jsxs("div",{className:"relative",children:[t.jsx("input",{type:me?"text":"password",value:W.confirmarSenha,onChange:N=>se({...W,confirmarSenha:N.target.value}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 pr-10 focus:ring-blue-500 focus:border-blue-500",required:!0,minLength:6}),t.jsx("button",{type:"button",onClick:()=>$(!me),className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:me?t.jsx(Eg,{className:"h-4 w-4"}):t.jsx(yo,{className:"h-4 w-4"})})]})]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Nível de Acesso"}),t.jsx("select",{value:W.nivelAcesso,onChange:N=>se({...W,nivelAcesso:N.target.value}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500",children:Object.entries(As).map(([N,U])=>t.jsx("option",{value:N,children:U.label},N))})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Status"}),t.jsxs("select",{value:W.ativo?"ativo":"inativo",onChange:N=>se({...W,ativo:N.target.value==="ativo"}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500",children:[t.jsx("option",{value:"ativo",children:"Ativo"}),t.jsx("option",{value:"inativo",children:"Inativo"})]})]})]}),t.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[t.jsx("h4",{className:"font-medium text-blue-900 mb-2",children:As[W.nivelAcesso].label}),t.jsx("p",{className:"text-sm text-blue-800 mb-2",children:As[W.nivelAcesso].descricao}),t.jsxs("div",{className:"text-sm text-blue-700",children:[t.jsx("strong",{children:"Módulos permitidos:"})," ",As[W.nivelAcesso].modulos.join(", ")]})]}),t.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[t.jsx("button",{onClick:ie,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 border border-gray-300 rounded-md hover:bg-gray-200",children:"Cancelar"}),t.jsxs("button",{onClick:O?R:le,className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-md hover:bg-blue-700 flex items-center space-x-2",children:[t.jsx(bl,{className:"h-4 w-4"}),t.jsxs("span",{children:[O?"Atualizar":"Criar"," Usuário"]})]})]})]})]})})}),b&&v&&t.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:t.jsx("div",{className:"relative top-20 mx-auto p-5 border w-full max-w-2xl shadow-lg rounded-md bg-white",children:t.jsxs("div",{className:"mt-3",children:[t.jsxs("div",{className:"flex justify-between items-center mb-4",children:[t.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Permissões do Usuário"}),t.jsx("button",{onClick:()=>g(!1),className:"text-gray-400 hover:text-gray-600",children:t.jsx($t,{className:"h-5 w-5"})})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsx("div",{className:"bg-gray-50 p-4 rounded-lg",children:t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx(qr,{className:"h-8 w-8 text-blue-600"}),t.jsxs("div",{children:[t.jsx("h4",{className:"text-lg font-medium text-gray-900",children:v.nome}),t.jsx("p",{className:"text-sm text-gray-600",children:v.email})]})]})}),t.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[t.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[t.jsx(Jh,{className:"h-6 w-6 text-blue-600"}),t.jsx("h4",{className:"text-lg font-medium text-blue-900",children:As[v.nivelAcesso].label})]}),t.jsx("p",{className:"text-sm text-blue-800 mb-3",children:As[v.nivelAcesso].descricao}),t.jsxs("div",{children:[t.jsx("h5",{className:"font-medium text-blue-900 mb-2",children:"Módulos Permitidos:"}),t.jsx("div",{className:"grid grid-cols-2 gap-2",children:As[v.nivelAcesso].modulos.map(N=>t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(ps,{className:"h-4 w-4 text-green-600"}),t.jsx("span",{className:"text-sm text-blue-800",children:N})]},N))})]})]}),t.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[t.jsx("h5",{className:"font-medium text-gray-900 mb-2",children:"Informações do Sistema:"}),t.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[t.jsxs("div",{children:[t.jsx("span",{className:"text-gray-600",children:"Status:"}),t.jsx("span",{className:`ml-2 px-2 py-1 rounded-full text-xs font-medium ${v.ativo?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:v.ativo?"Ativo":"Inativo"})]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-gray-600",children:"Último Login:"}),t.jsx("span",{className:"ml-2 text-gray-900",children:vu(v.ultimoLogin||"")})]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-gray-600",children:"Criado em:"}),t.jsx("span",{className:"ml-2 text-gray-900",children:vu(v.criadoEm)})]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-gray-600",children:"Tentativas Login:"}),t.jsx("span",{className:"ml-2 text-gray-900",children:v.tentativasLogin||0})]})]})]})]})]})})}),w&&v&&t.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:t.jsx("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:t.jsxs("div",{className:"mt-3",children:[t.jsxs("div",{className:"flex justify-between items-center mb-4",children:[t.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Alterar Senha"}),t.jsx("button",{onClick:()=>_(!1),className:"text-gray-400 hover:text-gray-600",children:t.jsx($t,{className:"h-5 w-5"})})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"bg-gray-50 p-3 rounded",children:[t.jsxs("p",{className:"text-sm text-gray-600",children:[t.jsx("strong",{children:"Usuário:"})," ",v.nome]}),t.jsxs("p",{className:"text-sm text-gray-600",children:[t.jsx("strong",{children:"Email:"})," ",v.email]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Nova Senha"}),t.jsx("input",{type:"password",value:J.novaSenha,onChange:N=>Y({...J,novaSenha:N.target.value}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500",minLength:6,required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Confirmar Nova Senha"}),t.jsx("input",{type:"password",value:J.confirmarNovaSenha,onChange:N=>Y({...J,confirmarNovaSenha:N.target.value}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500",minLength:6,required:!0})]}),t.jsx("div",{className:"bg-yellow-50 p-3 rounded",children:t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(df,{className:"h-4 w-4 text-yellow-600"}),t.jsx("p",{className:"text-sm text-yellow-800",children:"A senha deve ter pelo menos 6 caracteres"})]})}),t.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[t.jsx("button",{onClick:()=>_(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 border border-gray-300 rounded-md hover:bg-gray-200",children:"Cancelar"}),t.jsxs("button",{onClick:we,className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-md hover:bg-blue-700 flex items-center space-x-2",children:[t.jsx(Ig,{className:"h-4 w-4"}),t.jsx("span",{children:"Alterar Senha"})]})]})]})]})})})]})}function P6(){return t.jsx(D4,{children:t.jsx(DN,{children:t.jsxs("div",{className:"min-h-screen bg-gray-50",children:[t.jsx(jw,{position:"top-right",toastOptions:{duration:5e3,style:{background:"#363636",color:"#fff"},success:{style:{background:"#10b981"}},error:{style:{background:"#ef4444"}}}}),t.jsxs(PN,{children:[t.jsx(er,{path:"/login",element:t.jsx(s3,{})}),t.jsxs(er,{path:"/",element:t.jsx(r3,{}),children:[t.jsx(er,{index:!0,element:t.jsx(xg,{to:"/dashboard",replace:!0})}),t.jsx(er,{path:"dashboard",element:t.jsx(n3,{})}),t.jsx(er,{path:"crm",element:t.jsx(o3,{})}),t.jsx(er,{path:"insumos",element:t.jsx(i3,{})}),t.jsx(er,{path:"proposta",element:t.jsx(l3,{})}),t.jsx(er,{path:"contratos",element:t.jsx(d3,{})}),t.jsx(er,{path:"contratos-v2",element:t.jsx(p3,{})}),t.jsx(er,{path:"funcionarios",element:t.jsx(x3,{})}),t.jsx(er,{path:"planejamento",element:t.jsx(v6,{})}),t.jsx(er,{path:"planejamento-semanal",element:t.jsx(j6,{})}),t.jsx(er,{path:"compras",element:t.jsx(w6,{})}),t.jsx(er,{path:"diario",element:t.jsx(C6,{})}),t.jsx(er,{path:"financeiro",element:t.jsx(_6,{})}),t.jsx(er,{path:"usuarios",element:t.jsx(E6,{})})]}),t.jsx(er,{path:"*",element:t.jsx(xg,{to:"/login",replace:!0})})]})]})})})}b2(document.getElementById("root")).render(t.jsx(I.StrictMode,{children:t.jsx(P6,{})}));export{ia as _,L6 as c,cy as g};
